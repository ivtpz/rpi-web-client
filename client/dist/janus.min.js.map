{"version":3,"sources":["node_modules/browser-pack/_prelude.js","janus.min.js","node_modules/bluebird/js/browser/bluebird.js","node_modules/eventemitter2/lib/eventemitter2.js","node_modules/process/browser.js","node_modules/webrtc-adapter/src/js/adapter_core.js","node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","node_modules/webrtc-adapter/src/js/edge/edge_sdp.js","node_modules/webrtc-adapter/src/js/edge/edge_shim.js","node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","node_modules/webrtc-adapter/src/js/safari/safari_shim.js","node_modules/webrtc-adapter/src/js/utils.js","node_modules/webrtcsupport/index-browser.js","node_modules/websocket/lib/browser.js","node_modules/websocket/lib/version.js","node_modules/websocket/package.json","src/client.js","src/connection.js","src/error.js","src/event-emitter.js","src/helpers.js","src/index.js","src/janus-message.js","src/janus-plugin-message.js","src/plugin.js","src/session.js","src/timer.js","src/traits/t-transaction-gateway.js","src/transaction.js","src/transactions.js","src/webrtc/media-audio-plugin.js","src/webrtc/media-devices-shim.js","src/webrtc/media-entity-plugin.js","src/webrtc/media-plugin.js","src/webrtc/media-stream-plugin.js","src/webrtc/plugin/audiobridge-plugin.js","src/webrtc/plugin/audioroom-plugin.js","src/webrtc/plugin/rtpbroadcast-plugin.js","src/webrtc/plugin/streaming-plugin.js","src/websocket-connection.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Janus","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","process","Promise","_dereq_","any","promises","ret","SomePromiseArray","promise","setHowMany","setUnwrap","init","_SomePromiseArray","prototype","2","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","fn","receiver","arg","push","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","util","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","stderr","write","stack","exit","throwLater","arguments","setTimeout","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue","shift","_reset","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","target","bindingRejected","bind","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","undefined","_setOnCancel","obj","_boundTo","_isBound","value","resolve","4","noConflict","bluebird","old","./promise","5","cr","Object","create","callerCache","getterCache","ensureMethod","methodName","message","classString","toString","TypeError","caller","pop","apply","namedGetter","indexedGetter","index","Math","max","getGetter","canEvaluate","isIdentifier","args","slice","get","propertyName","getter","isIndex","maybeGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancel","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","isArray","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","catchFilter","instances","cb","boundTo","predicateLoop","item","matchesPredicate","isObject","keys","getKeys","j","key","./es5","8","Context","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","generatePromiseLifecycleEventObject","name","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","error","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","join","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","split","cleanStack","line","nodeFramePattern","test","lineMatches","match","parseLinePattern","firstUserLine","msg","deprecated","replacement","warn","shouldUseOwnTrace","config","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","charAt","stackFramesAsArray","replace","title","isSoft","console","formatStack","String","printWarning","log","fireRejectionEvent","localHandler","reason","localEventFired","formatNonError","str","ruselessToString","newStr","JSON","stringify","snip","maxChars","substr","longStackTracesIsSupported","captureStackTrace","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","result","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","env","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","domEvent","toLowerCase","detail","cancelable","Event","document","createEvent","initCustomEvent","fireGlobalEvent","emit","method","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","handler","inherits","nodes","stackToIndex","node","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","err","indexOf","hasStackAfterThrow","isTTY","color","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","reduce","all","each","mapSeries","12","subError","nameProperty","defaultMessage","SubError","constructor","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","Array","defineProperty","configurable","writable","enumerable","level","indent","lines","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","getPrototypeOf","propertyIsWritable","prop","descriptor","set","has","hasOwnProperty","proto","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","desc","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","14","PromiseMap","map","filter","options","15","PassThroughHandlerContext","type","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","then","lastly","tap","16","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","errors","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","last","spread","18","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","callback","totalResolved","_totalResolved","_resolve","booleans","len","19","_resolveFromSyncValue","attempt","20","isUntypedError","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","nodebackForPromise","multiArgs","wrapped","maybeWrapAsError","21","spreadAdapter","val","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","v","deferReject","fillTypes","p","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","catchInstances","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","x","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","version","toFastProperties","b","c","./any.js","./async","./bind","./call_get.js","./cancel","./catch_filter","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","toResolutionValue","resolveValueIfEmpty","asArray","_resolveEmptyArray","_iterate","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","defaultSuffix","noCopyProps","copyDescriptors","isClass","25","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","props","castValue","Map","extractEntry","size","forEach","entriesToMap","keyOffset","26","arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","moveItemsCount","27","race","raceLater","array","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","navigator","standalone","cordova","div","createElement","attributes","toggleScheduled","div2","o2","classList","toggle","observe","scheduleToggle","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","hasProp","34","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","delay","ms","afterTimeout","timeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","iterator","tryDispose","Disposer","data","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","defaultValue","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","prefix","isError","ignore","from","to","hasEnvVariables","globalObject","Child","Parent","T","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","Symbol","ArrayFrom","itResult","it","chrome","loadTimes","versions","Number","P","_process","_events","_conf","configure","conf","delimiter","maxListeners","defaultMaxListeners","wildcard","newListener","verboseMemoryLeak","listenerTree","logPossibleMemoryLeak","eventName","errorMsg","EventEmitter","searchListenerTree","handlers","tree","leaf","branch","xTree","xxTree","isolatedBranch","endReached","listeners","typeLength","currentType","nextType","_listeners","**","growListenerTree","listener","warned","EventEmitter2","setMaxListeners","once","many","ttl","off","_origin","on","al","_all","ns","emitAsync","onAny","addListener","recursivelyGarbageCollect","root","leafs","iLeaf","position","offAny","fns","removeListener","removeAllListeners","listenerCount","listenersAny","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","noop","browser","argv","binding","cwd","chdir","dir","umask","logging","browserDetails","extractVersion","disableLog","chromeShim","edgeShim","firefoxShim","safariShim","shimPeerConnection","browserShim","shimGetUserMedia","shimSourceObject","shimOnTrack","./chrome/chrome_shim","./edge/edge_shim","./firefox/firefox_shim","./safari/safari_shim","./utils","RTCPeerConnection","_ontrack","removeEventListener","_ontrackpoly","addEventListener","stream","te","track","streams","getTracks","HTMLMediaElement","_srcObject","URL","revokeObjectURL","createObjectURL","pcConfig","pcConstraints","iceTransportPolicy","iceTransports","pc","webkitRTCPeerConnection","origGetStats","getStats","selector","successCallback","errorCallback","fixChromeStats_","response","standardReport","reports","report","standardStats","id","timestamp","stat","successCallbackWrapper_","generateCertificate","nativeMethod","RTCIceCandidate","RTCSessionDescription","attachMediaStream","element","srcObject","reattachMediaStream","../utils.js","./getusermedia","constraintsToChrome_","mandatory","optional","cc","ideal","exact","min","oldname_","toUpperCase","oc","mix","advanced","getUserMedia_","constraints","onSuccess","onError","parse","audio","video","webkitGetUserMedia","getUserMedia","getUserMediaPromise_","mediaDevices","enumerateDevices","kinds","MediaStreamTrack","getSources","devices","device","label","kind","deviceId","groupId","origGetUserMedia","SDPUtils","generateIdentifier","random","localCName","splitLines","blob","trim","splitSections","parts","part","matchPrefix","parseCandidate","substring","candidate","foundation","component","protocol","priority","ip","port","relatedAddress","relatedPort","tcpType","writeCandidate","sdp","parseRtpMap","payloadType","clockRate","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","params","param","parseRtcpFb","parameter","writeRtcpFb","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","getDtlsParameters","mediaSection","sessionpart","fpLine","dtlsParameters","role","fingerprints","algorithm","writeDtlsParameters","setupType","fp","getIceParameters","iceParameters","usernameFragment","password","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","caps","parseRtpEncodingParameters","secondarySsrc","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","writeSessionBoilerplate","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","mid","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","RTCIceGatherer","_eventTarget","createDocumentFragment","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onnegotiationneeded","ondatachannel","localStreams","remoteStreams","getLocalStreams","getRemoteStreams","localDescription","remoteDescription","signalingState","iceConnectionState","iceGatheringState","iceOptions","gatherPolicy","iceServers","server","urls","url","transceivers","_localIceCandidatesBuffer","_emitBufferedCandidates","sections","end","sdpMLineIndex","complete","every","state","addStream","clone","_maybeFireNegotiationNeeded","removeStream","idx","_getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","lCodec","rCodec","lHeaderExtension","rHeaderExtension","_createIceAndDtlsTransports","iceTransport","RTCIceTransport","onlocalcandidate","evt","sdpMid","cand","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_transceive","send","recv","encodings","cname","recvEncodingParameters","receive","setLocalDescription","_pendingOffer","remoteIceParameters","start","remoteDtlsParameters","_updateSignalingState","hasCallback","setRemoteDescription","MediaStream","receiverList","direction","remoteSsrc","isComplete","cands","setRemoteCandidates","addTrack","transports","RTCRtpReceiver","getCapabilities","localtrack","RTCRtpSender","trackEvent","close","stop","newState","states","new","closed","connecting","checking","connected","failed","disconnected","createOffer","offerOptions","tracks","numAudioTracks","numVideoTracks","getAudioTracks","getVideoTracks","offerToReceiveAudio","offerToReceiveVideo","wantReceive","createAnswer","addIceCandidate","mLineIndex","addRemoteCandidate","results","res","../utils","./edge_sdp","mozSrcObject","newIceServers","newServer","username","credential","mozRTCPeerConnection","mozRTCSessionDescription","mozRTCIceCandidate","constraintsToFF37_","mozGetUserMedia","infos","orgEnumerateDevices","logDisabled_","utils","bool","uastring","expr","pos","detectBrowser","minVersion","userAgent","PC","IceCandidate","SessionDescription","webkitMediaStream","screenSharing","location","AudioContext","webkitAudioContext","videoEl","supportVp8","canPlayType","msGetUserMedia","browserVersion","support","supportRTCPeerConnection","supportGetUserMedia","supportDataChannel","createDataChannel","supportWebAudio","createMediaStreamSource","supportMediaStream","removeTrack","supportScreenSharing","PeerConnection","W3CWebSocket","protocols","native_instance","NativeWebSocket","_global","WebSocket","MozWebSocket","websocket_version","w3cwebsocket","./version","../package.json","_args","raw","scope","escapedName","rawSpec","spec","_from","_id","_inCache","_location","_nodeVersion","_npmOperationalInternal","host","tmp","_npmUser","email","_npmVersion","_phantomChildren","_requested","_requiredBy","_resolved","_shasum","_shrinkwrap","_spec","_where","author","bugs","verbose","contributors","dependencies","nan","typedarray-to-buffer","yaeti","devDependencies","buffer-equal","faucet","gulp","gulp-jshint","jshint","jshint-stylish","tape","directories","lib","dist","shasum","tarball","engines","gitHead","homepage","keywords","license","main","maintainers","optionalDependencies","readme","repository","scripts","install","Client","address","_address","_options","Connection","createConnection","connection","open","./connection","super_","_sessions","_websocketConnection","WebsocketConnection","_installWebsocketListeners","Helpers","TTransactionGateway","JanusError","Transaction","Session","JanusMessage","extend","processIncomeMessage","getId","getAddress","getOptions","isOpened","getSessionList","session","cleanup","createSession","sendSync","janus","hasSession","sessionId","getSession","isClosed","addSession","removeSession","token","apisecret","generateRandomId","processOutcomeMessage","_onCreate","incomeMessage","defaultProcessIncomeMessage","outcomeMessage","addTransaction","./error","./event-emitter","./helpers","./janus-message","./session","./traits/t-transaction-gateway","./transaction","./websocket-connection","janusMessage","janusError","getError","eventemitter2","destination","source","sources","ctor","superCtor","Plugin","MediaPlugin","AudiobridgePlugin","AudioroomPlugin","StreamingPlugin","RtpbroadcastPlugin","./client","./plugin","./webrtc/media-plugin","./webrtc/plugin/audiobridge-plugin","./webrtc/plugin/audioroom-plugin","./webrtc/plugin/rtpbroadcast-plugin","./webrtc/plugin/streaming-plugin","plainMessage","_plainMessage","getPlainMessage","JanusPluginMessage","plugin","_plugin","getPluginData","unshift","getResultText","getResponseAlias","_session","_name","_detach","_types","aClass","register","getName","detach","sendWithTransaction","_onDetached","transactionId","transaction","errorMessage","./janus-plugin-message","_connection","_plugins","_startKeepAlive","_destroy","Timer","_keepAliveTimer","reset","attachPlugin","destroy","hasPlugin","pluginId","getPlugin","getPluginList","addPlugin","removePlugin","_onAttach","_onDestroy","_onTimeout","_stopKeepAlive","_isNaturalNumber","isNaN","parseFloat","keepAlive","_keepAlivePeriod","./timer","_ms","_timeoutId","Transactions","getTransactions","_transactions","add","find","hasTransaction","executeTransaction","execute","../error","../transaction","../transactions","timeoutPeriod","timeoutRejection","_isExecuted","list","_find","remove","MediaAudioPlugin","MediaEntityPlugin","_join","body","request","setCurrentEntity","leave","resetCurrentEntity","_change","_connect","hasCurrentEntity","_list","jsep","offerStream","configureOptions","createPeerConnection","sendSDP","setRemoteSDP","_listParticipants","../helpers","../janus-plugin-message","./media-entity-plugin","MediaDevicesShim","webrtc","getSharedScreen","_getSharedScreenChrome","_getSharedScreenFirefox","chromever","maxver","googLeakyBucket","maxWidth","screen","width","maxHeight","height","maxFrameRate","chromeMediaSource","timeoutRejectId","messageListener","origin","sourceId","googTemporalLayeredScreencast","chromeMediaSourceId","postMessage","ffver","mozMediaSource","mediaSource","lastStreamTime","currentTime","inderval","setInterval","clearInterval","onended","webrtc-adapter","_currentEntityId","_create","_onHangup","./media-plugin","_pcListeners","_pc","webrtcsupport","DtlsSrtpKeyAgreement","_addPcEventListeners","getPeerConnection","hangup","_createSDP","party","janusType","_onTrickle","closePeerConnection","_stopLocalMedia","_removePcEventListener","_addPcEventListener","../plugin","./media-devices-shim","MediaStreamPlugin","_watch","watchOptions","answerOptions","_offerAnswer","_start","_stop","_pause","_switch","connect","NAME","roomId","room","change","listParticipants","../../helpers","../../plugin","../media-audio-plugin","37","38","watch","watchUDP","pause","switchSource","superuser","enabled","../media-stream-plugin","39","mountpointId","enable","disable","recording","40","webSocket","_webSocket","_onOpen","onclose","onopen","readyState","_installW3cListeners","_installNodeListeners","onmessage","parsedMessage","onMessage","_close","OPEN","CLOSED","CLOSING","terminate","_send","CONNECTING","websocket"],"mappings":"CAAA,SAAAA,GAAA,GAAA,gBAAAC,UAAA,mBAAAC,QAAAA,OAAAD,QAAAD,QAAA,IAAA,kBAAAG,SAAAA,OAAAC,IAAAD,UAAAH,OAAA,CAAA,GAAAK,EAAAA,GAAA,mBAAAC,QAAAA,OAAA,mBAAAC,QAAAA,OAAA,mBAAAC,MAAAA,KAAAC,KAAAJ,EAAAK,MAAAV,MAAA,WAAA,GAAAG,GAAAD,EAAAD,CAAA,OAAA,SAAAU,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAhB,GAAA,GAAAqB,OAAA,uBAAAL,EAAA,IAAA,MAAAhB,GAAAsB,KAAA,mBAAAtB,EAAA,GAAAuB,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,IAAA,GAAAmB,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAW,GAAA,SAAAP,EAAAjB,EAAAD,ICCA,SAAW0B,EAAQpB,IC2BnB,SAAAI,GAAA,GAAA,gBAAAV,IAAA,mBAAAC,GAAAA,EAAAD,QAAAU,QAAA,IAAA,kBAAAR,IAAAA,EAAAC,IAAAD,KAAAQ,OAAA,CAAA,GAAAX,EAAA,oBAAAM,QAAAN,EAAAM,OAAA,mBAAAC,GAAAP,EAAAO,EAAA,mBAAAC,QAAAR,EAAAQ,MAAAR,EAAA4B,QAAAjB,MAAA,WAAA,GAAAR,GAAAD,EAAAD,CAAA,OAAA,SAAAU,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAW,UAAAA,OAAA,KAAAZ,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAhB,GAAA,GAAAqB,OAAA,uBAAAL,EAAA,IAAA,MAAAhB,GAAAsB,KAAA,mBAAAtB,EAAA,GAAAuB,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,IAAA,GAAAmB,GAAA,kBAAAS,UAAAA,QAAAb,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAW,GAAA,SAAAG,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,GAEA,QAAAE,GAAAC,GACA,GAAAC,GAAA,GAAAC,GAAAF,GACAG,EAAAF,EAAAE,SAIA,OAHAF,GAAAG,WAAA,GACAH,EAAAI,YACAJ,EAAAK,OACAH,EAPA,GAAAD,GAAAL,EAAAU,iBAUAV,GAAAE,IAAA,SAAAC,GACA,MAAAD,GAAAC,IAGAH,EAAAW,UAAAT,IAAA,WACA,MAAAA,GAAArB,aAKA+B,GAAA,SAAAX,EAAA3B,EAAAD,GACA,YAOA,SAAAwC,KACAhC,KAAAiC,kBAAA,EACAjC,KAAAkC,aAAA,EACAlC,KAAAmC,WAAA,GAAAC,GAAA,IACApC,KAAAqC,aAAA,GAAAD,GAAA,IACApC,KAAAsC,oBAAA,EACAtC,KAAAuC,oBAAA,CACA,IAAAxC,GAAAC,IACAA,MAAAwC,YAAA,WACAzC,EAAA0C,gBAEAzC,KAAA0C,UAAAC,EAyDA,QAAAC,GAAAC,EAAAC,EAAAC,GACA/C,KAAAmC,WAAAa,KAAAH,EAAAC,EAAAC,GACA/C,KAAAiD,aAGA,QAAAC,GAAAL,EAAAC,EAAAC,GACA/C,KAAAqC,aAAAW,KAAAH,EAAAC,EAAAC,GACA/C,KAAAiD,aAGA,QAAAE,GAAA1B,GACAzB,KAAAqC,aAAAe,SAAA3B,GACAzB,KAAAiD,aAtFA,GAAAI,EACA,KAAA,KAAA,IAAAzC,OAAA,MAAAV,GAAAmD,EAAAnD,EACA,GAAAyC,GAAAvB,EAAA,cACAgB,EAAAhB,EAAA,WACAkC,EAAAlC,EAAA,SAgBAY,GAAAF,UAAAyB,aAAA,SAAAV,GACA,GAAAW,GAAAxD,KAAA0C,SAGA,OAFA1C,MAAA0C,UAAAG,EACA7C,KAAAiC,kBAAA,EACAuB,GAGAxB,EAAAF,UAAA2B,mBAAA,WACA,MAAAzD,MAAAiC,kBAGAD,EAAAF,UAAA4B,iBAAA,WACA1D,KAAAuC,oBAAA,GAGAP,EAAAF,UAAA6B,6BAAA,WACAL,EAAAM,cACA5D,KAAAuC,oBAAA,IAIAP,EAAAF,UAAA+B,gBAAA,WACA,MAAA7D,MAAAkC,aAAAlC,KAAAsC,oBAIAN,EAAAF,UAAAgC,WAAA,SAAA5D,EAAA6D,GACAA,GACA7C,EAAA8C,OAAAC,MAAA,UAAA/D,YAAAU,OAAAV,EAAAgE,MAAAhE,GACA,MACAgB,EAAAiD,KAAA,IAEAnE,KAAAoE,WAAAlE,IAIA8B,EAAAF,UAAAsC,WAAA,SAAAvB,EAAAE,GAKA,GAJA,IAAAsB,UAAArD,SACA+B,EAAAF,EACAA,EAAA,WAAA,KAAAE,KAEA,mBAAAuB,YACAA,WAAA,WACAzB,EAAAE,IACA,OACA,KACA/C,KAAA0C,UAAA,WACAG,EAAAE,KAEA,MAAA7C,GACA,KAAA,IAAAU,OAAA,oEAmBA0C,EAAAM,aAKA5B,EAAAF,UAAAyC,YAAA,SAAA1B,EAAAC,EAAAC,GACA/C,KAAAuC,mBACAK,EAAA7B,KAAAf,KAAA6C,EAAAC,EAAAC,GAEA/C,KAAA0C,UAAA,WACA4B,WAAA,WACAzB,EAAA9B,KAAA+B,EAAAC,IACA,QAKAf,EAAAF,UAAA0C,OAAA,SAAA3B,EAAAC,EAAAC,GACA/C,KAAAuC,mBACAW,EAAAnC,KAAAf,KAAA6C,EAAAC,EAAAC,GAEA/C,KAAA0C,UAAA,WACAG,EAAA9B,KAAA+B,EAAAC,MAKAf,EAAAF,UAAA2C,eAAA,SAAAhD,GACAzB,KAAAuC,mBACAY,EAAApC,KAAAf,KAAAyB,GAEAzB,KAAA0C,UAAA,WACAjB,EAAAiD,uBA/BA1C,EAAAF,UAAAyC,YAAA3B,EACAZ,EAAAF,UAAA0C,OAAAtB,EACAlB,EAAAF,UAAA2C,eAAAtB,GAmCAnB,EAAAF,UAAA6C,YAAA,SAAAC,GACA,KAAAA,EAAA5D,SAAA,GAAA,CACA,GAAA6B,GAAA+B,EAAAC,OACA,IAAA,kBAAAhC,GAAA,CAIA,GAAAC,GAAA8B,EAAAC,QACA9B,EAAA6B,EAAAC,OACAhC,GAAA9B,KAAA+B,EAAAC,OALAF,GAAA6B,oBASA1C,EAAAF,UAAAW,aAAA,WACAzC,KAAA2E,YAAA3E,KAAAqC,cACArC,KAAA8E,SACA9E,KAAAsC,oBAAA,EACAtC,KAAA2E,YAAA3E,KAAAmC,aAGAH,EAAAF,UAAAmB,WAAA,WACAjD,KAAAkC,cACAlC,KAAAkC,aAAA,EACAlC,KAAA0C,UAAA1C,KAAAwC,eAIAR,EAAAF,UAAAgD,OAAA,WACA9E,KAAAkC,aAAA,GAGAzC,EAAAD,QAAAwC,EACAvC,EAAAD,QAAA6D,eAAAA,IAEA0B,UAAA,GAAAC,aAAA,GAAAC,SAAA,KAAAC,GAAA,SAAA9D,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAgE,EAAAC,EAAAC,GACA,GAAAC,IAAA,EACAC,EAAA,SAAAC,EAAAtF,GACAF,KAAAyF,QAAAvF,IAGAwF,EAAA,SAAAxF,EAAAyF,GACAA,EAAAC,wBAAA,EACAD,EAAAE,eAAAC,MAAAP,EAAAA,EAAA,KAAAvF,KAAAE,IAGA6F,EAAA,SAAAC,EAAAL,GACA,KAAA,SAAA3F,KAAAiG,YACAjG,KAAAkG,iBAAAP,EAAAQ,SAIAC,EAAA,SAAAlG,EAAAyF,GACAA,EAAAC,wBAAA5F,KAAAyF,QAAAvF,GAGAiB,GAAAW,UAAAuE,KAAA,SAAAL,GACAV,IACAA,GAAA,EACAnE,EAAAW,UAAAwE,eAAAjB,EAAAkB,wBACApF,EAAAW,UAAA0E,YAAAnB,EAAAoB,qBAEA,IAAAC,GAAAtB,EAAAY,GACAzE,EAAA,GAAAJ,GAAAgE,EACA5D,GAAA+E,eAAAtG,KAAA,EACA,IAAAmG,GAAAnG,KAAA2G,SAEA,IADApF,EAAAqF,YAAAF,GACAA,YAAAvF,GAAA,CACA,GAAAwE,IACAC,wBAAA,EACAnE,QAAAF,EACA4E,OAAAA,EACAN,eAAAa,EAEAP,GAAAL,MAAAX,EAAAO,EAAAmB,OAAAtF,EAAAoE,GACAe,EAAAZ,MACAC,EAAAK,EAAAS,OAAAtF,EAAAoE,GACApE,EAAAuF,aAAAJ,OAEAnF,GAAA2E,iBAAAC,EAEA,OAAA5E,IAGAJ,EAAAW,UAAA8E,YAAA,SAAAG,GACAF,SAAAE,GACA/G,KAAAiG,UAAA,QAAAjG,KAAAiG,UACAjG,KAAAgH,SAAAD,GAEA/G,KAAAiG,UAAAjG,KAAAiG,oBAIA9E,EAAAW,UAAAmF,SAAA,WACA,MAAA,YAAA,QAAAjH,KAAAiG,YAGA9E,EAAAkF,KAAA,SAAAL,EAAAkB,GACA,MAAA/F,GAAAgG,QAAAD,GAAAb,KAAAL,UAIAoB,GAAA,SAAAhG,EAAA3B,EAAAD,GACA,YAGA,SAAA6H,KACA,IAAAlG,UAAAmG,IAAAnG,QAAAoG,GACA,MAAArH,IACA,MAAAoH,GALA,GAAAC,EACA,oBAAApG,WAAAoG,EAAApG,QAMA,IAAAmG,GAAAlG,EAAA,cACAkG,GAAAD,WAAAA,EACA5H,EAAAD,QAAA8H,IAEAE,YAAA,KAAAC,GAAA,SAAArG,EAAA3B,EAAAD,GACA,YACA,IAAAkI,GAAAC,OAAAC,MACA,IAAAF,EAAA,CACA,GAAAG,GAAAH,EAAA,MACAI,EAAAJ,EAAA,KACAG,GAAA,SAAAC,EAAA,SAAA,EAGArI,EAAAD,QAAA,SAAA2B,GA4DA,QAAA4G,GAAAhB,EAAAiB,GACA,GAAAnF,EAEA,IADA,MAAAkE,IAAAlE,EAAAkE,EAAAiB,IACA,kBAAAnF,GAAA,CACA,GAAAoF,GAAA,UAAA3E,EAAA4E,YAAAnB,GAAA,mBACAzD,EAAA6E,SAAAH,GAAA,GACA,MAAA,IAAA7G,GAAAiH,UAAAH,GAEA,MAAApF,GAGA,QAAAwF,GAAAtB,GACA,GAAAiB,GAAAhI,KAAAsI,MACAzF,EAAAkF,EAAAhB,EAAAiB,EACA,OAAAnF,GAAA0F,MAAAxB,EAAA/G,MAiBA,QAAAwI,GAAAzB,GACA,MAAAA,GAAA/G,MAEA,QAAAyI,GAAA1B,GACA,GAAA2B,IAAA1I,IAEA,OADA0I,GAAA,IAAAA,EAAAC,KAAAC,IAAA,EAAAF,EAAA3B,EAAA/F,SACA+F,EAAA2B,GAhGA,GAKAG,GALAvF,EAAAlC,EAAA,UACA0H,EAAAxF,EAAAwF,WACAxF,GAAAyF,YAyEA5H,GAAAW,UAAAf,KAAA,SAAAiH,GACA,GAAAgB,MAAAC,MAAAlI,KAAAsD,UAAA,EAWA,OADA2E,GAAAhG,KAAAgF,GACAhI,KAAA8F,MAAAuC,EAAAxB,OAAAA,OAAAmC,EAAAnC,SAWA1F,EAAAW,UAAAoH,IAAA,SAAAC,GACA,GACAC,GADAC,EAAA,gBAAAF,EAEA,IAAAE,EAQAD,EAAAX,MAPA,IAAAK,EAAA,CACA,GAAAQ,GAAAT,EAAAM,EACAC,GAAA,OAAAE,EAAAA,EAAAd,MAEAY,GAAAZ,CAKA,OAAAxI,MAAA8F,MAAAsD,EAAAvC,OAAAA,OAAAsC,EAAAtC,YAIA5B,SAAA,KAAAsE,GAAA,SAAAnI,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAqI,EAAAC,EAAApE,GACA,GAAA/B,GAAAlC,EAAA,UACAsI,EAAApG,EAAAoG,SACAC,EAAArG,EAAAqG,SACAC,EAAAzI,EAAA0I,MAEA1I,GAAAW,UAAA,SAAAX,EAAAW,UAAAgI,OAAA,WACA,IAAAzE,EAAA0E,eAAA,MAAA/J,MAAAgK,MAAA,2BAIA,KAFA,GAAAvI,GAAAzB,KACAiK,EAAAxI,EACAA,EAAAyI,kBAAA,CACA,IAAAzI,EAAA0I,UAAAF,GAAA,CACAA,EAAAG,eACAH,EAAAI,YAAAP,SAEAG,EAAAK,iBAEA,OAGA,GAAAC,GAAA9I,EAAA+I,mBACA,IAAA,MAAAD,IAAAA,EAAAL,iBAAA,CACAzI,EAAA2I,eACA3I,EAAA4I,YAAAP,SAEArI,EAAA6I,iBAEA,OAEA7I,EAAA2I,gBAAA3I,EAAA4I,YAAAP,SACArI,EAAAgJ,sBACAR,EAAAxI,EACAA,EAAA8I,IAKApJ,EAAAW,UAAA4I,oBAAA,WACA1K,KAAA2K,8BAGAxJ,EAAAW,UAAA8I,6BAAA,WACA,MAAA/D,UAAA7G,KAAA2K,4BACA3K,KAAA2K,4BAAA,GAGAxJ,EAAAW,UAAAqI,UAAA,SAAAU,GACA,MAAAA,KAAA7K,MACAA,KAAA2K,2BAAA,EACA3K,KAAA8K,mBACA,IAEA9K,KAAA0K,wBACA1K,KAAA4K,iCACA5K,KAAA8K,mBACA,KAMA3J,EAAAW,UAAAwI,gBAAA,WACAtK,KAAA4K,gCACA5K,KAAA+K,WAIA5J,EAAAW,UAAAiJ,QAAA,WACA/K,KAAAkK,mBACAlK,KAAAgL,gBACApB,EAAApF,OAAAxE,KAAAiL,gBAAAjL,KAAA6G,UAGA1F,EAAAW,UAAAmJ,gBAAA,WACAjL,KAAAkL,UAAA,GAAAlL,KAAA0E,mBAGAvD,EAAAW,UAAAqJ,eAAA,WACAnL,KAAAoL,eAAAvE,QAGA1F,EAAAW,UAAAoI,eAAA,WACA,MAAAlK,MAAAqL,cAAArL,KAAAsL,gBAGAnK,EAAAW,UAAAyJ,cAAA,WACA,MAAAvL,MAAAqL,cAAArL,KAAAwL,eAGArK,EAAAW,UAAA2J,kBAAA,SAAAC,EAAAC,GACA,GAAArI,EAAAsI,QAAAF,GACA,IAAA,GAAA/K,GAAA,EAAAA,EAAA+K,EAAA1K,SAAAL,EACAX,KAAAyL,kBAAAC,EAAA/K,GAAAgL,OAEA,IAAA9E,SAAA6E,EACA,GAAA,kBAAAA,IACA,IAAAC,EAAA,CACA,GAAAzL,GAAAwJ,EAAAgC,GAAA3K,KAAAf,KAAAwG,cACAtG,KAAAyJ,IACA3J,KAAA6L,kBAAA3L,EAAAA,GACA0J,EAAAxF,WAAAlE,EAAAA,SAIAwL,GAAAI,iBAAA9L,OAKAmB,EAAAW,UAAAgJ,gBAAA,WACA,GAAAY,GAAA1L,KAAA+L,WACA/L,MAAAmL,iBACAvB,EAAApF,OAAAxE,KAAAyL,kBAAAzL,KAAA0L,IAGAvK,EAAAW,UAAAkK,wBAAA,WACAhM,KAAAkK,mBACAlK,KAAAyL,kBAAAzL,KAAA+L,aAAA,GACA/L,KAAAmL,mBAIAhK,EAAAW,UAAAgK,iBAAA,WACA9L,KAAA8J,aAKA7E,SAAA,KAAAgH,GAAA,SAAA7K,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA0M,GAMA,QAAAC,GAAAC,EAAAC,EAAA5K,GACA,MAAA,UAAAvB,GACA,GAAAoM,GAAA7K,EAAA+E,aACA+F,GAAA,IAAA,GAAA5L,GAAA,EAAAA,EAAAyL,EAAApL,SAAAL,EAAA,CACA,GAAA6L,GAAAJ,EAAAzL,EAEA,IAAA6L,IAAA5L,OACA,MAAA4L,GAAAA,EAAA1K,oBAAAlB,QACA,GAAAV,YAAAsM,GACA,MAAA9C,GAAA2C,GAAAtL,KAAAuL,EAAApM,OAEA,IAAA,kBAAAsM,GAAA,CACA,GAAAC,GAAA/C,EAAA8C,GAAAzL,KAAAuL,EAAApM,EACA,IAAAuM,IAAA9C,EACA,MAAA8C,EACA,IAAAA,EACA,MAAA/C,GAAA2C,GAAAtL,KAAAuL,EAAApM,OAEA,IAAAoD,EAAAoJ,SAAAxM,GAAA,CAEA,IAAA,GADAyM,GAAAC,EAAAJ,GACAK,EAAA,EAAAA,EAAAF,EAAA3L,SAAA6L,EAAA,CACA,GAAAC,GAAAH,EAAAE,EACA,IAAAL,EAAAM,IAAA5M,EAAA4M,GACA,QAAAP,GAGA,MAAA7C,GAAA2C,GAAAtL,KAAAuL,EAAApM,IAGA,MAAAgM,IAlCA,GAAA5I,GAAAlC,EAAA,UACAwL,EAAAxL,EAAA,SAAAuL,KACAjD,EAAApG,EAAAoG,SACAC,EAAArG,EAAAqG,QAmCA,OAAAwC,MAGAY,QAAA,GAAA9H,SAAA,KAAA+H,GAAA,SAAA5L,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,GASA,QAAA8L,KACAjN,KAAAkN,OAAA,GAAAD,GAAAE,cAAAC,KAmBA,QAAAC,KACA,GAAAC,EAAA,MAAA,IAAAL,GAGA,QAAAG,KACA,GAAAG,GAAAC,EAAAxM,OAAA,CACA,IAAAuM,GAAA,EACA,MAAAC,GAAAD,GAnCA,GAAAD,IAAA,EACAE,IAgEA,OA9DArM,GAAAW,UAAA2L,gBAAA,aACAtM,EAAAW,UAAA4L,aAAA,aACAvM,EAAAW,UAAA6L,YAAA,WAAA,MAAA,OACAxM,EAAAyM,aAAAzM,EAAAW,UAAA8L,aAAA,aAKAX,EAAAnL,UAAA4L,aAAA,WACA7G,SAAA7G,KAAAkN,SACAlN,KAAAkN,OAAAO,gBAAA,KACAD,EAAAxK,KAAAhD,KAAAkN,UAIAD,EAAAnL,UAAA6L,YAAA,WACA,GAAA9G,SAAA7G,KAAAkN,OAAA,CACA,GAAAW,GAAAL,EAAAlF,MACA/G,EAAAsM,EAAAJ,eAEA,OADAI,GAAAJ,gBAAA,KACAlM,EAEA,MAAA,OAcA0L,EAAAE,cAAA,KACAF,EAAArF,OAAAyF,EACAJ,EAAAa,0BAAA,aACAb,EAAAc,wBAAA,WACA,GAAAC,GAAA7M,EAAAW,UAAA4L,aACAO,EAAA9M,EAAAW,UAAA6L,YACAO,EAAA/M,EAAAyM,aACAO,EAAAhN,EAAAW,UAAA8L,aACAQ,EAAAjN,EAAAW,UAAA2L,eACAR,GAAAa,0BAAA,WACA3M,EAAAW,UAAA4L,aAAAM,EACA7M,EAAAW,UAAA6L,YAAAM,EACA9M,EAAAyM,aAAAM,EACA/M,EAAAW,UAAA8L,aAAAO,EACAhN,EAAAW,UAAA2L,gBAAAW,EACAd,GAAA,GAEAA,GAAA,EACAnM,EAAAW,UAAA4L,aAAAT,EAAAnL,UAAA4L,aACAvM,EAAAW,UAAA6L,YAAAV,EAAAnL,UAAA6L,YACAxM,EAAAyM,aAAAzM,EAAAW,UAAA8L,aAAAR,EACAjM,EAAAW,UAAA2L,gBAAA,WACA,GAAAY,GAAArO,KAAA4N,cACAS,IAAA,MAAAA,EAAAZ,kBAAAY,EAAAZ,gBAAAzN,QAGAiN,QAGAqB,GAAA,SAAAlN,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAA8L,GA0MA,QAAAsB,GAAAC,EAAA/M,GACA,OAAAA,QAAAA,GA0FA,QAAAgN,KAAA,OAAA,EAuBA,QAAAC,GAAAC,EAAAxH,EAAAyH,GACA,GAAAnN,GAAAzB,IACA,KACA2O,EAAAxH,EAAAyH,EAAA,SAAAC,GACA,GAAA,kBAAAA,GACA,KAAA,IAAAzG,WAAA,qCACA9E,EAAA6E,SAAA0G,GAEApN,GAAAqN,4BAAAD,KAEA,MAAA3O,GACA,MAAAA,IAIA,QAAA6O,GAAAF,GACA,IAAA7O,KAAAkK,iBAAA,MAAAlK,KAEA,IAAAgP,GAAAhP,KAAA+L,WACAlF,UAAAmI,EACA1L,EAAAsI,QAAAoD,GACAA,EAAAhM,KAAA6L,GAEA7O,KAAA8G,cAAAkI,EAAAH,IAGA7O,KAAA8G,aAAA+H,GAIA,QAAAI,KACA,MAAAjP,MAAAoL,eAGA,QAAA8D,GAAAL,GACA7O,KAAAoL,eAAAyD,EAGA,QAAAM,KACAnP,KAAAwK,oBAAA3D,OACA7G,KAAAoL,eAAAvE,OAGA,QAAAuI,GAAA7E,EAAA8E,GACA,GAAA,KAAA,EAAAA,GAAA,CACArP,KAAAwK,oBAAAD,CACA,IAAA+E,GAAA/E,EAAAI,0BACA9D,UAAAyI,IACAA,EAAA,GAEA/E,EAAAI,2BAAA2E,EAAA,EAEA,KAAA,EAAAD,IAAA9E,EAAAtD,YACAjH,KAAA4G,YAAA2D,EAAAvD,UAIA,QAAAuI,GAAAhF,EAAA8E,GACA,KAAA,EAAAA,IAAA9E,EAAAtD,YACAjH,KAAA4G,YAAA2D,EAAAvD,UAKA,QAAAP,KACA,GAAAlF,GAAAvB,KAAAgH,QACA,OAAAH,UAAAtF,GACAA,YAAAJ,GACAI,EAAAiO,cACAjO,EAAA2F,QAEA,OAIA3F,EAGA,QAAAkO,KACAzP,KAAAkN,OAAA,GAAAC,GAAAnN,KAAA4N,gBAGA,QAAA8B,GAAAC,EAAAC,GACA,GAAAC,EAAAF,GAAA,CACA,GAAA9B,GAAA7N,KAAAkN,MAIA,IAHArG,SAAAgH,GACA+B,IAAA/B,EAAAA,EAAAiC,SAEAjJ,SAAAgH,EACAA,EAAAkC,iBAAAJ,OACA,KAAAA,EAAAK,iBAAA,CACA,GAAAC,GAAAC,EAAAP,EACArM,GAAA6M,kBAAAR,EAAA,QACAM,EAAAhI,QAAA,KAAAgI,EAAA/L,MAAAkM,KAAA,OACA9M,EAAA6M,kBAAAR,EAAA,oBAAA,KAKA,QAAAU,GAAAC,EAAAC,EAAA/B,EAAA/M,EACA8I,GACA,GAAA1D,SAAAyJ,GAAA,OAAAC,GACAC,EAAA,CACA,GAAA3J,SAAA0D,GAAAA,EAAAkG,wBAAA,MACA,IAAA,KAAA,MAAAhP,EAAAwE,WAAA,MAEAuI,KAAAA,GAAA,IACA,IAAAkC,GAAA,GACAC,EAAA,EACA,IAAAJ,EAAArD,OAAA,CAGA,IAAA,GAFA0D,GAAAL,EAAArD,OAAAhJ,MAAA2M,MAAA,MACA3M,EAAA4M,EAAAF,GACAjQ,EAAAuD,EAAAlD,OAAA,EAAAL,GAAA,IAAAA,EAAA,CACA,GAAAoQ,GAAA7M,EAAAvD,EACA,KAAAqQ,EAAAC,KAAAF,GAAA,CACA,GAAAG,GAAAH,EAAAI,MAAAC,EACAF,KACAR,EAAA,MAAAQ,EAAA,GACA,IAAAA,EAAA,GAAA,IAAAA,EAAA,GAAA,IAEA,QAIA,GAAAhN,EAAAlD,OAAA,EAEA,IAAA,GADAqQ,GAAAnN,EAAA,GACAvD,EAAA,EAAAA,EAAAiQ,EAAA5P,SAAAL,EAEA,GAAAiQ,EAAAjQ,KAAA0Q,EAAA,CACA1Q,EAAA,IACAgQ,EAAA,KAAAC,EAAAjQ,EAAA,GAEA,QAMA,GAAA2Q,GAAA,8BAAA9C,EACA,WAAAkC,EAAA,yDAEAC,CACAlP,GAAAuI,MAAAsH,GAAA,EAAAf,IAIA,QAAAgB,GAAA/C,EAAAgD,GACA,GAAAvJ,GAAAuG,EACA,yDAEA,OADAgD,KAAAvJ,GAAA,QAAAuJ,EAAA,aACAC,EAAAxJ,GAGA,QAAAwJ,GAAAxJ,EAAAyJ,EAAAjQ,GACA,GAAAkQ,GAAAC,SAAA,CACA,GACAvD,GADAwD,EAAA,GAAAC,GAAA7J,EAEA,IAAAyJ,EACAjQ,EAAAoK,kBAAAgG,OACA,IAAAF,GAAArE,kBAAAe,EAAAlN,EAAAyM,gBACAS,EAAA0B,iBAAA8B,OACA,CACA,GAAA5B,GAAAC,EAAA2B,EACAA,GAAA3N,MAAA+L,EAAAhI,QAAA,KAAAgI,EAAA/L,MAAAkM,KAAA,MAGA2B,GAAA,UAAAF,IACAG,EAAAH,EAAA,IAAA,IAIA,QAAAI,GAAAhK,EAAAiK,GACA,IAAA,GAAAvR,GAAA,EAAAA,EAAAuR,EAAAlR,OAAA,IAAAL,EACAuR,EAAAvR,GAAAqC,KAAA,wBACAkP,EAAAvR,GAAAuR,EAAAvR,GAAAyP,KAAA,KAKA,OAHAzP,GAAAuR,EAAAlR,SACAkR,EAAAvR,GAAAuR,EAAAvR,GAAAyP,KAAA,OAEAnI,EAAA,KAAAiK,EAAA9B,KAAA,MAGA,QAAA+B,GAAAD,GACA,IAAA,GAAAvR,GAAA,EAAAA,EAAAuR,EAAAlR,SAAAL,GACA,IAAAuR,EAAAvR,GAAAK,QACAL,EAAA,EAAAuR,EAAAlR,QAAAkR,EAAAvR,GAAA,KAAAuR,EAAAvR,EAAA,GAAA,MACAuR,EAAAE,OAAAzR,EAAA,GACAA,KAKA,QAAA0R,GAAAH,GAEA,IAAA,GADAI,GAAAJ,EAAA,GACAvR,EAAA,EAAAA,EAAAuR,EAAAlR,SAAAL,EAAA,CAMA,IAAA,GALA6C,GAAA0O,EAAAvR,GACA4R,EAAAD,EAAAtR,OAAA,EACAwR,EAAAF,EAAAC,GACAE,KAEA5F,EAAArJ,EAAAxC,OAAA,EAAA6L,GAAA,IAAAA,EACA,GAAArJ,EAAAqJ,KAAA2F,EAAA,CACAC,EAAA5F,CACA,OAIA,IAAA,GAAAA,GAAA4F,EAAA5F,GAAA,IAAAA,EAAA,CACA,GAAAkE,GAAAvN,EAAAqJ,EACA,IAAAyF,EAAAC,KAAAxB,EAIA,KAHAuB,GAAAhK,MACAiK,IAKAD,EAAA9O,GAIA,QAAAsN,GAAA5M,GAEA,IAAA,GADA3C,MACAZ,EAAA,EAAAA,EAAAuD,EAAAlD,SAAAL,EAAA,CACA,GAAAoQ,GAAA7M,EAAAvD,GACA+R,EAAA,yBAAA3B,GACA4B,EAAA1B,KAAAF,GACA6B,EAAAF,GAAAG,GAAA9B,EACA2B,KAAAE,IACAE,GAAA,MAAA/B,EAAAgC,OAAA,KACAhC,EAAA,OAAAA,GAEAxP,EAAAyB,KAAA+N,IAGA,MAAAxP,GAGA,QAAAyR,GAAArD,GAEA,IAAA,GADAzL,GAAAyL,EAAAzL,MAAA+O,QAAA,QAAA,IAAApC,MAAA,MACAlQ,EAAA,EAAAA,EAAAuD,EAAAlD,SAAAL,EAAA,CACA,GAAAoQ,GAAA7M,EAAAvD,EACA,IAAA,yBAAAoQ,GAAA4B,EAAA1B,KAAAF,GACA,MAMA,MAHApQ,GAAA,GAAA,eAAAgP,EAAAnB,OACAtK,EAAAA,EAAA+E,MAAAtI,IAEAuD,EAGA,QAAAgM,GAAAP,GACA,GAAAzL,GAAAyL,EAAAzL,MACA+D,EAAA0H,EAAAxH,UAGA,OAFAjE,GAAA,gBAAAA,IAAAA,EAAAlD,OAAA,EACAgS,EAAArD,IAAA,yBAEA1H,QAAAA,EACA/D,MAAA,eAAAyL,EAAAnB,KAAAtK,EAAA4M,EAAA5M,IAIA,QAAA8N,GAAArC,EAAAuD,EAAAC,GACA,GAAA,mBAAAC,SAAA,CACA,GAAAnL,EACA,IAAA3E,EAAAoJ,SAAAiD,GAAA,CACA,GAAAzL,GAAAyL,EAAAzL,KACA+D,GAAAiL,EAAAG,EAAAnP,EAAAyL,OAEA1H,GAAAiL,EAAAI,OAAA3D,EAEA,mBAAA4D,GACAA,EAAAtL,EAAAkL,GACA,kBAAAC,SAAAI,KACA,gBAAAJ,SAAAI,KACAJ,QAAAI,IAAAvL,IAKA,QAAAwL,GAAAjF,EAAAkF,EAAAC,EAAAlS,GACA,GAAAmS,IAAA,CACA,KACA,kBAAAF,KACAE,GAAA,EACA,qBAAApF,EACAkF,EAAAjS,GAEAiS,EAAAC,EAAAlS,IAGA,MAAAvB,GACA0J,EAAAxF,WAAAlE,GAGA,uBAAAsO,EACAuD,GAAAvD,EAAAmF,EAAAlS,IAAAmS,GACA5B,EAAA2B,EAAA,wBAGA5B,GAAAvD,EAAA/M,GAIA,QAAAoS,GAAA9M,GACA,GAAA+M,EACA,IAAA,kBAAA/M,GACA+M,EAAA,cACA/M,EAAAyH,MAAA,aACA,QACA,CACAsF,EAAA/M,GAAA,kBAAAA,GAAAoB,SACApB,EAAAoB,WAAA7E,EAAA6E,SAAApB,EACA,IAAAgN,GAAA,2BACA,IAAAA,EAAA9C,KAAA6C,GACA,IACA,GAAAE,GAAAC,KAAAC,UAAAnN,EACA+M,GAAAE,EAEA,MAAA9T,IAIA,IAAA4T,EAAA9S,SACA8S,EAAA,iBAGA,MAAA,KAAAK,EAAAL,GAAA,qBAGA,QAAAK,GAAAL,GACA,GAAAM,GAAA,EACA,OAAAN,GAAA9S,OAAAoT,EACAN,EAEAA,EAAAO,OAAA,EAAAD,EAAA,GAAA,MAGA,QAAAE,KACA,MAAA,kBAAAC,IAKA,QAAAC,GAAAzD,GACA,GAAA0D,GAAA1D,EAAAI,MAAAuD,GACA,IAAAD,EACA,OACAE,SAAAF,EAAA,GACA1D,KAAA6D,SAAAH,EAAA,GAAA,KAKA,QAAAI,GAAAxR,EAAAyR,GACA,GAAAR,IAAA,CAOA,IAAA,GAFAS,GACAC,EALAC,EAAA5R,EAAAa,MAAA2M,MAAA,MACAqE,EAAAJ,EAAA5Q,MAAA2M,MAAA,MACAsE,KACA5H,KAGA5M,EAAA,EAAAA,EAAAsU,EAAAjU,SAAAL,EAAA,CACA,GAAAyU,GAAAZ,EAAAS,EAAAtU,GACA,IAAAyU,EAAA,CACAL,EAAAK,EAAAT,SACAQ,EAAAC,EAAArE,IACA,QAGA,IAAA,GAAApQ,GAAA,EAAAA,EAAAuU,EAAAlU,SAAAL,EAAA,CACA,GAAAyU,GAAAZ,EAAAU,EAAAvU,GACA,IAAAyU,EAAA,CACAJ,EAAAI,EAAAT,SACApH,EAAA6H,EAAArE,IACA,QAGAoE,EAAA,GAAA5H,EAAA,IAAAwH,IAAAC,GACAD,IAAAC,GAAAG,GAAA5H,IAIAsF,GAAA,SAAA9B,GACA,GAAAsE,EAAApE,KAAAF,GAAA,OAAA,CACA,IAAAuE,GAAAd,EAAAzD,EACA,UAAAuE,GACAA,EAAAX,WAAAI,GACAI,GAAAG,EAAAvE,MAAAuE,EAAAvE,MAAAxD,MAQA,QAAAJ,GAAA5C,GACAvK,KAAA8P,QAAAvF,EACAvK,KAAAuV,iBAAA,CACA,IAAAvU,GAAAhB,KAAAkL,QAAA,GAAArE,SAAA0D,EAAA,EAAAA,EAAAW,QACAqJ,IAAAvU,KAAAmN,GACAnM,EAAA,IAAAhB,KAAAwV,UA5sBA,GAKAC,GACAC,EAQAnC,EAdAoC,EAAAxU,EAAAyU,WACAhM,EAAAzI,EAAA0I,OACAiI,EAAA1Q,EAAA,YAAA0Q,QACAxO,EAAAlC,EAAA,UACAyO,EAAAvM,EAAAuM,eAGAwF,EACA,2DACArE,EAAA,6BACAI,EAAA,kCACAuB,EAAA,KACAU,EAAA,KACAP,GAAA,EAEA+C,IAAA,GAAAvS,EAAAwS,IAAA,mBAKAlE,IAAA,GAAAtO,EAAAwS,IAAA,uBACAD,IAAAvS,EAAAwS,IAAA,sBAEAxI,IAAA,GAAAhK,EAAAwS,IAAA,gCACAD,IAAAvS,EAAAwS,IAAA,+BAEAtF,EAAA,GAAAlN,EAAAwS,IAAA,iCACAlE,KAAAtO,EAAAwS,IAAA,+BAEA3U,GAAAW,UAAAiU,4BAAA,WACA,GAAA5P,GAAAnG,KAAA2G,SACAR,GAAAF,UAAAE,EAAAF,mBACA,QAGA9E,EAAAW,UAAAkU,gCAAA,WACA,KAAA,OAAAhW,KAAAiG,aACAjG,KAAAiW,2BACArM,EAAArF,YAAAvE,KAAAkW,0BAAAlW,KAAA6G,UAGA1F,EAAAW,UAAAqU,mCAAA,WACA1C,EAAA,mBACAgC,EAAA5O,OAAA7G,OAGAmB,EAAAW,UAAAsU,yBAAA,WACApW,KAAAiG,UAAA,UAAAjG,KAAAiG,WAGA9E,EAAAW,UAAA2O,sBAAA,WACA,MAAA,MAAA,UAAAzQ,KAAAiG,YAGA9E,EAAAW,UAAAoU,0BAAA,WACA,GAAAlW,KAAAqW,wBAAA,CACA,GAAA1C,GAAA3T,KAAAsW,eACAtW,MAAAuW,mCACA9C,EAAA,qBACAiC,EAAA/B,EAAA3T,QAIAmB,EAAAW,UAAAyU,iCAAA,WACAvW,KAAAiG,UAAA,OAAAjG,KAAAiG,WAGA9E,EAAAW,UAAA0U,mCAAA,WACAxW,KAAAiG,UAAAjG,KAAAiG,mBAGA9E,EAAAW,UAAA2U,8BAAA,WACA,OAAA,OAAAzW,KAAAiG,WAAA,GAGA9E,EAAAW,UAAAmU,yBAAA,WACAjW,KAAAiG,UAAA,QAAAjG,KAAAiG,WAGA9E,EAAAW,UAAA4U,2BAAA,WACA1W,KAAAiG,UAAAjG,KAAAiG,mBACAjG,KAAAyW,kCACAzW,KAAAwW,qCACAxW,KAAAmW,uCAIAhV,EAAAW,UAAAuU,sBAAA,WACA,OAAA,QAAArW,KAAAiG,WAAA,GAGA9E,EAAAW,UAAAkI,MAAA,SAAA/B,EAAAyJ,EAAAjQ,GACA,MAAAgQ,GAAAxJ,EAAAyJ,EAAAjQ,GAAAzB,OAGAmB,EAAAwV,6BAAA,SAAA9T,GACA,GAAA+T,GAAAjB,GACAD,GACA,kBAAA7S,GAAA,OAAA+T,EACA/T,EAAAS,EAAAuT,WAAAD,EAAA/T,GACAgE,QAGA1F,EAAA2V,4BAAA,SAAAjU,GACA,GAAA+T,GAAAjB,GACAF,GACA,kBAAA5S,GAAA,OAAA+T,EACA/T,EAAAS,EAAAuT,WAAAD,EAAA/T,GACAgE,OAGA,IAAAkQ,GAAA,YACA5V,GAAAmM,gBAAA,WACA,GAAA1D,EAAA/F,oBAAA8N,GAAArE,gBACA,KAAA,IAAA1M,OAAA,qGAEA,KAAA+Q,GAAArE,iBAAAgH,IAAA,CACA,GAAA0C,GAAA7V,EAAAW,UAAAmV,mBACAC,EAAA/V,EAAAW,UAAA+J,iBACA8F,IAAArE,iBAAA,EACAyJ,EAAA,WACA,GAAAnN,EAAA/F,oBAAA8N,GAAArE,gBACA,KAAA,IAAA1M,OAAA,qGAEAO,GAAAW,UAAAmV,mBAAAD,EACA7V,EAAAW,UAAA+J,kBAAAqL,EACAjK,EAAAa,4BACAlE,EAAAlG,mBACAiO,GAAArE,iBAAA,GAEAnM,EAAAW,UAAAmV,mBAAAxH,EACAtO,EAAAW,UAAA+J,kBAAA6D,EACAzC,EAAAc,0BACAnE,EAAAjG,iCAIAxC,EAAAgW,mBAAA,WACA,MAAAxF,IAAArE,iBAAAgH,IAGA,IAAA8C,GAAA,WACA,IACA,GAAA,kBAAAC,aAAA,CACA,GAAAC,GAAA,GAAAD,aAAA,cAEA,OADA/T,GAAAxD,OAAAyX,cAAAD,GACA,SAAA9I,EAAA8I,GACA,GAAAE,GAAA,GAAAH,aAAA7I,EAAAiJ,eACAC,OAAAJ,EACAK,YAAA,GAEA,QAAArU,EAAAxD,OAAAyX,cAAAC,IAEA,GAAA,kBAAAI,OAAA,CACA,GAAAN,GAAA,GAAAM,OAAA,cAEA,OADAtU,GAAAxD,OAAAyX,cAAAD,GACA,SAAA9I,EAAA8I,GACA,GAAAE,GAAA,GAAAI,OAAApJ,EAAAiJ,eACAE,YAAA,GAGA,OADAH,GAAAE,OAAAJ,GACAhU,EAAAxD,OAAAyX,cAAAC,IAGA,GAAAF,GAAAO,SAAAC,YAAA,cAGA,OAFAR,GAAAS,gBAAA,mBAAA,GAAA,MACAzU,EAAAxD,OAAAyX,cAAAD,GACA,SAAA9I,EAAA8I,GACA,GAAAE,GAAAK,SAAAC,YAAA,cAGA,OAFAN,GAAAO,gBAAAvJ,EAAAiJ,eAAA,GAAA,EACAH,IACAhU,EAAAxD,OAAAyX,cAAAC,IAGA,MAAAtX,IACA,MAAA,YACA,OAAA,MAIA8X,EAAA,WACA,MAAA1U,GAAAS,OACA,WACA,MAAA7C,GAAA+W,KAAA1P,MAAArH,EAAAmD,YAGAf,EAAAxD,OAKA,SAAA0O,GACA,GAAAxG,GAAA,KAAAwG,EAAAiJ,cACAS,EAAA5U,EAAAxD,OAAAkI,EACA,SAAAkQ,IACAA,EAAA3P,MAAAjF,EAAAxD,UAAAmJ,MAAAlI,KAAAsD,UAAA,KACA,IATA,WACA,OAAA,MAiBA8T,IACA5H,eAAAhC,EACA6J,iBAAA7J,EACA8J,gBAAA9J,EACA+J,gBAAA/J,EACAgK,iBAAAhK,EACAiK,eAAA,SAAAhK,EAAA/M,EAAAwI,GACA,OAAAxI,QAAAA,EAAAwI,MAAAA,IAEA4H,QAAA,SAAArD,EAAAqD,GACA,OAAAA,QAAAA,IAEA4G,mBAAA,SAAAjK,EAAAmF,EAAAlS,GACA,OAAAkS,OAAAA,EAAAlS,QAAAA,IAEAiX,iBAAAnK,GAGAwD,GAAA,SAAAvD,GACA,GAAAmK,IAAA,CACA,KACAA,EAAAX,EAAAzP,MAAA,KAAAlE,WACA,MAAAnE,GACA0J,EAAAxF,WAAAlE,GACAyY,GAAA,EAGA,GAAAC,IAAA,CACA,KACAA,EAAAxB,EAAA5I,EACA2J,GAAA3J,GAAAjG,MAAA,KAAAlE,YACA,MAAAnE,GACA0J,EAAAxF,WAAAlE,GACA0Y,GAAA,EAGA,MAAAA,IAAAD,EAGAxX,GAAAwQ,OAAA,SAAAkH,GASA,GARAA,EAAAlR,OAAAkR,GACA,mBAAAA,KACAA,EAAAvL,gBACAnM,EAAAmM,mBACAuL,EAAAvL,iBAAAnM,EAAAgW,sBACAJ,KAGA,YAAA8B,GAAA,CACA,GAAAC,GAAAD,EAAAjH,QACAD,IAAAC,WAAAkH,EACAtI,EAAAmB,GAAAC,SAEAtO,EAAAoJ,SAAAoM,IACA,oBAAAA,KACAtI,IAAAsI,EAAAtI,kBAIA,GAAA,gBAAAqI,IAAAA,EAAA9O,eAAA4H,GAAA5H,aAAA,CACA,GAAAH,EAAA/F,kBACA,KAAA,IAAAjD,OACA,uDAEAO,GAAAW,UAAAiX,uBACA5J,EACAhO,EAAAW,UAAAwE,eAAA8I,EACAjO,EAAAW,UAAAiK,UAAAkD,EACA9N,EAAAW,UAAAgF,aAAAoI,EACA/N,EAAAW,UAAAgN,4BACAC,EACA5N,EAAAW,UAAAkX,SAAAtK,EACAnI,GAAA6I,EACAuC,GAAA5H,cAAA,EAWA,MATA,cAAA8O,KACAA,EAAAI,aAAAtH,GAAAsH,YACAtH,GAAAsH,YAAA,EACA9X,EAAAW,UAAAoX,WAAAnH,KACA8G,EAAAI,YAAAtH,GAAAsH,aACAtH,GAAAsH,YAAA,EACA9X,EAAAW,UAAAoX,WAAAzK,IAGAtN,GAKAA,EAAAW,UAAAoX,WAAAzK,EACAtN,EAAAW,UAAAkX,SAAA,SAAArK,EAAAxH,EAAAyH,GACA,IACAD,EAAAxH,EAAAyH,GACA,MAAA1O,GACA,MAAAA,KAGAiB,EAAAW,UAAAiK,UAAA,aACA5K,EAAAW,UAAAgF,aAAA,SAAAqS,KACAhY,EAAAW,UAAAgN,4BAAA,SAAAD,KAGA1N,EAAAW,UAAAmV,mBAAA,aACA9V,EAAAW,UAAA+J,kBAAA,aACA1K,EAAAW,UAAAiX,uBAAA,aACA5X,EAAAW,UAAAwE,eAAA,SAAAiE,EAAA8E,IAmEA,IAAA9I,IAAAgJ,EAwRAsD,GAAA,WAAA,OAAA,GACA6B,GAAA,uCA4DApR,GAAA8V,SAAAjM,EAAAvM,OACAqM,EAAAE,cAAAA,EAEAA,EAAArL,UAAA0T,QAAA,WACA,GAAAxU,GAAAhB,KAAAkL,OACA,MAAAlK,EAAA,GAAA,CAIA,IAAA,GAHAqY,MACAC,KAEA3Y,EAAA,EAAA4Y,EAAAvZ,KAAA6G,SAAA0S,IAAA5Y,EACA0Y,EAAArW,KAAAuW,GACAA,EAAAA,EAAAzJ,OAEA9O,GAAAhB,KAAAkL,QAAAvK,CACA,KAAA,GAAAA,GAAAK,EAAA,EAAAL,GAAA,IAAAA,EAAA,CACA,GAAAuD,GAAAmV,EAAA1Y,GAAAuD,KACA2C,UAAAyS,EAAApV,KACAoV,EAAApV,GAAAvD,GAGA,IAAA,GAAAA,GAAA,EAAAA,EAAAK,IAAAL,EAAA,CACA,GAAA6Y,GAAAH,EAAA1Y,GAAAuD,MACAwE,EAAA4Q,EAAAE,EACA,IAAA3S,SAAA6B,GAAAA,IAAA/H,EAAA,CACA+H,EAAA,IACA2Q,EAAA3Q,EAAA,GAAAoH,QAAAjJ,OACAwS,EAAA3Q,EAAA,GAAAwC,QAAA,GAEAmO,EAAA1Y,GAAAmP,QAAAjJ,OACAwS,EAAA1Y,GAAAuK,QAAA,CACA,IAAAuO,GAAA9Y,EAAA,EAAA0Y,EAAA1Y,EAAA,GAAAX,IAEA0I,GAAA1H,EAAA,GACAyY,EAAA3J,QAAAuJ,EAAA3Q,EAAA,GACA+Q,EAAA3J,QAAA0F,UACAiE,EAAAvO,QACAuO,EAAA3J,QAAA5E,QAAA,IAEAuO,EAAA3J,QAAAjJ,OACA4S,EAAAvO,QAAA,EAGA,KAAA,GADAwO,GAAAD,EAAAvO,QAAA,EACA2B,EAAAlM,EAAA,EAAAkM,GAAA,IAAAA,EACAwM,EAAAxM,GAAA3B,QAAAwO,EACAA,GAEA,YAKAvM,EAAArL,UAAAiO,iBAAA,SAAAJ,GACA,IAAAA,EAAAK,iBAAA,CACAhQ,KAAAwV,SAMA,KALA,GAAAvF,GAAAC,EAAAP,GACA1H,EAAAgI,EAAAhI,QACAiK,GAAAjC,EAAA/L,OAEA2J,EAAA7N,KACA6G,SAAAgH,GACAqE,EAAAlP,KAAA8N,EAAAjD,EAAA3J,MAAA2M,MAAA,QACAhD,EAAAA,EAAAiC,OAEAuC,GAAAH,GACAC,EAAAD,GACA5O,EAAA6M,kBAAAR,EAAA,QAAAsC,EAAAhK,EAAAiK,IACA5O,EAAA6M,kBAAAR,EAAA,oBAAA,IAGA,IAAA4E,IAAA,WACA,GAAAoF,GAAA,YACAC,EAAA,SAAA1V,EAAAyL,GACA,MAAA,gBAAAzL,GAAAA,EAEA2C,SAAA8I,EAAAnB,MACA3H,SAAA8I,EAAA1H,QACA0H,EAAAxH,WAEA0L,EAAAlE,GAGA,IAAA,gBAAA/O,OAAAiZ,iBACA,kBAAAjZ,OAAA2T,kBAAA,CACA3T,MAAAiZ,iBAAA,EACAlH,EAAAgH,EACAtG,EAAAuG,CACA,IAAArF,GAAA3T,MAAA2T,iBAKA,OAHA1B,IAAA,SAAA9B,GACA,MAAAsE,GAAApE,KAAAF,IAEA,SAAAjO,EAAAgX,GACAlZ,MAAAiZ,iBAAA,EACAtF,EAAAzR,EAAAgX,GACAlZ,MAAAiZ,iBAAA,GAGA,GAAAE,GAAA,GAAAnZ,MAEA,IAAA,gBAAAmZ,GAAA7V,OACA6V,EAAA7V,MAAA2M,MAAA,MAAA,GAAAmJ,QAAA,oBAAA,EAIA,MAHArH,GAAA,IACAU,EAAAuG,EACA9G,GAAA,EACA,SAAAvS,GACAA,EAAA2D,OAAA,GAAAtD,QAAAsD,MAIA,IAAA+V,EACA,KAAA,KAAA,IAAArZ,OACA,MAAAV,GACA+Z,EAAA,SAAA/Z,GAEA,MAAA,SAAA6Z,KAAAE,GACA,gBAAArZ,OAAAiZ,iBAWAxG,EAAA,SAAAnP,EAAAyL,GACA,MAAA,gBAAAzL,GAAAA,EAEA,gBAAAyL,IACA,kBAAAA,IACA9I,SAAA8I,EAAAnB,MACA3H,SAAA8I,EAAA1H,QAGA4L,EAAAlE,GAFAA,EAAAxH,YAKA,OAtBAwK,EAAAgH,EACAtG,EAAAuG,EACA,SAAArZ,GACAK,MAAAiZ,iBAAA,CACA,KAAA,KAAA,IAAAjZ,OACA,MAAAV,GAAAK,EAAA2D,MAAAhE,EAAAgE,MACAtD,MAAAiZ,iBAAA,QAoBA,oBAAAzG,UAAA,mBAAAA,SAAA3B,OACA8B,EAAA,SAAAtL,GACAmL,QAAA3B,KAAAxJ,IAEA3E,EAAAS,QAAA7C,EAAA8C,OAAAkW,MACA3G,EAAA,SAAAtL,EAAAkL,GACA,GAAAgH,GAAAhH,EAAA,QAAA,OACAC,SAAA3B,KAAA0I,EAAAlS,EAAA,WAEA3E,EAAAS,QAAA,iBAAA,GAAAnD,QAAA,QACA2S,EAAA,SAAAtL,EAAAkL,GACAC,QAAA3B,KAAA,KAAAxJ,EACAkL,EAAA,oBAAA,gBAKA,IAAAxB,KACAC,SAAAA,EACAtE,iBAAA,EACAvD,cAAA,EACAkP,YAAA,EAKA,OAFA3L,IAAAnM,EAAAmM,mBAGAA,gBAAA,WACA,MAAAqE,IAAArE,iBAEAsE,SAAA,WACA,MAAAD,IAAAC,UAEA7H,aAAA,WACA,MAAA4H,IAAA5H,cAEAkP,WAAA,WACA,MAAAtH,IAAAsH,YAEA1S,sBAAA,WACA,MAAAA,KAEAE,mBAAA,WACA,MAAAA,IAEA4J,sBAAAA,EACAwE,UAAAA,EACApD,KAAAA,EACAF,WAAAA,EACApE,cAAAA,EACAiK,aAAAA,EACAY,gBAAAA,MAIAoC,WAAA,GAAAnV,SAAA,KAAAoV,IAAA,SAAAjZ,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,GACA,QAAAmZ,KACA,MAAAta,MAAAkH,MAEA,QAAAqT,KACA,KAAAva,MAAA2T,OAGAxS,EAAAW,UAAA,UACAX,EAAAW,UAAA0Y,WAAA,SAAAtT,GAEA,MADAA,aAAA/F,IAAA+F,EAAA6O,8BACA/V,KAAA8F,MACAwU,EAAAzT,OAAAA,QAAAK,MAAAA,GAAAL,SAGA1F,EAAAW,UAAA,SACAX,EAAAW,UAAA2Y,UAAA,SAAA9G,GACA,MAAA3T,MAAA8F,MACAyU,EAAA1T,OAAAA,QAAA8M,OAAAA,GAAA9M,SAGA1F,EAAAW,UAAA4Y,WAAA,SAAA/G,GACA,GAAAtP,UAAArD,QAAA,EACA,MAAAhB,MAAA8F,MACAe,OAAA0T,EAAA1T,QAAA8M,OAAAA,GAAA9M,OAEA,IAAA8T,GAAAtW,UAAA,GACA8U,EAAA,WAAA,KAAAwB,GACA,OAAA3a,MAAA4a,OAAAjH,EAAAwF,IAIAhY,EAAAW,UAAA+Y,YAAA,SAAA3T,GACA,GAAA7C,UAAArD,QAAA,EAEA,MADAkG,aAAA/F,IAAA+F,EAAA6O,8BACA/V,KAAA8F,MACAe,OAAAyT,EAAAzT,QAAAK,MAAAA,GAAAL,OAEA,IAAAiU,GAAAzW,UAAA,EACAyW,aAAA3Z,IAAA2Z,EAAA/E,6BACA,IAAAoD,GAAA,WAAA,MAAA2B,GACA,OAAA9a,MAAA4a,OAAA1T,EAAAiS,UAKA4B,IAAA,SAAA3Z,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAgE,GAIA,QAAA6V,KACA,MAAAC,GAAAjb,MAGA,QAAAkb,GAAA5Z,EAAAuB,GACA,MAAAsY,GAAA7Z,EAAAuB,EAAAsC,EAAAA,GARA,GAAAgW,GAAAha,EAAAia,OACAH,EAAA9Z,EAAAka,GAUAla,GAAAW,UAAAwZ,KAAA,SAAAzY,GACA,MAAAsY,GAAAnb,KAAA6C,EAAAsC,EAAA,GACAW,MAAAkV,EAAAnU,OAAAA,OAAA7G,KAAA6G,SAGA1F,EAAAW,UAAAyZ,UAAA,SAAA1Y,GACA,MAAAsY,GAAAnb,KAAA6C,EAAAsC,EAAAA,IAGAhE,EAAAma,KAAA,SAAAha,EAAAuB,GACA,MAAAsY,GAAA7Z,EAAAuB,EAAAsC,EAAA,GACAW,MAAAkV,EAAAnU,OAAAA,OAAAvF,EAAAuF,SAGA1F,EAAAoa,UAAAL,QAIAM,IAAA,SAAApa,EAAA3B,EAAAD,GACA,YAOA,SAAAic,GAAAC,EAAAC,GACA,QAAAC,GAAA3T,GACA,MAAAjI,gBAAA4b,IACAzL,EAAAnQ,KAAA,UACA,gBAAAiI,GAAAA,EAAA0T,GACAxL,EAAAnQ,KAAA,OAAA0b,QACA9a,MAAA2T,kBACA3T,MAAA2T,kBAAAvU,KAAAA,KAAA6b,aAEAjb,MAAAG,KAAAf,QAPA,GAAA4b,GAAA3T,GAWA,MADAmR,GAAAwC,EAAAhb,OACAgb,EAmDA,QAAAE,GAAA7T,GACA,MAAAjI,gBAAA8b,IAEA3L,EAAAnQ,KAAA,OAAA,oBACAmQ,EAAAnQ,KAAA,UAAAiI,GACAjI,KAAA+b,MAAA9T,EACAjI,KAAA,eAAA,OAEAiI,YAAArH,QACAuP,EAAAnQ,KAAA,UAAAiI,EAAAA,SACAkI,EAAAnQ,KAAA,QAAAiI,EAAA/D,QACAtD,MAAA2T,mBACA3T,MAAA2T,kBAAAvU,KAAAA,KAAA6b,eAVA,GAAAC,GAAA7T,GAxEA,GAsBA+T,GAAAC,EAtBAC,EAAA9a,EAAA,SACA+a,EAAAD,EAAAE,OACA9Y,EAAAlC,EAAA,UACAgY,EAAA9V,EAAA8V,SACAjJ,EAAA7M,EAAA6M,kBAmBA2B,EAAA2J,EAAA,UAAA,WACAY,EAAAZ,EAAA,oBAAA,sBACAa,EAAAb,EAAA,eAAA,iBACAc,EAAAd,EAAA,iBAAA,kBACA,KACAO,EAAA5T,UACA6T,EAAAO,WACA,MAAAtc,GACA8b,EAAAP,EAAA,YAAA,cACAQ,EAAAR,EAAA,aAAA,eAMA,IAAA,GAHAgB,GAAA,sHACA5L,MAAA,KAEAlQ,EAAA,EAAAA,EAAA8b,EAAAzb,SAAAL,EACA,kBAAA+b,OAAA5a,UAAA2a,EAAA9b,MACA4b,EAAAza,UAAA2a,EAAA9b,IAAA+b,MAAA5a,UAAA2a,EAAA9b,IAIAub,GAAAS,eAAAJ,EAAAza,UAAA,UACAoF,MAAA,EACA0V,cAAA,EACAC,UAAA,EACAC,YAAA,IAEAP,EAAAza,UAAA,eAAA,CACA,IAAAib,GAAA,CACAR,GAAAza,UAAAqG,SAAA,WACA,GAAA6U,GAAAN,MAAA,EAAAK,EAAA,GAAA3M,KAAA,KACA7O,EAAA,KAAAyb,EAAA,sBACAD,KACAC,EAAAN,MAAA,EAAAK,EAAA,GAAA3M,KAAA,IACA,KAAA,GAAAzP,GAAA,EAAAA,EAAAX,KAAAgB,SAAAL,EAAA,CAGA,IAAA,GAFAmT,GAAA9T,KAAAW,KAAAX,KAAA,4BAAAA,KAAAW,GAAA,GACAsc,EAAAnJ,EAAAjD,MAAA,MACAhE,EAAA,EAAAA,EAAAoQ,EAAAjc,SAAA6L,EACAoQ,EAAApQ,GAAAmQ,EAAAC,EAAApQ,EAEAiH,GAAAmJ,EAAA7M,KAAA,MACA7O,GAAAuS,EAAA,KAGA,MADAiJ,KACAxb,GAmBA6X,EAAA0C,EAAAlb,MAEA,IAAAsc,GAAAtc,MAAA,sBACAsc,KACAA,EAAAf,GACAE,kBAAAA,EACAC,aAAAA,EACAR,iBAAAA,EACAqB,eAAArB,EACAS,eAAAA,IAEAL,EAAAS,eAAA/b,MAAA,0BACAsG,MAAAgW,EACAL,UAAA,EACAC,YAAA,EACAF,cAAA,KAIAnd,EAAAD,SACAoB,MAAAA,MACAwH,UAAA4T,EACAQ,WAAAP,EACAI,kBAAAa,EAAAb,kBACAP,iBAAAoB,EAAApB,iBACAQ,aAAAY,EAAAZ,aACAC,eAAAW,EAAAX,eACAzK,QAAAA,KAGA/E,QAAA,GAAA9H,SAAA,KAAAmY,IAAA,SAAAhc,EAAA3B,EAAAD,GACA,GAAA6d,GAAA,WACA,YACA,OAAAxW,UAAA7G,OAGA,IAAAqd,EACA5d,EAAAD,SACA4c,OAAAzU,OAAAyU,OACAO,eAAAhV,OAAAgV,eACAW,cAAA3V,OAAA4V,yBACA5Q,KAAAhF,OAAAgF,KACA6Q,MAAA7V,OAAA8V,oBACAC,eAAA/V,OAAA+V,eACA9R,QAAA8Q,MAAA9Q,QACAyR,MAAAA,EACAM,mBAAA,SAAA5W,EAAA6W,GACA,GAAAC,GAAAlW,OAAA4V,yBAAAxW,EAAA6W,EACA,SAAAC,IAAAA,EAAAhB,WAAAgB,EAAAC,WAGA,CACA,GAAAC,MAAAC,eACAlK,KAAA3L,SACA8V,KAAApC,YAAA/Z,UAEAoc,EAAA,SAAA3d,GACA,GAAAgB,KACA,KAAA,GAAAuL,KAAAvM,GACAwd,EAAAhd,KAAAR,EAAAuM,IACAvL,EAAAyB,KAAA8J,EAGA,OAAAvL,IAGA4c,EAAA,SAAA5d,EAAAuM,GACA,OAAA5F,MAAA3G,EAAAuM,KAGAsR,EAAA,SAAA7d,EAAAuM,EAAAuR,GAEA,MADA9d,GAAAuM,GAAAuR,EAAAnX,MACA3G,GAGA+d,EAAA,SAAAvX,GACA,MAAAA,IAGAwX,EAAA,SAAAxX,GACA,IACA,MAAAY,QAAAZ,GAAA8U,YAAA/Z,UAEA,MAAA5B,GACA,MAAA+d,KAIAO,EAAA,SAAAzX,GACA,IACA,MAAA,mBAAA+M,EAAA/S,KAAAgG,GAEA,MAAA7G,GACA,OAAA,GAIAT,GAAAD,SACAoM,QAAA4S,EACA7R,KAAAuR,EACAV,MAAAU,EACAvB,eAAAyB,EACAd,cAAAa,EACA/B,OAAAkC,EACAZ,eAAAa,EACAlB,MAAAA,EACAM,mBAAA,WACA,OAAA,UAKAc,IAAA,SAAArd,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAgE,GACA,GAAAuZ,GAAAvd,EAAAwd,GAEAxd,GAAAW,UAAA8c,OAAA,SAAA/b,EAAAgc,GACA,MAAAH,GAAA1e,KAAA6C,EAAAgc,EAAA1Z,IAGAhE,EAAAyd,OAAA,SAAAtd,EAAAuB,EAAAgc,GACA,MAAAH,GAAApd,EAAAuB,EAAAgc,EAAA1Z,UAIA2Z,IAAA,SAAA1d,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAiE,GAKA,QAAA2Z,GAAAtd,EAAAud,EAAA7F,GACAnZ,KAAAyB,QAAAA,EACAzB,KAAAgf,KAAAA,EACAhf,KAAAmZ,QAAAA,EACAnZ,KAAAif,QAAA,EACAjf,KAAAkf,cAAA,KAOA,QAAAC,GAAAC,GACApf,KAAAof,eAAAA,EAOA,QAAAC,GAAAhR,EAAAsF,GACA,MAAA,OAAAtF,EAAA6Q,gBACA7a,UAAArD,OAAA,EACAqN,EAAA6Q,cAAAzZ,QAAAkO,GAEAtF,EAAA6Q,cAAAnU,UAEAsD,EAAA6Q,cAAA,MACA,GAKA,QAAAI,KACA,MAAAF,GAAAre,KAAAf,KAAAA,KAAAyB,QAAAkF,UAAA2P,iBAEA,QAAAiJ,GAAA5L,GACA,IAAA0L,EAAArf,KAAA2T,GAEA,MADAhK,GAAAzJ,EAAAyT,EACAhK,EAEA,QAAAyV,GAAAI,GACA,GAAA/d,GAAAzB,KAAAyB,QACA0X,EAAAnZ,KAAAmZ,OAEA,KAAAnZ,KAAAif,OAAA,CACAjf,KAAAif,QAAA,CACA,IAAA1d,GAAAvB,KAAAyf,mBACAtG,EAAApY,KAAAU,EAAA+E,eACA2S,EAAApY,KAAAU,EAAA+E,cAAAgZ,EACA,IAAA3Y,SAAAtF,EAAA,CACAE,EAAA2U,0BACA,IAAA1P,GAAAtB,EAAA7D,EAAAE,EACA,IAAAiF,YAAAvF,GAAA,CACA,GAAA,MAAAnB,KAAAkf,cAAA,CACA,GAAAxY,EAAA4E,eAAA,CACA,GAAAqI,GACA,GAAA0I,GAAA,6BAGA,OAFA5a,GAAAoK,kBAAA8H,GACAhK,EAAAzJ,EAAAyT,EACAhK,EACAjD,EAAA2E,aACA3E,EAAAoI,4BACA,GAAAqQ,GAAAnf,OAGA,MAAA0G,GAAAZ,MACAwZ,EAAAC,EAAA1Y,OAAA7G,KAAA6G,UAKA,MAAApF,GAAAie,cACAL,EAAArf,MACA2J,EAAAzJ,EAAAsf,EACA7V,IAEA0V,EAAArf,MACAwf,GAlFA,GAAAlc,GAAAlC,EAAA,UACAib,EAAAlb,EAAAkb,kBACA1S,EAAArG,EAAAqG,QAyGA,OA/FAoV,GAAAjd,UAAA2d,iBAAA,WACA,MAAA,KAAAzf,KAAAgf,MAOAG,EAAArd,UAAAgK,iBAAA,WACAuT,EAAArf,KAAAof,iBAiEAje,EAAAW,UAAA6d,aAAA,SAAAxG,EAAA6F,EAAAY,EAAAL,GACA,MAAA,kBAAApG,GAAAnZ,KAAA6f,OACA7f,KAAA8F,MAAA8Z,EACAL,EACA1Y,OACA,GAAAkY,GAAA/e,KAAAgf,EAAA7F,GACAtS,SAGA1F,EAAAW,UAAAge,OACA3e,EAAAW,UAAA,WAAA,SAAAqX,GACA,MAAAnZ,MAAA2f,aAAAxG,EACA,EACAiG,EACAA,IAGAje,EAAAW,UAAAie,IAAA,SAAA5G,GACA,MAAAnZ,MAAA2f,aAAAxG,EAAA,EAAAiG,IAGAL,KAGA9Z,SAAA,KAAA+a,IAAA,SAAA5e,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EACAsI,EACAtE,EACAC,EACA6a,EACA5a,GAQA,QAAA6a,GAAAhZ,EAAAiZ,EAAAC,GACA,IAAA,GAAAzf,GAAA,EAAAA,EAAAwf,EAAAnf,SAAAL,EAAA,CACAyf,EAAA1S,cACA,IAAA0H,GAAA1L,EAAAyW,EAAAxf,IAAAuG,EAEA,IADAkZ,EAAAzS,cACAyH,IAAAzL,EAAA,CACAyW,EAAA1S,cACA,IAAAnM,GAAAJ,EAAAyN,OAAAjF,EAAAzJ,EAEA,OADAkgB,GAAAzS,cACApM,EAEA,GAAAmF,GAAAtB,EAAAgQ,EAAAgL,EACA,IAAA1Z,YAAAvF,GAAA,MAAAuF,GAEA,MAAA,MAGA,QAAA2Z,GAAAC,EAAAxd,EAAAyd,EAAArc,GACA,GAAAmB,EAAA0E,eAAA,CACA,GAAAyW,GAAA,GAAArf,GAAAgE,GACAsb,EAAAzgB,KAAAygB,gBAAA,GAAAtf,GAAAgE,EACAnF,MAAA0gB,SAAAF,EAAAV,OAAA,WACA,MAAAW,KAEAD,EAAAvJ,qBACAuJ,EAAA1Z,aAAA9G,UACA,CACA,GAAAyB,GAAAzB,KAAA0gB,SAAA,GAAAvf,GAAAgE,EACA1D,GAAAwV,qBAEAjX,KAAA2gB,OAAAzc,EACAlE,KAAA4gB,mBAAAN,EACAtgB,KAAA6gB,UAAA/d,EACA9C,KAAA8gB,WAAAja,OACA7G,KAAA+gB,eAAA,kBAAAR,IACAA,GAAAS,OAAAb,GACAA,EACAngB,KAAAihB,gBAAA,KACAjhB,KAAAkhB,oBAAA,EA7CA,GAAAC,GAAA/f,EAAA,YACAgH,EAAA+Y,EAAA/Y,UACA9E,EAAAlC,EAAA,UACAuI,EAAArG,EAAAqG,SACAD,EAAApG,EAAAoG,SACAyW,IA0CA7c,GAAA8V,SAAAiH,EAAAJ,GAEAI,EAAAve,UAAAsf,YAAA,WACA,MAAA,QAAAphB,KAAA0gB,UAGAL,EAAAve,UAAAuf,SAAA,WACArhB,KAAA0gB,SAAA1gB,KAAA8gB,WAAA,KACAzb,EAAA0E,gBAAA,OAAA/J,KAAAygB,kBACAzgB,KAAAygB,gBAAAa,WACAthB,KAAAygB,gBAAA,OAIAJ,EAAAve,UAAAyf,kBAAA,WACA,IAAAvhB,KAAAohB,cAAA,CACA,GAEAhM,GAFAoM,EAAA,mBAAAxhB,MAAA8gB,WAAA,SAGA,IAAAU,EAUAxhB,KAAA0gB,SAAAhT,eACA0H,EAAA1L,EAAA1J,KAAA8gB,WAAA,WAAA/f,KAAAf,KAAA8gB,WACAja,QACA7G,KAAA0gB,SAAA/S,kBAbA,CACA,GAAAgG,GAAA,GAAAxS,GAAAkb,kBACA,+BACAlb,GAAAsgB,UAAAC,eAAA/N,EACA3T,KAAA0gB,SAAA7U,kBAAA8H,GACA3T,KAAA0gB,SAAAhT,eACA0H,EAAA1L,EAAA1J,KAAA8gB,WAAA,UAAA/f,KAAAf,KAAA8gB,WACAnN,GACA3T,KAAA0gB,SAAA/S,cAOA3N,KAAAkhB,oBAAA,EACAlhB,KAAAihB,gBAAA,KACAjhB,KAAA2hB,UAAAvM,KAGAiL,EAAAve,UAAA8f,kBAAA,SAAA1a,GACAlH,KAAAihB,gBAAA,KACAjhB,KAAA0gB,SAAAhT,cACA,IAAA0H,GAAA1L,EAAA1J,KAAA8gB,WAAAe,MAAA9gB,KAAAf,KAAA8gB,WAAA5Z,EACAlH,MAAA0gB,SAAA/S,cACA3N,KAAA2hB,UAAAvM,IAGAiL,EAAAve,UAAAggB,iBAAA,SAAAnO,GACA3T,KAAAihB,gBAAA,KACAjhB,KAAA0gB,SAAA7U,kBAAA8H,GACA3T,KAAA0gB,SAAAhT,cACA,IAAA0H,GAAA1L,EAAA1J,KAAA8gB,WAAA,UACA/f,KAAAf,KAAA8gB,WAAAnN,EACA3T,MAAA0gB,SAAA/S,cACA3N,KAAA2hB,UAAAvM,IAGAiL,EAAAve,UAAAgK,iBAAA,WACA,GAAA9L,KAAAihB,0BAAA9f,GAAA,CACA,GAAAM,GAAAzB,KAAAihB,eACAjhB,MAAAihB,gBAAA,KACAxf,EAAAqI,WAIAuW,EAAAve,UAAAL,QAAA,WACA,MAAAzB,MAAA0gB,UAGAL,EAAAve,UAAAigB,KAAA,WACA/hB,KAAA8gB,WAAA9gB,KAAA4gB,mBAAA7f,KAAAf,KAAA6gB,WACA7gB,KAAA6gB,UACA7gB,KAAA4gB,mBAAA/Z,OACA7G,KAAA4hB,kBAAA/a,SAGAwZ,EAAAve,UAAA6f,UAAA,SAAAvM,GACA,GAAA3T,GAAAzB,KAAA0gB,QACA,IAAAtL,IAAAzL,EAEA,MADA3J,MAAAqhB,WACArhB,KAAAkhB,mBACAzf,EAAAqI,SAEArI,EAAAugB,gBAAA5M,EAAAlV,GAAA,EAIA,IAAAgH,GAAAkO,EAAAlO,KACA,IAAAkO,EAAA6M,QAAA,EAEA,MADAjiB,MAAAqhB,WACArhB,KAAAkhB,mBACAzf,EAAAqI,SAEArI,EAAAyE,iBAAAgB,EAGA,IAAAR,GAAAtB,EAAA8B,EAAAlH,KAAA0gB,SACA,MAAAha,YAAAvF,MACAuF,EACAwZ,EAAAxZ,EACA1G,KAAA+gB,eACA/gB,KAAA0gB,UACA,OAAAha,GAQA,WAPA1G,MAAA8hB,iBACA,GAAA1Z,GACA,oGAAA6K,QAAA,KAAA/L,GACA,oBACAlH,KAAA2gB,OAAA9P,MAAA,MAAA5H,MAAA,MAAAmH,KAAA;AAMA1J,EAAAA,EAAAC,SACA,IAAAub,GAAAxb,EAAAT,SAEA,MAAA,SAAAic,IACAliB,KAAAihB,gBAAAva,EACAA,EAAAyb,OAAAniB,KAAA,OACA,KAAA,SAAAkiB,GACA/gB,EAAA0I,OAAArF,OACAxE,KAAA4hB,kBAAA5hB,KAAA0G,EAAAoU,UAEA,KAAA,SAAAoH,GACA/gB,EAAA0I,OAAArF,OACAxE,KAAA8hB,iBAAA9hB,KAAA0G,EAAAiU,WAGA3a,KAAAuhB,qBAKApgB,EAAAsgB,UAAA,SAAAnB,EAAAzB,GACA,GAAA,kBAAAyB,GACA,KAAA,IAAAlY,GAAA,yEAEA,IAAAmY,GAAA5Y,OAAAkX,GAAA0B,aACA6B,EAAA/B,EACAnc,GAAA,GAAAtD,QAAAsD,KACA,OAAA,YACA,GAAAme,GAAA/B,EAAA/X,MAAAvI,KAAAqE,WACAie,EAAA,GAAAF,IAAAvb,SAAAA,QAAA0Z,EACArc,GACA3C,EAAA+gB,EAAA7gB,SAGA,OAFA6gB,GAAAxB,WAAAuB,EACAC,EAAAV,kBAAA/a,QACAtF,IAIAJ,EAAAsgB,UAAAc,gBAAA,SAAA1f,GACA,GAAA,kBAAAA,GACA,KAAA,IAAAuF,GAAA,gCAAA9E,EAAA4E,YAAArF,GAEAsd,GAAAnd,KAAAH,IAGA1B,EAAAmhB,MAAA,SAAAhC,GAEA,GADAjb,EAAAkM,WAAA,kBAAA,uBACA,kBAAA+O,GACA,MAAA7W,GAAA,yEAEA,IAAA6Y,GAAA,GAAAjC,GAAAC,EAAAtgB,MACAuB,EAAA+gB,EAAA7gB,SAEA,OADA6gB,GAAAP,KAAA5gB,EAAAmhB,OACA/gB,MAIA6Y,WAAA,GAAAnV,SAAA,KAAAud,IAAA,SAAAphB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QACA,SAAA2B,EAAAqI,EAAApE,EAAAD,EAAAyE,EACA+L,GACA,GAAArS,GAAAlC,EAAA,SACAkC,GAAAwF,YACAxF,EAAAoG,SACApG,EAAAqG,QAuGAxI,GAAAiP,KAAA,WACA,GACAvN,GADA4f,EAAApe,UAAArD,OAAA,CAEA,IAAAyhB,EAAA,GAAA,kBAAApe,WAAAoe,GAAA,CACA5f,EAAAwB,UAAAoe,EAGA,IAAAlhB,GA4CA,GAAAyH,MAAAC,MAAAlI,KAAAsD,UACAxB,IAAAmG,EAAAV,KACA,IAAA/G,GAAA,GAAAiI,GAAAR,GAAAvH,SACA,OAAAoF,UAAAhE,EAAAtB,EAAAmhB,OAAA7f,GAAAtB,MAKA0D,SAAA,KAAA0d,IAAA,SAAAvhB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EACAqI,EACAC,EACArE,EACAD,EACAE,GAOA,QAAAud,GAAAthB,EAAAuB,EAAAggB,EAAAC,GACA9iB,KAAA+iB,aAAAzhB,GACAtB,KAAA0gB,SAAAzJ,oBACA,IAAAL,GAAAjB,GACA3V,MAAAgjB,UAAA,OAAApM,EAAA/T,EAAAS,EAAAuT,WAAAD,EAAA/T,GACA7C,KAAAijB,iBAAAH,IAAA3d,EACA,GAAAuX,OAAA1c,KAAAgB,UACA,KACAhB,KAAAkjB,OAAAL,EACA7iB,KAAAmjB,UAAA,EACAnjB,KAAAojB,UACAxZ,EAAApF,OAAAxE,KAAAqjB,WAAArjB,KAAA6G,QA6GA,QAAA8X,GAAArd,EAAAuB,EAAAgc,EAAAiE,GACA,GAAA,kBAAAjgB,GACA,MAAA4G,GAAA,gCAAAnG,EAAA4E,YAAArF,GAGA,IAAAggB,GAAA,CACA,IAAAhc,SAAAgY,EAAA,CACA,GAAA,gBAAAA,IAAA,OAAAA,EAQA,MAAA1d,GAAAyN,OAAA,GAAAxG,WACA,gDACA9E,EAAA4E,YAAA2W,IATA,IAAA,gBAAAA,GAAAyE,YACA,MAAAniB,GAAAyN,OACA,GAAAxG,WAAA,4CACA9E,EAAA4E,YAAA2W,EAAAyE,cAEAT,GAAAhE,EAAAyE,YASA,MAFAT,GAAA,gBAAAA,IACAU,SAAAV,IAAAA,GAAA,EAAAA,EAAA,EACA,GAAAD,GAAAthB,EAAAuB,EAAAggB,EAAAC,GAAArhB,UApJA,GAAAkU,GAAAxU,EAAAyU,WACAtS,EAAAlC,EAAA,UACAsI,EAAApG,EAAAoG,SACAC,EAAArG,EAAAqG,SACAC,EAAAzI,EAAA0I,MAeAvG,GAAA8V,SAAAwJ,EAAApZ,GAEAoZ,EAAA9gB,UAAAuhB,WAAA,WACArjB,KAAAwjB,OAAA3c,YAGA+b,EAAA9gB,UAAA2hB,MAAA,aAEAb,EAAA9gB,UAAA8f,kBAAA,SAAA1a,EAAAwB,GACA,GAAAgb,GAAA1jB,KAAA2jB,QACA3iB,EAAAhB,KAAAgB,SACA4iB,EAAA5jB,KAAAijB,iBACAJ,EAAA7iB,KAAAkjB,MAEA,IAAAxa,EAAA,GAGA,GAFAA,EAAAA,KAAA,EACAgb,EAAAhb,GAAAxB,EACA2b,GAAA,IACA7iB,KAAAmjB,YACAnjB,KAAA2E,cACA3E,KAAAohB,eAAA,OAAA,MAEA,CACA,GAAAyB,GAAA,GAAA7iB,KAAAmjB,WAAAN,EAGA,MAFAa,GAAAhb,GAAAxB,EACAlH,KAAAojB,OAAApgB,KAAA0F,IACA,CAEA,QAAAkb,IAAAA,EAAAlb,GAAAxB,EAEA,IAAAzF,GAAAzB,KAAA0gB,SACAmD,EAAA7jB,KAAAgjB,UACAlgB,EAAArB,EAAA+E,aACA/E,GAAAiM,cACA,IAAAnM,GAAAmI,EAAAma,GAAA9iB,KAAA+B,EAAAoE,EAAAwB,EAAA1H,GACAuP,EAAA9O,EAAAkM,aAOA,IANAtI,EAAAgL,sBACA9O,EACAgP,EACA,OAAAqT,EAAA,iBAAA,cACAniB,GAEAF,IAAAoI,EAEA,MADA3J,MAAAyF,QAAAlE,EAAArB,IACA,CAGA,IAAAwG,GAAAtB,EAAA7D,EAAAvB,KAAA0gB,SACA,IAAAha,YAAAvF,GAAA,CACAuF,EAAAA,EAAAC,SACA,IAAAub,GAAAxb,EAAAT,SAEA,IAAA,KAAA,SAAAic,GAIA,MAHAW,IAAA,GAAA7iB,KAAAmjB,YACAO,EAAAhb,GAAAhC,EACAA,EAAAyb,OAAAniB,MAAA0I,EAAA,QACA,CACA,IAAA,KAAA,SAAAwZ,GAEA,MAAA,MAAA,SAAAA,IACAliB,KAAAyF,QAAAiB,EAAAiU,YACA,IAEA3a,KAAA+K,WACA,EANAxJ,GAAAmF,EAAAoU,SASA4I,EAAAhb,GAAAnH,EAEA,GAAAuiB,KAAA9jB,KAAA+jB,cACA,OAAAD,IAAA9iB,IACA,OAAA4iB,EACA5jB,KAAA8iB,QAAAY,EAAAE,GAEA5jB,KAAAgkB,SAAAN,IAEA,IAKAd,EAAA9gB,UAAA6C,YAAA,WAIA,IAHA,GAAAC,GAAA5E,KAAAojB,OACAP,EAAA7iB,KAAAkjB,OACAQ,EAAA1jB,KAAA2jB,QACA/e,EAAA5D,OAAA,GAAAhB,KAAAmjB,UAAAN,GAAA,CACA,GAAA7iB,KAAAohB,cAAA,MACA,IAAA1Y,GAAA9D,EAAA0D,KACAtI,MAAA4hB,kBAAA8B,EAAAhb,GAAAA,KAIAka,EAAA9gB,UAAAghB,QAAA,SAAAmB,EAAAP,GAIA,IAAA,GAHAQ,GAAAR,EAAA1iB,OACAO,EAAA,GAAAmb,OAAAwH,GACArX,EAAA,EACAlM,EAAA,EAAAA,EAAAujB,IAAAvjB,EACAsjB,EAAAtjB,KAAAY,EAAAsL,KAAA6W,EAAA/iB,GAEAY,GAAAP,OAAA6L,EACA7M,KAAAgkB,SAAAziB,IAGAqhB,EAAA9gB,UAAA8hB,gBAAA,WACA,MAAA5jB,MAAAijB,kBA4BA9hB,EAAAW,UAAA6c,IAAA,SAAA9b,EAAAgc,GACA,MAAAF,GAAA3e,KAAA6C,EAAAgc,EAAA,OAGA1d,EAAAwd,IAAA,SAAArd,EAAAuB,EAAAgc,EAAAiE,GACA,MAAAnE,GAAArd,EAAAuB,EAAAgc,EAAAiE,OAMA7d,SAAA,KAAAkf,IAAA,SAAA/iB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QACA,SAAA2B,EAAAgE,EAAAC,EAAAqE,EAAApE,GACA,GAAA/B,GAAAlC,EAAA,UACAsI,EAAApG,EAAAoG,QAEAvI,GAAA+W,OAAA,SAAArV,GACA,GAAA,kBAAAA,GACA,KAAA,IAAA1B,GAAAiH,UAAA,gCAAA9E,EAAA4E,YAAArF,GAEA,OAAA,YACA,GAAAtB,GAAA,GAAAJ,GAAAgE,EACA5D,GAAA0V,qBACA1V,EAAAmM,cACA,IAAAxG,GAAAwC,EAAA7G,GAAA0F,MAAAvI,KAAAqE,WACAkM,EAAAhP,EAAAoM,aAIA,OAHAtI,GAAAgL,sBACAnJ,EAAAqJ,EAAA,iBAAAhP,GACAA,EAAA6iB,sBAAAld,GACA3F,IAIAJ,EAAAkjB,QAAAljB,EAAA,OAAA,SAAA0B,GACA,GAAA,kBAAAA,GACA,MAAA4G,GAAA,gCAAAnG,EAAA4E,YAAArF,GAEA,IAAAtB,GAAA,GAAAJ,GAAAgE,EACA5D,GAAA0V,qBACA1V,EAAAmM,cACA,IAAAxG,EACA,IAAA7C,UAAArD,OAAA,EAAA,CACAqE,EAAAkM,WAAA,gDACA,IAAAxO,GAAAsB,UAAA,GACAgK,EAAAhK,UAAA,EACA6C,GAAA5D,EAAAsI,QAAA7I,GAAA2G,EAAA7G,GAAA0F,MAAA8F,EAAAtL,GACA2G,EAAA7G,GAAA9B,KAAAsN,EAAAtL,OAEAmE,GAAAwC,EAAA7G,IAEA,IAAA0N,GAAAhP,EAAAoM,aAIA,OAHAtI,GAAAgL,sBACAnJ,EAAAqJ,EAAA,cAAAhP,GACAA,EAAA6iB,sBAAAld,GACA3F,GAGAJ,EAAAW,UAAAsiB,sBAAA,SAAAld,GACAA,IAAA5D,EAAAqG,SACA3J,KAAAgiB,gBAAA9a,EAAAhH,GAAA,GAEAF,KAAAkG,iBAAAgB,GAAA,OAKAjC,SAAA,KAAAqf,IAAA,SAAAljB,EAAA3B,EAAAD,GACA,YAOA,SAAA+kB,GAAAxd,GACA,MAAAA,aAAAnG,QACAsb,EAAAwB,eAAA3W,KAAAnG,MAAAkB,UAIA,QAAA0iB,GAAAzd,GACA,GAAAxF,EACA,IAAAgjB,EAAAxd,GAAA,CACAxF,EAAA,GAAAua,GAAA/U,GACAxF,EAAAiN,KAAAzH,EAAAyH,KACAjN,EAAA0G,QAAAlB,EAAAkB,QACA1G,EAAA2C,MAAA6C,EAAA7C,KAEA,KAAA,GADAyI,GAAAuP,EAAAvP,KAAA5F,GACApG,EAAA,EAAAA,EAAAgM,EAAA3L,SAAAL,EAAA,CACA,GAAAmM,GAAAH,EAAAhM,EACA8jB,GAAAxT,KAAAnE,KACAvL,EAAAuL,GAAA/F,EAAA+F,IAGA,MAAAvL,GAGA,MADA+B,GAAAohB,+BAAA3d,GACAA,EAGA,QAAA4d,GAAAljB,EAAAmjB,GACA,MAAA,UAAA7K,EAAA7S,GACA,GAAA,OAAAzF,EAAA,CACA,GAAAsY,EAAA,CACA,GAAA8K,GAAAL,EAAAM,EAAA/K,GACAtY,GAAAoK,kBAAAgZ,GACApjB,EAAAgE,QAAAof,OACA,IAAAD,EAEA,CACA,GAAA5b,MAAAC,MAAAlI,KAAAsD,UAAA,EACA5C,GAAA6f,SAAAtY,OAHAvH,GAAA6f,SAAApa,EAKAzF,GAAA,OA7CA,GAAA6B,GAAAlC,EAAA,UACA0jB,EAAAxhB,EAAAwhB,iBACA3D,EAAA/f,EAAA,YACA0a,EAAAqF,EAAArF,iBACAI,EAAA9a,EAAA,SAOAqjB,EAAA,gCAsCAhlB,GAAAD,QAAAmlB,IAEAvK,WAAA,GAAArN,QAAA,GAAA9H,SAAA,KAAA8f,IAAA,SAAA3jB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,GAMA,QAAA6jB,GAAAC,EAAAC,GACA,GAAAzjB,GAAAzB,IACA,KAAAsD,EAAAsI,QAAAqZ,GAAA,MAAAE,GAAApkB,KAAAU,EAAAwjB,EAAAC,EACA,IAAA3jB,GACAmI,EAAAwb,GAAA3c,MAAA9G,EAAA+E,eAAA,MAAAwa,OAAAiE,GACA1jB,KAAAoI,GACAC,EAAAxF,WAAA7C,EAAArB,GAIA,QAAAilB,GAAAF,EAAAC,GACA,GAAAzjB,GAAAzB,KACA8C,EAAArB,EAAA+E,cACAjF,EAAAsF,SAAAoe,EACAvb,EAAAwb,GAAAnkB,KAAA+B,EAAA,MACA4G,EAAAwb,GAAAnkB,KAAA+B,EAAA,KAAAmiB,EACA1jB,KAAAoI,GACAC,EAAAxF,WAAA7C,EAAArB,GAGA,QAAAklB,GAAAzR,EAAAuR,GACA,GAAAzjB,GAAAzB,IACA,KAAA2T,EAAA,CACA,GAAA0R,GAAA,GAAAzkB,OAAA+S,EAAA,GACA0R,GAAAtJ,MAAApI,EACAA,EAAA0R,EAEA,GAAA9jB,GAAAmI,EAAAwb,GAAAnkB,KAAAU,EAAA+E,cAAAmN,EACApS,KAAAoI,GACAC,EAAAxF,WAAA7C,EAAArB,GAlCA,GAAAoD,GAAAlC,EAAA,UACAwI,EAAAzI,EAAA0I,OACAH,EAAApG,EAAAoG,SACAC,EAAArG,EAAAqG,QAmCAxI,GAAAW,UAAAwjB,WAAAnkB,EAAAW,UAAAyjB,QAAA,SAAAL,EACArG,GACA,GAAA,kBAAAqG,GAAA,CACA,GAAAM,GAAAL,CACAte,UAAAgY,GAAAlX,OAAAkX,GAAA6D,SACA8C,EAAAR,GAEAhlB,KAAA8F,MACA0f,EACAJ,EACAve,OACA7G,KACAklB,GAGA,MAAAllB,UAIAiF,SAAA,KAAAwgB,IAAA,SAAArkB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,WAUA,QAAAygB,MAgDA,QAAAyF,GAAA3lB,EAAA4O,GACA,GAAA,kBAAAA,GACA,KAAA,IAAAvG,GAAA,gCAAA9E,EAAA4E,YAAAyG,GAEA,IAAA5O,EAAA8b,cAAA1a,EACA,KAAA,IAAAiH,GAAA,wFAIA,QAAAjH,GAAAwN,GACA3O,KAAAiG,UAAA,EACAjG,KAAA2lB,qBAAA9e,OACA7G,KAAA4lB,mBAAA/e,OACA7G,KAAA6lB,UAAAhf,OACA7G,KAAA8lB,WAAAjf,OACA8H,IAAAxJ,IACAugB,EAAA1lB,KAAA2O,GACA3O,KAAA+lB,qBAAApX,IAEA3O,KAAAyN,kBACAzN,KAAAkZ,WAAA,iBAAAlZ,MAonBA,QAAAgmB,GAAAC,GAAAjmB,KAAAyB,QAAAyE,iBAAA+f,GACA,QAAAC,GAAAD,GAAAjmB,KAAAyB,QAAAugB,gBAAAiE,GAAA,GA4CA,QAAAE,GAAAjf,GACA,GAAAkf,GAAA,GAAAjlB,GAAAgE,EACAihB,GAAAT,qBAAAze,EACAkf,EAAAR,mBAAA1e,EACAkf,EAAAP,UAAA3e,EACAkf,EAAAN,WAAA5e,EAnvBA,GAaAyO,GAbA0Q,EAAA,WACA,MAAA,IAAAje,GAAA,wEAEAke,EAAA,WACA,MAAA,IAAAnlB,GAAAolB,kBAAAvmB,KAAA2G,YAEA8C,EAAA,SAAA6H,GACA,MAAAnQ,GAAAyN,OAAA,GAAAxG,GAAAkJ,KAGAkV,KACAljB,EAAAlC,EAAA,SAIAuU,GADArS,EAAAS,OACA,WACA,GAAAxC,GAAAL,EAAA0V,MAEA,OADA/P,UAAAtF,IAAAA,EAAA,MACAA,GAGA,WACA,MAAA,OAGA+B,EAAA6M,kBAAAhP,EAAA,aAAAwU,EAEA,IAAAuG,GAAA9a,EAAA,SACAY,EAAAZ,EAAA,WACAwI,EAAA,GAAA5H,EACAka,GAAAS,eAAAxb,EAAA,UAAA+F,MAAA0C,GACA,IAAAuX,GAAA/f,EAAA,YACAgH,EAAAjH,EAAAiH,UAAA+Y,EAAA/Y,SACAjH,GAAAqb,WAAA2E,EAAA3E,UACA,IAAAH,GAAAlb,EAAAkb,kBAAA8E,EAAA9E,iBACAlb,GAAAmb,aAAA6E,EAAA7E,aACAnb,EAAA2a,iBAAAqF,EAAArF,iBACA3a,EAAAgc,eAAAgE,EAAArF,iBACA3a,EAAAob,eAAA4E,EAAA5E,cACA,IAAApX,GAAA,aACAshB,KACAva,KACA9G,EAAAhE,EAAA,eAAAD,EAAAgE,GACAqE,EACApI,EAAA,mBAAAD,EAAAgE,EACAC,EAAAqE,EAAAwW,GACAhT,EAAA7L,EAAA,aAAAD,GAEAkM,EAAAJ,EAAArF,OACAvC,EAAAjE,EAAA,mBAAAD,EAAA8L,GAEA8R,GADA1Z,EAAA8H,cAEA/L,EAAA,aAAAD,EAAAiE,IACA+G,EAAA/K,EAAA,kBAAA8K,GACAyY,EAAAvjB,EAAA,cACAuI,EAAArG,EAAAqG,SACAD,EAAApG,EAAAoG,QAwsBA,OAhrBAvI,GAAAW,UAAAqG,SAAA,WACA,MAAA,oBAGAhH,EAAAW,UAAA8Y,OAAAzZ,EAAAW,UAAA,SAAA,SAAAe,GACA,GAAAqhB,GAAA7f,UAAArD,MACA,IAAAkjB,EAAA,EAAA,CACA,GACAvjB,GADA+lB,EAAA,GAAAhK,OAAAwH,EAAA,GACArX,EAAA,CACA,KAAAlM,EAAA,EAAAA,EAAAujB,EAAA,IAAAvjB,EAAA,CACA,GAAA6L,GAAAnI,UAAA1D,EACA,KAAA2C,EAAAoJ,SAAAF,GAGA,MAAA/C,GAAA,2DACAnG,EAAA4E,YAAAsE,GAHAka,GAAA7Z,KAAAL,EAQA,MAFAka,GAAA1lB,OAAA6L,EACAhK,EAAAwB,UAAA1D,GACAX,KAAA6f,KAAAhZ,OAAAsF,EAAAua,EAAA7jB,EAAA7C,OAEA,MAAAA,MAAA6f,KAAAhZ,OAAAhE,IAGA1B,EAAAW,UAAA6kB,QAAA,WACA,MAAA3mB,MAAA8F,MAAAwgB,EACAA,EAAAzf,OAAA7G,KAAA6G,SAGA1F,EAAAW,UAAA+d,KAAA,SAAA+G,EAAAC,GACA,GAAAxhB,EAAAuM,YAAAvN,UAAArD,OAAA,GACA,kBAAA4lB,IACA,kBAAAC,GAAA,CACA,GAAAvV,GAAA,kDACAhO,EAAA4E,YAAA0e,EACAviB,WAAArD,OAAA,IACAsQ,GAAA,KAAAhO,EAAA4E,YAAA2e,IAEA7mB,KAAAgK,MAAAsH,GAEA,MAAAtR,MAAA8F,MAAA8gB,EAAAC,EAAAhgB,OAAAA,OAAAA,SAGA1F,EAAAW,UAAAmgB,KAAA,SAAA2E,EAAAC,GACA,GAAAplB,GACAzB,KAAA8F,MAAA8gB,EAAAC,EAAAhgB,OAAAA,OAAAA,OACApF,GAAAqlB,eAGA3lB,EAAAW,UAAA4gB,OAAA,SAAA7f,GACA,MAAA,kBAAAA,GACA4G,EAAA,gCAAAnG,EAAA4E,YAAArF,IAEA7C,KAAAqb,MAAAvV,MAAAjD,EAAAgE,OAAAA,OAAA4f,EAAA5f,SAGA1F,EAAAW,UAAAilB,OAAA,WACA,GAAAxlB,IACAiO,aAAA,EACAkQ,YAAA,EACAsH,iBAAAngB,OACAogB,gBAAApgB,OASA,OAPA7G,MAAAwP,eACAjO,EAAAylB,iBAAAhnB,KAAAkH,QACA3F,EAAAiO,aAAA,GACAxP,KAAA0f,eACAne,EAAA0lB,gBAAAjnB,KAAA2T,SACApS,EAAAme,YAAA,GAEAne,GAGAJ,EAAAW,UAAAuZ,IAAA,WAIA,MAHAhX,WAAArD,OAAA,GACAhB,KAAAgK,MAAA,wDAEA,GAAAR,GAAAxJ,MAAAyB,WAGAN,EAAAW,UAAA6N,MAAA,SAAA9M,GACA,MAAA7C,MAAA4a,OAAAtX,EAAA4jB,wBAAArkB,IAGA1B,EAAAgmB,kBAAA1nB,EAAAD,QAEA2B,EAAAimB,GAAA,SAAAnC,GACA,MAAAA,aAAA9jB,IAGAA,EAAAkmB,SAAAlmB,EAAAmmB,aAAA,SAAAzkB,GACA,GAAAtB,GAAA,GAAAJ,GAAAgE,EACA5D,GAAA0V,oBACA,IAAA2N,GAAAvgB,UAAArD,OAAA,KAAA2G,OAAAtD,UAAA,IAAAugB,UAEAxP,EAAA1L,EAAA7G,GAAA8hB,EAAApjB,EAAAqjB,GAKA,OAJAxP,KAAAzL,GACApI,EAAAygB,gBAAA5M,EAAAlV,GAAA,GAEAqB,EAAAgmB,iBAAAhmB,EAAAimB,sBACAjmB,GAGAJ,EAAAka,IAAA,SAAA/Z,GACA,MAAA,IAAAkI,GAAAlI,GAAAG,WAGAN,EAAAsmB,KAAA,SAAA1gB,GACA,GAAAxF,GAAA6D,EAAA2B,EAOA,OANAxF,aAAAJ,KACAI,EAAA,GAAAJ,GAAAgE,GACA5D,EAAA0V,qBACA1V,EAAAmmB,gBACAnmB,EAAAqkB,mBAAA7e,GAEAxF,GAGAJ,EAAAgG,QAAAhG,EAAAwmB,UAAAxmB,EAAAsmB,KAEAtmB,EAAAyN,OAAAzN,EAAAymB,SAAA,SAAAjU,GACA,GAAApS,GAAA,GAAAJ,GAAAgE,EAGA,OAFA5D,GAAA0V,qBACA1V,EAAAygB,gBAAArO,GAAA,GACApS,GAGAJ,EAAAoC,aAAA,SAAAV,GACA,GAAA,kBAAAA,GACA,KAAA,IAAAuF,GAAA,gCAAA9E,EAAA4E,YAAArF,GAEA,OAAA+G,GAAArG,aAAAV,IAGA1B,EAAAW,UAAAgE,MAAA,SACA8gB,EACAC,EACArhB,EAAA1C,EACA+kB,GAEA,GAAAC,GAAAjhB,SAAAghB,EACApmB,EAAAqmB,EAAAD,EAAA,GAAA1mB,GAAAgE,GACAgB,EAAAnG,KAAA2G,UACAub,EAAA/b,EAAAF,SAEA6hB,KACArmB,EAAA6E,eAAAtG,KAAA,GACAyB,EAAAwV,qBACApQ,SAAA/D,GACA,KAAA,QAAA9C,KAAAiG,aAEAnD,EADA,KAAA,SAAAof,GACAliB,KAAAwG,cAEAL,IAAAnG,KAAA6G,OAAA7G,KAAAgH,UAGAhH,KAAAkZ,WAAA,iBAAAlZ,KAAAyB,GAGA,IAAAmV,GAAAjB,GACA,IAAA,KAAA,SAAAuM,GAAA,CACA,GAAA/I,GAAAjS,EAAA6gB,EAAA5hB,EAAA6hB,iBACA,MAAA,SAAA9F,IACAhb,EAAAf,EAAAyf,mBACAzM,EAAAyN,GACA,KAAA,SAAA1E,IACAhb,EAAAf,EAAAwf,qBACAxM,EAAA0N,EACA1gB,EAAAuQ,+BAEAqR,EAAA5hB,EAAA8hB,uCACA/gB,EAAA,GAAAmV,GAAA,8BACAlW,EAAA0F,kBAAA3E,GACAiS,EAAA0N,GAGAjd,EAAApF,OAAAujB,EAAA5hB,GACAgT,QAAA,OAAAvC,EAAAuC,EACA,kBAAAA,IACA7V,EAAAuT,WAAAD,EAAAuC,GACA1X,QAAAA,EACAqB,SAAAA,EACAoE,MAAAA,QAGAf,GAAA+hB,cAAAtB,EAAAC,EAAAplB,EAAAqB,EAAA8T,EAGA,OAAAnV,IAGAN,EAAAW,UAAAoJ,QAAA,WACA,MAAA,OAAAlL,KAAAiG,WAGA9E,EAAAW,UAAAylB,cAAA,WACA,MAAA,MAAA,UAAAvnB,KAAAiG,YAGA9E,EAAAW,UAAAsI,aAAA,WACA,MAAA,aAAA,SAAApK,KAAAiG,YAGA9E,EAAAW,UAAAqmB,WAAA,SAAAjE,GACAlkB,KAAAiG,UAAAjG,KAAAiG,iBACA,MAAAie,GAGA/iB,EAAAW,UAAA4lB,cAAA,WACA1nB,KAAAiG,UAAA,SAAAjG,KAAAiG,UACAjG,KAAAkZ,WAAA,mBAAAlZ,OAGAmB,EAAAW,UAAAsmB,aAAA,WACApoB,KAAAiG,UAAA,SAAAjG,KAAAiG,UACAjG,KAAAkZ,WAAA,kBAAAlZ,OAGAmB,EAAAW,UAAAumB,cAAA,WACAroB,KAAAiG,UAAA,SAAAjG,KAAAiG,UACAjG,KAAAkZ,WAAA,kBAAAlZ,OAGAmB,EAAAW,UAAAglB,YAAA,WACA9mB,KAAAiG,UAAA,QAAAjG,KAAAiG,WAGA9E,EAAAW,UAAAwmB,SAAA,WACA,OAAA,QAAAtoB,KAAAiG,WAAA,GAGA9E,EAAAW,UAAAymB,gBAAA,WACAvoB,KAAAiG,UAAAjG,KAAAiG,kBAGA9E,EAAAW,UAAAkJ,cAAA,WACAhL,KAAAiG,UAAA,MAAAjG,KAAAiG,UACAjG,KAAAkZ,WAAA,mBAAAlZ,OAGAmB,EAAAW,UAAA2I,oBAAA,WACAzK,KAAAiG,UAAA,QAAAjG,KAAAiG,WAGA9E,EAAAW,UAAA0lB,oBAAA,WACA5d,EAAAnG,uBACAzD,KAAAiG,UAAA,UAAAjG,KAAAiG,YAGA9E,EAAAW,UAAA0mB,YAAA,SAAA9f,GACA,GAAAnH,GAAA,IAAAmH,EAAA1I,KAAA8lB,WAAA9lB,KACA,EAAA0I,EAAA,EAAA,EACA,IAAAnH,IAAAilB,EAEA,MAAA3f,UAAAtF,GAAAvB,KAAAiH,WACAjH,KAAAwG,cAEAjF,GAGAJ,EAAAW,UAAA2mB,WAAA,SAAA/f,GACA,MAAA1I,MACA,EAAA0I,EAAA,EAAA,IAGAvH,EAAAW,UAAA4mB,sBAAA,SAAAhgB,GACA,MAAA1I,MACA,EAAA0I,EAAA,EAAA,IAGAvH,EAAAW,UAAA6mB,oBAAA,SAAAjgB,GACA,MAAA1I,MACA,EAAA0I,EAAA,EAAA,IAGAvH,EAAAW,UAAA0E,YAAA,aAEArF,EAAAW,UAAA8mB,kBAAA,SAAAC,GACA,GACAC,IADAD,EAAA5iB,UACA4iB,EAAAlD,sBACA/W,EAAAia,EAAAjD,mBACAnkB,EAAAonB,EAAAhD,UACA/iB,EAAA+lB,EAAAL,YAAA,EACA3hB,UAAA/D,IAAAA,EAAA0jB,GACAxmB,KAAAkoB,cAAAY,EAAAla,EAAAnN,EAAAqB,EAAA,OAGA3B,EAAAW,UAAAinB,mBAAA,SAAAF,EAAAngB,GACA,GAAAogB,GAAAD,EAAAH,sBAAAhgB,GACAkG,EAAAia,EAAAF,oBAAAjgB,GACAjH,EAAAonB,EAAAJ,WAAA/f,GACA5F,EAAA+lB,EAAAL,YAAA9f,EACA7B,UAAA/D,IAAAA,EAAA0jB,GACAxmB,KAAAkoB,cAAAY,EAAAla,EAAAnN,EAAAqB,EAAA,OAGA3B,EAAAW,UAAAomB,cAAA,SACAY,EACAla,EACAnN,EACAqB,EACA8T,GAEA,GAAAlO,GAAA1I,KAAAkL,SAOA,IALAxC,GAAA,QACAA,EAAA,EACA1I,KAAAmoB,WAAA,IAGA,IAAAzf,EACA1I,KAAA6lB,UAAApkB,EACAzB,KAAA8lB,WAAAhjB,EACA,kBAAAgmB,KACA9oB,KAAA2lB,qBACA,OAAA/O,EAAAkS,EAAAxlB,EAAAuT,WAAAD,EAAAkS,IAEA,kBAAAla,KACA5O,KAAA4lB,mBACA,OAAAhP,EAAAhI,EAAAtL,EAAAuT,WAAAD,EAAAhI,QAEA,CACA,GAAAoa,GAAA,EAAAtgB,EAAA,CACA1I,MAAAgpB,EAAA,GAAAvnB,EACAzB,KAAAgpB,EAAA,GAAAlmB,EACA,kBAAAgmB,KACA9oB,KAAAgpB,EAAA,GACA,OAAApS,EAAAkS,EAAAxlB,EAAAuT,WAAAD,EAAAkS,IAEA,kBAAAla,KACA5O,KAAAgpB,EAAA,GACA,OAAApS,EAAAhI,EAAAtL,EAAAuT,WAAAD,EAAAhI,IAIA,MADA5O,MAAAmoB,WAAAzf,EAAA,GACAA,GAGAvH,EAAAW,UAAAqgB,OAAA,SAAA8G,EAAAlmB,GACA/C,KAAAkoB,cAAArhB,OAAAA,OAAA9D,EAAAkmB,EAAA,OAGA9nB,EAAAW,UAAAoE,iBAAA,SAAAgB,EAAAgiB,GACA,GAAA,KAAA,UAAAlpB,KAAAiG,WAAA,CACA,GAAAiB,IAAAlH,KACA,MAAAA,MAAAgiB,gBAAAqE,KAAA,EACA,IAAA3f,GAAAtB,EAAA8B,EAAAlH,KACA,MAAA0G,YAAAvF,IAAA,MAAAnB,MAAAshB,SAAApa,EAEAgiB,IAAAlpB,KAAAsG,eAAAI,EAAA,EAEA,IAAAjF,GAAAiF,EAAAC,SAEA,IAAAlF,IAAAzB,KAEA,WADAA,MAAAyF,QAAA4gB,IAIA,IAAAnE,GAAAzgB,EAAAwE,SACA,IAAA,KAAA,SAAAic,GAAA,CACA,GAAAgC,GAAAlkB,KAAAkL,SACAgZ,GAAA,GAAAziB,EAAAmnB,kBAAA5oB,KACA,KAAA,GAAAW,GAAA,EAAAA,EAAAujB,IAAAvjB,EACAc,EAAAsnB,mBAAA/oB,KAAAW,EAEAX,MAAAqoB,gBACAroB,KAAAmoB,WAAA,GACAnoB,KAAAmpB,aAAA1nB,OACA,IAAA,KAAA,SAAAygB,GACAliB,KAAAshB,SAAA7f,EAAAqZ,cACA,IAAA,KAAA,SAAAoH,GACAliB,KAAAyF,QAAAhE,EAAAkZ,eACA,CACA,GAAAhH,GAAA,GAAA0I,GAAA,6BACA5a,GAAAoK,kBAAA8H,GACA3T,KAAAyF,QAAAkO,MAIAxS,EAAAW,UAAAkgB,gBACA,SAAArO,EAAAyV,EAAAC,GACA,GAAAxb,GAAAvK,EAAAgmB,kBAAA3V,GACA4V,EAAA1b,IAAA8F,CACA,KAAA4V,IAAAF,GAAAhkB,EAAAuM,WAAA,CACA,GAAA3J,GAAA,4CACA3E,EAAA4E,YAAAyL,EACA3T,MAAAgK,MAAA/B,GAAA,GAEAjI,KAAA6L,kBAAAgC,IAAAub,GAAAG,GACAvpB,KAAAyF,QAAAkO,IAGAxS,EAAAW,UAAAikB,qBAAA,SAAApX,GACA,GAAAlN,GAAAzB,IACAA,MAAAiX,qBACAjX,KAAA0N,cACA,IAAA0b,IAAA,EACA/oB,EAAAL,KAAAgZ,SAAArK,EAAA,SAAAzH,GACAzF,EAAAyE,iBAAAgB,IACA,SAAAyM,GACAlS,EAAAugB,gBAAArO,EAAAyV,IAEAA,IAAA,EACAppB,KAAA2N,cAEA9G,SAAAxG,GACAoB,EAAAugB,gBAAA3hB,GAAA,IAIAc,EAAAW,UAAA0nB,0BAAA,SACArQ,EAAArW,EAAAoE,EAAAzF,GAEA,GAAAygB,GAAAzgB,EAAAwE,SACA,IAAA,KAAA,MAAAic,GAAA,CACAzgB,EAAAiM,cACA,IAAA+b,EACA3mB,KAAA2jB,EACAvf,GAAA,gBAAAA,GAAAlG,OAKAyoB,EAAA/f,EAAAyP,GAAA5Q,MAAAvI,KAAAwG,cAAAU,IAJAuiB,EAAA9f,EACA8f,EAAAvpB,EAAA,GAAAkI,GAAA,iCACA9E,EAAA4E,YAAAhB,KAKAuiB,EAAA/f,EAAAyP,GAAApY,KAAA+B,EAAAoE,EAEA,IAAAqJ,GAAA9O,EAAAkM,aACAuU,GAAAzgB,EAAAwE,UACA,KAAA,MAAAic,KAEAuH,IAAAvd,EACAzK,EAAAgE,QAAAyB,GACAuiB,IAAA9f,EACAlI,EAAAugB,gBAAAyH,EAAAvpB,GAAA,IAEAmF,EAAAgL,sBAAAoZ,EAAAlZ,EAAA,GAAA9O,EAAAzB,MACAyB,EAAAyE,iBAAAujB,OAIAtoB,EAAAW,UAAA6E,QAAA,WAEA,IADA,GAAApF,GAAAvB,KACAuB,EAAA6I,gBAAA7I,EAAAA,EAAA8I,WACA,OAAA9I,IAGAJ,EAAAW,UAAAuI,UAAA,WACA,MAAArK,MAAA4lB,oBAGAzkB,EAAAW,UAAAqnB,aAAA,SAAA1nB,GACAzB,KAAA4lB,mBAAAnkB,GAGAN,EAAAW,UAAA4nB,eAAA,SAAAjoB,EAAA0X,EAAArW,EAAAoE,GACA,GAAAyiB,GAAAloB,YAAAN,GACA+gB,EAAAliB,KAAAiG,UACA2jB,EAAA,KAAA,UAAA1H,EACA,MAAA,MAAAA,IACAyH,GAAAloB,EAAAuK,0BAEAlJ,YAAAic,IACAjc,EAAA2c,oBACA3c,EAAAoc,cAAAzd,EACAiI,EAAAyP,GAAApY,KAAA+B,EAAAoE,KAAAyC,GACAlI,EAAAgE,QAAAkE,EAAAzJ,IAEAiZ,IAAAmN,EACA7kB,EAAA6f,SAAAgF,EAAAvlB,KAAA+B,IACAA,YAAAmd,GACAnd,EAAAye,kBAAA9f,GACAkoB,GAAAloB,YAAA+H,GACA/H,EAAAsJ,UAEAjI,EAAAgH,UAEA,kBAAAqP,GACAwQ,GAGAC,GAAAnoB,EAAA+lB,sBACAxnB,KAAAwpB,0BAAArQ,EAAArW,EAAAoE,EAAAzF,IAHA0X,EAAApY,KAAA+B,EAAAoE,EAAAzF,GAKAqB,YAAAmd,GACAnd,EAAAse,gBACA,KAAA,SAAAc,GACApf,EAAA8e,kBAAA1a,EAAAzF,GAEAqB,EAAAgf,iBAAA5a,EAAAzF,IAGAkoB,IACAC,GAAAnoB,EAAA+lB,sBACA,KAAA,SAAAtF,GACAzgB,EAAA6f,SAAApa,GAEAzF,EAAAgE,QAAAyB,KAKA/F,EAAAW,UAAAmmB,uCAAA,SAAA5Z,GACA,GAAA8K,GAAA9K,EAAA8K,QACA1X,EAAA4M,EAAA5M,QACAqB,EAAAuL,EAAAvL,SACAoE,EAAAmH,EAAAnH,KACA,mBAAAiS,GACA1X,YAAAN,GAGAnB,KAAAwpB,0BAAArQ,EAAArW,EAAAoE,EAAAzF,GAFA0X,EAAApY,KAAA+B,EAAAoE,EAAAzF,GAIAA,YAAAN,IACAM,EAAAgE,QAAAyB,IAIA/F,EAAAW,UAAAkmB,kBAAA,SAAA3Z,GACArO,KAAA0pB,eAAArb,EAAA5M,QAAA4M,EAAA8K,QAAA9K,EAAAvL,SAAAuL,EAAAnH,QAGA/F,EAAAW,UAAA+nB,gBAAA,SAAA1Q,EAAAjS,EAAAgb,GACA,GAAAzgB,GAAAzB,KAAA6lB,UACA/iB,EAAA9C,KAAAwoB,YAAA,EACAxoB,MAAA6lB,UAAAhf,OACA7G,KAAA8lB,WAAAjf,OACA7G,KAAA0pB,eAAAjoB,EAAA0X,EAAArW,EAAAoE,IAGA/F,EAAAW,UAAAgoB,0BAAA,SAAAphB,GACA,GAAAsgB,GAAA,EAAAtgB,EAAA,CACA1I,MAAAgpB,EAAA,GACAhpB,KAAAgpB,EAAA,GACAhpB,KAAAgpB,EAAA,GACAhpB,KAAAgpB,EAAA,GAAAniB,QAGA1F,EAAAW,UAAAwf,SAAA,SAAApa,GACA,GAAAgb,GAAAliB,KAAAiG,SACA,OAAA,UAAAic,KAAA,IAAA,CACA,GAAAhb,IAAAlH,KAAA,CACA,GAAA+Z,GAAAsM,GAEA,OADArmB,MAAA6L,kBAAAkO,GACA/Z,KAAAyF,QAAAsU,GAEA/Z,KAAA0nB,gBACA1nB,KAAA4lB,mBAAA1e,GAEA,MAAAgb,GAAA,IACA,KAAA,UAAAA,GACAliB,KAAA0E,kBAEAkF,EAAAnF,eAAAzE,SAKAmB,EAAAW,UAAA2D,QAAA,SAAAkO,GACA,GAAAuO,GAAAliB,KAAAiG,SACA,OAAA,UAAAic,KAAA,IAIA,MAHAliB,MAAAooB,eACApoB,KAAA2lB,qBAAAhS,EAEA3T,KAAAsoB,WACA1e,EAAA9F,WAAA6P,EAAArQ,EAAAS,cAGA,MAAAme,GAAA,EACAtY,EAAAnF,eAAAzE,MAEAA,KAAAgW,oCAIA7U,EAAAW,UAAAioB,iBAAA,SAAA7F,EAAAhd,GACA,IAAA,GAAAvG,GAAA,EAAAA,EAAAujB,EAAAvjB,IAAA,CACA,GAAAwY,GAAAnZ,KAAA0oB,sBAAA/nB,GACAc,EAAAzB,KAAAyoB,WAAA9nB,GACAmC,EAAA9C,KAAAwoB,YAAA7nB,EACAX,MAAA8pB,0BAAAnpB,GACAX,KAAA0pB,eAAAjoB,EAAA0X,EAAArW,EAAAoE,KAIA/F,EAAAW,UAAAkoB,gBAAA,SAAA9F,EAAAvQ,GACA,IAAA,GAAAhT,GAAA,EAAAA,EAAAujB,EAAAvjB,IAAA,CACA,GAAAwY,GAAAnZ,KAAA2oB,oBAAAhoB,GACAc,EAAAzB,KAAAyoB,WAAA9nB,GACAmC,EAAA9C,KAAAwoB,YAAA7nB,EACAX,MAAA8pB,0BAAAnpB,GACAX,KAAA0pB,eAAAjoB,EAAA0X,EAAArW,EAAA6Q,KAIAxS,EAAAW,UAAA4C,gBAAA,WACA,GAAAwd,GAAAliB,KAAAiG,UACAie,EAAA,MAAAhC,CAEA,IAAAgC,EAAA,EAAA,CACA,GAAA,KAAA,SAAAhC,GAAA,CACA,GAAAvO,GAAA3T,KAAA2lB,oBACA3lB,MAAA6pB,gBAAA7pB,KAAA4lB,mBAAAjS,EAAAuO,GACAliB,KAAAgqB,gBAAA9F,EAAAvQ,OACA,CACA,GAAAzM,GAAAlH,KAAA4lB,kBACA5lB,MAAA6pB,gBAAA7pB,KAAA2lB,qBAAAze,EAAAgb,GACAliB,KAAA+pB,iBAAA7F,EAAAhd,GAEAlH,KAAAmoB,WAAA,GAEAnoB,KAAA+Y,0BAGA5X,EAAAW,UAAAwU,cAAA,WACA,GAAA4L,GAAAliB,KAAAiG,SACA,OAAA,MAAA,SAAAic,GACAliB,KAAA4lB,mBACA,KAAA,SAAA1D,GACAliB,KAAA2lB,qBADA,QAQAxkB,EAAA8oB,MAAA9oB,EAAA+oB,QAAA,WACA7kB,EAAAkM,WAAA,gBAAA,cACA,IAAA9P,GAAA,GAAAN,GAAAgE,EACA,QACA1D,QAAAA,EACA0F,QAAA6e,EACApX,OAAAsX,IAIA5iB,EAAA6M,kBAAAhP,EACA,2BACAklB,GAEAjlB,EAAA,YAAAD,EAAAgE,EAAAC,EAAAqE,EACApE,GACAjE,EAAA,UAAAD,EAAAgE,EAAAC,EAAAC,GACAjE,EAAA,YAAAD,EAAAqI,EAAAC,EAAApE,GACAjE,EAAA,oBAAAD,GACAC,EAAA,4BAAAD,GACAC,EAAA,UACAD,EAAAqI,EAAApE,EAAAD,EAAAyE,EAAA+L,GACAxU,EAAAA,QAAAA,EACAA,EAAAgpB,QAAA,QACA/oB,EAAA,YAAAD,EAAAqI,EAAAC,EAAArE,EAAAD,EAAAE,GACAjE,EAAA,iBAAAD,GACAC,EAAA,cAAAD,EAAAsI,EAAArE,EAAAiI,EAAAlI,EAAAE,GACAjE,EAAA,eAAAD,EAAAgE,EAAAE,GACAjE,EAAA,mBAAAD,EAAAsI,EAAAtE,EAAAC,EAAA6a,EAAA5a,GACAjE,EAAA,gBAAAD,GACAC,EAAA,kBAAAD,EAAAgE,GACA/D,EAAA,cAAAD,EAAAqI,EAAApE,EAAAqE,GACArI,EAAA,aAAAD,EAAAgE,EAAAC,EAAAqE,GACArI,EAAA,eAAAD,EAAAqI,EAAAC,EAAArE,EAAAD,EAAAE,GACAjE,EAAA,eAAAD,EAAAqI,EAAAnE,GACAjE,EAAA,aAAAD,EAAAqI,EAAAC,GACArI,EAAA,eAAAD,EAAAgE,GACA/D,EAAA,aAAAD,EAAAgE,GACA/D,EAAA,YAAAD,GAEAmC,EAAA8mB,iBAAAjpB,GACAmC,EAAA8mB,iBAAAjpB,EAAAW,WAUAqkB,GAAA1lB,EAAA,IACA0lB,GAAAkE,EAAA,IACAlE,GAAAmE,EAAA,IACAnE,EAAA,GACAA,EAAA,cACAA,EAAAtf,QACAsf,GAAA,GACAA,EAAA,GAAAhlB,GAAAgE,IACAE,EAAAwP,UAAA7S,EAAAqB,eAAAC,EAAAwR,eACA3T,KAIAopB,WAAA,EAAAC,UAAA,EAAAC,SAAA,EAAAC,gBAAA,EAAAC,WAAA,EAAAC,iBAAA,EAAAC,YAAA,EAAAC,kBAAA,EAAAC,mBAAA,GAAAC,YAAA,GAAA5Q,WAAA,GAAArN,QAAA,GAAAke,cAAA,GAAAC,YAAA,GAAAC,kBAAA,GAAAC,SAAA,GAAAC,WAAA,GAAAC,WAAA,GAAAC,aAAA,GAAAC,eAAA,GAAAC,kBAAA,GAAAC,iBAAA,GAAAC,aAAA,GAAAC,YAAA,GAAAC,cAAA,GAAAC,cAAA,GAAAC,YAAA,GAAAC,2BAAA,GAAAC,cAAA,GAAAC,cAAA,GAAAC,aAAA,GAAAlnB,SAAA,KAAAmnB,IAAA,SAAAhrB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAgE,EAAAC,EACAqE,EAAAwW,GAIA,QAAAoM,GAAApH,GACA,OAAAA,GACA,OAAA,QACA,QAAA,UAIA,QAAAzb,GAAAka,GACA,GAAAjiB,GAAAzB,KAAA0gB,SAAA,GAAAvf,GAAAgE,EACAue,aAAAviB,IACAM,EAAA6E,eAAAod,EAAA,GAEAjiB,EAAAqF,aAAA9G,MACAA,KAAA2jB,QAAAD,EACA1jB,KAAAkL,QAAA,EACAlL,KAAA+jB,eAAA,EACA/jB,KAAAyjB,MAAA5c,WAnBA,GAAAvD,GAAAlC,EAAA,SACAkC,GAAAsI,OAkLA,OA9JAtI,GAAA8V,SAAA5P,EAAAyW,GAEAzW,EAAA1H,UAAAd,OAAA,WACA,MAAAhB,MAAAkL,SAGA1B,EAAA1H,UAAAL,QAAA,WACA,MAAAzB,MAAA0gB,UAGAlX,EAAA1H,UAAA2hB,MAAA,QAAA7hB,GAAA4D,EAAA8mB,GACA,GAAA5I,GAAAte,EAAApF,KAAA2jB,QAAA3jB,KAAA0gB,SACA,IAAAgD,YAAAviB,GAAA,CACAuiB,EAAAA,EAAA/c,SACA,IAAAub,GAAAwB,EAAAzd,SAIA,IAFAjG,KAAA2jB,QAAAD,EAEA,KAAA,SAAAxB,GAEA,MADAliB,MAAA0gB,SAAA8G,sBACA9D,EAAA5d,MACAlE,EACA5B,KAAAyF,QACAoB,OACA7G,KACAssB,EAEA,IAAA,KAAA,SAAApK,GAEA,MAAA,MAAA,SAAAA,GACAliB,KAAAyF,QAAAie,EAAA/I,WAEA3a,KAAA+K,SAJA2Y,GAAAA,EAAA5I,SAQA,GADA4I,EAAApgB,EAAAipB,QAAA7I,GACA,OAAAA,EAAA,CACA,GAAA3J,GAAAtQ,EACA,oDAAAnG,EAAA4E,YAAAwb,IAAA/P,QAEA,YADA3T,MAAA0gB,SAAAsB,gBAAAjI,GAAA,GAIA,MAAA,KAAA2J,EAAA1iB,YACAsrB,OACAtsB,KAAAwsB,qBAGAxsB,KAAAgkB,SAAAqI,EAAAC,SAIAtsB,MAAAysB,SAAA/I,IAGAla,EAAA1H,UAAA2qB,SAAA,SAAA/I,GACA,GAAAQ,GAAAlkB,KAAA0sB,gBAAAhJ,EAAA1iB,OACAhB,MAAAkL,QAAAgZ,EACAlkB,KAAA2jB,QAAA3jB,KAAA2sB,mBAAA,GAAAjQ,OAAAwH,GAAAlkB,KAAA2jB,OAIA,KAAA,GAHAvO,GAAApV,KAAA0gB,SACAkM,GAAA,EACA1K,EAAA,KACAvhB,EAAA,EAAAA,EAAAujB,IAAAvjB,EAAA,CACA,GAAA+F,GAAAtB,EAAAse,EAAA/iB,GAAAyU,EAEA1O,aAAAvF,IACAuF,EAAAA,EAAAC,UACAub,EAAAxb,EAAAT,WAEAic,EAAA,KAGA0K,EACA,OAAA1K,GACAxb,EAAAqP,8BAEA,OAAAmM,EACA,KAAA,SAAAA,IACAxb,EAAAyb,OAAAniB,KAAAW,GACAX,KAAA2jB,QAAAhjB,GAAA+F,GAEAkmB,EADA,KAAA,SAAA1K,GACAliB,KAAA4hB,kBAAAlb,EAAAoU,SAAAna,GACA,KAAA,SAAAuhB,GACAliB,KAAA8hB,iBAAApb,EAAAiU,UAAAha,GAEAX,KAAAuhB,kBAAA5gB,GAGAisB,EAAA5sB,KAAA4hB,kBAAAlb,EAAA/F,GAGAisB,GAAAxX,EAAAoS,uBAGAhe,EAAA1H,UAAAsf,YAAA,WACA,MAAA,QAAAphB,KAAA2jB,SAGAna,EAAA1H,UAAAkiB,SAAA,SAAA9c,GACAlH,KAAA2jB,QAAA,KACA3jB,KAAA0gB,SAAAY,SAAApa,IAGAsC,EAAA1H,UAAAiJ,QAAA,YACA/K,KAAAohB,eAAAphB,KAAA0gB,SAAAxW,mBACAlK,KAAA2jB,QAAA,KACA3jB,KAAA0gB,SAAA3V,YAGAvB,EAAA1H,UAAA2D,QAAA,SAAAkO,GACA3T,KAAA2jB,QAAA,KACA3jB,KAAA0gB,SAAAsB,gBAAArO,GAAA,IAGAnK,EAAA1H,UAAA8f,kBAAA,SAAA1a,EAAAwB,GACA1I,KAAA2jB,QAAAjb,GAAAxB,CACA,IAAA4c,KAAA9jB,KAAA+jB,cACA,OAAAD,IAAA9jB,KAAAkL,UACAlL,KAAAgkB,SAAAhkB,KAAA2jB,UACA,IAKAna,EAAA1H,UAAAyf,kBAAA,WAEA,MADAvhB,MAAA+K,WACA,GAGAvB,EAAA1H,UAAAggB,iBAAA,SAAAnO,GAGA,MAFA3T,MAAA+jB,iBACA/jB,KAAAyF,QAAAkO,IACA,GAGAnK,EAAA1H,UAAAgK,iBAAA,WACA,IAAA9L,KAAAohB,cAAA,CACA,GAAAsC,GAAA1jB,KAAA2jB,OAEA,IADA3jB,KAAA+K,UACA2Y,YAAAviB,GACAuiB,EAAA5Z,aAEA,KAAA,GAAAnJ,GAAA,EAAAA,EAAA+iB,EAAA1iB,SAAAL,EACA+iB,EAAA/iB,YAAAQ,IACAuiB,EAAA/iB,GAAAmJ,WAMAN,EAAA1H,UAAA6qB,iBAAA,WACA,OAAA,GAGAnjB,EAAA1H,UAAA4qB,gBAAA,SAAAxI,GACA,MAAAA,IAGA1a,KAGAvE,SAAA,KAAA4nB,IAAA,SAAAzrB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAgE,GA2BA,QAAA2nB,GAAAhgB,GACA,OAAAigB,EAAA9b,KAAAnE,GAGA,QAAAkgB,GAAAnqB,GACA,IACA,MAAAA,GAAAoqB,qBAAA,EAEA,MAAA/sB,GACA,OAAA,GAIA,QAAAgtB,GAAAnmB,EAAA+F,EAAAqgB,GACA,GAAAlI,GAAA3hB,EAAA8pB,yBAAArmB,EAAA+F,EAAAqgB,EACAE,EACA,SAAApI,GAAA+H,EAAA/H,GAEA,QAAAqI,GAAA/rB,EAAA4rB,EAAAI,GACA,IAAA,GAAA5sB,GAAA,EAAAA,EAAAY,EAAAP,OAAAL,GAAA,EAAA,CACA,GAAAmM,GAAAvL,EAAAZ,EACA,IAAA4sB,EAAAtc,KAAAnE,GAEA,IAAA,GADA0gB,GAAA1gB,EAAAmG,QAAAsa,EAAA,IACA1gB,EAAA,EAAAA,EAAAtL,EAAAP,OAAA6L,GAAA,EACA,GAAAtL,EAAAsL,KAAA2gB,EACA,KAAA,IAAAplB,GAAA,qGACA6K,QAAA,KAAAka,KAOA,QAAAM,GAAA1mB,EAAAomB,EAAAI,EAAA3O,GAGA,IAAA,GAFAjS,GAAArJ,EAAAoqB,kBAAA3mB,GACAxF,KACAZ,EAAA,EAAAA,EAAAgM,EAAA3L,SAAAL,EAAA,CACA,GAAAmM,GAAAH,EAAAhM,GACAuG,EAAAH,EAAA+F,GACA6gB,EAAA/O,IAAAgP,GACAA,EAAA9gB,EAAA5F,EAAAH,EACA,mBAAAG,IACA8lB,EAAA9lB,IACAgmB,EAAAnmB,EAAA+F,EAAAqgB,KACAvO,EAAA9R,EAAA5F,EAAAH,EAAA4mB,IACApsB,EAAAyB,KAAA8J,EAAA5F,GAIA,MADAomB,GAAA/rB,EAAA4rB,EAAAI,GACAhsB,EAkIA,QAAAssB,GAAAhK,EAAA/gB,EAAA0C,EAAA3C,EAAAirB,EAAAlJ,GAMA,QAAAmJ,KACA,GAAAlN,GAAA/d,CACAA,KAAAkrB,IAAAnN,EAAA7gB,KACA,IAAAyB,GAAA,GAAAN,GAAAgE,EACA1D,GAAAwV,oBACA,IAAA5K,GAAA,gBAAA6L,IAAAlY,OAAAiuB,EACAjuB,KAAAkY,GAAA2L,EACAhhB,EAAA8hB,EAAAljB,EAAAmjB,EACA,KACAvY,EAAA9D,MAAAsY,EAAAqN,EAAA7pB,UAAAxB,IACA,MAAA3C,GACAuB,EAAAugB,gBAAA8C,EAAA5kB,IAAA,GAAA,GAGA,MADAuB,GAAA8lB,iBAAA9lB,EAAA+lB,sBACA/lB,EAnBA,GAAAwsB,GAAA,WAAA,MAAAjuB,SACAkY,EAAA2L,CAqBA,OApBA,gBAAA3L,KACA2L,EAAAhhB,GAkBAS,EAAA6M,kBAAA4d,EAAA,qBAAA,GACAA,EAOA,QAAAI,GAAApnB,EAAAomB,EAAAvO,EAAAwP,EAAAxJ,GAKA,IAAA,GAJA2I,GAAA,GAAAc,QAAAC,EAAAnB,GAAA,KACA1Q,EACAgR,EAAA1mB,EAAAomB,EAAAI,EAAA3O,GAEAje,EAAA,EAAAujB,EAAAzH,EAAAzb,OAAAL,EAAAujB,EAAAvjB,GAAA,EAAA,CACA,GAAAmM,GAAA2P,EAAA9b,GACAkC,EAAA4Z,EAAA9b,EAAA,GACA4tB,EAAAzhB,EAAAqgB,CACA,IAAAiB,IAAAI,EACAznB,EAAAwnB,GACAC,EAAA1hB,EAAAkhB,EAAAlhB,EAAAjK,EAAAsqB,EAAAvI,OACA,CACA,GAAAmJ,GAAAK,EAAAvrB,EAAA,WACA,MAAA2rB,GAAA1hB,EAAAkhB,EAAAlhB,EACAjK,EAAAsqB,EAAAvI,IAEAthB,GAAA6M,kBAAA4d,EAAA,qBAAA,GACAhnB,EAAAwnB,GAAAR,GAIA,MADAzqB,GAAA8mB,iBAAArjB,GACAA,EAGA,QAAA0nB,GAAA5K,EAAA/gB,EAAA8hB,GACA,MAAA4J,GAAA3K,EAAA/gB,EAAA+D,OACAgd,EAAA,KAAAe,GAtQA,GAkFA8J,GAlFAV,KACA1qB,EAAAlC,EAAA,UACAujB,EAAAvjB,EAAA,cACA8sB,EAAA5qB,EAAA4qB,aACApJ,EAAAxhB,EAAAwhB,iBACAhc,EAAAxF,EAAAwF,YACAV,EAAAhH,EAAA,YAAAgH,UACAumB,EAAA,QACAtB,GAAAJ,mBAAA,GACA2B,GACA,QAAA,SACA,OACA,YACA,SACA,SACA,YACA,qBAEA7B,EAAA,GAAAsB,QAAA,OAAAO,EAAAxe,KAAA,KAAA,MAEAwd,EAAA,SAAApf,GACA,MAAAlL,GAAAyF,aAAAyF,IACA,MAAAA,EAAAuE,OAAA,IACA,gBAAAvE,GAuDA8f,EAAA,SAAAxa,GACA,MAAAA,GAAAb,QAAA,QAAA,QAwJAub,EAAA1lB,EACA4lB,EACAb,CAgCA1sB,GAAAstB,UAAA,SAAA5rB,EAAAgc,GACA,GAAA,kBAAAhc,GACA,KAAA,IAAAuF,GAAA,gCAAA9E,EAAA4E,YAAArF,GAEA,IAAAmqB,EAAAnqB,GACA,MAAAA,EAEAgc,GAAAlX,OAAAkX,EACA,IAAA/b,GAAA+D,SAAAgY,EAAAlZ,QAAAqoB,EAAAnP,EAAAlZ,QACAif,IAAA/F,EAAA+F,UACArjB,EAAAktB,EAAA5rB,EAAAC,EAAA8hB,EAEA,OADAthB,GAAAurB,gBAAAhsB,EAAAtB,EAAAurB,GACAvrB,GAGAJ,EAAAgtB,aAAA,SAAAhoB,EAAA0Y,GACA,GAAA,kBAAA1Y,IAAA,gBAAAA,GACA,KAAA,IAAAiC,GAAA,+FAEAyW,GAAAlX,OAAAkX,EACA,IAAA+F,KAAA/F,EAAA+F,UACAuI,EAAAtO,EAAAsO,MACA,iBAAAA,KAAAA,EAAAwB,EACA,IAAA/P,GAAAC,EAAAD,MACA,mBAAAA,KAAAA,EAAAgP,EACA,IAAAQ,GAAAvP,EAAAuP,WAGA,IAFA,kBAAAA,KAAAA,EAAAI,IAEAlrB,EAAAyF,aAAAokB,GACA,KAAA,IAAA3Q,YAAA,sEAIA,KAAA,GADA7P,GAAArJ,EAAAoqB,kBAAAvnB,GACAxF,EAAA,EAAAA,EAAAgM,EAAA3L,SAAAL,EAAA,CACA,GAAAuG,GAAAf,EAAAwG,EAAAhM,GACA,iBAAAgM,EAAAhM,IACA2C,EAAAwrB,QAAA5nB,KACAinB,EAAAjnB,EAAApF,UAAAqrB,EAAAvO,EAAAwP,EACAxJ,GACAuJ,EAAAjnB,EAAAimB,EAAAvO,EAAAwP,EAAAxJ,IAIA,MAAAuJ,GAAAhoB,EAAAgnB,EAAAvO,EAAAwP,EAAAxJ,OAKAxK,WAAA,GAAAmR,aAAA,GAAAtmB,SAAA,KAAA8pB,IAAA,SAAA3tB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SACA2B,EAAAqI,EAAApE,EAAAqE,GAqCA,QAAAulB,GAAAjoB,GACA,GACAkoB,GADAC,GAAA,CAEA,IAAAroB,SAAAsoB,GAAApoB,YAAAooB,GACAF,EAAAG,EAAAroB,GACAmoB,GAAA,MACA,CACA,GAAAviB,GAAAuP,EAAAvP,KAAA5F,GACAmd,EAAAvX,EAAA3L,MACAiuB,GAAA,GAAAvS,OAAA,EAAAwH,EACA,KAAA,GAAAvjB,GAAA,EAAAA,EAAAujB,IAAAvjB,EAAA,CACA,GAAAmM,GAAAH,EAAAhM,EACAsuB,GAAAtuB,GAAAoG,EAAA+F,GACAmiB,EAAAtuB,EAAAujB,GAAApX,GAGA9M,KAAA+iB,aAAAkM,GACAjvB,KAAAqvB,OAAAH,EACAlvB,KAAAwjB,OAAA3c,WAkCA,QAAAyoB,GAAAhuB,GACA,GAAAC,GACAguB,EAAAnqB,EAAA9D,EAEA,OAAAoL,GAAA6iB,IAGAhuB,EADAguB,YAAApuB,GACAouB,EAAAzpB,MACA3E,EAAAmuB,MAAAzoB,OAAAA,OAAAA,OAAAA,QAEA,GAAAmoB,GAAAO,GAAA9tB,UAGA8tB,YAAApuB,IACAI,EAAA+E,eAAAipB,EAAA,GAEAhuB,GAXAkI,EAAA,6EA7FA,GAGA0lB,GAHA7rB,EAAAlC,EAAA,UACAsL,EAAApJ,EAAAoJ,SACAwP,EAAA9a,EAAA,QAEA,mBAAAouB,OAAAL,EAAAK,IAEA,IAAAJ,GAAA,WAIA,QAAAK,GAAAvoB,EAAA4F,GACA9M,KAAA0I,GAAAxB,EACAlH,KAAA0I,EAAAgnB,GAAA5iB,EACApE,IANA,GAAAA,GAAA,EACAgnB,EAAA,CAQA,OAAA,UAAA/Q,GACA+Q,EAAA/Q,EAAA+Q,KACAhnB,EAAA,CACA,IAAAnH,GAAA,GAAAmb,OAAA,EAAAiC,EAAA+Q,KAEA,OADA/Q,GAAAgR,QAAAF,EAAAluB,GACAA,MAIAquB,EAAA,SAAAX,GAGA,IAAA,GAFA1tB,GAAA,GAAA4tB,GACAnuB,EAAAiuB,EAAAjuB,OAAA,EAAA,EACAL,EAAA,EAAAA,EAAAK,IAAAL,EAAA,CACA,GAAAmM,GAAAmiB,EAAAjuB,EAAAL,GACAuG,EAAA+nB,EAAAtuB,EACAY,GAAAuc,IAAAhR,EAAA5F,GAEA,MAAA3F,GAuBA+B,GAAA8V,SAAA4V,EAAAxlB,GAEAwlB,EAAAltB,UAAA2hB,MAAA,aAEAuL,EAAAltB,UAAA8f,kBAAA,SAAA1a,EAAAwB,GACA1I,KAAA2jB,QAAAjb,GAAAxB,CACA,IAAA4c,KAAA9jB,KAAA+jB,cACA,IAAAD,GAAA9jB,KAAAkL,QAAA,CACA,GAAA+Z,EACA,IAAAjlB,KAAAqvB,OACApK,EAAA2K,EAAA5vB,KAAA2jB,aACA,CACAsB,IAEA,KAAA,GADA4K,GAAA7vB,KAAAgB,SACAL,EAAA,EAAAujB,EAAAlkB,KAAAgB,SAAAL,EAAAujB,IAAAvjB,EACAskB,EAAAjlB,KAAA2jB,QAAAhjB,EAAAkvB,IAAA7vB,KAAA2jB,QAAAhjB,GAIA,MADAX,MAAAgkB,SAAAiB,IACA,EAEA,OAAA,GAGA+J,EAAAltB,UAAA6qB,iBAAA,WACA,OAAA,GAGAqC,EAAAltB,UAAA4qB,gBAAA,SAAAxI,GACA,MAAAA,IAAA,GAsBA/iB,EAAAW,UAAAwtB,MAAA,WACA,MAAAA,GAAAtvB,OAGAmB,EAAAmuB,MAAA,SAAAhuB,GACA,MAAAguB,GAAAhuB,OAIAyL,QAAA,GAAA9H,SAAA,KAAA6qB,IAAA,SAAA1uB,EAAA3B,EAAAD,GACA,YACA,SAAAuwB,GAAAC,EAAAC,EAAAC,EAAAC,EAAAjM,GACA,IAAA,GAAArX,GAAA,EAAAA,EAAAqX,IAAArX,EACAqjB,EAAArjB,EAAAsjB,GAAAH,EAAAnjB,EAAAojB,GACAD,EAAAnjB,EAAAojB,GAAA,OAIA,QAAA7tB,GAAAguB,GACApwB,KAAAqwB,UAAAD,EACApwB,KAAAkL,QAAA,EACAlL,KAAAswB,OAAA,EAGAluB,EAAAN,UAAAyuB,oBAAA,SAAAb,GACA,MAAA1vB,MAAAqwB,UAAAX,GAGAttB,EAAAN,UAAAsB,SAAA,SAAAL,GACA,GAAA/B,GAAAhB,KAAAgB,QACAhB,MAAAwwB,eAAAxvB,EAAA,EACA,IAAAL,GAAAX,KAAAswB,OAAAtvB,EAAAhB,KAAAqwB,UAAA,CACArwB,MAAAW,GAAAoC,EACA/C,KAAAkL,QAAAlK,EAAA,GAGAoB,EAAAN,UAAAkB,KAAA,SAAAH,EAAAC,EAAAC,GACA,GAAA/B,GAAAhB,KAAAgB,SAAA,CACA,IAAAhB,KAAAuwB,oBAAAvvB,GAIA,MAHAhB,MAAAoD,SAAAP,GACA7C,KAAAoD,SAAAN,OACA9C,MAAAoD,SAAAL,EAGA,IAAA8J,GAAA7M,KAAAswB,OAAAtvB,EAAA,CACAhB,MAAAwwB,eAAAxvB,EACA,IAAAyvB,GAAAzwB,KAAAqwB,UAAA,CACArwB,MAAA6M,EAAA,EAAA4jB,GAAA5tB,EACA7C,KAAA6M,EAAA,EAAA4jB,GAAA3tB,EACA9C,KAAA6M,EAAA,EAAA4jB,GAAA1tB,EACA/C,KAAAkL,QAAAlK,GAGAoB,EAAAN,UAAA+C,MAAA,WACA,GAAA6rB,GAAA1wB,KAAAswB,OACA/uB,EAAAvB,KAAA0wB,EAKA,OAHA1wB,MAAA0wB,GAAA7pB,OACA7G,KAAAswB,OAAAI,EAAA,EAAA1wB,KAAAqwB,UAAA,EACArwB,KAAAkL,UACA3J,GAGAa,EAAAN,UAAAd,OAAA,WACA,MAAAhB,MAAAkL,SAGA9I,EAAAN,UAAA0uB,eAAA,SAAAd,GACA1vB,KAAAqwB,UAAAX,GACA1vB,KAAA2wB,UAAA3wB,KAAAqwB,WAAA,IAIAjuB,EAAAN,UAAA6uB,UAAA,SAAAP,GACA,GAAAQ,GAAA5wB,KAAAqwB,SACArwB,MAAAqwB,UAAAD,CACA,IAAAM,GAAA1wB,KAAAswB,OACAtvB,EAAAhB,KAAAkL,QACA2lB,EAAAH,EAAA1vB,EAAA4vB,EAAA,CACAb,GAAA/vB,KAAA,EAAAA,KAAA4wB,EAAAC,IAGApxB,EAAAD,QAAA4C,OAEA0uB,IAAA,SAAA1vB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SACA2B,EAAAgE,EAAAC,EAAAqE,GASA,QAAAsnB,GAAAzvB,EAAAiJ,GACA,GAAA7D,GAAAtB,EAAA9D,EAEA,IAAAoF,YAAAvF,GACA,MAAA6vB,GAAAtqB,EAGA,IADApF,EAAAgC,EAAAipB,QAAAjrB,GACA,OAAAA,EACA,MAAAmI,GAAA,oDAAAnG,EAAA4E,YAAA5G,GAGA,IAAAC,GAAA,GAAAJ,GAAAgE,EACA0B,UAAA0D,GACAhJ,EAAA+E,eAAAiE,EAAA,EAIA,KAAA,GAFAue,GAAAvnB,EAAA+f,SACA1S,EAAArN,EAAAkE,QACA9E,EAAA,EAAAujB,EAAA5iB,EAAAN,OAAAL,EAAAujB,IAAAvjB,EAAA,CACA,GAAAskB,GAAA3jB,EAAAX,IAEAkG,SAAAoe,GAAAtkB,IAAAW,KAIAH,EAAAsmB,KAAAxC,GAAAnf,MAAAgjB,EAAAla,EAAA/H,OAAAtF,EAAA,MAEA,MAAAA,GAlCA,GAAA+B,GAAAlC,EAAA,UAEA4vB,EAAA,SAAAvvB,GACA,MAAAA,GAAAoe,KAAA,SAAAoR,GACA,MAAAF,GAAAE,EAAAxvB,KAiCAN,GAAA4vB,KAAA,SAAAzvB,GACA,MAAAyvB,GAAAzvB,EAAAuF,SAGA1F,EAAAW,UAAAivB,KAAA,WACA,MAAAA,GAAA/wB,KAAA6G,YAKA5B,SAAA,KAAAisB,IAAA,SAAA9vB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EACAqI,EACAC,EACArE,EACAD,EACAE,GAKA,QAAA8rB,GAAA7vB,EAAAuB,EAAAuuB,EAAAC,GACArxB,KAAA+iB,aAAAzhB,EACA,IAAAsV,GAAAjB,GACA3V,MAAAsxB,IAAA,OAAA1a,EAAA/T,EAAAS,EAAAuT,WAAAD,EAAA/T,GACAgE,SAAAuqB,IACAA,EAAAjwB,EAAAgG,QAAAiqB,GACAA,EAAAtiB,4BAAA9O,OAEAA,KAAAuxB,cAAAH,EACApxB,KAAAwxB,oBAAA,KACAH,IAAAlsB,EACAnF,KAAAyxB,YAAA/U,MAAA1c,KAAAkL,SACA,IAAAmmB,EACArxB,KAAAyxB,YAAA,KAEAzxB,KAAAyxB,YAAA5qB,OAEA7G,KAAA0gB,SAAAzJ,qBACAjX,KAAAwjB,OAAA3c,WA0FA,QAAA6qB,GAAAC,EAAAV,GACAjxB,KAAAwP,cACAyhB,EAAAjN,SAAA2N,GAEAV,EAAAxrB,QAAAksB,GAIA,QAAAvW,GAAA9Z,EAAAuB,EAAAuuB,EAAAC,GACA,GAAA,kBAAAxuB,GACA,MAAA4G,GAAA,gCAAAnG,EAAA4E,YAAArF,GAEA,IAAAouB,GAAA,GAAAE,GAAA7vB,EAAAuB,EAAAuuB,EAAAC,EACA,OAAAJ,GAAAxvB,UAGA,QAAAmwB,GAAAC,GACA7xB,KAAA6xB,MAAAA,EACA7xB,KAAAixB,MAAAa,UAAAD,EACA,IAAA3qB,GAAA9B,EAAApF,KAAAkH,MAAAlH,KAAAixB,MAAAvQ,SACA,OAAAxZ,aAAA/F,IACAnB,KAAAixB,MAAAO,oBAAAtqB,EACAA,EAAApB,MAAAisB,EAAAlrB,OAAAA,OAAA7G,KAAA6G,SAEAkrB,EAAAhxB,KAAAf,KAAAkH,GAIA,QAAA6qB,GAAA7qB,GACA,GAAA+pB,GAAAjxB,KAAAixB,MACAxvB,EAAAwvB,EAAAvQ,SACA7d,EAAA6G,EAAAunB,EAAAK,IACA7vB,GAAAiM,cACA,IAAAnM,EAEAA,GADAsF,SAAAoqB,EAAAQ,YACA5uB,EAAA9B,KAAAU,EAAA+E,cAAAU,EAAAlH,KAAA0I,MAAA1I,KAAAgB,QAEA6B,EAAA9B,KAAAU,EAAA+E,cACAxG,KAAA6xB,MAAA3qB,EAAAlH,KAAA0I,MAAA1I,KAAAgB,QAEAO,YAAAJ,KACA8vB,EAAAO,oBAAAjwB,EAEA,IAAAgP,GAAA9O,EAAAkM,aAOA,OANAtI,GAAAgL,sBACA9O,EACAgP,EACA1J,SAAAoqB,EAAAQ,YAAA,eAAA,iBACAhwB,GAEAF,EAlKA,GAAAoU,GAAAxU,EAAAyU,WACAtS,EAAAlC,EAAA,UACAsI,EAAApG,EAAAoG,QAsBApG,GAAA8V,SAAA+X,EAAA3nB,GAEA2nB,EAAArvB,UAAAgwB,UAAA,SAAAD,GACAhrB,SAAA7G,KAAAyxB,aACA,OAAAzxB,KAAAyxB,aACAI,IAAA1sB,GACAnF,KAAAyxB,YAAAzuB,KAAA6uB,IAIAV,EAAArvB,UAAAkwB,cAAA,SAAA9qB,GAIA,MAHA,QAAAlH,KAAAyxB,aACAzxB,KAAAyxB,YAAAzuB,KAAAkE,GAEAlH,KAAAyxB,aAGAN,EAAArvB,UAAA2hB,MAAA,aAEA0N,EAAArvB,UAAA0qB,mBAAA,WACAxsB,KAAAgkB,SAAAnd,SAAA7G,KAAAyxB,YAAAzxB,KAAAyxB,YACAzxB,KAAAuxB,gBAGAJ,EAAArvB,UAAA6qB,iBAAA,WACA,OAAA,GAGAwE,EAAArvB,UAAAkiB,SAAA,SAAA9c,GACAlH,KAAA0gB,SAAAxa,iBAAAgB,GACAlH,KAAA2jB,QAAA,MAGAwN,EAAArvB,UAAAgK,iBAAA,SAAAmmB,GACA,MAAAA,KAAAjyB,KAAAuxB,cAAAvxB,KAAA+K,eACA/K,KAAAohB,gBACAphB,KAAAkyB,oBACAlyB,KAAAwxB,8BAAArwB,IACAnB,KAAAwxB,oBAAA1nB,SAEA9J,KAAAuxB,wBAAApwB,IACAnB,KAAAuxB,cAAAznB,YAIAqnB,EAAArvB,UAAA2qB,SAAA,SAAA/I,GACA1jB,KAAA2jB,QAAAD,CACA,IAAAxc,GACAvG,EACAK,EAAA0iB,EAAA1iB,MAWA,IAVA6F,SAAA7G,KAAAuxB,eACArqB,EAAAlH,KAAAuxB,cACA5wB,EAAA,IAEAuG,EAAA/F,EAAAgG,QAAAuc,EAAA,IACA/iB,EAAA,GAGAX,KAAAwxB,oBAAAtqB,GAEAA,EAAAwY,aACA,KAAA/e,EAAAK,IAAAL,EAAA,CACA,GAAA0N,IACAwjB,MAAA,KACA3qB,MAAAwc,EAAA/iB,GACA+H,MAAA/H,EACAK,OAAAA,EACAiwB,MAAAjxB,KAEAkH,GAAAA,EAAApB,MAAA8rB,EAAA/qB,OAAAA,OAAAwH,EAAAxH,QAIAA,SAAA7G,KAAAyxB,cACAvqB,EAAAA,EACApB,MAAA9F,KAAAgyB,cAAAnrB,OAAAA,OAAA7G,KAAA6G,SAEAK,EAAApB,MAAA4rB,EAAAA,EAAA7qB,OAAAK,EAAAlH,OAGAmB,EAAAW,UAAAsZ,OAAA,SAAAvY,EAAAuuB,GACA,MAAAhW,GAAApb,KAAA6C,EAAAuuB,EAAA,OAGAjwB,EAAAia,OAAA,SAAA9Z,EAAAuB,EAAAuuB,EAAAC,GACA,MAAAjW,GAAA9Z,EAAAuB,EAAAuuB,EAAAC,OAyDApsB,SAAA,KAAAktB,IAAA,SAAA/wB,EAAA3B,EAAAD,GACA,YACA,IACAmD,GADAW,EAAAlC,EAAA,UAEAgxB,EAAA,WACA,KAAA,IAAAxxB,OAAA,mEAEAyxB,EAAA/uB,EAAAgvB,kBACA,IAAAhvB,EAAAS,QAAA,mBAAAwuB,kBAAA,CACA,GAAAC,GAAA1yB,EAAA2yB,aACAC,EAAAxxB,EAAAyxB,QACAhwB,GAAAW,EAAAsvB,aACA,SAAA/vB,GAAA2vB,EAAAzxB,KAAAjB,EAAA+C,IACA,SAAAA,GAAA6vB,EAAA3xB,KAAAG,EAAA2B,QACA,IAAA,kBAAAwvB,IACA,kBAAAA,GAAAlrB,QAAA,CACA,GAAA0rB,GAAAR,EAAAlrB,SACAxE,GAAA,SAAAE,GACAgwB,EAAAhT,KAAAhd,QAiCAF,GA/BA,mBAAA4vB,mBACA,mBAAA1yB,SACAA,OAAAizB,YACAjzB,OAAAizB,UAAAC,YAAAlzB,OAAAmzB,SA2BA,mBAAAP,cACA,SAAA5vB,GACA4vB,aAAA5vB,IAEA,mBAAAyB,YACA,SAAAzB,GACAyB,WAAAzB,EAAA,IAGAuvB,EAnCA,WACA,GAAAa,GAAApb,SAAAqb,cAAA,OACAra,GAAAsa,YAAA,GACAC,GAAA,EACAC,EAAAxb,SAAAqb,cAAA,OACAI,EAAA,GAAAf,kBAAA,WACAU,EAAAM,UAAAC,OAAA,OACAJ,GAAA,GAEAE,GAAAG,QAAAJ,EAAAxa,EAEA,IAAA6a,GAAA,WACAN,IACAA,GAAA,EACAC,EAAAE,UAAAC,OAAA,QAGA,OAAA,UAAA3wB,GACA,GAAAtC,GAAA,GAAAgyB,kBAAA,WACAhyB,EAAAozB,aACA9wB,KAEAtC,GAAAkzB,QAAAR,EAAApa,GACA6a,OAcAj0B,GAAAD,QAAAmD,IAEAsC,SAAA,KAAA2uB,IAAA,SAAAxyB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QACA,SAAA2B,EAAAqI,EAAAnE,GAIA,QAAAwuB,GAAAnQ,GACA1jB,KAAA+iB,aAAAW,GAJA,GAAA6C,GAAAplB,EAAAolB,kBACAjjB,EAAAlC,EAAA,SAKAkC,GAAA8V,SAAAya,EAAArqB,GAEAqqB,EAAA/xB,UAAAgyB,iBAAA,SAAAprB,EAAAqrB,GACA/zB,KAAA2jB,QAAAjb,GAAAqrB,CACA,IAAAjQ,KAAA9jB,KAAA+jB,cACA,OAAAD,IAAA9jB,KAAAkL,UACAlL,KAAAgkB,SAAAhkB,KAAA2jB,UACA,IAKAkQ,EAAA/xB,UAAA8f,kBAAA,SAAA1a,EAAAwB,GACA,GAAAnH,GAAA,GAAAglB,EAGA,OAFAhlB,GAAA0E,UAAA,SACA1E,EAAAyyB,mBAAA9sB,EACAlH,KAAA8zB,iBAAAprB,EAAAnH,IAEAsyB,EAAA/xB,UAAAggB,iBAAA,SAAAnO,EAAAjL,GACA,GAAAnH,GAAA,GAAAglB,EAGA,OAFAhlB,GAAA0E,UAAA,SACA1E,EAAAyyB,mBAAArgB,EACA3T,KAAA8zB,iBAAAprB,EAAAnH,IAGAJ,EAAA8yB,OAAA,SAAA3yB,GAEA,MADA+D,GAAAkM,WAAA,YAAA;AACA,GAAAsiB,GAAAvyB,GAAAG,WAGAN,EAAAW,UAAAmyB,OAAA,WACA,MAAA9yB,GAAA8yB,OAAAj0B,UAIAiF,SAAA,KAAAivB,IAAA,SAAA9yB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QACA,SAAA2B,EAAAqI,EAAAC,GAQA,QAAAjI,GAAAkiB,GACA1jB,KAAA+iB,aAAAW,GACA1jB,KAAAm0B,SAAA,EACAn0B,KAAAo0B,SAAA,EACAp0B,KAAAq0B,cAAA,EAiHA,QAAAC,GAAAhzB,EAAAizB,GACA,IAAA,EAAAA,KAAAA,GAAAA,EAAA,EACA,MAAA9qB,GAAA,iEAEA,IAAAlI,GAAA,GAAAC,GAAAF,GACAG,EAAAF,EAAAE,SAGA,OAFAF,GAAAG,WAAA6yB,GACAhzB,EAAAK,OACAH,EApIA,GAAA6B,GAAAlC,EAAA,UACAob,EAAApb,EAAA,YAAAob,WACAD,EAAAnb,EAAA,YAAAmb,eACA3Q,EAAAtI,EAAAsI,QACA4oB,IASAlxB,GAAA8V,SAAA5X,EAAAgI,GAEAhI,EAAAM,UAAA2hB,MAAA,WACA,GAAAzjB,KAAAq0B,aAAA,CAGA,GAAA,IAAAr0B,KAAAm0B,SAEA,WADAn0B,MAAAgkB,YAGAhkB,MAAAwjB,OAAA3c,UACA,IAAA4tB,GAAA7oB,EAAA5L,KAAA2jB,UACA3jB,KAAAohB,eACAqT,GACAz0B,KAAAm0B,SAAAn0B,KAAA00B,uBACA10B,KAAAyF,QAAAzF,KAAA20B,eAAA30B,KAAAgB,aAIAQ,EAAAM,UAAAF,KAAA,WACA5B,KAAAq0B,cAAA,EACAr0B,KAAAyjB,SAGAjiB,EAAAM,UAAAH,UAAA,WACA3B,KAAAo0B,SAAA,GAGA5yB,EAAAM,UAAAyyB,QAAA,WACA,MAAAv0B,MAAAm0B,UAGA3yB,EAAAM,UAAAJ,WAAA,SAAAkzB,GACA50B,KAAAm0B,SAAAS,GAGApzB,EAAAM,UAAA8f,kBAAA,SAAA1a,GAEA,MADAlH,MAAA60B,cAAA3tB,GACAlH,KAAA80B,eAAA90B,KAAAu0B,YACAv0B,KAAA2jB,QAAA3iB,OAAAhB,KAAAu0B,UACA,IAAAv0B,KAAAu0B,WAAAv0B,KAAAo0B,QACAp0B,KAAAgkB,SAAAhkB,KAAA2jB,QAAA,IAEA3jB,KAAAgkB,SAAAhkB,KAAA2jB,UAEA,IAKAniB,EAAAM,UAAAggB,iBAAA,SAAAnO,GAEA,MADA3T,MAAA+0B,aAAAphB,GACA3T,KAAAg1B,iBAGAxzB,EAAAM,UAAAyf,kBAAA,WACA,MAAAvhB,MAAA2jB,kBAAAxiB,IAAA,MAAAnB,KAAA2jB,QACA3jB,KAAA+K,WAEA/K,KAAA+0B,aAAAP,GACAx0B,KAAAg1B,kBAGAxzB,EAAAM,UAAAkzB,cAAA,WACA,GAAAh1B,KAAAu0B,UAAAv0B,KAAA00B,sBAAA,CAEA,IAAA,GADAx0B,GAAA,GAAAqc,GACA5b,EAAAX,KAAAgB,SAAAL,EAAAX,KAAA2jB,QAAA3iB,SAAAL,EACAX,KAAA2jB,QAAAhjB,KAAA6zB,GACAt0B,EAAA8C,KAAAhD,KAAA2jB,QAAAhjB,GAQA,OALAT,GAAAc,OAAA,EACAhB,KAAAyF,QAAAvF,GAEAF,KAAA+K,WAEA,EAEA,OAAA,GAGAvJ,EAAAM,UAAAgzB,WAAA,WACA,MAAA90B,MAAA+jB,gBAGAviB,EAAAM,UAAAmzB,UAAA,WACA,MAAAj1B,MAAA2jB,QAAA3iB,OAAAhB,KAAAgB,UAGAQ,EAAAM,UAAAizB,aAAA,SAAAphB,GACA3T,KAAA2jB,QAAA3gB,KAAA2Q,IAGAnS,EAAAM,UAAA+yB,cAAA,SAAA3tB,GACAlH,KAAA2jB,QAAA3jB,KAAA+jB,kBAAA7c,GAGA1F,EAAAM,UAAA4yB,oBAAA,WACA,MAAA10B,MAAAgB,SAAAhB,KAAAi1B,aAGAzzB,EAAAM,UAAA6yB,eAAA,SAAAC,GACA,GAAA3sB,GAAA,qCACAjI,KAAAm0B,SAAA,4BAAAS,EAAA,QACA,OAAA,IAAApY,GAAAvU,IAGAzG,EAAAM,UAAA0qB,mBAAA,WACAxsB,KAAAyF,QAAAzF,KAAA20B,eAAA,KAcAxzB,EAAAmzB,KAAA,SAAAhzB,EAAAizB,GACA,MAAAD,GAAAhzB,EAAAizB,IAGApzB,EAAAW,UAAAwyB,KAAA,SAAAC,GACA,MAAAD,GAAAt0B,KAAAu0B,IAGApzB,EAAAU,kBAAAL,KAGA4Y,WAAA,GAAAnV,SAAA,KAAAiwB,IAAA,SAAA9zB,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,GACA,QAAAolB,GAAA9kB,GACAoF,SAAApF,GACAA,EAAAA,EAAAkF,UACA3G,KAAAiG,UAAAxE,EAAAwE,UACAjG,KAAAg0B,mBAAAvyB,EAAA8lB,gBACA9lB,EAAA6U,gBAAAzP,SAGA7G,KAAAiG,UAAA,EACAjG,KAAAg0B,mBAAAntB,QAIA0f,EAAAzkB,UAAAwU,cAAA,WACA,MAAAtW,MAAAg0B,mBAGA,IAAA9sB,GAAAqf,EAAAzkB,UAAAoF,MAAA,WACA,IAAAlH,KAAAwP,cACA,KAAA,IAAApH,WAAA,4FAEA,OAAApI,MAAAsW,iBAGA3C,EAAA4S,EAAAzkB,UAAA6N,MACA4W,EAAAzkB,UAAA6R,OAAA,WACA,IAAA3T,KAAA0f,aACA,KAAA,IAAAtX,WAAA,0FAEA,OAAApI,MAAAsW,iBAGA9G,EAAA+W,EAAAzkB,UAAA0N,YAAA,WACA,MAAA,MAAA,SAAAxP,KAAAiG,YAGAyZ,EAAA6G,EAAAzkB,UAAA4d,WAAA,WACA,MAAA,MAAA,SAAA1f,KAAAiG,YAGAoF,EAAAkb,EAAAzkB,UAAAuJ,UAAA,WACA,MAAA,MAAA,SAAArL,KAAAiG,YAGA2mB,EAAArG,EAAAzkB,UAAA8qB,WAAA,WACA,MAAA,MAAA,SAAA5sB,KAAAiG,WAGAsgB,GAAAzkB,UAAA0J,YAAA,WACA,MAAA,MAAA,QAAAxL,KAAAiG,YAGA9E,EAAAW,UAAAqzB,cAAA,WACA,MAAA,UAAA,MAAAn1B,KAAAiG,YAGA9E,EAAAW,UAAAwJ,aAAA,WACA,MAAAtL,MAAA2G,UAAAwuB,iBAGAh0B,EAAAW,UAAA0J,YAAA,WACA,MAAA,MAAA,QAAAxL,KAAA2G,UAAAV,YAGA9E,EAAAW,UAAAuJ,UAAA,WACA,MAAAA,GAAAtK,KAAAf,KAAA2G,YAGAxF,EAAAW,UAAA4d,WAAA,WACA,MAAAA,GAAA3e,KAAAf,KAAA2G,YAGAxF,EAAAW,UAAA0N,YAAA,WACA,MAAAA,GAAAzO,KAAAf,KAAA2G,YAGAxF,EAAAW,UAAA8qB,WAAA,WACA,MAAAA,GAAA7rB,KAAAf,KAAA2G,YAGAxF,EAAAW,UAAAoF,MAAA,WACA,MAAAA,GAAAnG,KAAAf,KAAA2G,YAGAxF,EAAAW,UAAA6R,OAAA,WACA,GAAAxN,GAAAnG,KAAA2G,SAEA,OADAR,GAAAuQ,6BACA/C,EAAA5S,KAAAoF,IAGAhF,EAAAW,UAAAgZ,OAAA,WACA,MAAA9a,MAAAsW,iBAGAnV,EAAAW,UAAA6Y,QAAA,WAEA,MADA3a,MAAA0W,6BACA1W,KAAAsW,iBAGAnV,EAAAolB,kBAAAA,QAGA6O,IAAA,SAAAh0B,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAgE,GAKA,QAAAC,GAAA2B,EAAApB,GACA,GAAA+G,EAAA3F,GAAA,CACA,GAAAA,YAAA5F,GAAA,MAAA4F,EACA,IAAA8Y,GAAAwV,EAAAtuB,EACA,IAAA8Y,IAAAlW,EAAA,CACAhE,GAAAA,EAAA+H,cACA,IAAAnM,GAAAJ,EAAAyN,OAAAiR,EAAA3f,EAEA,OADAyF,IAAAA,EAAAgI,cACApM,EACA,GAAA,kBAAAse,GAAA,CACA,GAAAyV,EAAAvuB,GAAA,CACA,GAAAxF,GAAA,GAAAJ,GAAAgE,EAQA,OAPA4B,GAAAjB,MACAvE,EAAA+f,SACA/f,EAAAkE,QACAoB,OACAtF,EACA,MAEAA,EAEA,MAAAg0B,GAAAxuB,EAAA8Y,EAAAla,IAGA,MAAAoB,GAGA,QAAAyuB,GAAAzuB,GACA,MAAAA,GAAA8Y,KAGA,QAAAwV,GAAAtuB,GACA,IACA,MAAAyuB,GAAAzuB,GACA,MAAA7G,GAEA,MADAyJ,GAAAzJ,EAAAA,EACAyJ,GAKA,QAAA2rB,GAAAvuB,GACA,IACA,MAAA0uB,GAAA10B,KAAAgG,EAAA,aACA,MAAA7G,GACA,OAAA,GAIA,QAAAq1B,GAAA9L,EAAA5J,EAAAla,GAeA,QAAAwB,GAAAD,GACAzF,IACAA,EAAAyE,iBAAAgB,GACAzF,EAAA,MAGA,QAAAmN,GAAA+E,GACAlS,IACAA,EAAAugB,gBAAArO,EAAAyV,GAAA,GACA3nB,EAAA,MAvBA,GAAAA,GAAA,GAAAN,GAAAgE,GACA5D,EAAAE,CACAkE,IAAAA,EAAA+H,eACAjM,EAAAwV,qBACAtR,GAAAA,EAAAgI,aACA,IAAAyb,IAAA,EACAhU,EAAA9R,EAAAoG,SAAAmW,GAAA9e,KAAA0oB,EAAAtiB,EAAAyH,EAmBA,OAlBAwa,IAAA,EAEA3nB,GAAA2T,IAAAzL,IACAlI,EAAAugB,gBAAA5M,EAAAlV,GAAA,GAAA,GACAuB,EAAA,MAcAF,EA/EA,GAAA+B,GAAAlC,EAAA,UACAuI,EAAArG,EAAAqG,SACA+C,EAAApJ,EAAAoJ,SA0CA+oB,KAAAzX,cAsCA,OAAA5Y,MAGAH,SAAA,KAAAywB,IAAA,SAAAt0B,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAgE,EAAAE,GAIA,QAAAswB,GAAAC,GACA51B,KAAA41B,OAAAA,EAqDA,QAAAC,GAAA3uB,GAEA,MADA4uB,cAAA91B,KAAA41B,QACA1uB,EAGA,QAAA6uB,GAAApiB,GAEA,KADAmiB,cAAA91B,KAAA41B,QACAjiB,EAhEA,GAAArQ,GAAAlC,EAAA,UACAkb,EAAAnb,EAAAmb,YAMAqZ,GAAA7zB,UAAAgK,iBAAA,WACAgqB,aAAA91B,KAAA41B,QAGA,IAAAI,GAAA,SAAA9uB,GAAA,MAAA+uB,IAAAj2B,MAAAwa,WAAAtT,IACA+uB,EAAA90B,EAAA80B,MAAA,SAAAC,EAAAhvB,GACA,GAAA3F,GACAq0B,CAgBA,OAfA/uB,UAAAK,GACA3F,EAAAJ,EAAAgG,QAAAD,GACApB,MAAAkwB,EAAA,KAAA,KAAAE,EAAArvB,QACAxB,EAAA0E,gBAAA7C,YAAA/F,IACAI,EAAAuF,aAAAI,KAGA3F,EAAA,GAAAJ,GAAAgE,GACAywB,EAAAtxB,WAAA,WAAA/C,EAAA+f,aAAA4U,GACA7wB,EAAA0E,gBACAxI,EAAAuF,aAAA,GAAA6uB,GAAAC,IAEAr0B,EAAA0V,sBAEA1V,EAAAimB,sBACAjmB,EAGAJ,GAAAW,UAAAm0B,MAAA,SAAAC,GACA,MAAAD,GAAAC,EAAAl2B,MAGA,IAAAm2B,GAAA,SAAA10B,EAAAwG,EAAAsC,GACA,GAAAwP,EAGAA,GAFA,gBAAA9R,GACAA,YAAArH,OACAqH,EAEA,GAAAqU,GAAA,uBAGA,GAAAA,GAAArU,GAEA3E,EAAAohB,+BAAA3K,GACAtY,EAAAoK,kBAAAkO,GACAtY,EAAAgE,QAAAsU,GAEA,MAAAxP,GACAA,EAAAT,SAcA3I,GAAAW,UAAAs0B,QAAA,SAAAF,EAAAjuB,GACAiuB,GAAAA,CACA,IAAA30B,GAAAgJ,EAEA8rB,EAAA,GAAAV,GAAArxB,WAAA,WACA/C,EAAA8J,aACA8qB,EAAA50B,EAAA0G,EAAAsC,IAEA2rB,GAYA,OAVA7wB,GAAA0E,gBACAQ,EAAAvK,KAAA6f,OACAte,EAAAgJ,EAAAzE,MAAA+vB,EAAAE,EACAlvB,OAAAwvB,EAAAxvB,QACAtF,EAAAuF,aAAAuvB,IAEA90B,EAAAvB,KAAA8F,MAAA+vB,EAAAE,EACAlvB,OAAAwvB,EAAAxvB,QAGAtF,MAKA0D,SAAA,KAAAqxB,IAAA,SAAAl1B,EAAA3B,EAAAD,GACA,YACAC,GAAAD,QAAA,SAAA2B,EAAAsI,EAAArE,EACAiI,EAAAlI,EAAAE,GAQA,QAAAkV,GAAAra,GACAoE,WAAA,WAAA,KAAApE,IAAA,GAGA,QAAAq2B,GAAAC,GACA,GAAA9vB,GAAAtB,EAAAoxB,EAOA,OANA9vB,KAAA8vB,GACA,kBAAAA,GAAAC,eACA,kBAAAD,GAAAE,cACAF,EAAAC,iBACA/vB,EAAAiwB,eAAAH,EAAAE,gBAEAhwB,EAEA,QAAAkwB,GAAAC,EAAA9C,GAIA,QAAA+C,KACA,GAAAn2B,GAAAujB,EAAA,MAAA3iB,GAAA+f,UACA,IAAA5a,GAAA6vB,EAAAM,EAAAl2B,KACA,IAAA+F,YAAAvF,IACAuF,EAAA+vB,gBAAA,CACA,IACA/vB,EAAAtB,EACAsB,EAAAgwB,eAAAK,WAAAhD,GACA8C,EAAAp1B,SACA,MAAAvB,GACA,MAAAqa,GAAAra,GAEA,GAAAwG,YAAAvF,GACA,MAAAuF,GAAAZ,MAAAgxB,EAAAvc,EACA,KAAA,KAAA,MAGAuc,IApBA,GAAAn2B,GAAA,EACAujB,EAAA2S,EAAA71B,OACAO,EAAA,GAAAJ,GAAAgE,EAqBA,OADA2xB,KACAv1B,EAGA,QAAAy1B,GAAAC,EAAAx1B,EAAAkE,GACA3F,KAAAk3B,MAAAD,EACAj3B,KAAA0gB,SAAAjf,EACAzB,KAAAm3B,SAAAxxB,EAoCA,QAAAyxB,GAAAv0B,EAAApB,EAAAkE,GACA3F,KAAA+iB,aAAAlgB,EAAApB,EAAAkE,GASA,QAAA0xB,GAAAnwB,GACA,MAAA8vB,GAAAM,WAAApwB,IACAlH,KAAA62B,UAAA72B,KAAA0I,OAAAiuB,eAAAzvB,GACAA,EAAAzF,WAEAyF,EAGA,QAAAqwB,GAAAv2B,GACAhB,KAAAgB,OAAAA,EACAhB,KAAAyB,QAAA,KACAzB,KAAAgB,EAAA,GAAA,KA5GA,GAAAsC,GAAAlC,EAAA,UACAgH,EAAAhH,EAAA,YAAAgH,UACAgR,EAAAhY,EAAA,UAAAgY,SACAzP,EAAArG,EAAAqG,SACAD,EAAApG,EAAAoG,SACA8tB,IAiDAR,GAAAl1B,UAAAm1B,KAAA,WACA,MAAAj3B,MAAAk3B,OAGAF,EAAAl1B,UAAAL,QAAA,WACA,MAAAzB,MAAA0gB,UAGAsW,EAAAl1B,UAAA21B,SAAA,WACA,MAAAz3B,MAAAyB,UAAA+N,cACAxP,KAAAyB,UAAAyF,QAEAswB,GAGAR,EAAAl1B,UAAAi1B,WAAA,SAAAhD,GACA,GAAA0D,GAAAz3B,KAAAy3B,WACA9xB,EAAA3F,KAAAm3B,QACAtwB,UAAAlB,GAAAA,EAAA+H,cACA,IAAAnM,GAAAk2B,IAAAD,EACAx3B,KAAA03B,UAAAD,EAAA1D,GAAA,IAIA,OAHAltB,UAAAlB,GAAAA,EAAAgI,cACA3N,KAAA0gB,SAAAiX,mBACA33B,KAAAk3B,MAAA,KACA31B,GAGAy1B,EAAAM,WAAA,SAAAM,GACA,MAAA,OAAAA,GACA,kBAAAA,GAAAH,UACA,kBAAAG,GAAAb,YAMA3d,EAAAge,EAAAJ,GAEAI,EAAAt1B,UAAA41B,UAAA,SAAAD,EAAA1D,GACA,GAAAlxB,GAAA7C,KAAAi3B,MACA,OAAAp0B,GAAA9B,KAAA02B,EAAAA,EAAA1D,IAiBAwD,EAAAz1B,UAAAgK,iBAAA,WAEA,IAAA,GADAoY,GAAAlkB,KAAAgB,OACAL,EAAA,EAAAA,EAAAujB,IAAAvjB,EAAA,CACA,GAAA6L,GAAAxM,KAAAW,EACA6L,aAAArL,IACAqL,EAAA1C,WAKA3I,EAAA02B,MAAA,WACA,GAAA3T,GAAA7f,UAAArD,MACA,IAAAkjB,EAAA,EAAA,MAAAza,GACA,sDACA,IAAA5G,GAAAwB,UAAA6f,EAAA,EACA,IAAA,kBAAArhB,GACA,MAAA4G,GAAA,gCAAAnG,EAAA4E,YAAArF,GAEA,IAAAi1B,GACAC,GAAA,CACA,KAAA7T,GAAAxH,MAAA9Q,QAAAvH,UAAA,KACAyzB,EAAAzzB,UAAA,GACA6f,EAAA4T,EAAA92B,OACA+2B,GAAA,IAEAD,EAAAzzB,UACA6f,IAGA,KAAA,GADA2S,GAAA,GAAAU,GAAArT,GACAvjB,EAAA,EAAAA,EAAAujB,IAAAvjB,EAAA,CACA,GAAA82B,GAAAK,EAAAn3B,EACA,IAAAq2B,EAAAM,WAAAG,GAAA,CACA,GAAAO,GAAAP,CACAA,GAAAA,EAAAh2B,UACAg2B,EAAAd,eAAAqB,OACA,CACA,GAAAtxB,GAAAtB,EAAAqyB,EACA/wB,aAAAvF,KACAs2B,EACA/wB,EAAAZ,MAAAuxB,EAAA,KAAA,MACAR,UAAAA,EACAnuB,MAAA/H,GACAkG,SAGAgwB,EAAAl2B,GAAA82B,EAIA,IAAA,GADAQ,GAAA,GAAAvb,OAAAma,EAAA71B,QACAL,EAAA,EAAAA,EAAAs3B,EAAAj3B,SAAAL,EACAs3B,EAAAt3B,GAAAQ,EAAAgG,QAAA0vB,EAAAl2B,IAAAgmB,SAGA,IAAAuR,GAAA/2B,EAAAka,IAAA4c,GACApY,KAAA,SAAAsY,GACA,IAAA,GAAAx3B,GAAA,EAAAA,EAAAw3B,EAAAn3B,SAAAL,EAAA,CACA,GAAAozB,GAAAoE,EAAAx3B,EACA,IAAAozB,EAAArU,aAEA,MADA/V,GAAAzJ,EAAA6zB,EAAApkB,QACAhG,CACA,KAAAoqB,EAAAvkB,cAEA,WADA0oB,GAAApuB,QAGAquB,GAAAx3B,GAAAozB,EAAA7sB,QAEAzF,EAAAiM,eAEA7K,EAAA6G,EAAA7G,EACA,IAAAtB,GAAAw2B,EACAl1B,EAAA0F,MAAA1B,OAAAsxB,GAAAt1B,EAAAs1B,GACA5nB,EAAA9O,EAAAkM,aAGA,OAFAtI,GAAAgL,sBACA9O,EAAAgP,EAAA,gBAAA9O,GACAF,IAGAE,EAAAy2B,EAAApY,OAAA,WACA,GAAAiU,GAAA,GAAA5yB,GAAAolB,kBAAA2R,EACA,OAAAtB,GAAAC,EAAA9C,IAIA,OAFA8C,GAAAp1B,QAAAA,EACAA,EAAAqF,aAAA+vB,GACAp1B,GAGAN,EAAAW,UAAA60B,eAAA,SAAAqB,GACAh4B,KAAAiG,UAAA,OAAAjG,KAAAiG,UACAjG,KAAAo4B,UAAAJ,GAGA72B,EAAAW,UAAA20B,cAAA,WACA,OAAA,OAAAz2B,KAAAiG,WAAA,GAGA9E,EAAAW,UAAA40B,aAAA,WACA,MAAA12B,MAAAo4B,WAGAj3B,EAAAW,UAAA61B,iBAAA,WACA33B,KAAAiG,UAAAjG,KAAAiG,kBACAjG,KAAAo4B,UAAAvxB,QAGA1F,EAAAW,UAAAk2B,SAAA,SAAAn1B,GACA,GAAA,kBAAAA,GACA,MAAA,IAAAu0B,GAAAv0B,EAAA7C,KAAAqN,IAEA,MAAA,IAAAjF,OAKAgS,WAAA,GAAAnV,SAAA,KAAAozB,IAAA,SAAAj3B,EAAA3B,EAAAD,GACA,YAWA,SAAA84B,KACA,IACA,GAAAnyB,GAAAoyB,CAEA,OADAA,GAAA,KACApyB,EAAAoC,MAAAvI,KAAAqE,WACA,MAAAnE,GAEA,MADAyJ,GAAAzJ,EAAAA,EACAyJ,GAGA,QAAAD,GAAA7G,GAEA,MADA01B,GAAA11B,EACAy1B,EAuBA,QAAAE,GAAAvT,GACA,MAAA,OAAAA,GAAAA,KAAA,GAAAA,KAAA,GACA,gBAAAA,IAAA,gBAAAA,GAIA,QAAAvY,GAAAxF,GACA,MAAA,kBAAAA,IACA,gBAAAA,IAAA,OAAAA,EAGA,QAAA4d,GAAA2T,GACA,MAAAD,GAAAC,GAEA,GAAA73B,OAAA83B,EAAAD,IAFAA,EAKA,QAAAvK,GAAA/nB,EAAAwyB,GACA,GAEAh4B,GAFAujB,EAAA/d,EAAAnF,OACAO,EAAA,GAAAmb,OAAAwH,EAAA,EAEA,KAAAvjB,EAAA,EAAAA,EAAAujB,IAAAvjB,EACAY,EAAAZ,GAAAwF,EAAAxF,EAGA,OADAY,GAAAZ,GAAAg4B,EACAp3B,EAGA,QAAA6rB,GAAArmB,EAAA+F,EAAA8rB,GACA,IAAA1c,EAAAmB,MASA,SAAAW,eAAAjd,KAAAgG,EAAA+F,GAAA/F,EAAA+F,GAAAjG,MARA,IAAAwX,GAAA1W,OAAA4V,yBAAAxW,EAAA+F,EAEA,OAAA,OAAAuR,EACA,MAAAA,EAAAnV,KAAA,MAAAmV,EAAAP,IACAO,EAAAnX,MACA0xB,EAHA,OAUA,QAAAzoB,GAAApJ,EAAAyH,EAAAtH,GACA,GAAAsxB,EAAAzxB,GAAA,MAAAA,EACA,IAAA8W,IACA3W,MAAAA,EACA0V,cAAA,EACAE,YAAA,EACAD,UAAA,EAGA,OADAX,GAAAS,eAAA5V,EAAAyH,EAAAqP,GACA9W,EAGA,QAAAwT,GAAAla,GACA,KAAAA,GAsEA,QAAAyuB,GAAAjsB,GACA,IACA,GAAA,kBAAAA,GAAA,CACA,GAAA8J,GAAAuP,EAAAsB,MAAA3a,EAAAf,WAEA+2B,EAAA3c,EAAAmB,OAAA1Q,EAAA3L,OAAA,EACA83B,EAAAnsB,EAAA3L,OAAA,KACA,IAAA2L,EAAA3L,QAAA,gBAAA2L,EAAA,IACAosB,EACAC,EAAA/nB,KAAApO,EAAA,KAAAqZ,EAAAsB,MAAA3a,GAAA7B,OAAA,CAEA,IAAA63B,GAAAC,GACAC,EACA,OAAA,EAGA,OAAA,EACA,MAAA74B,GACA,OAAA,GAIA,QAAAkqB,GAAArjB,GAEA,QAAAkyB,MACAA,EAAAn3B,UAAAiF,CAEA,KADA,GAAAjG,GAAA,EACAA,KAAA,GAAAm4B,EACA,OAAAlyB,GAKA,QAAAgC,GAAA+K,GACA,MAAAolB,GAAAjoB,KAAA6C,GAGA,QAAAqlB,GAAAvE,EAAAwE,EAAAjM,GAEA,IAAA,GADA5rB,GAAA,GAAAmb,OAAAkY,GACAj0B,EAAA,EAAAA,EAAAi0B,IAAAj0B,EACAY,EAAAZ,GAAAy4B,EAAAz4B,EAAAwsB,CAEA,OAAA5rB,GAGA,QAAAm3B,GAAA3xB,GACA,IACA,MAAAA,GAAA,GACA,MAAA7G,GACA,MAAA,8BAIA,QAAAm5B,GAAAtyB,GACA,MAAA,QAAAA,GACA,gBAAAA,IACA,gBAAAA,GAAAkB,SACA,gBAAAlB,GAAAyH,KAGA,QAAAkW,GAAAxkB,GACA,IACAiQ,EAAAjQ,EAAA,iBAAA,GAEA,MAAAo5B,KAGA,QAAApS,GAAAhnB,GACA,MAAA,OAAAA,IACAA,YAAAU,OAAA,uBAAAkb,kBACA5b,EAAA,iBAAA,GAGA,QAAA2P,GAAA9I,GACA,MAAAsyB,GAAAtyB,IAAAmV,EAAAyB,mBAAA5W,EAAA,SAkBA,QAAAmB,GAAAnB,GACA,SAAAoB,SAAApH,KAAAgG,GAGA,QAAA8nB,GAAA0K,EAAAC,EAAA5a,GAEA,IAAA,GADAjS,GAAAuP,EAAAsB,MAAA+b,GACA54B,EAAA,EAAAA,EAAAgM,EAAA3L,SAAAL,EAAA,CACA,GAAAmM,GAAAH,EAAAhM,EACA,IAAAie,EAAA9R,GACA,IACAoP,EAAAS,eAAA6c,EAAA1sB,EAAAoP,EAAAoB,cAAAic,EAAAzsB,IACA,MAAAwsB,MAyCA,QAAAxjB,GAAAhJ,GACA,MAAA2sB,GAAAv4B,EAAA4U,IAAAhJ,GAAAjG,OAGA,QAAAyrB,KACA,GAAA,kBAAAnxB,SACA,IACA,GAAAM,GAAA,GAAAN,SAAA,aACA,IAAA,wBAAAgH,SAAApH,KAAAU,GACA,MAAAN,SAEA,MAAAjB,KAIA,QAAA2W,GAAA9W,EAAAsM,GACA,MAAAtM,GAAAsG,KAAAgG,GA1UA,GAAA6P,GAAA9a,EAAA,SACA0H,EAAA,mBAAAgqB,WAEAnpB,GAAAzJ,MACAq4B,EACAmB,EAAA,mBAAA35B,MAAAA,KACA,mBAAAF,QAAAA,OACA,mBAAAC,GAAAA,EACA+G,SAAA7G,KAAAA,KAAA,KAiBAoZ,EAAA,SAAAugB,EAAAC,GAGA,QAAAC,KACA75B,KAAA6b,YAAA8d,EACA35B,KAAA+iB,aAAA6W,CACA,KAAA,GAAAzwB,KAAAywB,GAAA93B,UACA2zB,EAAA10B,KAAA64B,EAAA93B,UAAAqH,IACA,MAAAA,EAAA4J,OAAA5J,EAAAnI,OAAA,KAEAhB,KAAAmJ,EAAA,KAAAywB,EAAA93B,UAAAqH,IATA,GAAAssB,MAAAzX,cAeA,OAFA6b,GAAA/3B,UAAA83B,EAAA93B,UACA63B,EAAA73B,UAAA,GAAA+3B,GACAF,EAAA73B,WA8DA4rB,EAAA,WACA,GAAAoM,IACApd,MAAA5a,UACA6F,OAAA7F,UACAi4B,SAAAj4B,WAGAk4B,EAAA,SAAA/U,GACA,IAAA,GAAAtkB,GAAA,EAAAA,EAAAm5B,EAAA94B,SAAAL,EACA,GAAAm5B,EAAAn5B,KAAAskB,EACA,OAAA,CAGA,QAAA,EAGA,IAAA/I,EAAAmB,MAAA,CACA,GAAAzQ,GAAAjF,OAAA8V,mBACA,OAAA,UAAA1W,GAGA,IAFA,GAAAxF,MACA04B,EAAAtyB,OAAAC,OAAA,MACA,MAAAb,IAAAizB,EAAAjzB,IAAA,CACA,GAAA4F,EACA,KACAA,EAAAC,EAAA7F,GACA,MAAA7G,GACA,MAAAqB,GAEA,IAAA,GAAAZ,GAAA,EAAAA,EAAAgM,EAAA3L,SAAAL,EAAA,CACA,GAAAmM,GAAAH,EAAAhM,EACA,KAAAs5B,EAAAntB,GAAA,CACAmtB,EAAAntB,IAAA,CACA,IAAAuR,GAAA1W,OAAA4V,yBAAAxW,EAAA+F,EACA,OAAAuR,GAAA,MAAAA,EAAAnV,KAAA,MAAAmV,EAAAP,KACAvc,EAAAyB,KAAA8J,IAGA/F,EAAAmV,EAAAwB,eAAA3W,GAEA,MAAAxF,IAGA,GAAAk0B,MAAAzX,cACA,OAAA,UAAAjX,GACA,GAAAizB,EAAAjzB,GAAA,QACA,IAAAxF,KAGA24B,GAAA,IAAA,GAAAptB,KAAA/F,GACA,GAAA0uB,EAAA10B,KAAAgG,EAAA+F,GACAvL,EAAAyB,KAAA8J,OACA,CACA,IAAA,GAAAnM,GAAA,EAAAA,EAAAm5B,EAAA94B,SAAAL,EACA,GAAA80B,EAAA10B,KAAA+4B,EAAAn5B,GAAAmM,GACA,QAAAotB,EAGA34B,GAAAyB,KAAA8J,GAGA,MAAAvL,OAMAy3B,EAAA,sBAiCAE,EAAA,wBA6CA5P,EAAA,WACA,MAAA,SAAA,IAAA1oB,OAOA,SAAAsG,GACA,MAAA2I,GAAA3I,GAAAA,EACA,GAAAtG,OAAA83B,EAAAxxB,KARA,SAAAA,GACA,GAAA2I,EAAA3I,GAAA,MAAAA,EACA,KAAA,KAAA,IAAAtG,OAAA83B,EAAAxxB,IACA,MAAA6S,GAAA,MAAAA,QA0BAwS,EAAA,SAAAtG,GACA,MAAA/J,GAAAtQ,QAAAqa,GACAA,EAEA,KAGA,IAAA,mBAAAkU,SAAAA,OAAArD,SAAA,CACA,GAAAsD,GAAA,kBAAA1d,OAAA6c,KAAA,SAAAtT,GACA,MAAAvJ,OAAA6c,KAAAtT,IACA,SAAAA,GAIA,IAHA,GAEAoU,GAFA94B,KACA+4B,EAAArU,EAAAkU,OAAArD,cAEAuD,EAAAC,EAAAzY,QAAA,MACAtgB,EAAAyB,KAAAq3B,EAAAnzB,MAEA,OAAA3F,GAGAgrB,GAAA,SAAAtG,GACA,MAAA/J,GAAAtQ,QAAAqa,GACAA,EACA,MAAAA,GAAA,kBAAAA,GAAAkU,OAAArD,UACAsD,EAAAnU,GAEA,MAIA,GAAAliB,GAAA,mBAAA7C,IACA,qBAAAgH,EAAAhH,GAAAuW,cAEAgiB,EAAA,mBAAAv4B,IACA,mBAAAA,GAAA4U,IAqBAvU,GACAutB,QAAAA,EACA/lB,aAAAA,EACA2kB,kBAAAA,EACAN,yBAAAA,EACA7S,QAAAA,EACA3O,QAAAsQ,EAAAtQ,QACA2gB,QAAAA,EACApc,kBAAAA,EACAqoB,YAAAA,EACA9rB,SAAAA,EACA2sB,QAAAA,EACAvwB,YAAAA,EACAa,SAAAA,EACAD,SAAAA,EACA0P,SAAAA,EACA8U,aAAAA,EACApJ,iBAAAA,EACAsF,iBAAAA,EACA+O,YAAAA,EACAhxB,SAAAuwB,EACA7oB,eAAAA,EACAyZ,kBAAAA,EACApC,wBAAAA,EACAxC,+BAAAA,EACAxc,YAAAA,EACA2mB,gBAAAA,EACAjrB,YAAA,mBAAA22B,SAAAA,QACA,kBAAAA,QAAAC,UACAz2B,OAAAA,EACA01B,gBAAAA,EACA3jB,IAAAA,EACAhW,OAAA45B,EACApH,iBAAAA,EACAzb,WAAAA,EAEAtV,GAAAqxB,aAAArxB,EAAAwC,QAAA,WACA,GAAAomB,GAAAjpB,EAAAu5B,SAAAlhB,KAAA1I,MAAA,KAAA8N,IAAA+b,OACA,OAAA,KAAAvQ,EAAA,IAAAA,EAAA,GAAA,IAAAA,EAAA,GAAA,KAGA5oB,EAAAwC,QAAAxC,EAAA6oB,iBAAAlpB,EAEA,KAAA,KAAA,IAAAN,OAAA,MAAAV,GAAAqB,EAAAuT,cAAA5U,EACAT,EAAAD,QAAA+B,IAEAwL,QAAA,UAAA,IAAA,KACA,mBAAAlN,SAAA,OAAAA,OAAAA,OAAA86B,EAAA96B,OAAAsB,QAAA,mBAAApB,OAAA,OAAAA,OAAAA,KAAA46B,EAAA56B,KAAAoB,WDGGJ,KAAKf,KAAKU,EAAQ,YAA8B,mBAAXZ,QAAyBA,OAAyB,mBAATC,MAAuBA,KAAyB,mBAAXF,QAAyBA,aAE5I+6B,SAAW,IAAI74B,GAAG,SAASrB,EAAQjB,EAAOD,IE18K7C,SAAAqH,GAOA,QAAAjF,KACA5B,KAAA66B,WACA76B,KAAA86B,OACAC,EAAAh6B,KAAAf,KAAAA,KAAA86B,OAIA,QAAAC,GAAAC,GACAA,GACAh7B,KAAA86B,MAAAE,EAEAA,EAAAC,YAAAj7B,KAAAi7B,UAAAD,EAAAC,WACAj7B,KAAA66B,QAAAK,aAAAF,EAAAE,eAAAr0B,EAAAm0B,EAAAE,aAAAC,EACAH,EAAAI,WAAAp7B,KAAAo7B,SAAAJ,EAAAI,UACAJ,EAAAK,cAAAr7B,KAAAq7B,YAAAL,EAAAK,aACAL,EAAAM,oBAAAt7B,KAAAs7B,kBAAAN,EAAAM,mBAEAt7B,KAAAo7B,WACAp7B,KAAAu7B,kBAGAv7B,KAAA66B,QAAAK,aAAAC,EAIA,QAAAK,GAAA5G,EAAA6G,GACA,GAAAC,GAAA,kIAIA17B,MAAAs7B,mBACAI,GAAA,mBACAtoB,QAAAzD,MAAA+rB,EAAA9G,EAAA6G,IAEAroB,QAAAzD,MAAA+rB,EAAA9G,GAGAxhB,QAAAvF,OACAuF,QAAAvF,QAIA,QAAA8tB,GAAAX,GACAh7B,KAAA66B,WACA76B,KAAAq7B,aAAA,EACAr7B,KAAAs7B,mBAAA,EACAP,EAAAh6B,KAAAf,KAAAg7B,GASA,QAAAY,GAAAC,EAAA7c,EAAA8c,EAAAn7B,GACA,IAAAm7B,EACA,QAEA,IAAAC,GAAA7X,EAAA8X,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,KACAC,EAAAtd,EAAAhe,OAAAu7B,EAAAvd,EAAAre,GAAA67B,EAAAxd,EAAAre,EAAA,EACA,IAAAA,IAAA27B,GAAAR,EAAAW,WAAA,CAKA,GAAA,kBAAAX,GAAAW,WAEA,MADAZ,IAAAA,EAAA74B,KAAA84B,EAAAW,aACAX,EAEA,KAAAC,EAAA,EAAA7X,EAAA4X,EAAAW,WAAAz7B,OAAA+6B,EAAA7X,EAAA6X,IACAF,GAAAA,EAAA74B,KAAA84B,EAAAW,WAAAV,GAEA,QAAAD,GAIA,GAAA,MAAAS,GAAA,OAAAA,GAAAT,EAAAS,GAAA,CAKA,GAAA,MAAAA,EAAA,CACA,IAAAP,IAAAF,GACA,eAAAE,GAAAF,EAAA9d,eAAAge,KACAK,EAAAA,EAAArb,OAAA4a,EAAAC,EAAA7c,EAAA8c,EAAAE,GAAAr7B,EAAA,IAGA,OAAA07B,GACA,GAAA,OAAAE,EAAA,CACAH,EAAAz7B,EAAA,IAAA27B,GAAA37B,EAAA,IAAA27B,GAAA,MAAAE,EACAJ,GAAAN,EAAAW,aAEAJ,EAAAA,EAAArb,OAAA4a,EAAAC,EAAA7c,EAAA8c,EAAAQ,IAGA,KAAAN,IAAAF,GACA,eAAAE,GAAAF,EAAA9d,eAAAge,KACA,MAAAA,GAAA,OAAAA,GACAF,EAAAE,GAAAS,aAAAL,IACAC,EAAAA,EAAArb,OAAA4a,EAAAC,EAAA7c,EAAA8c,EAAAE,GAAAM,KAEAD,EAAAA,EAAArb,OAAA4a,EAAAC,EAAA7c,EAAA8c,EAAAE,GAAAr7B,KAEA07B,EADAL,IAAAQ,EACAH,EAAArb,OAAA4a,EAAAC,EAAA7c,EAAA8c,EAAAE,GAAAr7B,EAAA,IAGA07B,EAAArb,OAAA4a,EAAAC,EAAA7c,EAAA8c,EAAAE,GAAAr7B,IAIA,OAAA07B,GAGAA,EAAAA,EAAArb,OAAA4a,EAAAC,EAAA7c,EAAA8c,EAAAS,GAAA57B,EAAA,IAaA,GAVAs7B,EAAAH,EAAA,KACAG,GAKAL,EAAAC,EAAA7c,EAAAid,EAAAt7B,EAAA,GAGAu7B,EAAAJ,EAAA,MAEA,GAAAn7B,EAAA27B,EAAA,CACAJ,EAAAO,YAEAb,EAAAC,EAAA7c,EAAAkd,EAAAI,EAIA,KAAAN,IAAAE,GACA,eAAAF,GAAAE,EAAAle,eAAAge,KACAA,IAAAQ,EAEAZ,EAAAC,EAAA7c,EAAAkd,EAAAF,GAAAr7B,EAAA,GACAq7B,IAAAO,EAEAX,EAAAC,EAAA7c,EAAAkd,EAAAF,GAAAr7B,EAAA,IAEAw7B,KACAA,EAAAH,GAAAE,EAAAF,GACAJ,EAAAC,EAAA7c,GAAA0d,KAAAP,GAAAx7B,EAAA,SAIAu7B,GAAAO,WAEAb,EAAAC,EAAA7c,EAAAkd,EAAAI,GACAJ,EAAA,MAAAA,EAAA,KAAAO,YACAb,EAAAC,EAAA7c,EAAAkd,EAAA,KAAAI,EAIA,OAAAD,GAGA,QAAAM,GAAA3d,EAAA4d,GAEA5d,EAAA,gBAAAA,GAAAA,EAAAnO,MAAA7Q,KAAAi7B,WAAAjc,EAAA/V,OAKA,KAAA,GAAAtI,GAAA,EAAAujB,EAAAlF,EAAAhe,OAAAL,EAAA,EAAAujB,EAAAvjB,IACA,GAAA,OAAAqe,EAAAre,IAAA,OAAAqe,EAAAre,EAAA,GACA,MAOA,KAHA,GAAAm7B,GAAA97B,KAAAu7B,aACA/sB,EAAAwQ,EAAAna,QAEA2J,IAAA3H,GAAA,CAQA,GANAi1B,EAAAttB,KACAstB,EAAAttB,OAGAstB,EAAAA,EAAAttB,GAEA,IAAAwQ,EAAAhe,OAqBA,MAnBA86B,GAAAW,YAIA,kBAAAX,GAAAW,aACAX,EAAAW,YAAAX,EAAAW,aAGAX,EAAAW,WAAAz5B,KAAA45B,IAGAd,EAAAW,WAAAI,QACA78B,KAAA66B,QAAAK,aAAA,GACAY,EAAAW,WAAAz7B,OAAAhB,KAAA66B,QAAAK,eAEAY,EAAAW,WAAAI,QAAA,EACArB,EAAAz6B,KAAAf,KAAA87B,EAAAW,WAAAz7B,OAAAwN,KAfAstB,EAAAW,WAAAG,GAkBA,CAEApuB,GAAAwQ,EAAAna,QAEA,OAAA,EAvNA,GAAA+G,GAAA8Q,MAAA9Q,QAAA8Q,MAAA9Q,QAAA,SAAA7E,GACA,MAAA,mBAAAY,OAAA7F,UAAAqG,SAAApH,KAAAgG,IAEAo0B,EAAA,EAkDAQ,GAAAmB,cAAAnB,EA4KAA,EAAA75B,UAAAm5B,UAAA,IAEAU,EAAA75B,UAAAi7B,gBAAA,SAAA38B,GACAA,IAAAyG,IACA7G,KAAA66B,SAAAj5B,EAAAb,KAAAf,MACAA,KAAA66B,QAAAK,aAAA96B,EACAJ,KAAA86B,QAAA96B,KAAA86B,UACA96B,KAAA86B,MAAAI,aAAA96B,IAIAu7B,EAAA75B,UAAAwV,MAAA,GAEAqkB,EAAA75B,UAAAk7B,KAAA,SAAA1lB,EAAAzU,GAEA,MADA7C,MAAAi9B,KAAA3lB,EAAA,EAAAzU,GACA7C,MAGA27B,EAAA75B,UAAAm7B,KAAA,SAAA3lB,EAAA4lB,EAAAr6B,GAOA,QAAA+5B,KACA,MAAAM,GACAn9B,EAAAo9B,IAAA7lB,EAAAslB,GAEA/5B,EAAA0F,MAAAvI,KAAAqE,WAVA,GAAAtE,GAAAC,IAEA,IAAA,kBAAA6C,GACA,KAAA,IAAAjC,OAAA,0CAcA,OAJAg8B,GAAAQ,QAAAv6B,EAEA7C,KAAAq9B,GAAA/lB,EAAAslB,GAEA78B,GAGA47B,EAAA75B,UAAAmW,KAAA,WAEAjY,KAAA66B,SAAAj5B,EAAAb,KAAAf,KAEA,IAAAgf,GAAA3a,UAAA,EAEA,IAAA,gBAAA2a,IAAAhf,KAAAq7B,cACAr7B,KAAA66B,QAAAQ,YACA,OAAA,CAIA,IACAryB,GAAAlI,EAAAH,EAAAkM,EACAsM,EAFAmkB,EAAAj5B,UAAArD,MAIA,IAAAhB,KAAAu9B,MAAAv9B,KAAAu9B,KAAAv8B,OAAA,CAEA,GADAmY,EAAAnZ,KAAAu9B,KAAAt0B,QACAq0B,EAAA,EAEA,IADAt0B,EAAA,GAAA0T,OAAA4gB,GACAzwB,EAAA,EAAAA,EAAAywB,EAAAzwB,IAAA7D,EAAA6D,GAAAxI,UAAAwI,EAGA,KAAAlM,EAAA,EAAAG,EAAAqY,EAAAnY,OAAAL,EAAAG,EAAAH,IAEA,OADAX,KAAAsX,MAAA0H,EACAse,GACA,IAAA,GACAnkB,EAAAxY,GAAAI,KAAAf,KAAAgf,EACA,MACA,KAAA,GACA7F,EAAAxY,GAAAI,KAAAf,KAAAgf,EAAA3a,UAAA,GACA,MACA,KAAA,GACA8U,EAAAxY,GAAAI,KAAAf,KAAAgf,EAAA3a,UAAA,GAAAA,UAAA,GACA,MACA,SACA8U,EAAAxY,GAAA4H,MAAAvI,KAAAgJ,IAKA,GAAAhJ,KAAAo7B,SAAA,CACAjiB,IACA,IAAAqkB,GAAA,gBAAAxe,GAAAA,EAAAnO,MAAA7Q,KAAAi7B,WAAAjc,EAAA/V,OACA2yB,GAAA76B,KAAAf,KAAAmZ,EAAAqkB,EAAAx9B,KAAAu7B,aAAA,OACA,CAEA,GADApiB,EAAAnZ,KAAA66B,QAAA7b,GACA,kBAAA7F,GAAA,CAEA,OADAnZ,KAAAsX,MAAA0H,EACAse,GACA,IAAA,GACAnkB,EAAApY,KAAAf,KACA,MACA,KAAA,GACAmZ,EAAApY,KAAAf,KAAAqE,UAAA,GACA,MACA,KAAA,GACA8U,EAAApY,KAAAf,KAAAqE,UAAA,GAAAA,UAAA,GACA,MACA,SAEA,IADA2E,EAAA,GAAA0T,OAAA4gB,EAAA,GACAzwB,EAAA,EAAAA,EAAAywB,EAAAzwB,IAAA7D,EAAA6D,EAAA,GAAAxI,UAAAwI,EACAsM,GAAA5Q,MAAAvI,KAAAgJ,GAEA,OAAA,EACAmQ,IAGAA,EAAAA,EAAAlQ,SAIA,GAAAkQ,GAAAA,EAAAnY,OAAA,CACA,GAAAs8B,EAAA,EAEA,IADAt0B,EAAA,GAAA0T,OAAA4gB,EAAA,GACAzwB,EAAA,EAAAA,EAAAywB,EAAAzwB,IAAA7D,EAAA6D,EAAA,GAAAxI,UAAAwI,EAEA,KAAAlM,EAAA,EAAAG,EAAAqY,EAAAnY,OAAAL,EAAAG,EAAAH,IAEA,OADAX,KAAAsX,MAAA0H,EACAse,GACA,IAAA,GACAnkB,EAAAxY,GAAAI,KAAAf,KACA,MACA,KAAA,GACAmZ,EAAAxY,GAAAI,KAAAf,KAAAqE,UAAA,GACA,MACA,KAAA,GACA8U,EAAAxY,GAAAI,KAAAf,KAAAqE,UAAA,GAAAA,UAAA,GACA,MACA,SACA8U,EAAAxY,GAAA4H,MAAAvI,KAAAgJ,GAGA,OAAA,EACA,IAAAhJ,KAAAu9B,MAAA,UAAAve,EACA,KAAA3a,WAAA,YAAAzD,OACAyD,UAAA,GAEA,GAAAzD,OAAA,uCAKA,SAAAZ,KAAAu9B,MAGA5B,EAAA75B,UAAA27B,UAAA,WAEAz9B,KAAA66B,SAAAj5B,EAAAb,KAAAf,KAEA,IAAAgf,GAAA3a,UAAA,EAEA,IAAA,gBAAA2a,IAAAhf,KAAAq7B,cACAr7B,KAAA66B,QAAAQ,YAAA,MAAAl6B,SAAAgG,UAAA,GAGA,IAGA6B,GAAAlI,EAAAH,EAAAkM,EACAsM,EAJA7X,KAEAg8B,EAAAj5B,UAAArD,MAIA,IAAAhB,KAAAu9B,KAAA,CACA,GAAAD,EAAA,EAEA,IADAt0B,EAAA,GAAA0T,OAAA4gB,GACAzwB,EAAA,EAAAA,EAAAywB,EAAAzwB,IAAA7D,EAAA6D,GAAAxI,UAAAwI,EAEA,KAAAlM,EAAA,EAAAG,EAAAd,KAAAu9B,KAAAv8B,OAAAL,EAAAG,EAAAH,IAEA,OADAX,KAAAsX,MAAA0H,EACAse,GACA,IAAA,GACAh8B,EAAA0B,KAAAhD,KAAAu9B,KAAA58B,GAAAI,KAAAf,KAAAgf,GACA,MACA,KAAA,GACA1d,EAAA0B,KAAAhD,KAAAu9B,KAAA58B,GAAAI,KAAAf,KAAAgf,EAAA3a,UAAA,IACA,MACA,KAAA,GACA/C,EAAA0B,KAAAhD,KAAAu9B,KAAA58B,GAAAI,KAAAf,KAAAgf,EAAA3a,UAAA,GAAAA,UAAA,IACA,MACA,SACA/C,EAAA0B,KAAAhD,KAAAu9B,KAAA58B,GAAA4H,MAAAvI,KAAAgJ,KAKA,GAAAhJ,KAAAo7B,SAAA,CACAjiB,IACA,IAAAqkB,GAAA,gBAAAxe,GAAAA,EAAAnO,MAAA7Q,KAAAi7B,WAAAjc,EAAA/V,OACA2yB,GAAA76B,KAAAf,KAAAmZ,EAAAqkB,EAAAx9B,KAAAu7B,aAAA,OAEApiB,GAAAnZ,KAAA66B,QAAA7b,EAGA,IAAA,kBAAA7F,GAEA,OADAnZ,KAAAsX,MAAA0H,EACAse,GACA,IAAA,GACAh8B,EAAA0B,KAAAmW,EAAApY,KAAAf,MACA,MACA,KAAA,GACAsB,EAAA0B,KAAAmW,EAAApY,KAAAf,KAAAqE,UAAA,IACA,MACA,KAAA,GACA/C,EAAA0B,KAAAmW,EAAApY,KAAAf,KAAAqE,UAAA,GAAAA,UAAA,IACA,MACA,SAEA,IADA2E,EAAA,GAAA0T,OAAA4gB,EAAA,GACAzwB,EAAA,EAAAA,EAAAywB,EAAAzwB,IAAA7D,EAAA6D,EAAA,GAAAxI,UAAAwI,EACAvL,GAAA0B,KAAAmW,EAAA5Q,MAAAvI,KAAAgJ,QAEA,IAAAmQ,GAAAA,EAAAnY,OAAA,CACA,GAAAs8B,EAAA,EAEA,IADAt0B,EAAA,GAAA0T,OAAA4gB,EAAA,GACAzwB,EAAA,EAAAA,EAAAywB,EAAAzwB,IAAA7D,EAAA6D,EAAA,GAAAxI,UAAAwI,EAEA,KAAAlM,EAAA,EAAAG,EAAAqY,EAAAnY,OAAAL,EAAAG,EAAAH,IAEA,OADAX,KAAAsX,MAAA0H,EACAse,GACA,IAAA,GACAh8B,EAAA0B,KAAAmW,EAAAxY,GAAAI,KAAAf,MACA,MACA,KAAA,GACAsB,EAAA0B,KAAAmW,EAAAxY,GAAAI,KAAAf,KAAAqE,UAAA,IACA,MACA,KAAA,GACA/C,EAAA0B,KAAAmW,EAAAxY,GAAAI,KAAAf,KAAAqE,UAAA,GAAAA,UAAA,IACA,MACA,SACA/C,EAAA0B,KAAAmW,EAAAxY,GAAA4H,MAAAvI,KAAAgJ,SAGA,KAAAhJ,KAAAu9B,MAAA,UAAAve,EACA,MAAA3a,WAAA,YAAAzD,OACAO,QAAAyN,OAAAvK,UAAA,IAEAlD,QAAAyN,OAAA,uCAIA,OAAAzN,SAAAka,IAAA/Z,IAGAq6B,EAAA75B,UAAAu7B,GAAA,SAAAre,EAAA4d,GACA,GAAA,kBAAA5d,GAEA,MADAhf,MAAA09B,MAAA1e,GACAhf,IAGA,IAAA,kBAAA48B,GACA,KAAA,IAAAh8B,OAAA,wCAQA,OANAZ,MAAA66B,SAAAj5B,EAAAb,KAAAf,MAIAA,KAAAiY,KAAA,cAAA+G,EAAA4d,GAEA58B,KAAAo7B,UACAuB,EAAA57B,KAAAf,KAAAgf,EAAA4d,GACA58B,OAGAA,KAAA66B,QAAA7b,IAKA,kBAAAhf,MAAA66B,QAAA7b,KAEAhf,KAAA66B,QAAA7b,IAAAhf,KAAA66B,QAAA7b,KAIAhf,KAAA66B,QAAA7b,GAAAhc,KAAA45B,IAIA58B,KAAA66B,QAAA7b,GAAA6d,QACA78B,KAAA66B,QAAAK,aAAA,GACAl7B,KAAA66B,QAAA7b,GAAAhe,OAAAhB,KAAA66B,QAAAK,eAEAl7B,KAAA66B,QAAA7b,GAAA6d,QAAA,EACArB,EAAAz6B,KAAAf,KAAAA,KAAA66B,QAAA7b,GAAAhe,OAAAge,KAlBAhf,KAAA66B,QAAA7b,GAAA4d,EAsBA58B,OAGA27B,EAAA75B,UAAA47B,MAAA,SAAA76B,GACA,GAAA,kBAAAA,GACA,KAAA,IAAAjC,OAAA,2CASA,OANAZ,MAAAu9B,OACAv9B,KAAAu9B,SAIAv9B,KAAAu9B,KAAAv6B,KAAAH,GACA7C,MAGA27B,EAAA75B,UAAA67B,YAAAhC,EAAA75B,UAAAu7B,GAEA1B,EAAA75B,UAAAq7B,IAAA,SAAAne,EAAA4d,GAwEA,QAAAgB,GAAAC,GACA,GAAAA,IAAAh3B,EAAA,CAGA,GAAA8F,GAAAhF,OAAAgF,KAAAkxB,EACA,KAAA,GAAAl9B,KAAAgM,GAAA,CACA,GAAAG,GAAAH,EAAAhM,GACAoG,EAAA82B,EAAA/wB,EACA/F,aAAAgzB,WAAA,gBAAAhzB,IAAA,OAAAA,IAEAY,OAAAgF,KAAA5F,GAAA/F,OAAA,GACA48B,EAAAC,EAAA/wB,IAEA,IAAAnF,OAAAgF,KAAA5F,GAAA/F,cACA68B,GAAA/wB,MArFA,GAAA,kBAAA8vB,GACA,KAAA,IAAAh8B,OAAA,kDAGA,IAAAi7B,GAAAiC,IAEA,IAAA99B,KAAAo7B,SAAA,CACA,GAAAoC,GAAA,gBAAAxe,GAAAA,EAAAnO,MAAA7Q,KAAAi7B,WAAAjc,EAAA/V,OACA60B,GAAAlC,EAAA76B,KAAAf,KAAA,KAAAw9B,EAAAx9B,KAAAu7B,aAAA,OAEA,CAEA,IAAAv7B,KAAA66B,QAAA7b,GAAA,MAAAhf,KACA67B,GAAA77B,KAAA66B,QAAA7b,GACA8e,EAAA96B,MAAAy5B,WAAAZ,IAGA,IAAA,GAAAkC,GAAA,EAAAA,EAAAD,EAAA98B,OAAA+8B,IAAA,CACA,GAAAhC,GAAA+B,EAAAC,EAEA,IADAlC,EAAAE,EAAAU,WACA7wB,EAAAiwB,GAAA,CAIA,IAAA,GAFAmC,MAEAr9B,EAAA,EAAAK,EAAA66B,EAAA76B,OAAAL,EAAAK,EAAAL,IACA,GAAAk7B,EAAAl7B,KAAAi8B,GACAf,EAAAl7B,GAAAi8B,UAAAf,EAAAl7B,GAAAi8B,WAAAA,GACAf,EAAAl7B,GAAAy8B,SAAAvB,EAAAl7B,GAAAy8B,UAAAR,EAAA,CACAoB,EAAAr9B,CACA,OAIA,GAAAq9B,EAAA,EACA,QAqBA,OAlBAh+B,MAAAo7B,SACAW,EAAAU,WAAArqB,OAAA4rB,EAAA,GAGAh+B,KAAA66B,QAAA7b,GAAA5M,OAAA4rB,EAAA,GAGA,IAAAnC,EAAA76B,SACAhB,KAAAo7B,eACAW,GAAAU,iBAGAz8B,MAAA66B,QAAA7b,IAIAhf,KAAAiY,KAAA,iBAAA+G,EAAA4d,GAEA58B,MAEA67B,IAAAe,GACAf,EAAAe,UAAAf,EAAAe,WAAAA,GACAf,EAAAuB,SAAAvB,EAAAuB,UAAAR,KACA58B,KAAAo7B,eACAW,GAAAU,iBAGAz8B,MAAA66B,QAAA7b,GAGAhf,KAAAiY,KAAA,iBAAA+G,EAAA4d,IAwBA,MAFAgB,GAAA59B,KAAAu7B,cAEAv7B,MAGA27B,EAAA75B,UAAAm8B,OAAA,SAAAp7B,GACA,GAAAq7B,GAAAv9B,EAAA,EAAAG,EAAA,CACA,IAAA+B,GAAA7C,KAAAu9B,MAAAv9B,KAAAu9B,KAAAv8B,OAAA,GAEA,IADAk9B,EAAAl+B,KAAAu9B,KACA58B,EAAA,EAAAG,EAAAo9B,EAAAl9B,OAAAL,EAAAG,EAAAH,IACA,GAAAkC,IAAAq7B,EAAAv9B,GAGA,MAFAu9B,GAAA9rB,OAAAzR,EAAA,GACAX,KAAAiY,KAAA,oBAAApV,GACA7C,SAGA,CAEA,IADAk+B,EAAAl+B,KAAAu9B,KACA58B,EAAA,EAAAG,EAAAo9B,EAAAl9B,OAAAL,EAAAG,EAAAH,IACAX,KAAAiY,KAAA,oBAAAimB,EAAAv9B,GACAX,MAAAu9B,QAEA,MAAAv9B,OAGA27B,EAAA75B,UAAAq8B,eAAAxC,EAAA75B,UAAAq7B,IAEAxB,EAAA75B,UAAAs8B,mBAAA,SAAApf,GACA,GAAA,IAAA3a,UAAArD,OAEA,OADAhB,KAAA66B,SAAAj5B,EAAAb,KAAAf,MACAA,IAGA,IAAAA,KAAAo7B,SAIA,IAAA,GAHAoC,GAAA,gBAAAxe,GAAAA,EAAAnO,MAAA7Q,KAAAi7B,WAAAjc,EAAA/V,QACA60B,EAAAlC,EAAA76B,KAAAf,KAAA,KAAAw9B,EAAAx9B,KAAAu7B,aAAA,GAEAwC,EAAA,EAAAA,EAAAD,EAAA98B,OAAA+8B,IAAA,CACA,GAAAhC,GAAA+B,EAAAC,EACAhC,GAAAU,WAAA,SAGAz8B,MAAA66B,UACA76B,KAAA66B,QAAA7b,GAAA,KAEA,OAAAhf,OAGA27B,EAAA75B,UAAAu6B,UAAA,SAAArd,GACA,GAAAhf,KAAAo7B,SAAA,CACA,GAAAS,MACA2B,EAAA,gBAAAxe,GAAAA,EAAAnO,MAAA7Q,KAAAi7B,WAAAjc,EAAA/V,OAEA,OADA2yB,GAAA76B,KAAAf,KAAA67B,EAAA2B,EAAAx9B,KAAAu7B,aAAA,GACAM,EASA,MANA77B,MAAA66B,SAAAj5B,EAAAb,KAAAf,MAEAA,KAAA66B,QAAA7b,KAAAhf,KAAA66B,QAAA7b,OACApT,EAAA5L,KAAA66B,QAAA7b,MACAhf,KAAA66B,QAAA7b,IAAAhf,KAAA66B,QAAA7b,KAEAhf,KAAA66B,QAAA7b,IAGA2c,EAAA75B,UAAAu8B,cAAA,SAAArf,GACA,MAAAhf,MAAAq8B,UAAArd,GAAAhe,QAGA26B,EAAA75B,UAAAw8B,aAAA,WAEA,MAAAt+B,MAAAu9B,KACAv9B,KAAAu9B,SAQA,kBAAA79B,IAAAA,EAAAC,IAEAD,EAAA,WACA,MAAAi8B,KAEA,gBAAAn8B,GAEAC,EAAAD,QAAAm8B,EAIA97B,OAAAi9B,cAAAnB,UFs9KMz2B,GAAG,SAASxE,EAAQjB,EAAOD,GG1pMjC,QAAA++B,KACA,KAAA,IAAA39B,OAAA,mCAEA,QAAA49B,KACA,KAAA,IAAA59B,OAAA,qCAsBA,QAAA69B,GAAAC,GACA,GAAAC,IAAAr6B,WAEA,MAAAA,YAAAo6B,EAAA,EAGA,KAAAC,IAAAJ,IAAAI,IAAAr6B,WAEA,MADAq6B,GAAAr6B,WACAA,WAAAo6B,EAAA,EAEA,KAEA,MAAAC,GAAAD,EAAA,GACA,MAAAx+B,GACA,IAEA,MAAAy+B,GAAA59B,KAAA,KAAA29B,EAAA,GACA,MAAAx+B,GAEA,MAAAy+B,GAAA59B,KAAAf,KAAA0+B,EAAA,KAMA,QAAAE,GAAAC,GACA,GAAAC,IAAAhJ,aAEA,MAAAA,cAAA+I,EAGA,KAAAC,IAAAN,IAAAM,IAAAhJ,aAEA,MADAgJ,GAAAhJ,aACAA,aAAA+I,EAEA,KAEA,MAAAC,GAAAD,GACA,MAAA3+B,GACA,IAEA,MAAA4+B,GAAA/9B,KAAA,KAAA89B,GACA,MAAA3+B,GAGA,MAAA4+B,GAAA/9B,KAAAf,KAAA6+B,KAYA,QAAAE,KACAC,GAAAC,IAGAD,GAAA,EACAC,EAAAj+B,OACA4D,EAAAq6B,EAAAje,OAAApc,GAEAs6B,KAEAt6B,EAAA5D,QACAm+B,KAIA,QAAAA,KACA,IAAAH,EAAA,CAGA,GAAA5I,GAAAqI,EAAAM,EACAC,IAAA,CAGA,KADA,GAAA9a,GAAAtf,EAAA5D,OACAkjB,GAAA,CAGA,IAFA+a,EAAAr6B,EACAA,OACAs6B,EAAAhb,GACA+a,GACAA,EAAAC,GAAAE,KAGAF,MACAhb,EAAAtf,EAAA5D,OAEAi+B,EAAA,KACAD,GAAA,EACAJ,EAAAxI,IAiBA,QAAAiJ,GAAAX,EAAAzN,GACAjxB,KAAA0+B,IAAAA,EACA1+B,KAAAixB,MAAAA,EAYA,QAAAqO,MAhKA,GAOAX,GACAG,EARA59B,EAAAzB,EAAAD,YAgBA,WACA,IAEAm/B,EADA,kBAAAr6B,YACAA,WAEAi6B,EAEA,MAAAr+B,GACAy+B,EAAAJ,EAEA,IAEAO,EADA,kBAAAhJ,cACAA,aAEA0I,EAEA,MAAAt+B,GACA4+B,EAAAN,KAuDA,IAEAS,GAFAr6B,KACAo6B,GAAA,EAEAE,IAyCAh+B,GAAAyxB,SAAA,SAAA+L,GACA,GAAA11B,GAAA,GAAA0T,OAAArY,UAAArD,OAAA,EACA,IAAAqD,UAAArD,OAAA,EACA,IAAA,GAAAL,GAAA,EAAAA,EAAA0D,UAAArD,OAAAL,IACAqI,EAAArI,EAAA,GAAA0D,UAAA1D,EAGAiE,GAAA5B,KAAA,GAAAq8B,GAAAX,EAAA11B,IACA,IAAApE,EAAA5D,QAAAg+B,GACAP,EAAAU,IASAE,EAAAv9B,UAAAs9B,IAAA,WACAp/B,KAAA0+B,IAAAn2B,MAAA,KAAAvI,KAAAixB,QAEA/vB,EAAAgS,MAAA,UACAhS,EAAAq+B,SAAA,EACAr+B,EAAA4U,OACA5U,EAAAs+B,QACAt+B,EAAAipB,QAAA,GACAjpB,EAAAu5B,YAIAv5B,EAAAm8B,GAAAiC,EACAp+B,EAAAy8B,YAAA2B,EACAp+B,EAAA87B,KAAAsC,EACAp+B,EAAAi8B,IAAAmC,EACAp+B,EAAAi9B,eAAAmB,EACAp+B,EAAAk9B,mBAAAkB,EACAp+B,EAAA+W,KAAAqnB,EAEAp+B,EAAAu+B,QAAA,SAAAjxB,GACA,KAAA,IAAA5N,OAAA,qCAGAM,EAAAw+B,IAAA,WAAA,MAAA,KACAx+B,EAAAy+B,MAAA,SAAAC,GACA,KAAA,IAAAh/B,OAAA,mCAEAM,EAAA2+B,MAAA,WAAA,MAAA,SHwqMMz4B,GAAG,SAAS1G,EAAQjB,EAAOD,GIl1MjC,cAGA,WAEA,GAAAsgC,GAAAp/B,EAAA,WAAA8S,IACAusB,EAAAr/B,EAAA,WAAAq/B,cAEAtgC,GAAAD,QAAAugC,eAAAA,EACAtgC,EAAAD,QAAAwgC,eAAAt/B,EAAA,WAAAs/B,eACAvgC,EAAAD,QAAAygC,WAAAv/B,EAAA,WAAAu/B,WAMAv/B,EAAA,WAAAu/B,YAAA,EAGA,IAAAC,GAAAx/B,EAAA,yBAAA,KACAy/B,EAAAz/B,EAAA,qBAAA,KACA0/B,EAAA1/B,EAAA,2BAAA,KACA2/B,EAAA3/B,EAAA,yBAAA,IAGA,QAAAq/B,EAAAR,SACA,IAAA,QACA,IAAA,SACA,IAAAW,IAAAA,EAAAI,mBAEA,WADAR,GAAA,uDAGAA,GAAA,+BAEArgC,EAAAD,QAAA+gC,YAAAL,EAEAA,EAAAM,mBACAN,EAAAO,mBACAP,EAAAI,qBACAJ,EAAAQ,aACA,MACA,KAAA,UACA,IAAAN,IAAAA,EAAAE,mBAEA,WADAR,GAAA,wDAGAA,GAAA,gCAEArgC,EAAAD,QAAA+gC,YAAAH,EAEAA,EAAAI,mBACAJ,EAAAK,mBACAL,EAAAE,qBACAF,EAAAM,aACA,MACA,KAAA,OACA,IAAAP,IAAAA,EAAAG,mBAEA,WADAR,GAAA,wDAGAA,GAAA,6BAEArgC,EAAAD,QAAA+gC,YAAAJ,EAEAA,EAAAG,oBACA,MACA,KAAA,SACA,IAAAD,EAEA,WADAP,GAAA,uDAGAA,GAAA,+BAEArgC,EAAAD,QAAA+gC,YAAAF,EAEAA,EAAAG,kBACA,MACA,SACAV,EAAA,8BJg2MGa,uBAAuB,EAAEC,mBAAmB,EAAEC,yBAAyB,EAAEC,uBAAuB,GAAGC,UAAU,KAAKt5B,GAAG,SAAS/G,EAAQjB,EAAOD,GK/6MhJ,YACA,IAAAsgC,GAAAp/B,EAAA,eAAA8S,IACAusB,EAAAr/B,EAAA,eAAAq/B,eAEAG,GACAQ,YAAA,WACA,gBAAA7gC,UAAAA,OAAAmhC,mBAAA,WACAnhC,QAAAmhC,kBAAAl/B,WACA6F,OAAAgV,eAAA9c,OAAAmhC,kBAAAl/B,UAAA,WACAoH,IAAA,WACA,MAAAlJ,MAAAihC,UAEAnjB,IAAA,SAAAve,GACA,GAAAQ,GAAAC,IACAA,MAAAihC,WACAjhC,KAAAkhC,oBAAA,QAAAlhC,KAAAihC,UACAjhC,KAAAkhC,oBAAA,YAAAlhC,KAAAmhC,eAEAnhC,KAAAohC,iBAAA,QAAAphC,KAAAihC,SAAA1hC,GACAS,KAAAohC,iBAAA,YAAAphC,KAAAmhC,aAAA,SAAAjhC,GAGAA,EAAAmhC,OAAAD,iBAAA,WAAA,SAAAE,GACA,GAAAhqB,GAAA,GAAAM,OAAA,QACAN,GAAAiqB,MAAAD,EAAAC,MACAjqB,EAAAxU,UAAAy+B,MAAAD,EAAAC,OACAjqB,EAAAkqB,SAAAthC,EAAAmhC,QACAthC,EAAAwX,cAAAD,KAEApX,EAAAmhC,OAAAI,YAAA9R,QAAA,SAAA4R,GACA,GAAAjqB,GAAA,GAAAM,OAAA,QACAN,GAAAiqB,MAAAA,EACAjqB,EAAAxU,UAAAy+B,MAAAA,GACAjqB,EAAAkqB,SAAAthC,EAAAmhC,QACArhC,KAAAuX,cAAAD,IACAjR,KAAArG,QACAqG,KAAArG,WAMAygC,iBAAA,WACA,gBAAA5gC,WACAA,OAAA6hC,kBACA,aAAA7hC,QAAA6hC,iBAAA5/B,WAEA6F,OAAAgV,eAAA9c,OAAA6hC,iBAAA5/B,UAAA,aACAoH,IAAA,WACA,MAAAlJ,MAAA2hC,YAEA7jB,IAAA,SAAAujB,GACA,GAAAthC,GAAAC,IAOA,OALAA,MAAA2hC,WAAAN,EACArhC,KAAAgwB,KACA4R,IAAAC,gBAAA7hC,KAAAgwB,KAGAqR,GAIArhC,KAAAgwB,IAAA4R,IAAAE,gBAAAT,GAGAA,EAAAD,iBAAA,WAAA,WACArhC,EAAAiwB,KACA4R,IAAAC,gBAAA9hC,EAAAiwB,KAEAjwB,EAAAiwB,IAAA4R,IAAAE,gBAAAT,SAEAA,GAAAD,iBAAA,cAAA,WACArhC,EAAAiwB,KACA4R,IAAAC,gBAAA9hC,EAAAiwB,KAEAjwB,EAAAiwB,IAAA4R,IAAAE,gBAAAT,WAhBArhC,KAAAgwB,IAAA,SAwBAsQ,mBAAA,WAEAzgC,OAAAmhC,kBAAA,SAAAe,EAAAC,GAGAlC,EAAA,kBACAiC,GAAAA,EAAAE,qBACAF,EAAAG,cAAAH,EAAAE,mBAGA,IAAAE,GAAA,GAAAC,yBAAAL,EAAAC,GACAK,EAAAF,EAAAG,SAAAj8B,KAAA87B,EAmDA,OAlDAA,GAAAG,SAAA,SAAAC,EAAAC,EAAAC,GACA,GAAA1iC,GAAAC,KACAgJ,EAAA3E,SAIA,IAAAA,UAAArD,OAAA,GAAA,kBAAAuhC,GACA,MAAAF,GAAAE,EAAAC,EAGA,IAAAE,GAAA,SAAAC,GACA,GAAAC,MACAC,EAAAF,EAAAvtB,QAaA,OAZAytB,GAAAlT,QAAA,SAAAmT,GACA,GAAAC,IACAC,GAAAF,EAAAE,GACAC,UAAAH,EAAAG,UACAjkB,KAAA8jB,EAAA9jB,KAEA8jB,GAAAtlB,QAAAmS,QAAA,SAAAnhB,GACAu0B,EAAAv0B,GAAAs0B,EAAAI,KAAA10B,KAEAo0B,EAAAG,EAAAC,IAAAD,IAGAH,EAGA,IAAAv+B,UAAArD,QAAA,EAAA,CACA,GAAAmiC,GAAA,SAAAR,GACA35B,EAAA,GAAA05B,EAAAC,IAGA,OAAAN,GAAA95B,MAAAvI,MAAAmjC,EACA9+B,UAAA,KAIA,MAAA,IAAAlD,SAAA,SAAAgG,EAAAyH,GACA,IAAA5F,EAAAhI,QAAA,gBAAAuhC,GACAF,EAAA95B,MAAAxI,GACA,SAAA4iC,GACAx7B,EAAAoB,MAAA,MAAAm6B,EAAAC,MACA/zB,IAEAyzB,EAAA95B,MAAAxI,GAAAoH,EAAAyH,OAKAuzB,GAEAtiC,OAAAmhC,kBAAAl/B,UAAAsgC,wBAAAtgC,UAGAsgC,wBAAAgB,qBACAz7B,OAAAgV,eAAA9c,OAAAmhC,kBAAA,uBACA93B,IAAA,WACA,MAAAk5B,yBAAAgB,wBAMA,cAAA,gBAAAzT,QAAA,SAAAzX,GACA,GAAAmrB,GAAAjB,wBAAAtgC,UAAAoW,EACAkqB,yBAAAtgC,UAAAoW,GAAA,WACA,GAAAnY,GAAAC,IACA,IAAAqE,UAAArD,OAAA,GAAA,IAAAqD,UAAArD,QACA,gBAAAqD,WAAA,GAAA,CACA,GAAAwU,GAAA,IAAAxU,UAAArD,OAAAqD,UAAA,GAAAwC,MACA,OAAA,IAAA1F,SAAA,SAAAgG,EAAAyH,GACAy0B,EAAA96B,MAAAxI,GAAAoH,EAAAyH,EAAAiK,MAGA,MAAAwqB,GAAA96B,MAAAvI,KAAAqE,eAIA,sBAAA,uBAAA,mBACAsrB,QAAA,SAAAzX,GACA,GAAAmrB,GAAAjB,wBAAAtgC,UAAAoW,EACAkqB,yBAAAtgC,UAAAoW,GAAA,WACA,GAAAlP,GAAA3E,UACAtE,EAAAC,IAGA,OAFAgJ,GAAA,GAAA,IAAA,oBAAAkP,EACAorB,gBAAAC,uBAAAv6B,EAAA,IACA,GAAA7H,SAAA,SAAAgG,EAAAyH,GACAy0B,EAAA96B,MAAAxI,GAAAiJ,EAAA,GACA,WACA7B,IACA6B,EAAAhI,QAAA,GACAgI,EAAA,GAAAT,MAAA,UAGA,SAAAwR,GACAnL,EAAAmL,GACA/Q,EAAAhI,QAAA,GACAgI,EAAA,GAAAT,MAAA,MAAAwR,aAUAypB,kBAAA,SAAAC,EAAApC,GACAvB,EAAA,uDACAC,EAAA5V,SAAA,GACAsZ,EAAAC,UAAArC,EACA,mBAAAoC,GAAAzT,IACAyT,EAAAzT,IAAA4R,IAAAE,gBAAAT,GAEAvB,EAAA,uCAIA6D,oBAAA,SAAAnK,EAAAD,GACAuG,EAAA,yDACAC,EAAA5V,SAAA,GACAqP,EAAAkK,UAAAnK,EAAAmK,UAEAlK,EAAAxJ,IAAAuJ,EAAAvJ,KAOAvwB,GAAAD,SACAkhC,YAAAR,EAAAQ,YACAD,iBAAAP,EAAAO,iBACAH,mBAAAJ,EAAAI,mBACAE,iBAAA9/B,EAAA,kBACA8iC,kBAAAtD,EAAAsD,kBACAG,oBAAAzD,EAAAyD,uBL27MGC,cAAc,GAAGC,iBAAiB,IAAIt6B,GAAG,SAAS7I,EAAQjB,EAAOD,GMpqNpE,YACA,IAAAsgC,GAAAp/B,EAAA,eAAA8S,GAGA/T,GAAAD,QAAA,WACA,GAAAskC,GAAA,SAAAxZ,GACA,GAAA,gBAAAA,IAAAA,EAAAyZ,WAAAzZ,EAAA0Z,SACA,MAAA1Z,EAEA,IAAA2Z,KA4CA,OA3CAt8B,QAAAgF,KAAA2d,GAAAqF,QAAA,SAAA7iB,GACA,GAAA,YAAAA,GAAA,aAAAA,GAAA,gBAAAA,EAAA,CAGA,GAAAzM,GAAA,gBAAAiqB,GAAAxd,GAAAwd,EAAAxd,IAAAo3B,MAAA5Z,EAAAxd,GACAjG,UAAAxG,EAAA8jC,OAAA,gBAAA9jC,GAAA8jC,QACA9jC,EAAA+jC,IAAA/jC,EAAAuI,IAAAvI,EAAA8jC,MAEA,IAAAE,GAAA,SAAAjL,EAAA5qB,GACA,MAAA4qB,GACAA,EAAA5qB,EAAAuE,OAAA,GAAAuxB,cAAA91B,EAAAvF,MAAA,GAEA,aAAAuF,EAAA,WAAAA,EAEA,IAAA3H,SAAAxG,EAAA6jC,MAAA,CACAD,EAAAD,SAAAC,EAAAD,YACA,IAAAO,KACA,iBAAAlkC,GAAA6jC,OACAK,EAAAF,EAAA,MAAAv3B,IAAAzM,EAAA6jC,MACAD,EAAAD,SAAAhhC,KAAAuhC,GACAA,KACAA,EAAAF,EAAA,MAAAv3B,IAAAzM,EAAA6jC,MACAD,EAAAD,SAAAhhC,KAAAuhC,KAEAA,EAAAF,EAAA,GAAAv3B,IAAAzM,EAAA6jC,MACAD,EAAAD,SAAAhhC,KAAAuhC,IAGA19B,SAAAxG,EAAA8jC,OAAA,gBAAA9jC,GAAA8jC,OACAF,EAAAF,UAAAE,EAAAF,cACAE,EAAAF,UAAAM,EAAA,GAAAv3B,IAAAzM,EAAA8jC,QAEA,MAAA,OAAAxU,QAAA,SAAA6U,GACA39B,SAAAxG,EAAAmkC,KACAP,EAAAF,UAAAE,EAAAF,cACAE,EAAAF,UAAAM,EAAAG,EAAA13B,IAAAzM,EAAAmkC,SAKAla,EAAAma,WACAR,EAAAD,UAAAC,EAAAD,cAAAhjB,OAAAsJ,EAAAma,WAEAR,GAGAS,EAAA,SAAAC,EAAAC,EAAAC,GASA,MARAF,GAAA1wB,KAAA6wB,MAAA7wB,KAAAC,UAAAywB,IACAA,EAAAI,QACAJ,EAAAI,MAAAjB,EAAAa,EAAAI,QAEAJ,EAAAK,QACAL,EAAAK,MAAAlB,EAAAa,EAAAK,QAEAlF,EAAA,WAAA7rB,KAAAC,UAAAywB,IACA7R,UAAAmS,mBAAAN,EAAAC,EAAAC,GAEA/R,WAAAoS,aAAAR,CAGA,IAAAS,GAAA,SAAAR,GACA,MAAA,IAAAxjC,SAAA,SAAAgG,EAAAyH,GACAkkB,UAAAoS,aAAAP,EAAAx9B,EAAAyH,KAyBA,IArBAkkB,UAAAsS,eACAtS,UAAAsS,cACAF,aAAAC,EACAE,iBAAA,WACA,MAAA,IAAAlkC,SAAA,SAAAgG,GACA,GAAAm+B,IAAAP,MAAA,aAAAC,MAAA,aACA,OAAAO,kBAAAC,WAAA,SAAAC,GACAt+B,EAAAs+B,EAAA9mB,IAAA,SAAA+mB,GACA,OAAAC,MAAAD,EAAAC,MACAC,KAAAN,EAAAI,EAAAE,MACAC,SAAAH,EAAA1C,GACA8C,QAAA,cAUAhT,UAAAsS,aAAAF,aAIA,CAIA,GAAAa,GAAAjT,UAAAsS,aAAAF,aACA7+B,KAAAysB,UAAAsS,aACAtS,WAAAsS,aAAAF,aAAA,SAAA5a,GAOA,MANAA,KACAwV,EAAA,WAAA7rB,KAAAC,UAAAoW,IACAA,EAAAya,MAAAjB,EAAAxZ,EAAAya,OACAza,EAAA0a,MAAAlB,EAAAxZ,EAAA0a;AACAlF,EAAA,WAAA7rB,KAAAC,UAAAoW,KAEAyb,EAAAzb,IACAjkB,KAAArG,UAjBA8yB,WAAAsS,aAAAF,aAAA,SAAAP,GACA,MAAAQ,GAAAR,GAqBA,oBAAA7R,WAAAsS,aAAAhE,mBACAtO,UAAAsS,aAAAhE,iBAAA,WACAtB,EAAA,iDAGA,mBAAAhN,WAAAsS,aAAAlE,sBACApO,UAAAsS,aAAAlE,oBAAA,WACApB,EAAA,uDNkrNG8D,cAAc,KAAK33B,GAAG,SAASvL,EAAQjB,EAAOD,GOjzNjD,YAGA,IAAAwmC,KAIAA,GAAAC,mBAAA,WACA,MAAAt9B,MAAAu9B,SAAA/9B,SAAA,IAAAkM,OAAA,EAAA,KAIA2xB,EAAAG,WAAAH,EAAAC,qBAGAD,EAAAI,WAAA,SAAAC,GACA,MAAAA,GAAAC,OAAAz1B,MAAA,MAAA8N,IAAA,SAAA5N,GACA,MAAAA,GAAAu1B,UAIAN,EAAAO,cAAA,SAAAF,GACA,GAAAG,GAAAH,EAAAx1B,MAAA,OACA,OAAA21B,GAAA7nB,IAAA,SAAA8nB,EAAA/9B,GACA,OAAAA,EAAA,EAAA,KAAA+9B,EAAAA,GAAAH,OAAA,UAKAN,EAAAU,YAAA,SAAAL,EAAAjN,GACA,MAAA4M,GAAAI,WAAAC,GAAAznB,OAAA,SAAA7N,GACA,MAAA,KAAAA,EAAAiJ,QAAAof,MAOA4M,EAAAW,eAAA,SAAA51B,GACA,GAAAy1B,EAGAA,GADA,IAAAz1B,EAAAiJ,QAAA,gBACAjJ,EAAA61B,UAAA,IAAA/1B,MAAA,KAEAE,EAAA61B,UAAA,IAAA/1B,MAAA,IAcA,KAAA,GAXAg2B,IACAC,WAAAN,EAAA,GACAO,UAAAP,EAAA,GACAQ,SAAAR,EAAA,GAAA/uB,cACAwvB,SAAAryB,SAAA4xB,EAAA,GAAA,IACAU,GAAAV,EAAA,GACAW,KAAAvyB,SAAA4xB,EAAA,GAAA,IAEAxnB,KAAAwnB,EAAA,IAGA7lC,EAAA,EAAAA,EAAA6lC,EAAAxlC,OAAAL,GAAA,EACA,OAAA6lC,EAAA7lC,IACA,IAAA,QACAkmC,EAAAO,eAAAZ,EAAA7lC,EAAA,EACA,MACA,KAAA,QACAkmC,EAAAQ,YAAAzyB,SAAA4xB,EAAA7lC,EAAA,GAAA,GACA,MACA,KAAA,UACAkmC,EAAAS,QAAAd,EAAA7lC,EAAA,GAMA,MAAAkmC,IAIAb,EAAAuB,eAAA,SAAAV,GACA,GAAAW,KACAA,GAAAxkC,KAAA6jC,EAAAC,YACAU,EAAAxkC,KAAA6jC,EAAAE,WACAS,EAAAxkC,KAAA6jC,EAAAG,SAAA1C,eACAkD,EAAAxkC,KAAA6jC,EAAAI,UACAO,EAAAxkC,KAAA6jC,EAAAK,IACAM,EAAAxkC,KAAA6jC,EAAAM,KAEA,IAAAnoB,GAAA6nB,EAAA7nB,IAcA,OAbAwoB,GAAAxkC,KAAA,OACAwkC,EAAAxkC,KAAAgc,GACA,SAAAA,GAAA6nB,EAAAO,gBACAP,EAAAQ,cACAG,EAAAxkC,KAAA,SACAwkC,EAAAxkC,KAAA6jC,EAAAO,gBACAI,EAAAxkC,KAAA,SACAwkC,EAAAxkC,KAAA6jC,EAAAQ,cAEAR,EAAAS,SAAA,QAAAT,EAAAG,SAAAvvB,gBACA+vB,EAAAxkC,KAAA,WACAwkC,EAAAxkC,KAAA6jC,EAAAS,UAEA,aAAAE,EAAAp3B,KAAA,MAKA41B,EAAAyB,YAAA,SAAA12B,GACA,GAAAy1B,GAAAz1B,EAAAsD,OAAA,GAAAxD,MAAA,KACAZ,GACAy3B,YAAA9yB,SAAA4xB,EAAA3hC,QAAA,IASA,OANA2hC,GAAAA,EAAA,GAAA31B,MAAA,KAEAZ,EAAAzB,KAAAg4B,EAAA,GACAv2B,EAAA03B,UAAA/yB,SAAA4xB,EAAA,GAAA,IAEAv2B,EAAA23B,YAAA,IAAApB,EAAAxlC,OAAA4T,SAAA4xB,EAAA,GAAA,IAAA,EACAv2B,GAKA+1B,EAAA6B,YAAA,SAAAC,GACA,GAAAC,GAAAD,EAAAJ,WAIA,OAHA7gC,UAAAihC,EAAAE,uBACAD,EAAAD,EAAAE,sBAEA,YAAAD,EAAA,IAAAD,EAAAt5B,KAAA,IAAAs5B,EAAAH,WACA,IAAAG,EAAAF,YAAA,IAAAE,EAAAF,YAAA,IAAA,QAKA5B,EAAAiC,YAAA,SAAAl3B,GACA,GAAAy1B,GAAAz1B,EAAAsD,OAAA,GAAAxD,MAAA,IACA,QACAmyB,GAAApuB,SAAA4xB,EAAA,GAAA,IACA0B,IAAA1B,EAAA,KAMAR,EAAAmC,YAAA,SAAAC,GACA,MAAA,aAAAA,EAAApF,IAAAoF,EAAAC,aACA,IAAAD,EAAAF,IAAA,QAMAlC,EAAAsC,UAAA,SAAAv3B,GAIA,IAAA,GAFAw3B,GADAt4B,KAEAu2B,EAAAz1B,EAAAsD,OAAAtD,EAAAiJ,QAAA,KAAA,GAAAnJ,MAAA,KACAhE,EAAA,EAAAA,EAAA25B,EAAAxlC,OAAA6L,IACA07B,EAAA/B,EAAA35B,GAAAy5B,OAAAz1B,MAAA,KACAZ,EAAAs4B,EAAA,GAAAjC,QAAAiC,EAAA,EAEA,OAAAt4B,IAIA+1B,EAAAwC,UAAA,SAAAV,GACA,GAAA/2B,GAAA,GACAg3B,EAAAD,EAAAJ,WAIA,IAHA7gC,SAAAihC,EAAAE,uBACAD,EAAAD,EAAAE,sBAEAF,EAAAW,YAAA9gC,OAAAgF,KAAAm7B,EAAAW,YAAAznC,OAAA,CACA,GAAA0nC,KACA/gC,QAAAgF,KAAAm7B,EAAAW,YAAA9Y,QAAA,SAAAgZ,GACAD,EAAA1lC,KAAA2lC,EAAA,IAAAb,EAAAW,WAAAE,MAEA53B,GAAA,UAAAg3B,EAAA,IAAAW,EAAAt4B,KAAA,KAAA,OAEA,MAAAW,IAKAi1B,EAAA4C,YAAA,SAAA73B,GACA,GAAAy1B,GAAAz1B,EAAAsD,OAAAtD,EAAAiJ,QAAA,KAAA,GAAAnJ,MAAA,IACA,QACAmO,KAAAwnB,EAAA3hC,QACAgkC,UAAArC,EAAAp2B,KAAA,OAIA41B,EAAA8C,YAAA,SAAAhB,GACA,GAAA7qB,GAAA,GACA8qB,EAAAD,EAAAJ,WAWA,OAVA7gC,UAAAihC,EAAAE,uBACAD,EAAAD,EAAAE,sBAEAF,EAAAiB,cAAAjB,EAAAiB,aAAA/nC,QAEA8mC,EAAAiB,aAAApZ,QAAA,SAAAqZ,GACA/rB,GAAA,aAAA8qB,EAAA,IAAAiB,EAAAhqB,KAAA,IAAAgqB,EAAAH,UACA,SAGA5rB,GAKA+oB,EAAAiD,eAAA,SAAAl4B,GACA,GAAAm4B,GAAAn4B,EAAAiJ,QAAA,KACAwsB,GACA2C,KAAAv0B,SAAA7D,EAAAsD,OAAA,EAAA60B,EAAA,GAAA,KAEAE,EAAAr4B,EAAAiJ,QAAA,IAAAkvB,EAOA,OANAE,OACA5C,EAAA6C,UAAAt4B,EAAAsD,OAAA60B,EAAA,EAAAE,EAAAF,EAAA,GACA1C,EAAAt/B,MAAA6J,EAAAsD,OAAA+0B,EAAA,IAEA5C,EAAA6C,UAAAt4B,EAAAsD,OAAA60B,EAAA,GAEA1C,GAMAR,EAAAsD,kBAAA,SAAAC,EAAAC,GACA,GAAAvsB,GAAA+oB,EAAAI,WAAAmD,EAEAtsB,GAAAA,EAAA+D,OAAAglB,EAAAI,WAAAoD,GACA,IAAAC,GAAAxsB,EAAA2B,OAAA,SAAA7N,GACA,MAAA,KAAAA,EAAAiJ,QAAA,oBACA,GAAA3F,OAAA,IAEAq1B,GACAC,KAAA,OACAC,eACAC,UAAAJ,EAAA54B,MAAA,KAAA,GACA3J,MAAAuiC,EAAA54B,MAAA,KAAA,KAGA,OAAA64B,IAIA1D,EAAA8D,oBAAA,SAAApB,EAAAqB,GACA,GAAAvC,GAAA,WAAAuC,EAAA,MAIA,OAHArB,GAAAkB,aAAAja,QAAA,SAAAqa,GACAxC,GAAA,iBAAAwC,EAAAH,UAAA,IAAAG,EAAA9iC,MAAA,SAEAsgC,GAKAxB,EAAAiE,iBAAA,SAAAV,EAAAC,GACA,GAAAvsB,GAAA+oB,EAAAI,WAAAmD,EAEAtsB,GAAAA,EAAA+D,OAAAglB,EAAAI,WAAAoD,GACA,IAAAU,IACAC,iBAAAltB,EAAA2B,OAAA,SAAA7N,GACA,MAAA,KAAAA,EAAAiJ,QAAA,kBACA,GAAA3F,OAAA,IACA+1B,SAAAntB,EAAA2B,OAAA,SAAA7N,GACA,MAAA,KAAAA,EAAAiJ,QAAA,gBACA,GAAA3F,OAAA,IAEA,OAAA61B,IAIAlE,EAAAqE,mBAAA,SAAA3B,GACA,MAAA,eAAAA,EAAAyB,iBAAA,iBACAzB,EAAA0B,SAAA,QAIApE,EAAAsE,mBAAA,SAAAf,GASA,IAAA,GARAgB,IACAC,UACAC,oBACAC,iBACAC,SAEA1tB,EAAA+oB,EAAAI,WAAAmD,GACAqB,EAAA3tB,EAAA,GAAApM,MAAA,KACAlQ,EAAA,EAAAA,EAAAiqC,EAAA5pC,OAAAL,IAAA,CACA,GAAAonC,GAAA6C,EAAAjqC,GACAkqC,EAAA7E,EAAAU,YACA6C,EAAA,YAAAxB,EAAA,KAAA,EACA,IAAA8C,EAAA,CACA,GAAA/C,GAAA9B,EAAAyB,YAAAoD,GACAC,EAAA9E,EAAAU,YACA6C,EAAA,UAAAxB,EAAA,IAQA,QANAD,EAAAW,WAAAqC,EAAA9pC,OAAAglC,EAAAsC,UAAAwC,EAAA,OACAhD,EAAAiB,aAAA/C,EAAAU,YACA6C,EAAA,aAAAxB,EAAA,KACAppB,IAAAqnB,EAAA4C,aACA2B,EAAAC,OAAAxnC,KAAA8kC,GAEAA,EAAAt5B,KAAA81B,eACA,IAAA,MACA,IAAA,SACAiG,EAAAG,cAAA1nC,KAAA8kC,EAAAt5B,KAAA81B,iBAWA,MAJA0B,GAAAU,YAAA6C,EAAA,aAAA5Z,QAAA,SAAA5e,GACAw5B,EAAAE,iBAAAznC,KAAAgjC,EAAAiC,YAAAl3B,MAGAw5B,GAKAvE,EAAA+E,oBAAA,SAAAnF,EAAAoF,GACA,GAAAxD,GAAA,EAwBA,OArBAA,IAAA,KAAA5B,EAAA,IACA4B,GAAAwD,EAAAR,OAAAxpC,OAAA,EAAA,IAAA,IACAwmC,GAAA,sBACAA,GAAAwD,EAAAR,OAAA7rB,IAAA,SAAAmpB,GACA,MAAAjhC,UAAAihC,EAAAE,qBACAF,EAAAE,qBAEAF,EAAAJ,cACAt3B,KAAA,KAAA,OAEAo3B,GAAA,uBACAA,GAAA,8BAGAwD,EAAAR,OAAA7a,QAAA,SAAAmY,GACAN,GAAAxB,EAAA6B,YAAAC,GACAN,GAAAxB,EAAAwC,UAAAV,GACAN,GAAAxB,EAAA8C,YAAAhB,KAGAN,GAAA,kBAMAxB,EAAAiF,2BAAA,SAAA1B,GACA,GAcA2B,GAdAC,KACAZ,EAAAvE,EAAAsE,mBAAAf,GACA6B,EAAAb,EAAAG,cAAA1wB,QAAA,YACAqxB,EAAAd,EAAAG,cAAA1wB,QAAA,eAGAsxB,EAAAtF,EAAAU,YAAA6C,EAAA,WACA5qB,IAAA,SAAA5N,GACA,MAAAi1B,GAAAiD,eAAAl4B,KAEA6N,OAAA,SAAA4nB,GACA,MAAA,UAAAA,EAAA6C,YAEAkC,EAAAD,EAAAtqC,OAAA,GAAAsqC,EAAA,GAAAnC,KAGAqC,EAAAxF,EAAAU,YAAA6C,EAAA,oBACA5qB,IAAA,SAAA5N,GACA,GAAAy1B,GAAAz1B,EAAAF,MAAA,IAEA,OADA21B,GAAA3hC,QACA2hC,EAAA7nB,IAAA,SAAA8nB,GACA,MAAA7xB,UAAA6xB,EAAA,OAGA+E,GAAAxqC,OAAA,GAAAwqC,EAAA,GAAAxqC,OAAA,GAAAwqC,EAAA,GAAA,KAAAD,IACAL,EAAAM,EAAA,GAAA,IAGAjB,EAAAC,OAAA7a,QAAA,SAAAmY,GACA,GAAA,QAAAA,EAAAt5B,KAAA81B,eAAAwD,EAAAW,WAAAgD,IAAA,CACA,GAAAC,IACAvC,KAAAoC,EACAI,iBAAA/2B,SAAAkzB,EAAAW,WAAAgD,IAAA,IACAG,KACAzC,KAAA+B,GAGAC,GAAAnoC,KAAA0oC,GACAN,IACAM,EAAAz3B,KAAA6wB,MAAA7wB,KAAAC,UAAAw3B,IACAA,EAAAG,KACA1C,KAAA+B,EACAY,UAAAT,EAAA,aAAA,OAEAF,EAAAnoC,KAAA0oC,OAIA,IAAAP,EAAAnqC,QAAAuqC,GACAJ,EAAAnoC,MACAmmC,KAAAoC,GAKA,IAAAQ,GAAA/F,EAAAU,YAAA6C,EAAA,KAWA,OAVAwC,GAAA/qC,SACA,IAAA+qC,EAAA,GAAA/xB,QAAA,WACA+xB,EAAAn3B,SAAAm3B,EAAA,GAAA13B,OAAA,GAAA,IACA,IAAA03B,EAAA,GAAA/xB,QAAA,WACA+xB,EAAAn3B,SAAAm3B,EAAA,GAAA13B,OAAA,GAAA,KAEA82B,EAAAxb,QAAA,SAAA+Y,GACAA,EAAAsD,WAAAD,KAGAZ,GAGAnF,EAAAiG,wBAAA,WAEA,MAAA,yFAMAjG,EAAAkG,kBAAA,SAAAC,EAAAnB,EAAAhsB,EAAAqiB,GACA,GAAAmG,GAAAxB,EAAA+E,oBAAAoB,EAAAvG,KAAAoF,EAwBA,IArBAxD,GAAAxB,EAAAqE,mBACA8B,EAAAC,YAAAC,sBAGA7E,GAAAxB,EAAA8D,oBACAqC,EAAAG,cAAAD,qBACA,UAAArtB,EAAA,UAAA,UAEAwoB,GAAA,SAAA2E,EAAAI,IAAA,OAGA/E,GADA2E,EAAAK,WAAAL,EAAAM,YACA,iBACAN,EAAAK,UACA,iBACAL,EAAAM,YACA,iBAEA,iBAIAN,EAAAK,UAAA,CACA,GAAAE,GAAA,QAAArL,EAAA2B,GAAA,IACAmJ,EAAAK,UAAAjL,MAAAyB,GAAA,MACAwE,IAAA,KAAAkF,EACAlF,GAAA,UAAA2E,EAAAQ,uBAAA,GAAAxD,KACA,IAAAuD,EAKA,MAFAlF,IAAA,UAAA2E,EAAAQ,uBAAA,GAAAxD,KACA,UAAAnD,EAAAG,WAAA,QAKAH,EAAA4G,aAAA,SAAArD,EAAAC,GAGA,IAAA,GADAvsB,GAAA+oB,EAAAI,WAAAmD,GACA5oC,EAAA,EAAAA,EAAAsc,EAAAjc,OAAAL,IACA,OAAAsc,EAAAtc,IACA,IAAA,aACA,IAAA,aACA,IAAA,aACA,IAAA,aACA,MAAAsc,GAAAtc,GAAA0T,OAAA,GAKA,MAAAm1B,GACAxD,EAAA4G,aAAApD,GAEA,YAIA/pC,EAAAD,QAAAwmC,OP4zNMh5B,GAAG,SAAStM,EAAQjB,EAAOD,GQnyOjC,YAEA,IAAAwmC,GAAAtlC,EAAA,cACAo/B,EAAAp/B,EAAA,YAAA8S,IAEA2sB,GACAG,mBAAA,WACAzgC,OAAAgtC,iBAGAhtC,OAAAyjC,kBACAzjC,OAAAyjC,gBAAA,SAAAt6B,GACA,MAAAA,KAMAnJ,OAAA0jC,wBACA1jC,OAAA0jC,sBAAA,SAAAv6B,GACA,MAAAA,MAKAnJ,OAAAmhC,kBAAA,SAAArvB,GACA,GAAA5R,GAAAC,KAEA8sC,EAAAj1B,SAAAk1B,wBAwCA,KAvCA,mBAAA,sBAAA,iBACApd,QAAA,SAAAzX,GACAnY,EAAAmY,GAAA40B,EAAA50B,GAAA7R,KAAAymC,KAGA9sC,KAAAgtC,eAAA,KACAhtC,KAAAitC,YAAA,KACAjtC,KAAAktC,QAAA,KACAltC,KAAAmtC,eAAA,KACAntC,KAAAotC,uBAAA,KACAptC,KAAAqtC,2BAAA,KACArtC,KAAAstC,oBAAA,KACAttC,KAAAutC,cAAA,KAEAvtC,KAAAwtC,gBACAxtC,KAAAytC,iBACAztC,KAAA0tC,gBAAA,WACA,MAAA3tC,GAAAytC,cAEAxtC,KAAA2tC,iBAAA,WACA,MAAA5tC,GAAA0tC,eAGAztC,KAAA4tC,iBAAA,GAAArK,wBACAvkB,KAAA,GACAwoB,IAAA,KAEAxnC,KAAA6tC,kBAAA,GAAAtK,wBACAvkB,KAAA,GACAwoB,IAAA,KAEAxnC,KAAA8tC,eAAA,SACA9tC,KAAA+tC,mBAAA,MACA/tC,KAAAguC,kBAAA,MAEAhuC,KAAAiuC,YACAC,aAAA,MACAC,eAEAx8B,GAAAA,EAAAswB,mBACA,OAAAtwB,EAAAswB,oBACA,IAAA,MACA,IAAA,QACAjiC,KAAAiuC,WAAAC,aAAAv8B,EAAAswB,kBACA,MACA,KAAA,OAEA,KAAA,IAAA75B,WAAA,2CAMAuJ,GAAAA,EAAAw8B,aAIAnuC,KAAAiuC,WAAAE,WAAAx8B,EAAAw8B,WAAAvvB,OAAA,SAAAwvB,GACA,SAAAA,IAAAA,EAAAC,QACAD,EAAAC,KAAAD,EAAAC,KAAAzvB,OAAA,SAAA0vB,GACA,MAAA,KAAAA,EAAAt0B,QAAA,UACAs0B,EAAAt0B,QAAA,wBACA,KACAo0B,EAAAC,SAQAruC,KAAAuuC,gBAKAvuC,KAAAwuC,8BAGA3uC,OAAAmhC,kBAAAl/B,UAAA2sC,wBAAA,WACA,GAAA1uC,GAAAC,KACA0uC,EAAA1I,EAAAO,cAAAxmC,EAAA6tC,iBAAApG,IAGAxnC,MAAAwuC,0BAAA7e,QAAA,SAAArY,GACA,GAAAq3B,IAAAr3B,EAAAuvB,WAAA,IAAAl/B,OAAAgF,KAAA2K,EAAAuvB,WAAA7lC,MACA,IAAA2tC,EACA,IAAA,GAAA9hC,GAAA,EAAAA,EAAA6hC,EAAA1tC,OAAA6L,IACA6hC,EAAA7hC,GAAAmN,QAAA,sCACA00B,EAAA7hC,IAAA,+BAGAyK,GAAAuvB,UAAAA,UAAA7sB,QAAA,8BAEA00B,EAAAp3B,EAAAuvB,UAAA+H,cAAA,IACA,KAAAt3B,EAAAuvB,UAAAA,UAAA,OAOA,IALA9mC,EAAA6tC,iBAAApG,IAAAkH,EAAAt+B,KAAA,IACArQ,EAAAwX,cAAAD,GACA,OAAAvX,EAAAitC,gBACAjtC,EAAAitC,eAAA11B,IAEAA,EAAAuvB,WAAA,aAAA9mC,EAAAiuC,kBAAA,CACA,GAAAa,GAAA9uC,EAAAwuC,aAAAO,MAAA,SAAA3C,GACA,MAAAA,GAAAC,aACA,cAAAD,EAAAC,YAAA2C,OAEAF,KACA9uC,EAAAiuC,kBAAA,eAIAhuC,KAAAwuC,8BAGA3uC,OAAAmhC,kBAAAl/B,UAAAktC,UAAA,SAAA3N,GAGArhC,KAAAwtC,aAAAxqC,KAAAq+B,EAAA4N,SACAjvC,KAAAkvC,+BAGArvC,OAAAmhC,kBAAAl/B,UAAAqtC,aAAA,SAAA9N,GACA,GAAA+N,GAAApvC,KAAAwtC,aAAAxzB,QAAAqnB,EACA+N,QACApvC,KAAAwtC,aAAAp7B,OAAAg9B,EAAA,GACApvC,KAAAkvC,gCAKArvC,OAAAmhC,kBAAAl/B,UAAAutC,uBACA,SAAAC,EAAAC,GACA,GAAAC,IACAhF,UACAC,oBACAC,iBA+BA,OA7BA4E,GAAA9E,OAAA7a,QAAA,SAAA8f,GACA,IAAA,GAAA9uC,GAAA,EAAAA,EAAA4uC,EAAA/E,OAAAxpC,OAAAL,IAAA,CACA,GAAA+uC,GAAAH,EAAA/E,OAAA7pC,EACA,IAAA8uC,EAAAjhC,KAAAiJ,gBAAAi4B,EAAAlhC,KAAAiJ,eACAg4B,EAAA9H,YAAA+H,EAAA/H,WACA8H,EAAA7H,cAAA8H,EAAA9H,YAAA,CAEA4H,EAAAhF,OAAAxnC,KAAA0sC,EAIA,WAKAJ,EAAA7E,iBACA9a,QAAA,SAAAggB,GACA,IAAA,GAAAhvC,GAAA,EAAAA,EAAA4uC,EAAA9E,iBAAAzpC,OACAL,IAAA,CACA,GAAAivC,GAAAL,EAAA9E,iBAAA9pC,EACA,IAAAgvC,EAAAzH,MAAA0H,EAAA1H,IAAA,CACAsH,EAAA/E,iBAAAznC,KAAA4sC,EACA,WAMAJ,GAIA3vC,OAAAmhC,kBAAAl/B,UAAA+tC,4BACA,SAAAtD,EAAAqC,GACA,GAAA7uC,GAAAC,KACAosC,EAAA,GAAAS,gBAAA9sC,EAAAkuC,YACA6B,EAAA,GAAAC,iBAAA3D,EACAA,GAAA4D,iBAAA,SAAAC,GACA,GAAA34B,GAAA,GAAAM,OAAA,eACAN,GAAAuvB,WAAAqJ,OAAA3D,EAAAqC,cAAAA,EAEA,IAAAuB,GAAAF,EAAApJ,UACA8H,GAAAwB,GAAA,IAAAxoC,OAAAgF,KAAAwjC,GAAAnvC,MAEA2tC,IAGA9nC,SAAAulC,EAAA2C,QACA3C,EAAA2C,MAAA,aAQAz3B,EAAAuvB,UAAAA,UACA,sDAGAsJ,EAAApJ,UAAA,SAAA+I,EAAA/I,UAAA,EAAA,EACAzvB,EAAAuvB,UAAAA,UAAAb,EAAAuB,eAAA4I,GAGA,IAAAtB,GAAA9uC,EAAAwuC,aAAAO,MAAA,SAAA3C,GACA,MAAAA,GAAAC,aACA,cAAAD,EAAAC,YAAA2C,OAKA,QAAAhvC,EAAAiuC,mBACA,IAAA,MACAjuC,EAAAyuC,0BAAAxrC,KAAAsU,GACAq3B,GAAAE,GACA9uC,EAAAyuC,0BAAAxrC,KACA,GAAA4U,OAAA,gBAEA,MACA,KAAA,YACA7X,EAAA0uC,0BACA1uC,EAAAwX,cAAAD,GACA,OAAAvX,EAAAitC,gBACAjtC,EAAAitC,eAAA11B,GAEAu3B,IACA9uC,EAAAwX,cAAA,GAAAK,OAAA,iBACA,OAAA7X,EAAAitC,gBACAjtC,EAAAitC,eAAA,GAAAp1B,OAAA,iBAEA7X,EAAAiuC,kBAAA,WAEA,MACA,KAAA,cAOA8B,EAAAM,iBAAA,WACArwC,EAAAswC,yBAGA,IAAA/D,GAAA,GAAAgE,kBAAAR,EAUA,OATAxD,GAAAiE,kBAAA,WACAxwC,EAAAswC,0BAEA/D,EAAAkE,QAAA,WAEAlE,EAAAyC,MAAA,SACAhvC,EAAAswC,2BAIAjE,YAAAA,EACA0D,aAAAA,EACAxD,cAAAA,IAKAzsC,OAAAmhC,kBAAAl/B,UAAA2uC,YAAA,SAAAtE,EACAuE,EAAAC,GACA,GAAAjI,GAAA1oC,KAAAqvC,uBAAAlD,EAAAmD,kBACAnD,EAAAoD,mBACAmB,IAAAvE,EAAAK,YACA9D,EAAAkI,UAAAzE,EAAAQ,uBACAjE,EAAAiC,MACAkG,MAAA7K,EAAAG,YAEAgG,EAAA2E,uBAAA9vC,SACA0nC,EAAAiC,KAAAxB,KAAAgD,EAAA2E,uBAAA,GAAA3H,MAEAgD,EAAAK,UAAAkE,KAAAhI,IAEAiI,GAAAxE,EAAAM,cACA/D,EAAAkI,UAAAzE,EAAA2E,uBACApI,EAAAiC,MACAkG,MAAA1E,EAAA0E,OAEA1E,EAAAQ,uBAAA3rC,SACA0nC,EAAAiC,KAAAxB,KAAAgD,EAAAQ,uBAAA,GAAAxD,MAEAgD,EAAAM,YAAAsE,QAAArI,KAIA7oC,OAAAmhC,kBAAAl/B,UAAAkvC,oBACA,SAAAzG,GACA,GACAmE,GACAlF,EAFAzpC,EAAAC,IA2DA,QAxDA,UAAAuqC,EAAAvrB,KAIAhf,KAAAixC,gBAGAvC,EAAA1I,EAAAO,cAAAgE,EAAA/C,KACAgC,EAAAkF,EAAA7pC,QACA6pC,EAAA/e,QAAA,SAAA4Z,EAAAqF,GACA,GAAA5D,GAAAhF,EAAAsE,mBAAAf,EACAxpC,GAAAkxC,cAAArC,GAAAU,kBAAAtE,IAEAhrC,KAAAuuC,aAAAvuC,KAAAixC,oBACAjxC,MAAAixC,eAEA,WAAA1G,EAAAvrB,OACA0vB,EAAA1I,EAAAO,cAAAxmC,EAAA8tC,kBAAArG,KACAgC,EAAAkF,EAAA7pC,QACA6pC,EAAA/e,QAAA,SAAA4Z,EAAAqF,GACA,GAAAzC,GAAApsC,EAAAwuC,aAAAK,GACAxC,EAAAD,EAAAC,YACA0D,EAAA3D,EAAA2D,aACAxD,EAAAH,EAAAG,cACAgD,EAAAnD,EAAAmD,kBACAC,EAAApD,EAAAoD,mBACA3nB,EACA,MADA2hB,EAAA14B,MAAA,KAAA,GAAA,GACAA,MAAA,IAAA,GAAA,EAEA,KAAA+W,EAAA,CACA,GAAAspB,GAAAlL,EAAAiE,iBACAV,EAAAC,EACAsG,GAAAqB,MAAA/E,EAAA8E,EACA,aAEA,IAAAE,GAAApL,EAAAsD,kBACAC,EAAAC,EACA8C,GAAA6E,MAAAC,EAGA,IAAA1I,GAAA3oC,EAAAsvC,uBAAAC,EACAC,EAIAxvC,GAAA0wC,YAAAtE,EACAzD,EAAA8B,OAAAxpC,OAAA,GACA,OAKAhB,KAAA4tC,kBACA5uB,KAAAurB,EAAAvrB,KACAwoB,IAAA+C,EAAA/C,KAEA+C,EAAAvrB,MACA,IAAA,QACAhf,KAAAqxC,sBAAA,mBACA,MACA,KAAA,SACArxC,KAAAqxC,sBAAA,SACA,MACA,SACA,KAAA,IAAAjpC,WAAA,qBAAAmiC,EAAAvrB,KACA,KAMA,GAAAsyB,GAAAjtC,UAAArD,OAAA,GACA,kBAAAqD,WAAA,EACA,IAAAitC,EAAA,CACA,GAAAjlC,GAAAhI,UAAA,EACAxE,QAAAyE,WAAA,WACA+H,IACA,QAAAtM,EAAAiuC,oBACAjuC,EAAAiuC,kBAAA,aAEAjuC,EAAA0uC,2BACA,GAEA,GAAAroB,GAAAjlB,QAAAgG,SAUA,OATAif,GAAAvG,KAAA,WACAyxB,IACA,QAAAvxC,EAAAiuC,oBACAjuC,EAAAiuC,kBAAA,aAGAnuC,OAAAyE,WAAAvE,EAAA0uC,wBAAApoC,KAAAtG,GAAA,QAGAqmB,GAGAvmB,OAAAmhC,kBAAAl/B,UAAAyvC,qBACA,SAAAhH,GACA,GAAAxqC,GAAAC,KACAqhC,EAAA,GAAAmQ,aACAC,KACA/C,EAAA1I,EAAAO,cAAAgE,EAAA/C,KACAgC,EAAAkF,EAAA7pC,OA0JA,QAzJA6pC,EAAA/e,QAAA,SAAA4Z,EAAAqF,GACA,GAMAzC,GACAC,EACA0D,EACAxD,EACAE,EACAC,EACAE,EACAmE,EACAxB,EAEA/N,EAGA2P,EACAE,EApBAn0B,EAAA+oB,EAAAI,WAAAmD,GACAqB,EAAA3tB,EAAA,GAAA5I,OAAA,GAAAxD,MAAA,KACA+0B,EAAAgF,EAAA,GACAhjB,EAAA,MAAAgjB,EAAA,GACA8G,EAAA1L,EAAA4G,aAAArD,EAAAC,GAcA+F,EAAAvJ,EAAAsE,mBAAAf,EAGA3hB,KACAspB,EAAAlL,EAAAiE,iBAAAV,EACAC,GACA4H,EAAApL,EAAAsD,kBAAAC,EACAC,IAEAsH,EACA9K,EAAAiF,2BAAA1B,EAEA,IAAAgD,GAAAvG,EAAAU,YAAA6C,EAAA,SAEAgD,GADAA,EAAAvrC,OACAurC,EAAA,GAAAl4B,OAAA,GAEA2xB,EAAAC,oBAGA,IAAA4K,GAGAc,EAAA3L,EAAAU,YAAA6C,EAAA,WACA5qB,IAAA,SAAA5N,GACA,MAAAi1B,GAAAiD,eAAAl4B,KAEA6N,OAAA,SAAA7X,GACA,MAAA,UAAAA,EAAAsiC,YACA,EACAsI,KACAd,EAAAc,EAAAzqC,MAGA,IAAA0qC,GAAA5L,EAAAU,YAAA6C,EACA,uBAAAvoC,OAAA,EACA6wC,EAAA7L,EAAAU,YAAA6C,EAAA,gBACA5qB,IAAA,SAAAwxB,GACA,MAAAnK,GAAAW,eAAAwJ,KAEAvxB,OAAA,SAAAuxB,GACA,MAAA,MAAAA,EAAApJ,WAEA,IAAA,UAAAwD,EAAAvrB,MAAA4I,EAiDA,WAAA2iB,EAAAvrB,MAAA4I,IACAukB,EAAApsC,EAAAwuC,aAAAK,GACAxC,EAAAD,EAAAC,YACA0D,EAAA3D,EAAA2D,aACAxD,EAAAH,EAAAG,cACAE,EAAAL,EAAAK,UACAC,EAAAN,EAAAM,YACAE,EAAAR,EAAAQ,uBACA2C,EAAAnD,EAAAmD,kBAEAvvC,EAAAwuC,aAAAK,GAAAkC,uBACAA,EACA/wC,EAAAwuC,aAAAK,GAAAW,mBACAA,EACAxvC,EAAAwuC,aAAAK,GAAAiC,MAAAA,EAEAe,GACA9B,EAAAgC,oBAAAD,GAEA/B,EAAAqB,MAAA/E,EAAA8E,EACA,eACA5E,EAAA6E,MAAAC,GAEArxC,EAAA0wC,YAAAtE,EACA,aAAAuF,GAAA,aAAAA,EACA,aAAAA,GAAA,aAAAA,IAEAjF,GACA,aAAAiF,GAAA,aAAAA,QAMAvF,GAAAM,aALAlL,EAAAkL,EAAAlL,MACAkQ,EAAAzuC,MAAAu+B,EAAAkL,IACApL,EAAA0Q,SAAAxQ,SAhFA,CACA,GAAAyQ,GAAAjyC,EAAA8vC,4BAAAtD,EACAqC,EAmBA,IAlBAgD,GACAI,EAAAlC,aAAAgC,oBAAAD,GAGAvC,EAAA2C,eAAAC,gBAAAtM,GACA+G,IACAxD,KAAA,MAAA,EAAAyF,EAAA,KAGAnC,EAAA,GAAAwF,gBAAAD,EAAA1F,cAAA1G,GAEArE,EAAAkL,EAAAlL,MACAkQ,EAAAzuC,MAAAu+B,EAAAkL,IAGApL,EAAA0Q,SAAAxQ,GAGAxhC,EAAAytC,aAAAxsC,OAAA,GACAjB,EAAAytC,aAAA,GAAA/L,YAAAzgC,QAAA4tC,EAAA,CAEA,GAAAuD,GAAApyC,EAAAytC,aAAA,GACA/L,YAAAmN,EACApC,GAAA,GAAA4F,cAAAD,EACAH,EAAA1F,eAGAvsC,EAAAwuC,aAAAK,IACAxC,YAAA4F,EAAA5F,YACA0D,aAAAkC,EAAAlC,aACAxD,cAAA0F,EAAA1F,cACAgD,kBAAAA,EACAC,mBAAAA,EACA/C,UAAAA,EACAC,YAAAA,EACA7G,KAAAA,EACA2G,IAAAA,EACAsE,MAAAA,EACAlE,uBAAAA,EACAmE,uBAAAA,GAIA/wC,EAAA0wC,YAAA1wC,EAAAwuC,aAAAK,IACA,EACA,aAAA8C,GAAA,aAAAA,MAwCA1xC,KAAA6tC,mBACA7uB,KAAAurB,EAAAvrB,KACAwoB,IAAA+C,EAAA/C,KAEA+C,EAAAvrB,MACA,IAAA,QACAhf,KAAAqxC,sBAAA,oBACA,MACA,KAAA,SACArxC,KAAAqxC,sBAAA,SACA,MACA,SACA,KAAA,IAAAjpC,WAAA,qBAAAmiC,EAAAvrB,KACA,KAiCA,MA/BAqiB,GAAAI,YAAAzgC,SACAjB,EAAA0tC,cAAAzqC,KAAAq+B,GACAxhC,OAAAyE,WAAA,WACA,GAAAgT,GAAA,GAAAM,OAAA,YACAN,GAAA+pB,OAAAA,EACAthC,EAAAwX,cAAAD,GACA,OAAAvX,EAAAktC,aACAptC,OAAAyE,WAAA,WACAvE,EAAAktC,YAAA31B,IACA,GAGAm6B,EAAA9hB,QAAA,SAAAnjB,GACA,GAAA+0B,GAAA/0B,EAAA,GACA1J,EAAA0J,EAAA,GACA6lC,EAAA,GAAAz6B,OAAA,QACAy6B,GAAA9Q,MAAAA,EACA8Q,EAAAvvC,SAAAA,EACAuvC,EAAA7Q,SAAAH,GACAthC,EAAAwX,cAAAD,GACA,OAAAvX,EAAAmtC,SACArtC,OAAAyE,WAAA,WACAvE,EAAAmtC,QAAAmF,IACA,MAGA,IAEAhuC,UAAArD,OAAA,GAAA,kBAAAqD,WAAA,IACAxE,OAAAyE,WAAAD,UAAA,GAAA,GAEAlD,QAAAgG,WAGAtH,OAAAmhC,kBAAAl/B,UAAAwwC,MAAA,WACAtyC,KAAAuuC,aAAA5e,QAAA,SAAAwc,GAMAA,EAAA2D,cACA3D,EAAA2D,aAAAyC,OAEApG,EAAAG,eACAH,EAAAG,cAAAiG,OAEApG,EAAAK,WACAL,EAAAK,UAAA+F,OAEApG,EAAAM,aACAN,EAAAM,YAAA8F,SAIAvyC,KAAAqxC,sBAAA,WAIAxxC,OAAAmhC,kBAAAl/B,UAAAuvC,sBACA,SAAAmB,GACAxyC,KAAA8tC,eAAA0E,CACA,IAAAl7B,GAAA,GAAAM,OAAA,uBACA5X,MAAAuX,cAAAD,GACA,OAAAtX,KAAAotC,wBACAptC,KAAAotC,uBAAA91B,IAKAzX,OAAAmhC,kBAAAl/B,UAAAotC,4BACA,WAEA,GAAA53B,GAAA,GAAAM,OAAA,oBACA5X,MAAAuX,cAAAD,GACA,OAAAtX,KAAAstC,qBACAttC,KAAAstC,oBAAAh2B,IAKAzX,OAAAmhC,kBAAAl/B,UAAAuuC,uBAAA,WACA,GACAmC,GADAzyC,EAAAC,KAEAyyC,GACAC,MAAA,EACAC,OAAA,EACAC,WAAA,EACAC,SAAA,EACAC,UAAA,EACAphB,UAAA,EACAqhB,OAAA,EAsBA,IApBA/yC,KAAAuuC,aAAA5e,QAAA,SAAAwc,GACAsG,EAAAtG,EAAA2D,aAAAf,SACA0D,EAAAtG,EAAAG,cAAAyC,WAGA0D,EAAAK,WAAAL,EAAA/gB,UAEA8gB,EAAA,MACAC,EAAAM,OAAA,EACAP,EAAA,SACAC,EAAAG,WAAA,GAAAH,EAAAI,SAAA,EACAL,EAAA,aACAC,EAAAO,aAAA,EACAR,EAAA,eACAC,EAAAA,OAAA,EACAD,EAAA,OACAC,EAAAK,UAAA,GAAAL,EAAA/gB,UAAA,KACA8gB,EAAA,aAGAA,IAAAzyC,EAAAguC,mBAAA,CACAhuC,EAAAguC,mBAAAyE,CACA,IAAAl7B,GAAA,GAAAM,OAAA,2BACA5X,MAAAuX,cAAAD,GACA,OAAAtX,KAAAqtC,4BACArtC,KAAAqtC,2BAAA/1B,KAKAzX,OAAAmhC,kBAAAl/B,UAAAmxC,YAAA,WACA,GAAAlzC,GAAAC,IACA,IAAAA,KAAAixC,cACA,KAAA,IAAArwC,OAAA,qDAEA,IAAAsyC,EACA,KAAA7uC,UAAArD,QAAA,kBAAAqD,WAAA,GACA6uC,EAAA7uC,UAAA,GACA,IAAAA,UAAArD,SACAkyC,EAAA7uC,UAAA,GAGA,IAAA8uC,MACAC,EAAA,EACAC,EAAA,CAOA,IALArzC,KAAAwtC,aAAAxsC,SACAoyC,EAAApzC,KAAAwtC,aAAA,GAAA8F,iBAAAtyC,OACAqyC,EAAArzC,KAAAwtC,aAAA,GAAA+F,iBAAAvyC,QAGAkyC,EAAA,CAEA,GAAAA,EAAAnP,WAAAmP,EAAAlP,SACA,KAAA,IAAA57B,WACA,uDAEAvB,UAAAqsC,EAAAM,sBACAJ,EAAAF,EAAAM,qBAEA3sC,SAAAqsC,EAAAO,sBACAJ,EAAAH,EAAAO,qBAoBA,IAjBAzzC,KAAAwtC,aAAAxsC,QAEAhB,KAAAwtC,aAAA,GAAA/L,YAAA9R,QAAA,SAAA4R,GACA4R,EAAAnwC,MACA4iC,KAAArE,EAAAqE,KACArE,MAAAA,EACAmS,YAAA,UAAAnS,EAAAqE,KACAwN,EAAA,EAAAC,EAAA,IAEA,UAAA9R,EAAAqE,KACAwN,IACA,UAAA7R,EAAAqE,MACAyN,MAKAD,EAAA,GAAAC,EAAA,GACAD,EAAA,IACAD,EAAAnwC,MACA4iC,KAAA,QACA8N,aAAA,IAEAN,KAEAC,EAAA,IACAF,EAAAnwC,MACA4iC,KAAA,QACA8N,aAAA,IAEAL,IAIA,IAAA7L,GAAAxB,EAAAiG,0BACAsC,IACA4E,GAAAxjB,QAAA,SAAAib,EAAAgE,GAGA,GAOApC,GACAC,EARAlL,EAAAqJ,EAAArJ,MACAqE,EAAAgF,EAAAhF,KACA2G,EAAAvG,EAAAC,qBAEA+L,EAAAjyC,EAAA8vC,4BAAAtD,EAAAqC,GAEAU,EAAA8C,aAAAF,gBAAAtM,GAKA+G,IACAxD,KAAA,MAAA,EAAAyF,EAAA,IAEArN,KACAiL,EAAA,GAAA4F,cAAA7Q,EAAAyQ,EAAA1F,gBAGA1B,EAAA8I,cACAjH,EAAA,GAAAwF,gBAAAD,EAAA1F,cAAA1G,IAGA2I,EAAAK,IACAxC,YAAA4F,EAAA5F,YACA0D,aAAAkC,EAAAlC,aACAxD,cAAA0F,EAAA1F,cACAgD,kBAAAA,EACAC,mBAAA,KACA/C,UAAAA,EACAC,YAAAA,EACA7G,KAAAA,EACA2G,IAAAA,EACAI,uBAAAA,EACAmE,uBAAA,KAEA,IAAA3E,GAAAoC,EAAAK,EACApH,IAAAxB,EAAAkG,kBAAAC,EACAA,EAAAmD,kBAAA,QAAAvvC,EAAAytC,aAAA,MAGAxtC,KAAAixC,cAAA1C,CACA,IAAAlwB,GAAA,GAAAklB,wBACAvkB,KAAA,QACAwoB,IAAAA,GAKA,OAHAnjC,WAAArD,QAAA,kBAAAqD,WAAA,IACAxE,OAAAyE,WAAAD,UAAA,GAAA,EAAAga,GAEAld,QAAAgG,QAAAkX,IAGAxe,OAAAmhC,kBAAAl/B,UAAA6xC,aAAA,WACA,GAAA5zC,GAAAC,KAEAwnC,EAAAxB,EAAAiG,yBACAjsC,MAAAuuC,aAAA5e,QAAA,SAAAwc,GAEA,GAAAqD,GAAAzvC,EAAAsvC,uBACAlD,EAAAmD,kBACAnD,EAAAoD,mBAEA/H,IAAAxB,EAAAkG,kBAAAC,EAAAqD,EACA,SAAAzvC,EAAAytC,aAAA,KAGA,IAAAnvB,GAAA,GAAAklB,wBACAvkB,KAAA,SACAwoB,IAAAA,GAKA,OAHAnjC,WAAArD,QAAA,kBAAAqD,WAAA,IACAxE,OAAAyE,WAAAD,UAAA,GAAA,EAAAga,GAEAld,QAAAgG,QAAAkX,IAGAxe,OAAAmhC,kBAAAl/B,UAAA8xC,gBAAA,SAAA/M,GACA,GAAAgN,GAAAhN,EAAA+H,aACA,IAAA/H,EAAAqJ,OACA,IAAA,GAAAvvC,GAAA,EAAAA,EAAAX,KAAAuuC,aAAAvtC,OAAAL,IACA,GAAAX,KAAAuuC,aAAA5tC,GAAA4rC,MAAA1F,EAAAqJ,OAAA,CACA2D,EAAAlzC,CACA,OAIA,GAAAwrC,GAAAnsC,KAAAuuC,aAAAsF,EACA,IAAA1H,EAAA,CACA,GAAAgE,GAAAxoC,OAAAgF,KAAAk6B,EAAAA,WAAA7lC,OAAA,EACAglC,EAAAW,eAAAE,EAAAA,aAEA,IAAA,QAAAsJ,EAAAnJ,UAAA,IAAAmJ,EAAAhJ,KACA,MAGA,IAAA,MAAAgJ,EAAApJ,UACA,MAGA,qBAAAoJ,EAAAnxB,OACAmxB,MAEAhE,EAAA2D,aAAAgE,mBAAA3D,EAGA,IAAAzB,GAAA1I,EAAAO,cAAAvmC,KAAA6tC,kBAAArG,IACAkH,GAAAmF,EAAA,KAAA1D,EAAAnxB,KAAA6nB,EAAAA,UAAAP,OACA,uBAAA,OACAtmC,KAAA6tC,kBAAArG,IAAAkH,EAAAt+B,KAAA,IAKA,MAHA/L,WAAArD,OAAA,GAAA,kBAAAqD,WAAA,IACAxE,OAAAyE,WAAAD,UAAA,GAAA,GAEAlD,QAAAgG,WAGAtH,OAAAmhC,kBAAAl/B,UAAAwgC,SAAA,WACA,GAAAhhC,KACAtB,MAAAuuC,aAAA5e,QAAA,SAAAwc,IACA,YAAA,cAAA,cAAA,eACA,iBAAAxc,QAAA,SAAAzX,GACAi0B,EAAAj0B,IACA5W,EAAA0B,KAAAmpC,EAAAj0B,GAAAoqB,eAIA,IAAAj2B,GAAAhI,UAAArD,OAAA,GAAA,kBAAAqD,WAAA,IACAA,UAAA,EACA,OAAA,IAAAlD,SAAA,SAAAgG,GACA,GAAA4sC,KACA5yC,SAAAka,IAAA/Z,GAAAue,KAAA,SAAAm0B,GACAA,EAAArkB,QAAA,SAAAva,GACAzN,OAAAgF,KAAAyI,GAAAua,QAAA,SAAAqT,GACA+Q,EAAA/Q,GAAA5tB,EAAA4tB,OAGA32B,GACAxM,OAAAyE,WAAA+H,EAAA,EAAA0nC,GAEA5sC,EAAA4sC,SAOAvQ,kBAAA,SAAAC,EAAApC,GACAvB,EAAA,uDACA2D,EAAAC,UAAArC,GAGAsC,oBAAA,SAAAnK,EAAAD,GACAuG,EAAA,yDACAtG,EAAAkK,UAAAnK,EAAAmK,WAKAjkC,GAAAD,SACA8gC,mBAAAH,EAAAG,mBACAkD,kBAAArD,EAAAqD,kBACAG,oBAAAxD,EAAAwD,uBR+yOGsQ,WAAW,GAAGC,aAAa,IAAI5lC,GAAG,SAAS5N,EAAQjB,EAAOD,GS/tQ7D,YAEA,IAAAsgC,GAAAp/B,EAAA,YAAA8S,IACAusB,EAAAr/B,EAAA,YAAAq/B,eAEAK,GACAM,YAAA,WACA,gBAAA7gC,UAAAA,OAAAmhC,mBAAA,WACAnhC,QAAAmhC,kBAAAl/B,WACA6F,OAAAgV,eAAA9c,OAAAmhC,kBAAAl/B,UAAA,WACAoH,IAAA,WACA,MAAAlJ,MAAAihC,UAEAnjB,IAAA,SAAAve,GACAS,KAAAihC,WACAjhC,KAAAkhC,oBAAA,QAAAlhC,KAAAihC,UACAjhC,KAAAkhC,oBAAA,YAAAlhC,KAAAmhC,eAEAnhC,KAAAohC,iBAAA,QAAAphC,KAAAihC,SAAA1hC,GACAS,KAAAohC,iBAAA,YAAAphC,KAAAmhC,aAAA,SAAAjhC,GACAA,EAAAmhC,OAAAI,YAAA9R,QAAA,SAAA4R,GACA,GAAAjqB,GAAA,GAAAM,OAAA,QACAN,GAAAiqB,MAAAA,EACAjqB,EAAAxU,UAAAy+B,MAAAA,GACAjqB,EAAAkqB,SAAAthC,EAAAmhC,QACArhC,KAAAuX,cAAAD,IACAjR,KAAArG,QACAqG,KAAArG,WAMAygC,iBAAA,WAEA,gBAAA5gC,WACAA,OAAA6hC,kBACA,aAAA7hC,QAAA6hC,iBAAA5/B,WAEA6F,OAAAgV,eAAA9c,OAAA6hC,iBAAA5/B,UAAA,aACAoH,IAAA,WACA,MAAAlJ,MAAAm0C,cAEAr2B,IAAA,SAAAujB,GACArhC,KAAAm0C,aAAA9S,OAOAf,mBAAA,WAEAzgC,OAAAmhC,oBACAnhC,OAAAmhC,kBAAA,SAAAe,EAAAC,GACA,GAAAjC,EAAA5V,QAAA,IAGA4X,GAAAA,EAAAoM,WAAA,CAEA,IAAA,GADAiG,MACAzzC,EAAA,EAAAA,EAAAohC,EAAAoM,WAAAntC,OAAAL,IAAA,CACA,GAAAytC,GAAArM,EAAAoM,WAAAxtC,EACA,IAAAytC,EAAApwB,eAAA,QACA,IAAA,GAAAnR,GAAA,EAAAA,EAAAuhC,EAAAC,KAAArtC,OAAA6L,IAAA,CACA,GAAAwnC,IACA/F,IAAAF,EAAAC,KAAAxhC,GAEA,KAAAuhC,EAAAC,KAAAxhC,GAAAmN,QAAA,UACAq6B,EAAAC,SAAAlG,EAAAkG,SACAD,EAAAE,WAAAnG,EAAAmG,YAEAH,EAAApxC,KAAAqxC,OAGAD,GAAApxC,KAAA++B,EAAAoM,WAAAxtC,IAGAohC,EAAAoM,WAAAiG,EAGA,MAAA,IAAAI,sBAAAzS,EAAAC,IAEAniC,OAAAmhC,kBAAAl/B,UAAA0yC,qBAAA1yC,UAGA0yC,qBAAApR,qBACAz7B,OAAAgV,eAAA9c,OAAAmhC,kBAAA,uBACA93B,IAAA,WACA,MAAAsrC,sBAAApR,uBAKAvjC,OAAA0jC,sBAAAkR,yBACA50C,OAAAyjC,gBAAAoR,qBAIA,sBAAA,uBAAA,mBACA/kB,QAAA,SAAAzX,GACA,GAAAmrB,GAAArC,kBAAAl/B,UAAAoW,EACA8oB,mBAAAl/B,UAAAoW,GAAA,WAGA,MAFA7T,WAAA,GAAA,IAAA,oBAAA6T,EACAorB,gBAAAC,uBAAAl/B,UAAA,IACAg/B,EAAA96B,MAAAvI,KAAAqE,eAKAm8B,iBAAA,WAEA,GAAAkE,GAAA,SAAAC,EAAAC,EAAAC,GACA,GAAA8P,GAAA,SAAArqB,GACA,GAAA,gBAAAA,IAAAA,EAAA5pB,QACA,MAAA4pB,EAEA,IAAA5pB,KAsCA,OArCAiH,QAAAgF,KAAA2d,GAAAqF,QAAA,SAAA7iB,GACA,GAAA,YAAAA,GAAA,aAAAA,GACA,gBAAAA,EADA,CAIA,GAAAzM,GAAAiqB,EAAAxd,GAAA,gBAAAwd,GAAAxd,GACAwd,EAAAxd,IAAAo3B,MAAA5Z,EAAAxd,GAaA,IAZAjG,SAAAxG,EAAA+jC,KACAv9B,SAAAxG,EAAAuI,KAAA/B,SAAAxG,EAAA8jC,OACAzjC,EAAAsC,KAAA8J,GAEAjG,SAAAxG,EAAA8jC,QACA,gBAAA9jC,GAAA8jC,MACA9jC,EAAA+jC,IAAA/jC,EAAAuI,IAAAvI,EAAA8jC,MAEA7Z,EAAAxd,GAAAzM,EAAA8jC,YAEA9jC,GAAA8jC,OAEAt9B,SAAAxG,EAAA6jC,MAAA,CACA5Z,EAAAma,SAAAna,EAAAma,YACA,IAAAF,KACA,iBAAAlkC,GAAA6jC,MACAK,EAAAz3B,IAAAs3B,IAAA/jC,EAAA6jC,MAAAt7B,IAAAvI,EAAA6jC,OAEAK,EAAAz3B,GAAAzM,EAAA6jC,MAEA5Z,EAAAma,SAAAzhC,KAAAuhC,SACAlkC,GAAA6jC,MACAv8B,OAAAgF,KAAAtM,GAAAW,cACAspB,GAAAxd,OAIApM,EAAAM,SACAspB,EAAA5pB,QAAAA,GAEA4pB,EAaA,OAXAqa,GAAA1wB,KAAA6wB,MAAA7wB,KAAAC,UAAAywB,IACA5E,EAAA5V,QAAA,KACA2V,EAAA,SAAA7rB,KAAAC,UAAAywB,IACAA,EAAAI,QACAJ,EAAAI,MAAA4P,EAAAhQ,EAAAI,QAEAJ,EAAAK,QACAL,EAAAK,MAAA2P,EAAAhQ,EAAAK,QAEAlF,EAAA,SAAA7rB,KAAAC,UAAAywB,KAEA7R,UAAA8hB,gBAAAjQ,EAAAC,EAAAC,GAGA/R,WAAAoS,aAAAR,CAGA,IAAAS,GAAA,SAAAR,GACA,MAAA,IAAAxjC,SAAA,SAAAgG,EAAAyH,GACAkkB,UAAAoS,aAAAP,EAAAx9B,EAAAyH,KAsBA,IAjBAkkB,UAAAsS,eACAtS,UAAAsS,cAAAF,aAAAC,EACA/D,iBAAA,aACAF,oBAAA,eAGApO,UAAAsS,aAAAC,iBACAvS,UAAAsS,aAAAC,kBAAA,WACA,MAAA,IAAAlkC,SAAA,SAAAgG,GACA,GAAA0tC,KACAjP,KAAA,aAAAC,SAAA,UAAAF,MAAA,GAAAG,QAAA,KACAF,KAAA,aAAAC,SAAA,UAAAF,MAAA,GAAAG,QAAA,IAEA3+B,GAAA0tC,MAIA9U,EAAA5V,QAAA,GAAA,CAEA,GAAA2qB,GACAhiB,UAAAsS,aAAAC,iBAAAh/B,KAAAysB,UAAAsS,aACAtS,WAAAsS,aAAAC,iBAAA,WACA,MAAAyP,KAAAj1B,KAAAhZ,OAAA,SAAA3G,GACA,GAAA,kBAAAA,EAAAsO,KACA,QAEA,MAAAtO,QAOAsjC,kBAAA,SAAAC,EAAApC,GACAvB,EAAA,uDACA2D,EAAAC,UAAArC,GAGAsC,oBAAA,SAAAnK,EAAAD,GACAuG,EAAA,yDACAtG,EAAAkK,UAAAnK,EAAAmK,WAKAjkC,GAAAD,SACAkhC,YAAAN,EAAAM,YACAD,iBAAAL,EAAAK,iBACAH,mBAAAF,EAAAE,mBACAE,iBAAA9/B,EAAA,kBACA8iC,kBAAApD,EAAAoD,kBACAG,oBAAAvD,EAAAuD,uBT2uQGsQ,WAAW,GAAGpQ,iBAAiB,KAAKxpB,IAAI,SAAS3Z,EAAQjB,EAAOD,GUl9QnE,YAEA,IAAAsgC,GAAAp/B,EAAA,YAAA8S,IACAusB,EAAAr/B,EAAA,YAAAq/B,cAGAtgC,GAAAD,QAAA,WAEA,GAAAklC,GAAA,SAAAC,EAAAC,EAAAC,GACA,GAAA8P,GAAA,SAAArqB,GACA,GAAA,gBAAAA,IAAAA,EAAA5pB,QACA,MAAA4pB,EAEA,IAAA5pB,KAqCA,OApCAiH,QAAAgF,KAAA2d,GAAAqF,QAAA,SAAA7iB,GACA,GAAA,YAAAA,GAAA,aAAAA,GAAA,gBAAAA,EAAA,CAGA,GAAAzM,GAAAiqB,EAAAxd,GAAA,gBAAAwd,GAAAxd,GACAwd,EAAAxd,IAAAo3B,MAAA5Z,EAAAxd,GAaA,IAZAjG,SAAAxG,EAAA+jC,KACAv9B,SAAAxG,EAAAuI,KAAA/B,SAAAxG,EAAA8jC,OACAzjC,EAAAsC,KAAA8J,GAEAjG,SAAAxG,EAAA8jC,QACA,gBAAA9jC,GAAA8jC,MACA9jC,EAAA+jC,IAAA/jC,EAAAuI,IAAAvI,EAAA8jC,MAEA7Z,EAAAxd,GAAAzM,EAAA8jC,YAEA9jC,GAAA8jC,OAEAt9B,SAAAxG,EAAA6jC,MAAA,CACA5Z,EAAAma,SAAAna,EAAAma,YACA,IAAAF,KACA,iBAAAlkC,GAAA6jC,MACAK,EAAAz3B,IAAAs3B,IAAA/jC,EAAA6jC,MAAAt7B,IAAAvI,EAAA6jC,OAEAK,EAAAz3B,GAAAzM,EAAA6jC,MAEA5Z,EAAAma,SAAAzhC,KAAAuhC,SACAlkC,GAAA6jC,MACAv8B,OAAAgF,KAAAtM,GAAAW,cACAspB,GAAAxd,OAIApM,EAAAM,SACAspB,EAAA5pB,QAAAA,GAEA4pB,EAaA,OAXAqa,GAAA1wB,KAAA6wB,MAAA7wB,KAAAC,UAAAywB,IACA5E,EAAA5V,QAAA,KACA2V,EAAA,SAAA7rB,KAAAC,UAAAywB,IACAA,EAAAI,QACAJ,EAAAI,MAAA4P,EAAAhQ,EAAAI,QAEAJ,EAAAK,QACAL,EAAAK,MAAA2P,EAAAhQ,EAAAK,QAEAlF,EAAA,SAAA7rB,KAAAC,UAAAywB,KAEA7R,UAAA8hB,gBAAAjQ,EAAAC,EAAAC,GAGA/R,WAAAoS,aAAAR,CAGA,IAAAS,GAAA,SAAAR,GACA,MAAA,IAAAxjC,SAAA,SAAAgG,EAAAyH,GACAkkB,UAAAoS,aAAAP,EAAAx9B,EAAAyH,KAsBA,IAjBAkkB,UAAAsS,eACAtS,UAAAsS,cAAAF,aAAAC,EACA/D,iBAAA,aACAF,oBAAA,eAGApO,UAAAsS,aAAAC,iBACAvS,UAAAsS,aAAAC,kBAAA,WACA,MAAA,IAAAlkC,SAAA,SAAAgG,GACA,GAAA0tC,KACAjP,KAAA,aAAAC,SAAA,UAAAF,MAAA,GAAAG,QAAA,KACAF,KAAA,aAAAC,SAAA,UAAAF,MAAA,GAAAG,QAAA,IAEA3+B,GAAA0tC,MAIA9U,EAAA5V,QAAA,GAAA,CAEA,GAAA2qB,GACAhiB,UAAAsS,aAAAC,iBAAAh/B,KAAAysB,UAAAsS,aACAtS,WAAAsS,aAAAC,iBAAA,WACA,MAAAyP,KAAAj1B,KAAAhZ,OAAA,SAAA3G,GACA,GAAA,kBAAAA,EAAAsO,KACA,QAEA,MAAAtO,UVi+QG+zC,WAAW,KAAKl5B,IAAI,SAASra,EAAQjB,EAAOD,GWxkR/C,YACA,IAAA6gC,IAYAG,iBAAA,WACA1N,UAAAoS,aAAApS,UAAAmS,oBAKAxlC,GAAAD,SACAghC,iBAAAH,EAAAG,uBXwlRMhlB,IAAI,SAAS9a,EAAQjB,EAAOD,GY3mRlC,YAEA,IAAAu1C,IAAA,EAGAC,GACA/U,WAAA,SAAAgV,GACA,MAAA,iBAAAA,GACA,GAAAr0C,OAAA,wBAAAq0C,GACA,4BAEAF,EAAAE,EACA,EAAA,8BACA,+BAGAzhC,IAAA,WACA,GAAA,gBAAA3T,QAAA,CACA,GAAAk1C,EACA,MAEA,oBAAA3hC,UAAA,kBAAAA,SAAAI,KACAJ,QAAAI,IAAAjL,MAAA6K,QAAA/O,aAaA27B,eAAA,SAAAkV,EAAAC,EAAAC,GACA,GAAAjkC,GAAA+jC,EAAA/jC,MAAAgkC,EACA,OAAAhkC,IAAAA,EAAAnQ,QAAAo0C,GAAAxgC,SAAAzD,EAAAikC,GAAA,KASAC,cAAA,WAEA,GAAAjgC,KAMA,IALAA,EAAAmqB,QAAA,KACAnqB,EAAA+U,QAAA,KACA/U,EAAAkgC,WAAA,KAGA,mBAAAz1C,UAAAA,OAAAizB,UAEA,MADA1d,GAAAmqB,QAAA,iBACAnqB,CAIA,IAAA0d,UAAA8hB,gBACAx/B,EAAAmqB,QAAA,UACAnqB,EAAA+U,QAAAnqB,KAAAggC,eAAAlN,UAAAyiB,UACA,sBAAA,GACAngC,EAAAkgC,WAAA,OAGA,IAAAxiB,UAAAmS,mBAEA,GAAAplC,OAAAuiC,wBACAhtB,EAAAmqB,QAAA,SACAnqB,EAAA+U,QAAAnqB,KAAAggC,eAAAlN,UAAAyiB,UACA,2BAAA,GACAngC,EAAAkgC,WAAA,OAIA,CAYA,IAAAxiB,UAAAyiB,UAAApkC,MAAA,wBAUA,MAFAiE,GAAAmqB,QAAA,2EAEAnqB,CATAA,GAAAmqB,QAAA,SACAnqB,EAAA+U,QAAAnqB,KAAAggC,eAAAlN,UAAAyiB,UACA,0BAAA,GACAngC,EAAAkgC,WAAA,QAWA,CAAA,IAAAxiB,UAAAsS,eACAtS,UAAAyiB,UAAApkC,MAAA,sBASA,MADAiE,GAAAmqB,QAAA,2BACAnqB,CARAA,GAAAmqB,QAAA,OACAnqB,EAAA+U,QAAAnqB,KAAAggC,eAAAlN,UAAAyiB,UACA,qBAAA,GACAngC,EAAAkgC,WAAA,MAeA,MANAlgC,GAAA+U,QAAA/U,EAAAkgC,YACAN,EAAAxhC,IAAA,YAAA4B,EAAAmqB,QAAA,aAAAnqB,EAAA+U,QACA,iCAAA/U,EAAAkgC,WACA,kCAGAlgC,GAKA3V,GAAAD,SACAgU,IAAAwhC,EAAAxhC,IACAysB,WAAA+U,EAAA/U,WACAF,eAAAiV,EAAAK,gBACArV,eAAAgV,EAAAhV,qBZunRM5iB,IAAI,SAAS1c,EAAQjB,EAAOD,GanwRlC,GAAA45B,GACAjP,CAEAtqB,QAAA20C,sBAAA1hB,UAAA8hB,iBACAxb,EAAA,MACAjP,EAAAvV,SAAAke,UAAAyiB,UAAApkC,MAAA,uBAAA,GAAA,MACAtR,OAAAuiC,yBAAAtP,UAAAmS,sBACA7L,EAAA,SACAjP,EAAA2I,UAAAyiB,UAAApkC,MAAA,iBAAAyD,SAAAke,UAAAyiB,UAAApkC,MAAA,4BAAA,GAAA,IAGA,IAAAqkC,GAAA31C,OAAAmhC,mBAAAnhC,OAAA20C,sBAAA30C,OAAAuiC,wBACAqT,EAAA51C,OAAA60C,oBAAA70C,OAAAyjC,gBACAoS,EAAA71C,OAAA40C,0BAAA50C,OAAA0jC,sBACAiO,EAAA3xC,OAAA81C,mBAAA91C,OAAA2xC,YACAoE,EAAA,WAAA/1C,OAAAg2C,SAAA7O,WACA,WAAA5N,GAAAjP,GAAA,IACA,QAAAiP,GAAAjP,GAAA,IACA2rB,EAAAj2C,OAAAi2C,cAAAj2C,OAAAk2C,mBACAC,EAAAn+B,SAAAqb,cAAA,SACA+iB,EAAAD,GAAAA,EAAAE,aAAA,aAAAF,EAAAE,YAAA,oCACAhR,EAAApS,UAAAoS,cAAApS,UAAAmS,oBAAAnS,UAAAqjB,gBAAArjB,UAAA8hB,eAGAn1C,GAAAD,SACA45B,OAAAA,EACAgd,eAAAjsB,EACAksB,UAAAb,KAAAtQ,EAEAoR,2BAAAd,EACAS,WAAAA,EACAM,sBAAArR,EACAsR,sBAAAhB,GAAAA,EAAA1zC,WAAA0zC,EAAA1zC,UAAA20C,mBACAC,mBAAAZ,IAAAA,EAAAh0C,UAAA60C,yBACAC,sBAAApF,IAAAA,EAAA1vC,UAAA+0C,aACAC,uBAAAlB,EAEAE,aAAAA,EACAiB,eAAAvB,EACAE,mBAAAA,EACAD,aAAAA,EACAjE,YAAAA,EACAtM,aAAAA,QbwwRMzmB,IAAI,SAAS/d,EAAQjB,EAAOD,Gc3yRlC,QAAAw3C,GAAA9O,EAAA+O,GACA,GAAAC,EAgBA,OAbAA,GADAD,EACA,GAAAE,GAAAjP,EAAA+O,GAGA,GAAAE,GAAAjP,GAfA,GAAAkP,GAAA,WAAA,MAAAp3C,SACAm3C,EAAAC,EAAAC,WAAAD,EAAAE,aACAC,EAAA72C,EAAA,YA8BAjB,GAAAD,SACAg4C,aAAAL,EAAAH,EAAA,KACA7sB,QAAAotB,KduzRGE,YAAY,KAAK34B,IAAI,SAASpe,EAAQjB,EAAOD,Gez1RhDC,EAAAD,QAAAkB,EAAA,mBAAAypB,Uf41RGutB,kBAAkB,KAAK13B,IAAI,SAAStf,EAAQjB,EAAOD,GgB51RtDC,EAAAD,SACAm4C,SAGAC,IAAA,oBACAC,MAAA,KACAC,YAAA,YACAtpC,KAAA,YACAupC,QAAA,UACAC,KAAA,kBACAh5B,KAAA,SAEA,mEAGAi5B,MAAA,4BACAC,IAAA,mBACAC,UAAA,EACAC,UAAA,aACAC,aAAA,QACAC,yBACAC,KAAA,sCACAC,IAAA,6DAEAC,UACAjqC,KAAA,cACAkqC,MAAA,qBAEAC,YAAA,UACAC,oBACAC,YACAjB,IAAA,oBACAC,MAAA,KACAC,YAAA,YACAtpC,KAAA,YACAupC,QAAA,UACAC,KAAA,kBACAh5B,KAAA,SAEA85B,aACA,KAEAC,UAAA,8DACAC,QAAA,2CACAC,YAAA,KACAC,MAAA,oBACAC,OAAA,iEACAC,QACA5qC,KAAA,iBACAkqC,MAAA,oBACApK,IAAA,4BAEA/O,QAAA,iBACA8Z;AACA/K,IAAA,wDAEA38B,QACA2nC,SAAA,GAEAC,eAEA/qC,KAAA,qBACAkqC,MAAA,gBACApK,IAAA,0BAGAkL,cACAn0C,MAAA,SACAo0C,IAAA,SACAC,uBAAA,SACAC,MAAA,UAEApP,YAAA,kGACAqP,iBACAC,eAAA,SACAC,OAAA,SACAC,KAAA,6CACAC,cAAA,SACAC,OAAA,SACAC,iBAAA,SACAC,KAAA,UAEAC,aACAC,IAAA,SAEAC,MACAC,OAAA,2CACAC,QAAA,+DAEAC,SACAlhC,KAAA,WAEAmhC,QAAA,2CACAC,SAAA,gDACAC,UACA,YACA,aACA,SACA,aACA,QACA,OACA,WACA,WACA,SACA,UAEAC,QAAA,aACAC,KAAA,QACAC,cAEAvsC,KAAA,cACAkqC,MAAA,sBAGAlqC,KAAA,YACAwsC,wBACAC,OAAA,+BACAC,YACAl8B,KAAA,MACAsvB,IAAA,yDAEA6M,SACApB,KAAA,OACAqB,QAAA,mDACAnqC,KAAA,oBAEAkZ,QAAA,ehBg2RM3H,IAAI,SAAS9hB,EAAQjB,EAAOD,GiBv9RlC,QAAA67C,GAAAC,EAAAz8B,GACA7e,KAAAu7C,SAAAD,EACAt7C,KAAAw7C,SAAA38B,MATA,GAAA48B,GAAA/6C,EAAA,eAiBA26C,GAAAv5C,UAAA45C,iBAAA,SAAA1Y,GACA,GAAA2Y,GAAAF,EAAA7zC,OAAAo7B,EAAAhjC,KAAAu7C,SAAAv7C,KAAAw7C,SACA,OAAAG,GAAAC,QAGAn8C,EAAAD,QAAA67C,IjBi+RGQ,eAAe,KAAKl5B,IAAI,SAASjiB,EAAQjB,EAAOD,GkB79RnD,QAAAi8C,GAAAzY,EAAAsY,EAAAz8B,GACA48B,EAAAK,OAAA/6C,KAAAf,MAGAA,KAAAk4C,IAAAlV,EAGAhjC,KAAAu7C,SAAAD,EAGAt7C,KAAAw7C,SAAA38B,MAGA7e,KAAA+7C,aAGA/7C,KAAAg8C,qBAAA,GAAAC,GACAj8C,KAAAk8C,6BA3CA,GAAA/6C,GAAAT,EAAA,YACAy7C,EAAAz7C,EAAA,aACAi7B,EAAAj7B,EAAA,mBACA07C,EAAA17C,EAAA,kCACA27C,EAAA37C,EAAA,WACA47C,EAAA57C,EAAA,iBACAu7C,EAAAv7C,EAAA,0BACA67C,EAAA77C,EAAA,aACA87C,EAAA97C,EAAA,kBAsCAy7C,GAAA/iC,SAAAqiC,EAAA9f,GACAwgB,EAAAM,OAAAhB,EAAA35C,UAAAs6C,GAMAX,EAAA7zC,OAAA,SAAAo7B,EAAAsY,EAAAz8B,GACA,MAAA,IAAA48B,GAAAzY,EAAAsY,EAAAz8B,IAMA48B,EAAA35C,UAAAo6C,2BAAA,WACAl8C,KAAAg8C,qBAAA3e,GAAA,OAAAr9B,KAAAiY,KAAA5R,KAAArG,KAAA,SACAA,KAAAg8C,qBAAA3e,GAAA,QAAAr9B,KAAAiY,KAAA5R,KAAArG,KAAA,UACAA,KAAAg8C,qBAAA3e,GAAA,QAAAr9B,KAAAiY,KAAA5R,KAAArG,KAAA,UACAA,KAAAg8C,qBAAA3e,GAAA,UAAA,SAAAp1B,GACAjI,KAAA08C,qBAAA,GAAAF,GAAAv0C,KACA5B,KAAArG,QAMAy7C,EAAA35C,UAAA66C,MAAA,WACA,MAAA38C,MAAAk4C,KAMAuD,EAAA35C,UAAA86C,WAAA,WACA,MAAA58C,MAAAu7C,UAMAE,EAAA35C,UAAA+6C,WAAA,WACA,MAAA78C,MAAAw7C,UAOAC,EAAA35C,UAAA85C,KAAA,WACA,MAAA57C,MAAAg8C,qBAAAJ,KAAA57C,KAAAu7C,SAAA,kBAAAv7C,UAAAA,OAMAy7C,EAAA35C,UAAAwwC,MAAA,WACA,GAAAtyC,KAAAg8C,qBAAAc,WAAA,CACA,GAAA/8C,GAAAC,IACA,OAAAmB,GAAAwd,IAAA3e,KAAA+8C,iBAAA,SAAAC,GACA,MAAAA,GAAAC,YACAp9B,KAAA,WACA,MAAA9f,GAAAi8C,qBAAA1J,UACAzyB,KAAA,WACA9f,EAAAkY,KAAA,WAGA,MAAA9W,GAAAgG,WAOAs0C,EAAA35C,UAAAo7C,cAAA,WACA,MAAAl9C,MAAAm9C,UAAAC,MAAA,YAOA3B,EAAA35C,UAAAu7C,WAAA,SAAAC,GACA,QAAAt9C,KAAAu9C,WAAAD,IAOA7B,EAAA35C,UAAAy7C,WAAA,SAAAD,GACA,MAAAt9C,MAAA+7C,UAAAuB,IAMA7B,EAAA35C,UAAAi7C,eAAA,WACA,MAAAp1C,QAAAgF,KAAA3M,KAAA+7C,WAAAp9B,IAAA,SAAAqkB,GACA,MAAAhjC,MAAA+7C,UAAA/Y,IACA38B,KAAArG,QAMAy7C,EAAA35C,UAAA07C,SAAA,WACA,MAAAx9C,MAAAg8C,qBAAAwB,YAMA/B,EAAA35C,UAAA27C,WAAA,SAAAT,GACAh9C,KAAA+7C,UAAAiB,EAAAL,SAAAK,EACAA,EAAAhgB,KAAA,UAAA,WACAh9B,KAAA09C,cAAAV,EAAAL,UACAt2C,KAAArG,QAMAy7C,EAAA35C,UAAA47C,cAAA,SAAAJ,SACAt9C,MAAA+7C,UAAAuB,IAOA7B,EAAA35C,UAAA4uC,KAAA,SAAAzoC,GAUA,MATAjI,MAAAw7C,SAAA,QACAvzC,EAAA01C,MAAA39C,KAAAw7C,SAAA,OAEAx7C,KAAAw7C,SAAA,YACAvzC,EAAA21C,UAAA59C,KAAAw7C,SAAA,WAEAvzC,EAAA,cACAA,EAAA,YAAAq0C,EAAAuB,oBAEA79C,KAAAg8C,qBAAAtL,KAAAzoC,IAQAwzC,EAAA35C,UAAAg8C,sBAAA,SAAA71C,GACA,GAAA,WAAAA,EAAA,MACA,MAAAjI,MAAA+9C,UAAA91C,EAEA,IAAAq1C,GAAAr1C,EAAA,UACA,OAAAq1C,GACAt9C,KAAAq9C,WAAAC,GACAt9C,KAAAu9C,WAAAD,GAAAQ,sBAAA71C,GAEA9G,EAAAyN,OAAA,GAAAhO,OAAA,qBAAA08C,EAAA,MAGAn8C,EAAAgG,QAAAc,IAQAwzC,EAAA35C,UAAA46C,qBAAA,SAAAsB,GACA,GAAAV,GAAAU,EAAA90C,IAAA,aACA,IAAAo0C,GAAAt9C,KAAAq9C,WAAAC,GACA,MAAAt9C,MAAAu9C,WAAAD,GAAAZ,qBAAAsB,EAGA,IAAAj+C,GAAAC,IACA,OAAAmB,GAAAA,OACA,WACA,GAAAm8C,IAAAv9C,EAAAs9C,WAAAC,GACA,KAAA,IAAA18C,OAAA,qBAAA08C,EAAA,IAEA,OAAAv9C,GAAAk+C,4BAAAD,KAEAn+B,KAAA,WACA9f,EAAAkY,KAAA,UAAA+lC,KARA78C,SAUA,SAAAwO,GACA5P,EAAAkY,KAAA,QAAAtI,MAUA8rC,EAAA35C,UAAAi8C,UAAA,SAAAG,GAUA,MATAl+C,MAAAm+C,eAAA,GAAA7B,GAAA4B,EAAA,YAAA,SAAAF,GACA,GAAA,WAAAA,EAAA90C,IAAA,SAAA,CACA,GAAAo0C,GAAAU,EAAA90C,IAAA,OAAA,KAEA,OADAlJ,MAAAy9C,WAAAlB,EAAA30C,OAAA5H,KAAAs9C,IACAt9C,KAAAu9C,WAAAD,GAEA,KAAA,IAAAjB,GAAA2B,IAEA33C,KAAArG,QACAmB,EAAAgG,QAAA+2C,IAGAzC,EAAA35C,UAAAqG,SAAA,WACA,MAAA,kBAAA8L,KAAAC,WAAA8uB,GAAAhjC,KAAAk4C,IAAAoD,QAAAt7C,KAAAu7C,YAGA97C,EAAAD,QAAAi8C,IlB0/RG2C,UAAU,GAAGC,kBAAkB,GAAGC,YAAY,GAAGC,kBAAkB,GAAGC,YAAY,GAAGC,iCAAiC,GAAGC,gBAAgB,GAAGC,yBAAyB,GAAGr3C,SAAW,IAAI6c,IAAI,SAASzjB,EAAQjB,EAAOD,GmBvvStN,QAAA68C,GAAAuC,GACAh+C,MAAA2T,kBAAAvU,KAAAA,KAAA6b,aACA7b,KAAAwO,KAAAxO,KAAA6b,YAAArN,KACAxO,KAAA4+C,aAAAA,CACA,IAAAC,GAAAD,EAAAE,UACA9+C,MAAAiI,QAAA42C,EAAA,OACA7+C,KAAAa,KAAAg+C,EAAA,KAZA,GAAA1C,GAAAz7C,EAAA,YAeAy7C,GAAA/iC,SAAAijC,EAAAz7C,OAEAnB,EAAAD,QAAA68C,InBgwSGiC,YAAY,KAAKh6B,IAAI,SAAS5jB,EAAQjB,EAAOD,GoB9wShD,QAAAm8B,KACAA,EAAAmgB,OAAA/6C,KAAAf,MACAo7B,UAAA,EACAH,UAAA,IACAI,aAAA,EACAH,aAAA,KARA,GAAA4B,GAAAp8B,EAAA,iBACAy7C,EAAAz7C,EAAA,YAWAy7C,GAAA/iC,SAAAuiB,EAAAmB,GAEAr9B,EAAAD,QAAAm8B,IpBqxSG2iB,YAAY,GAAGS,cAAgB,IAAIh6B,IAAI,SAASrkB,EAAQjB,EAAOD,GqBnySlE,GAAA28C,IAOAM,OAAA,SAAAuC,EAAAC,GACA,GAAAA,EAAA,CACA,GAAAC,GAAAxiC,MAAA5a,UAAAmH,MAAAlI,KAAAsD,UAAA,MAEA66C,GAAAvvB,QAAA,SAAAsvB,GACAt3C,OAAAgF,KAAAsyC,GAAAtvB,QAAA,SAAA7iB,GACAkyC,EAAAlyC,GAAAmyC,EAAAnyC,OAKA,MAAAkyC,IAMA5lC,SAAA,SAAA+lC,EAAAC,GACAD,EAAArD,OAAAsD,EACAD,EAAAr9C,UAAA6F,OAAAC,OAAAw3C,EAAAt9C,WACA+Z,aACA3U,MAAAi4C,EACAriC,YAAA,EACAD,UAAA,EACAD,cAAA,MAMAnd,GAAAD,QAAA28C,OrBsySM12B,IAAI,SAAS/kB,EAAQjB,EAAOD,GsB30SlC,GAAA67C,GAAA36C,EAAA,YACA27C,EAAA37C,EAAA,WACAu7C,EAAAv7C,EAAA,0BACA+6C,EAAA/6C,EAAA,gBACA67C,EAAA77C,EAAA,aACA2+C,EAAA3+C,EAAA,YACA4+C,EAAA5+C,EAAA,yBACA6+C,EAAA7+C,EAAA,sCACA8+C,EAAA9+C,EAAA,oCACA++C,EAAA/+C,EAAA,oCACAg/C,EAAAh/C,EAAA,sCAEAjB,GAAAD,SACAoB,MAAAy7C,EACAJ,oBAAAA,EACAZ,OAAAA,EACAI,WAAAA,EACAc,QAAAA,EACA8C,OAAAA,EACAC,YAAAA,EACAC,kBAAAA,EACAC,gBAAAA,EACAC,gBAAAA,EACAC,mBAAAA,KtB+0SGC,WAAW,GAAG9D,eAAe,GAAGuC,UAAU,GAAGwB,WAAW,GAAGpB,YAAY,GAAGqB,wBAAwB,GAAGC,qCAAqC,GAAGC,mCAAmC,GAAGC,sCAAsC,GAAGC,mCAAmC,GAAGtB,yBAAyB,KAAKvyB,IAAI,SAAS1rB,EAAQjB,EAAOD,GuBl2S/T,QAAAg9C,GAAA0D,GACAlgD,KAAAmgD,cAAAD,EAMA1D,EAAA16C,UAAAs+C,gBAAA,WACA,MAAApgD,MAAAmgD,eAMA3D,EAAA16C,UAAAg9C,SAAA,WACA,MAAA9+C,MAAAkJ,IAAA,UAOAszC,EAAA16C,UAAAoH,IAAA,SAAAsF,GAIA,IAAA,GAHAgP,GAAAd,MAAA5a,UAAAmH,MAAAlI,KAAAsD,UAAA,GACA+Q,EAAApV,KAAAmgD,cAAA3xC,GAEA7N,EAAA,EAAAA,EAAA6c,EAAAxc,SACAwN,EAAAgP,EAAA7c,GACAyU,GAFAzU,IAGAyU,EAAAA,EAAA5G,EAMA,OAAA4G,IAAA,MAGA3V,EAAAD,QAAAg9C,OvBy2SM3vB,IAAI,SAASnsB,EAAQjB,EAAOD,GwB14SlC,QAAA6gD,GAAAH,EAAAI,GACAD,EAAAvE,OAAAvzC,MAAAvI,KAAAqE,WACArE,KAAAugD,QAAAD,EAXA,GAAAnE,GAAAz7C,EAAA,aACA87C,EAAA97C,EAAA,kBAaAy7C,GAAA/iC,SAAAinC,EAAA7D,GAMA6D,EAAAv+C,UAAA0+C,cAAA,SAAAhyC,GACA,GAAAgP,GAAAd,MAAA5a,UAAAmH,MAAAlI,KAAAsD,UAEA,OADAmZ,GAAAijC,QAAA,aAAA,QACAzgD,KAAAkJ,IAAAX,MAAAvI,KAAAwd,IAMA6iC,EAAAv+C,UAAAg9C,SAAA,WACA,GAAAnvC,GAAA3P,KAAAwgD,cAAA,QACA,OAAA7wC,IAEAgE,OAAAhE,EACA9O,KAAAb,KAAAwgD,cAAA,eAGAH,EAAAvE,OAAAh6C,UAAAg9C,SAAA/9C,KAAAf,OAMAqgD,EAAAv+C,UAAA4+C,cAAA,WACA,MAAA1gD,MAAAwgD,cAAAxgD,KAAAugD,QAAAI,qBAGAlhD,EAAAD,QAAA6gD,IxBs5SG/B,YAAY,GAAGC,kBAAkB,KAAKxvB,IAAI,SAASruB,EAAQjB,EAAOD,GyBp7SrE,QAAA6/C,GAAArC,EAAAxuC,EAAAw0B,GACAqc,EAAAvD,OAAA/6C,KAAAf,MACAA,KAAA4gD,SAAA5D,EACAh9C,KAAA6gD,MAAAryC,EACAxO,KAAAk4C,IAAAlV,CAEA,IAAAsd,GAAAtgD,IACAg9C,GAAA3f,GAAA,UAAA,WACAijB,EAAAQ,YAzBA,GAAA3/C,GAAAT,EAAA,YACAy7C,EAAAz7C,EAAA,aACAi7B,EAAAj7B,EAAA,mBACA27C,EAAA37C,EAAA,WACA07C,EAAA17C,EAAA,kCACA47C,EAAA57C,EAAA,iBACA2/C,EAAA3/C,EAAA,yBAuBAy7C,GAAA/iC,SAAAimC,EAAA1jB,GACAwgB,EAAAM,OAAA4C,EAAAv9C,UAAAs6C,GAEAiD,EAAA0B,UAMA1B,EAAAz3C,OAAA,SAAAo1C,EAAAxuC,EAAAw0B,GACA,GAAAge,GAAAhhD,KAAA+gD,OAAAvyC,EACA,OAAAwyC,GACA,GAAAA,GAAAhE,EAAAxuC,EAAAw0B,GAEA,GAAAqc,GAAArC,EAAAxuC,EAAAw0B,IAOAqc,EAAA4B,SAAA,SAAAzyC,EAAAwyC,GACAhhD,KAAA+gD,OAAAvyC,GAAAwyC,GAMA3B,EAAAv9C,UAAA66C,MAAA,WACA,MAAA38C,MAAAk4C,KAMAmH,EAAAv9C,UAAAo/C,QAAA,WACA,MAAAlhD,MAAA6gD,OAMAxB,EAAAv9C,UAAA6+C,iBAAA,WACA,KAAA,IAAA//C,OAAA,gDAOAy+C,EAAAv9C,UAAA4uC,KAAA,SAAAzoC,GAEA,MADAA,GAAA,UAAAjI,KAAAk4C,IACAl4C,KAAA4gD,SAAAlQ,KAAAzoC,IAMAo3C,EAAAv9C,UAAAq/C,OAAA,WACA,MAAAnhD,MAAA4gD,SACA,GAAAz/C,GAAA,SAAAgG,EAAAyH,GACA5O,KAAAg9B,KAAA,SAAA71B,GACAnH,KAAAohD,qBAAAhE,MAAA,WAAAp9C,SAAA4O,IACAvI,KAAArG,OAEAmB,EAAAgG,WAMAk4C,EAAAv9C,UAAAm7C,QAAA,WACA,MAAAj9C,MAAA8gD,WAQAzB,EAAAv9C,UAAAg8C,sBAAA,SAAA71C,GACA,MAAA9G,GAAAgG,QAAAc,IAOAo3C,EAAAv9C,UAAA46C,qBAAA,SAAAsB,GACA,GAAAj+C,GAAAC,IACA,OAAAmB,GAAAA,OACA,WAEA,MADA68C,GAAA,GAAAqC,GAAArC,EAAAoC,kBAAArgD,GACA,aAAAi+C,EAAA90C,IAAA,SACAnJ,EAAAshD,cAEAthD,EAAAk+C,4BAAAD,KAEAn+B,KAAA,WACA9f,EAAAkY,KAAA,UAAA+lC,KATA78C,SAWA,SAAAwO,GACA5P,EAAAkY,KAAA,QAAAtI,MAQA0vC,EAAAv9C,UAAAu/C,YAAA,WACA,MAAArhD,MAAA8gD,WAOAzB,EAAAv9C,UAAAg/C,QAAA,WAKA,MAJA9gD,MAAA4gD,WACA5gD,KAAA4gD,SAAA,KACA5gD,KAAAiY,KAAA,WAEA9W,EAAAgG,WAGAk4C,EAAAv9C,UAAAqG,SAAA,WACA,MAAA,SAAA8L,KAAAC,WAAA8uB,GAAAhjC,KAAAk4C,IAAA1pC,KAAAxO,KAAA6gD,SAQAxB,EAAAv9C,UAAAs/C,oBAAA,SAAAviC,GACA,GAAAyiC,GAAAhF,EAAAuB,mBACA0D,EAAA,GAAAjF,GAAAgF,EAAA,SAAAtD,GACA,GAAAwD,GAAAxD,EAAAc,UACA,KAAA0C,EACA,MAAArgD,GAAAgG,QAAA62C,EAEA,IAAAruC,GAAA,GAAA0sC,GAAA2B,EACA,OAAA78C,GAAAyN,OAAAe,KAEA1H,GACAm1C,MAAA,UACAmE,YAAAD,EAKA,OAHAnF,GAAAM,OAAAx0C,EAAA4W,GAEA7e,KAAAm+C,eAAAoD,GACAvhD,KAAAm9C,SAAAl1C,IAGAxI,EAAAD,QAAA6/C,IzBw8SGjB,UAAU,GAAGC,kBAAkB,GAAGC,YAAY,GAAGmD,yBAAyB,GAAGhD,iCAAiC,GAAGC,gBAAgB,GAAGp3C,SAAW,IAAIwoB,IAAI,SAASpvB,EAAQjB,EAAOD,G0B/mTlL,QAAA+8C,GAAAZ,EAAA3Y,GACAuZ,EAAAT,OAAA/6C,KAAAf,MACAA,KAAA0hD,YAAA/F,EACA37C,KAAAk4C,IAAAlV,EACAhjC,KAAA2hD,YAEA3hD,KAAA0hD,YAAA7E,aAAA,WACA78C,KAAA4hD,iBAEA,IAAA5E,GAAAh9C,IACA27C,GAAAte,GAAA,QAAA,WACA2f,EAAA6E,aA5BA,GAAA1gD,GAAAT,EAAA,YACAy7C,EAAAz7C,EAAA,aACAi7B,EAAAj7B,EAAA,mBACA07C,EAAA17C,EAAA,kCACA27C,EAAA37C,EAAA,WACAohD,EAAAphD,EAAA,WACA47C,EAAA57C,EAAA,iBACA2+C,EAAA3+C,EAAA,WAyBAy7C,GAAA/iC,SAAAmjC,EAAA5gB,GACAwgB,EAAAM,OAAAF,EAAAz6C,UAAAs6C,GAMAG,EAAA30C,OAAA,SAAA+zC,EAAA3Y,GACA,MAAA,IAAAuZ,GAAAZ,EAAA3Y,IAMAuZ,EAAAz6C,UAAA66C,MAAA,WACA,MAAA38C,MAAAk4C,KAOAqE,EAAAz6C,UAAA4uC,KAAA,SAAAzoC,GACA,MAAAjI,MAAA0hD,aAIAz5C,EAAA,WAAAjI,KAAAk4C,IACAl4C,KAAA+hD,iBACA/hD,KAAA+hD,gBAAAC,QAEAhiD,KAAA0hD,YAAAhR,KAAAzoC,IAPA9G,EAAAyN,OAAA,GAAAhO,OAAA,uCAAAZ,QAeAu8C,EAAAz6C,UAAAmgD,aAAA,SAAAzzC,GACA,MAAAxO,MAAAm9C,UAAAC,MAAA,SAAAkD,OAAA9xC,KAOA+tC,EAAAz6C,UAAAogD,QAAA,WACA,MAAAliD,MAAAm9C,UAAAC,MAAA,aAMAb,EAAAz6C,UAAAm7C,QAAA,WACA,MAAAj9C,MAAA6hD,YAOAtF,EAAAz6C,UAAAqgD,UAAA,SAAAC,GACA,QAAApiD,KAAAqiD,UAAAD,IAOA7F,EAAAz6C,UAAAugD,UAAA,SAAAD,GACA,MAAApiD,MAAA2hD,SAAAS,IAMA7F,EAAAz6C,UAAAwgD,cAAA,WACA,MAAA36C,QAAAgF,KAAA3M,KAAA2hD,UAAAhjC,IAAA,SAAAqkB,GACA,MAAAhjC,MAAA2hD,SAAA3e,IACA38B,KAAArG,QAMAu8C,EAAAz6C,UAAAygD,UAAA,SAAAjC,GACAtgD,KAAA2hD,SAAArB,EAAA3D,SAAA2D,EACAA,EAAAtjB,KAAA,SAAA,WACAh9B,KAAAwiD,aAAAlC,EAAA3D,UACAt2C,KAAArG,QAMAu8C,EAAAz6C,UAAA0gD,aAAA,SAAAJ,SACApiD,MAAA2hD,SAAAS,IAQA7F,EAAAz6C,UAAAg8C,sBAAA,SAAA71C,GACA,GAAA22C,GAAA32C,EAAA,KACA,IAAA,WAAA22C,EACA,MAAA5+C,MAAAyiD,UAAAx6C,EAEA,IAAA,YAAA22C,EACA,MAAA5+C,MAAA0iD,WAAAz6C,EAEA,IAAAm6C,GAAAn6C,EAAA,SACA,OAAAm6C,GACApiD,KAAAmiD,UAAAC,GACApiD,KAAAqiD,UAAAD,GAAAtE,sBAAA71C,GAEA9G,EAAAyN,OAAA,GAAAhO,OAAA,mBAAAwhD,EAAA,MAGAjhD,EAAAgG,QAAAc,IAQAs0C,EAAAz6C,UAAA46C,qBAAA,SAAAsB,GACA,GAAAoE,GAAApE,EAAA90C,IAAA,cAAA80C,EAAA90C,IAAA,SACA,IAAAk5C,GAAApiD,KAAAmiD,UAAAC,GACA,MAAApiD,MAAAqiD,UAAAD,GAAA1F,qBAAAsB,EAGA,IAAAj+C,GAAAC,IACA,OAAAmB,GAAAA,OACA,WACA,GAAAihD,IAAAriD,EAAAoiD,UAAAC,GACA,KAAA,IAAAxhD,OAAA,mBAAAwhD,EAAA,IAEA,OAAA,YAAApE,EAAA90C,IAAA,SACAnJ,EAAA4iD,WAAA3E,GAEAj+C,EAAAk+C,4BAAAD,KAEAn+B,KAAA,WACA9f,EAAAkY,KAAA,UAAA+lC,KAXA78C,SAaA,SAAAwO,GACA5P,EAAAkY,KAAA,QAAAtI,MAUA4sC,EAAAz6C,UAAA2gD,UAAA,SAAAvE,GAYA,MAXAl+C,MAAAm+C,eACA,GAAA7B,GAAA4B,EAAA,YAAA,SAAAF,GACA,GAAA,WAAAA,EAAA90C,IAAA,SAAA,CACA,GAAAk5C,GAAApE,EAAA90C,IAAA,OAAA,KAEA,OADAlJ,MAAAuiD,UAAAlD,EAAAz3C,OAAA5H,KAAAk+C,EAAA,OAAAkE,IACApiD,KAAAqiD,UAAAD,GAEA,KAAA,IAAA/F,GAAA2B,IAEA33C,KAAArG,QAEAmB,EAAAgG,QAAA+2C,IAQA3B,EAAAz6C,UAAA6gD,WAAA,SAAA3E,GACA,MAAAh+C,MAAA6hD,WAAA7hD,UAAAg+C,IASAzB,EAAAz6C,UAAA4gD,WAAA,SAAAxE,GAUA,MATAl+C,MAAAm+C,eACA,GAAA7B,GAAA4B,EAAA,YAAA,SAAAF,GACA,GAAA,WAAAA,EAAA90C,IAAA,SACA,MAAAlJ,MAAA6hD,WAAA7hD,UAAAg+C,EAEA,MAAA,IAAA3B,GAAA2B,IAEA33C,KAAArG,QAEAmB,EAAAgG,QAAA+2C,IAOA3B,EAAAz6C,UAAA+/C,SAAA,WACA,MAAA7hD,MAAA0hD,aAGA1hD,KAAA4iD,iBACAzhD,EAAAwd,IAAA3e,KAAAsiD,gBAAA,SAAAhC,GACA,MAAAA,GAAArD,YADA97C,WAEA,WACAnB,KAAA2hD,YACA3hD,KAAA0hD,YAAA,KACA1hD,KAAAiY,KAAA,YACA5R,KAAArG,QATAmB,EAAAgG,WAiBAo1C,EAAAz6C,UAAA+gD,iBAAA,SAAA37C,GACA,GAAA47C,MAAA57C,GACA,OAAA,CAEA,IAAAuiB,GAAAs5B,WAAA77C,EACA,QAAA,EAAAuiB,KAAAA,GAAAA,EAAA,GAMA8yB,EAAAz6C,UAAA8/C,gBAAA,WACA,GAAAoB,GAAAhjD,KAAA0hD,YAAA7E,aAAA,SACA78C,MAAA6iD,iBAAAG,IAAAA,EAAA,KACAhjD,KAAAijD,iBAAAD,EAEAhjD,KAAAijD,iBAAA,GAEA,IAAAjG,GAAAh9C,IACAA,MAAA+hD,gBAAA,GAAAD,GAAA,WACA9E,EAAAtM,MAAA0M,MAAA,cAAAJ,SACA,SAAArtC,GAIA,KAHAqtC,GAAA0E,YAAAlE,YACAR,EAAA4F,iBAEAjzC,KAEA3P,KAAAijD,kBACAjjD,KAAA+hD,gBAAA5Q,SAGAoL,EAAAz6C,UAAA8gD,eAAA,WACA5iD,KAAA+hD,kBACA/hD,KAAA+hD,gBAAAxP,OACAvyC,KAAA+hD,gBAAA,OAIAxF,EAAAz6C,UAAAqG,SAAA,WACA,MAAA,UAAA8L,KAAAC,WAAA8uB,GAAAhjC,KAAAk4C,OAIAz4C,EAAAD,QAAA+8C,I1BmoTG6B,UAAU,GAAGC,kBAAkB,GAAGC,YAAY,GAAGsB,WAAW,GAAGsD,UAAU,GAAGzE,iCAAiC,GAAGC,gBAAgB,GAAGp3C,SAAW,IAAIwpB,IAAI,SAASpwB,EAAQjB,EAAOD,G2B36TjL,QAAAsiD,GAAAj+B,EAAAqS,GACAl2B,KAAAgjB,UAAAa,EACA7jB,KAAAmjD,IAAAjtB,EACAl2B,KAAAojD,WAAA,KAGAtB,EAAAhgD,UAAAqvC,MAAA,WACAnxC,KAAAojD,WAAA9+C,WAAAtE,KAAAgjB,UAAAhjB,KAAAmjD,MAGArB,EAAAhgD,UAAAywC,KAAA,WACAvyC,KAAAojD,aACAttB,aAAA91B,KAAAojD,YACApjD,KAAAojD,WAAA,OAIAtB,EAAAhgD,UAAAkgD,MAAA,WACAhiD,KAAAuyC,OACAvyC,KAAAmxC,SAGA1xC,EAAAD,QAAAsiD,O3Bm7TM5wB,IAAI,SAASxwB,EAAQjB,EAAOD,G4B98TlC,GAAA2B,GAAAT,EAAA,YACA27C,EAAA37C,EAAA,YACA47C,EAAA57C,EAAA,kBACA2iD,EAAA3iD,EAAA,mBAKA07C,GAIAkH,gBAAA,WAIA,MAHAtjD,MAAAujD,gBACAvjD,KAAAujD,cAAA,GAAAF,IAEArjD,KAAAujD,eAMApF,eAAA,SAAAoD,GACAvhD,KAAAsjD,kBAAAE,IAAAjC,IAQApE,SAAA,SAAAl1C,GACAA,EAAA,cACAA,EAAA,YAAAq0C,EAAAuB,mBAEA,IAAA99C,GAAAC,IACA,OAAAA,MAAA89C,sBAAA71C,GACA4X,KAAA,SAAA5X,GACA,MAAAlI,GAAA2wC,KAAAzoC,KAEA4X,KAAA,SAAAzK,GACA,GAAAmsC,GAAAxhD,EAAAujD,kBAAAG,KAAAx7C,EAAA,YACA,OAAAs5C,GACAA,EAAA9/C,QAEA2T,KAQAsuC,eAAA,SAAA1F,GACA,MAAAh+C,MAAAsjD,kBAAAvlC,IAAAigC,EAAA90C,IAAA,iBAQAy6C,mBAAA,SAAA3F,GACA,MAAAh+C,MAAAsjD,kBAAAM,QAAA5F,EAAA90C,IAAA,eAAA80C,IAQAC,4BAAA,SAAAD,GACA,GAAAj+C,GAAAC,IACA,OAAAD,GAAA2jD,eAAA1F,GACAj+C,EAAA4jD,mBAAA3F,GAEAA,EAAAc,WACA39C,EAAAyN,OAAA,GAAAytC,GAAA2B,IADA,QAOAv+C,GAAAD,QAAA48C,I5Bi9TGyH,WAAW,GAAGC,iBAAiB,GAAGC,kBAAkB,GAAGz8C,SAAW,IAAI6qB,IAAI,SAASzxB,EAAQjB,EAAOD,G6BthUrG,QAAA88C,GAAAtZ,EAAAnf,EAAAmgC,GACAhkD,KAAAgjC,GAAAA,EACAghB,EAAAA,GAAA,GACA,IAAAC,GACAlkD,EAAAC,IACAA,MAAAyB,QAAA,GAAAN,GAAA,SAAAgG,EAAAyH,GACA7O,EAAAijB,UAAA,WACA8S,aAAAmuB,EACA,IAAA7uC,EACA,KACAA,EAAAyO,EAAAtb,MAAA,KAAAlE,WACA,MAAAsL,GACAyF,EAAAjU,EAAAyN,OAAAe,GAEAyF,YAAAjU,KACAiU,EAAAjU,EAAAgG,QAAAiO,IAEAA,EAAAyK,KAAA1Y,EAAAyH,IAGAq1C,EAAA3/C,WAAA,WACAsK,EAAA,GAAAhO,OAAA,uBAAAb,EAAAijC,MACAghB,KAEAhkD,KAAAkkD,aAAA,EAtCA,GAAA/iD,GAAAT,EAAA,WA8CA47C,GAAAx6C,UAAA8hD,QAAA,WAKA,MAJA5jD,MAAAkkD,cACAlkD,KAAAkkD,aAAA,EACAlkD,KAAAgjB,UAAAza,MAAAvI,KAAAqE,YAEArE,KAAAyB,SAMA66C,EAAAuB,iBAAA,WACA,MAAAl1C,MAAAu9B,SAAA/9B,SAAA,IAAAy+B,UAAA,EAAA,KAGAnnC,EAAAD,QAAA88C,I7BuiUGh1C,SAAW,IAAIssB,IAAI,SAASlzB,EAAQjB,EAAOD,G8B9lU9C,QAAA6jD,KAEArjD,KAAAmkD,QARA,GAAAhjD,GAAAT,EAAA,YACA47C,EAAA57C,EAAA,gBAaA2iD,GAAAvhD,UAAA0hD,IAAA,SAAAjC,GACA,GAAAvhD,KAAA+d,IAAAwjC,EAAAve,IACA,KAAA,IAAApiC,OAAA,yBAAA2gD,EAAAve,GAAA,mBAEA,MAAAue,YAAAjF,IACA,KAAA,IAAA17C,OAAA,mDAEAZ,MAAAmkD,KAAA5C,EAAAve,IAAAue,GAOA8B,EAAAvhD,UAAAic,IAAA,SAAAilB,GACA,MAAAA,MAAAhjC,KAAAokD,MAAAphB,IAOAqgB,EAAAvhD,UAAA2hD,KAAA,SAAAzgB,GACA,MAAAhjC,MAAAokD,MAAAphB,IAAA,MASAqgB,EAAAvhD,UAAA8hD,QAAA,SAAA5gB,EAAA/6B,GACA,GAAAs5C,GAAAvhD,KAAAyjD,KAAAzgB,EACA,KAAAue,EACA,KAAA,IAAA3gD,OAAA,gBAAAoiC,EAAA,cAEA,OAAA,QAAA/6B,EAAA,OACAjI,KAAAqkD,OAAArhB,GACAue,EAAAqC,QAAA37C,IAEA9G,EAAAgG,QAAAc,IAMAo7C,EAAAvhD,UAAAuiD,OAAA,SAAArhB,GACA,IAAAhjC,KAAA+d,IAAAilB,GACA,KAAA,IAAApiC,OAAA,yBAAAoiC,EAAA,yBAEAhjC,MAAAmkD,KAAAnhB,IAQAqgB,EAAAvhD,UAAAsiD,MAAA,SAAAphB,GACA,MAAAhjC,MAAAmkD,KAAAnhB,IAGAvjC,EAAAD,QAAA6jD,I9BumUG3E,gBAAgB,GAAGp3C,SAAW,IAAI4sB,IAAI,SAASxzB,EAAQjB,EAAOD,G+B/qUjE,QAAA8kD,KACAA,EAAAxI,OAAAvzC,MAAAvI,KAAAqE,WANA,GAAAlD,GAAAT,EAAA,YACAy7C,EAAAz7C,EAAA,cACA2/C,EAAA3/C,EAAA,2BACA6jD,EAAA7jD,EAAA,wBAMAy7C,GAAA/iC,SAAAkrC,EAAAC,GAQAD,EAAAxiD,UAAA0iD,MAAA,SAAAxhB,EAAAnkB,GACA,GAAA4lC,GAAAtI,EAAAM,QAAAiI,QAAA,QAAA7lC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,IACA5kC,KAAA,SAAA8iB,GAEA,MADA3iC,MAAA2kD,iBAAA3hB,GACAL,GACAt8B,KAAArG,QAOAskD,EAAAxiD,UAAA8iD,MAAA,WACA,MAAA5kD,MAAAohD,qBAAAqD,MAAAC,QAAA,WACA7kC,KAAA,SAAA8iB,GAEA,MADA3iC,MAAA6kD,qBACAliB,GACAt8B,KAAArG,QASAskD,EAAAxiD,UAAAgjD,QAAA,SAAA9hB,EAAAnkB,GACA,GAAA4lC,GAAAtI,EAAAM,QAAAiI,QAAA,cAAA7lC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,IACA5kC,KAAA,SAAA8iB,GAEA,MADA3iC,MAAA2kD,iBAAA3hB,GACAL,GACAt8B,KAAArG,QASAskD,EAAAxiD,UAAAijD,SAAA,SAAA/hB,EAAAnkB,GACA,MAAA7e,MAAAglD,iBAAAhiB,GACA7hC,EAAAgG,QAAA,GAAAk5C,MAAArgD,OAEAA,KAAAglD,mBACAhlD,KAAA8kD,QAAA9hB,EAAAnkB,GAEA7e,KAAAwkD,MAAAxhB,EAAAnkB,IAOAylC,EAAAxiD,UAAAqiD,KAAA,WACA,MAAAnkD,MAAAilD,SAWAX,EAAAxiD,UAAAi5B,UAAA,SAAAlc,EAAAqmC,GACA,GAAAT,GAAAtI,EAAAM,QACAiI,QAAA,aACA7lC,GACA5W,GAAAw8C,KAAAA,EAIA,OAHAS,KACAj9C,EAAAi9C,KAAAA,GAEAllD,KAAAohD,oBAAAn5C,IAYAq8C,EAAAxiD,UAAAqjD,YAAA,SAAA9jB,EAAA6R,EAAAkS,GACA,GAAArlD,GAAAC,IACA,OAAAmB,GAAAA,OACA,WACApB,EAAAslD,uBACAhkB,EAAAiS,iBAAA3jB,QAAA,SAAA4R,GACAxhC,EAAAgyC,SAAAxQ,EAAAF,OAGAxhB,KAAA,WACA,MAAA9f,GAAAkzC,YAAAC,KAEArzB,KAAA,SAAAqlC,GACA,MAAAnlD,GAAAulD,QAAAJ,EAAAE,MAYAd,EAAAxiD,UAAAwjD,QAAA,SAAAJ,EAAAE,GACA,MAAAplD,MAAA+6B,UAAAqqB,EAAAF,GACArlC,KAAA,SAAA8iB,GACA,GAAAuiB,GAAAviB,EAAAz5B,IAAA,OACA,OAAAg8C,IACAllD,KAAAulD,aAAAL,GACAA,GAEA/jD,EAAAyN,OAAA,GAAAhO,OAAA,0CACAyF,KAAArG,QAQAskD,EAAAxiD,UAAA0jD,kBAAA,SAAA3mC,GACA,GAAA4lC,GAAAtI,EAAAM,QAAAiI,QAAA,oBAAA7lC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,KAGAhlD,EAAAD,QAAA8kD,I/BurUGmB,aAAa,GAAGC,0BAA0B,GAAGC,wBAAwB,GAAGr+C,SAAW,IAAI4tB,IAAI,SAASx0B,EAAQjB,EAAOD,GgC50UtH,QAAAomD,MAHA,GAAAzkD,GAAAT,EAAA,YACAmlD,EAAAnlD,EAAA,iBAeAklD,GAAA1gB,aAAA,SAAAP,GACA,MAAA,WAAAA,EAAAK,MACAhlC,KAAA8lD,iBAAA/gB,MAAAJ,EAAAI,QAEA5jC,EAAAgG,QAAA2rB,UAAAsS,aAAAF,aAAAP,KASAihB,EAAAE,gBAAA,SAAAnhB,GACA,MAAA,WAAA9kC,OAAAg2C,SAAA7O,SACA7lC,EAAAyN,OAAA,GAAAhO,OAAA,8EAGA,UAAAilD,EAAA9lB,eAAAR,QACAv/B,KAAA+lD,uBAAAphB,GACA,WAAAkhB,EAAA9lB,eAAAR,QACAv/B,KAAAgmD,wBAAArhB,GADA,QAUAihB,EAAAG,uBAAA,SAAAphB,GACA,GAAAshB,GAAAJ,EAAA9lB,eAAA5V,QACA+7B,EAAA,EAIA,OAHArmD,QAAAizB,UAAAyiB,UAAApkC,MAAA,WACA+0C,EAAA,IAEAD,GAAA,IAAAA,GAAAC,GAEAvhB,EAAAwX,QAAAM,UAAA9X,GACAK,OACAjB,WACAoiB,iBAAA,EACAC,SAAAvmD,OAAAwmD,OAAAC,MACAC,UAAA1mD,OAAAwmD,OAAAG,OACAC,aAAA,EACAC,kBAAA,aAIA7mD,OAAAqlC,aAAAP,IAGA,GAAAxjC,GAAA,SAAAgG,EAAAyH,GACA,GAAA+3C,GACAC,EAAA,SAAAtvC,GACA,GAAAA,EAAAuvC,QAAAhnD,OAAAg2C,SAAAgR,OAGA,GAAA,kBAAAvvC,EAAA2f,KAAAjY,MAAA2nC,GAAArvC,EAAA2f,KAAA+L,GAIA,GAHAnjC,OAAAi2B,aAAA6wB,GACA9mD,OAAAqhC,oBAAA,UAAA0lB,GAEA,KAAAtvC,EAAA2f,KAAA6vB,SAAA,CAEA,GAAAn3C,GAAA,GAAA/O,OAAA,0BACA+O,GAAAnB,KAAA,yDACAI,EAAAe,OAEAg1B,GAAAwX,QAAAM,UAAA9X,GACAK,OACAjB,WACA2iB,kBAAA,UACAN,SAAAvmD,OAAAwmD,OAAAC,MACAC,UAAA1mD,OAAAwmD,OAAAG,OACAC,aAAA,GAEAziB,WACAmiB,iBAAA,IACAY,+BAAA,OAIApiB,EAAAK,MAAAjB,UAAAijB,oBAAA1vC,EAAA2f,KAAA6vB,SACA3/C,EAAAtH,OAAAqlC,aAAAP,QAEA,yBAAArtB,EAAA2f,KAAAjY,MACA2nC,GAAArvC,EAAA2f,KAAA+L,IACAnjC,OAAAi2B,aAAA6wB,GAKA9mD,QAAAuhC,iBAAA,UAAAwlB,GACAD,EAAAriD,WACA,WACAzE,OAAAqhC,oBAAA,UAAA0lB,EACA,IAAAj3C,GAAA,GAAA/O,OAAA,0BACA+O,GAAAnB,KAAA,2IACAI,EAAAe,IACA,KACA9P,OAAAonD,aAAAjoC,KAAA,iBAAAgkB,GAAA2jB,GAAA,QAUAf,EAAAI,wBAAA,SAAArhB,GACA,GAAAuiB,GAAArB,EAAA9lB,eAAA5V,OACA,IAAA+8B,GAAA,GAOA,MANAviB,GAAAwX,QAAAM,UAAA9X,GACAK,OACAmiB,eAAA,SACAC,YAAA,YAGAvnD,OAAAqlC,aAAAP,GAAA9kB,KAAA,SAAAwhB,GACA,GAAAA,EAEA,GAAAgmB,GAAAhmB,EAAAimB,YACAC,EAAA1nD,OAAA2nD,YAAA,WACAnmB,EAAAimB,aAAAD,IACAxnD,OAAA4nD,cAAAF,GACAlmB,EAAAqmB,SACArmB,EAAAqmB,WAGAL,EAAAhmB,EAAAimB,aACA,IAEA,OAAAjmB,IAGA,IAAA1xB,GAAA,GAAA/O,OAAA,+GACA,OAAAO,GAAAyN,OAAAe,IAIAlQ,EAAAD,QAAAomD,IhCk1UGt+C,SAAW,EAAEqgD,iBAAiB,IAAIvyB,IAAI,SAAS10B,EAAQjB,EAAOD,GiC5+UjE,QAAA+kD,KACAA,EAAAzI,OAAAvzC,MAAAvI,KAAAqE,WAEArE,KAAA4nD,iBAAA,KANA,GAAAzL,GAAAz7C,EAAA,cACA4+C,EAAA5+C,EAAA,iBAQAy7C,GAAA/iC,SAAAmrC,EAAAjF,GAMAiF,EAAAziD,UAAAkjD,iBAAA,SAAAhiB,GACA,MAAAA,GACAA,IAAAhjC,KAAA4nD,mBAEA5nD,KAAA4nD,kBAMArD,EAAAziD,UAAA6iD,iBAAA,SAAA3hB,GACAhjC,KAAA4nD,iBAAA5kB,GAGAuhB,EAAAziD,UAAA+iD,mBAAA,WACA7kD,KAAA4nD,iBAAA,MAQArD,EAAAziD,UAAA+lD,QAAA,SAAAhpC,GACA,GAAA4lC,GAAAtI,EAAAM,QAAAiI,QAAA,UAAA7lC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,IAAAzkD,SACA,SAAA2P,GACA,GAAAA,EAAA1H,QAAA+R,QAAA,kBAAA,EACA,MAAArK,GAAAgzB,QAEA,MAAAhzB,MAWA40C,EAAAziD,UAAA+/C,SAAA,SAAA7e,EAAAnkB,GACA,GAAA4lC,GAAAtI,EAAAM,QAAAiI,QAAA,WAAA7lC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,IACA5kC,KAAA,SAAA8iB,GAIA,MAHA3iC,MAAAglD,iBAAAhiB,IACAhjC,KAAA6kD,qBAEAliB,GACAt8B,KAAArG,QAQAukD,EAAAziD,UAAAmjD,MAAA,SAAApmC,GACA,GAAA4lC,GAAAtI,EAAAM,QAAAiI,QAAA,QAAA7lC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,KAMAF,EAAAziD,UAAAgmD,UAAA,SAAA9J,GAEA,MADAh+C,MAAA6kD,qBACAN,EAAAzI,OAAAh6C,UAAAgmD,UAAA/mD,KAAAf,KAAAg+C,IAGAv+C,EAAAD,QAAA+kD,IjCk/UGkB,aAAa,GAAGsC,iBAAiB,KAAKryB,IAAI,SAASh1B,EAAQjB,EAAOD,GkC1jVrE,QAAA8/C,GAAAtC,EAAAxuC,EAAAw0B,GACAsc,EAAAxD,OAAAvzC,MAAAvI,KAAAqE,WAEArE,KAAAgoD,gBACAhoD,KAAAioD,IAAA,KAjBA,GAAA9mD,GAAAT,EAAA,YACAwnD,EAAAxnD,EAAA,iBACAy7C,EAAAz7C,EAAA,cACA2+C,EAAA3+C,EAAA,aACAklD,EAAAllD,EAAA,uBAgBAy7C,GAAA/iC,SAAAkmC,EAAAD,GAWAC,EAAAx9C,UAAAujD,qBAAA,SAAAxmC,GACAA,EAAAs9B,EAAAM,OAAA59B,MAAA7e,KAAA4gD,SAAAc,YAAAlG,SAAArZ,GAEA,IAAAxwB,IACAw8B,aAAAG,IAAA,kCAEA3J,GACAX,WAAAmkB,sBAAA,IAWA,OATAtpC,GAAAlN,QACAwqC,EAAAM,OAAA9qC,EAAAkN,EAAAlN,QAEAkN,EAAA8lB,aACAwX,EAAAM,OAAA9X,EAAA9lB,EAAA8lB,aAGA3kC,KAAAioD,IAAA,GAAAC,GAAAnR,eAAAplC,EAAAgzB,GACA3kC,KAAAooD,uBACApoD,KAAAioD,KAMA3I,EAAAx9C,UAAAumD,kBAAA,WACA,MAAAroD,MAAAioD,KAMA3I,EAAAx9C,UAAAwmD,OAAA,WACA,MAAA,IAAAnnD,GAAA,SAAAgG,EAAAyH,GACA5O,KAAAg9B,KAAA,SAAA71B,GACAnH,KAAAohD,qBAAAhE,MAAA,WAAAp9C,SAAA4O,IACAvI,KAAArG,QAYAs/C,EAAAx9C,UAAAiwC,SAAA,SAAAxQ,EAAAF,GACA,GAAArhC,KAAAioD,IAAAlW,SAQA/xC,KAAAioD,IAAAlW,SAAAxpC,MAAAvI,KAAAioD,IAAA5jD,WACArE,KAAAiY,KAAA,kBAAAspB,MAAAA,EAAAC,QAAA9kB,MAAA5a,UAAAmH,MAAAlI,KAAAsD,UAAA,SATA,CAEA,IAAAg9B,EACA,KAAA,IAAAzgC,OAAA,kFAEAZ,MAAAioD,IAAAjZ,UAAA3N,GACArhC,KAAAiY,KAAA,kBAAAupB,SAAAH,OAYAie,EAAAx9C,UAAAojC,aAAA,SAAAP,GACA3kC,KAAAiY,KAAA,uBACA,IAAAlY,GAAAC,KACAyB,EAAAmkD,EAAA1gB,aAAAP,EACA,OAAAljC,GACAoe,KAAA,SAAAwhB,GAEA,MADAthC,GAAAkY,KAAA,uBAAAopB,OAAAA,IACAA,IAHA5/B,SAKA,SAAAkO,GAEA,KADA5P,GAAAkY,KAAA,uBAAAtI,MAAAA,IACAA,IAPAlO,WASA,WACAA,EAAA+J,eACAzL,EAAAkY,KAAA,0BAeAqnC,EAAAx9C,UAAAmxC,YAAA,SAAAp0B,GACA,MAAA7e,MAAAuoD,WAAA,cAAA1pC,IAcAygC,EAAAx9C,UAAA6xC,aAAA,SAAAuR,EAAArmC,GACA,GAAA9e,GAAAC,IACA,OAAAmB,GAAAA,OAAA,WACA,MAAApB,GAAAwlD,aAAAL,KACArlC,KAAA,WACA,MAAA9f,GAAAwoD,WAAA,eAAA1pC,MAQAygC,EAAAx9C,UAAAyjD,aAAA,SAAAL,GACA,MAAAllD,MAAAioD,IAAA1W,qBAAA,GAAA2W,GAAAxS,mBAAAwP,KASA5F,EAAAx9C,UAAAymD,WAAA,SAAAC,EAAA3pC,GACA,IAAA7e,KAAAioD,IACA,KAAA,IAAArnD,OAAA,mDAEA,KAAA,cAAA,gBAAAoZ,QAAAwuC,GAAA,EACA,KAAA,IAAA5nD,OAAA,8BAGAie,GAAAA,KACA,IAAA9e,GAAAC,IACA,OAAAA,MAAAioD,IAAAO,GAAA3pC,GACAgB,KAAA,SAAA0qB,GACA,MAAAxqC,GAAAkoD,IAAAjX,oBAAAzG,KAEA1qB,KAAA,WACA,MAAA9f,GAAAkoD,IAAAra,oBAIA0R,EAAAx9C,UAAA46C,qBAAA,SAAAz0C,GACA,GAAAlI,GAAAC,IACA,OAAAmB,GAAAA,OAAA,WACA,MAAAm+C,GAAAxD,OAAAh6C,UAAA46C,qBAAA37C,KAAAhB,EAAAkI,KAEA4X,KAAA,SAAAzK,GACA,GAAAqzC,GAAAxgD,EAAA,KACA,QAAAwgD,GACA,IAAA,UACA1oD,EAAA2oD,WAAAzgD,EACA,MACA,KAAA,SACAlI,EAAA+nD,UAAA7/C,GAGA,MAAAmN,MAOAkqC,EAAAx9C,UAAA4mD,WAAA,SAAA1K,GACA,GAAAnX,GAAA,GAAAqhB,GAAAzS,aAAAuI,EAAA,UACAh+C,MAAAioD,IAAArU,gBAAA/M,GAAA7mC,SAAA,SAAA2P,GACA3P,KAAAiY,KAAA,WAAAtI,IACAtJ,KAAArG,QAMAs/C,EAAAx9C,UAAAgmD,UAAA,SAAA9J,GACAh+C,KAAAiY,KAAA,SAAA+lC,IAGAsB,EAAAx9C,UAAA6mD,oBAAA,WACA3oD,KAAAioD,MACAjoD,KAAA4oD,kBACAjhD,OAAAgF,KAAA3M,KAAAgoD,cACAr4B,QAAA,SAAArY,GACAtX,KAAA6oD,uBAAAvxC,IACAjR,KAAArG,OACAA,KAAAioD,IAAA3V,QACAtyC,KAAAioD,IAAA,KACAjoD,KAAAiY,KAAA,cAIAqnC,EAAAx9C,UAAA8mD,gBAAA,WACA,GAAApnB,GAAAxhC,KAAAioD,IAAAva,iBACAlM,GAAA7R,QAAA,SAAA0R,GACAA,EAAAkR,KACAlR,EAAAkR,OACAlR,EAAAI,WACAJ,EAAAI,YAAA9R,QAAA,SAAA4R,GACAA,EAAAgR,YAMA+M,EAAAx9C,UAAAg/C,QAAA,SAAA74C,GAEA,MADAjI,MAAA2oD,sBACArJ,EAAAxD,OAAAh6C,UAAAg/C,QAAAv4C,MAAAvI,KAAAqE,YAGAi7C,EAAAx9C,UAAAsmD,qBAAA,WACA,GAAAroD,GAAAC,IAEAA,MAAA8oD,oBAAA,YAAA,SAAAxxC,GACAvX,EAAAkY,KAAA,mBAAAupB,SAAAlqB,EAAA+pB,YAEArhC,KAAA8oD,oBAAA,QAAA,SAAAxxC,GACAvX,EAAAkY,KAAA,kBAAAX,KAGAtX,KAAA8oD,oBAAA,eAAA,SAAAxxC,GACAA,EAAAuvB,UACA9mC,EAAA2wC,MAAA0M,MAAA,UAAAvW,UAAAvvB,EAAAuvB,aAEA9mC,EAAA2wC,MAAA0M,MAAA,UAAAvW,WAAAnV,WAAA,KACA3xB,EAAA8oD,uBAAA,mBAIA7oD,KAAA8oD,oBAAA,uBAAA,WACA,UAAA/oD,EAAAkoD,IAAAna,gBACA/tC,EAAA4oD,wBAIA3oD,KAAA8oD,oBAAA,2BAAA,WACA,OAAA/oD,EAAAkoD,IAAAla,oBACA,IAAA,SACA,IAAA,SACAhuC,EAAA4oD,0BAMArJ,EAAAx9C,UAAAgnD,oBAAA,SAAAxxC,EAAAslB,GACA58B,KAAAgoD,aAAA1wC,GAAAslB,EACA58B,KAAAioD,IAAA7mB,iBAAA9pB,EAAAslB,IAGA0iB,EAAAx9C,UAAA+mD,uBAAA,SAAAvxC,GACAtX,KAAAioD,IAAA/mB,oBAAA5pB,EAAAtX,KAAAgoD,aAAA1wC,UACAtX,MAAAgoD,aAAA1wC,IAGA7X,EAAAD,QAAA8/C,IlC0kVGmG,aAAa,GAAGsD,YAAY,GAAGC,uBAAuB,GAAG1hD,SAAW,EAAE4gD,cAAgB,KAAK5xB,IAAI,SAAS51B,EAAQjB,EAAOD,GmC72V1H,QAAAypD,KACAA,EAAAnN,OAAAvzC,MAAAvI,KAAAqE,WANA,GAAAlD,GAAAT,EAAA,YACAy7C,EAAAz7C,EAAA,cACA2/C,EAAA3/C,EAAA,2BACA6jD,EAAA7jD,EAAA,wBAMAy7C,GAAA/iC,SAAA6vC,EAAA1E,GAQA0E,EAAAnnD,UAAA+lD,QAAA,SAAA7kB,EAAAnkB,GAEA,MADAA,GAAAs9B,EAAAM,QAAAzZ,GAAAA,GAAAnkB,GACAoqC,EAAAnN,OAAAh6C,UAAA+lD,QAAA9mD,KAAAf,KAAA6e,IASAoqC,EAAAnnD,UAAA+/C,SAAA,SAAA7e,EAAAnkB,GAEA,MADAA,GAAAs9B,EAAAM,QAAAzZ,GAAAA,GAAAnkB,GACAoqC,EAAAnN,OAAAh6C,UAAA+/C,SAAA9gD,KAAAf,KAAAgjC,EAAAnkB,IAUAoqC,EAAAnnD,UAAAonD,OAAA,SAAAlmB,EAAAmmB,EAAAC,GACA,GAAA9I,GAAAtgD,KACAykD,EAAAtI,EAAAM,QAAAiI,QAAA,QAAA1hB,GAAAA,GAAAmmB,EACA,OAAAnpD,MAAAohD,qBAAAqD,KAAAA,IACA5kC,KAAA,SAAA8iB,GACA,GAAAuiB,GAAAviB,EAAAz5B,IAAA,OACA,KAAAg8C,GAAA,SAAAA,EAAA,KACA,KAAA,IAAAtkD,OAAA,yCAGA,OADA0/C,GAAAqE,iBAAA3hB,GACAsd,EAAA+I,aAAAnE,EAAAkE,GAAA9I,UAAA3d,MASAsmB,EAAAnnD,UAAAwnD,OAAA,SAAApE,GACA,GAAAj9C,IAAAw8C,MAAAC,QAAA,SAIA,OAHAQ,KACAj9C,EAAAi9C,KAAAA,GAEAllD,KAAAohD,oBAAAn5C,IAOAghD,EAAAnnD,UAAAynD,MAAA,WACA,MAAAvpD,MAAAohD,qBAAAqD,MAAAC,QAAA,UACA7kC,KAAA,SAAA8iB,GAEA,MADA3iC,MAAA6kD,qBACAliB,GACAt8B,KAAArG,QAOAipD,EAAAnnD,UAAA0nD,OAAA,WACA,MAAAxpD,MAAAohD,qBAAAqD,MAAAC,QAAA,YASAuE,EAAAnnD,UAAA2nD,QAAA,SAAAzmB,EAAAnkB,GACA,GAAA4lC,GAAAtI,EAAAM,QACAiI,QAAA,SACA1hB,GAAAA,GACAnkB,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,IACA5kC,KAAA,SAAA8iB,GAEA,MADA3iC,MAAA2kD,iBAAA3hB,GACAL,GACAt8B,KAAArG,QAUAipD,EAAAnnD,UAAA4nD,QAAA,SAAA1mB,EAAAmmB,EAAAC,GACA,MAAAppD,MAAAglD,iBAAAhiB,GACA7hC,EAAAgG,QAAA,GAAAk5C,MAAArgD,OAEAA,KAAAglD,mBACAhlD,KAAAypD,QAAAzmB,EAAAmmB,GAEAnpD,KAAAkpD,OAAAlmB,EAAAmmB,EAAAC,IASAH,EAAAnnD,UAAAunD,aAAA,SAAAnE,EAAAkE,GACA,GAAArpD,GAAAC,IACA,OAAAmB,GAAAA,OACA,WACApB,EAAAslD,yBAEAxlC,KAAA,WACA,MAAA9f,GAAA4zC,aAAAuR,EAAAkE,KAEAvpC,KAAA,SAAAqlC,GACA,MAAAnlD,GAAAqhD,qBAAAhE,MAAA,UAAAqH,MAAAC,QAAA,SAAAQ,KAAAA,OAIAzlD,EAAAD,QAAAypD,InCq3VGxD,aAAa,GAAGC,0BAA0B,GAAGC,wBAAwB,GAAGr+C,SAAW,IAAI+wB,IAAI,SAAS33B,EAAQjB,EAAOD,GoC//VtH,QAAA+/C,KACAA,EAAAzD,OAAAvzC,MAAAvI,KAAAqE,WALA,GAAA83C,GAAAz7C,EAAA,iBACA2+C,EAAA3+C,EAAA,gBACA4jD,EAAA5jD,EAAA,wBAMA6+C,GAAAoK,KAAA,2BACAxN,EAAA/iC,SAAAmmC,EAAA+E,GACAjF,EAAA4B,SAAA1B,EAAAoK,KAAApK,GAiBAA,EAAAz9C,UAAA8F,OAAA,SAAAgiD,EAAA/qC,GACA,MAAA7e,MAAA6nD,QAAA1L,EAAAM,QAAAoN,KAAAD,GAAA/qC,KAWA0gC,EAAAz9C,UAAAogD,QAAA,SAAA0H,EAAA/qC,GACA,MAAA7e,MAAA6hD,SAAA+H,EAAAzN,EAAAM,QAAAoN,KAAAD,GAAA/qC,KAcA0gC,EAAAz9C,UAAAsO,KAAA,SAAAw5C,EAAA/qC,GAEA,MADAA,GAAAs9B,EAAAM,QAAAoN,KAAAD,GAAA/qC,GACA7e,KAAAwkD,MAAAoF,EAAA/qC,IAcA0gC,EAAAz9C,UAAAgoD,OAAA,SAAAF,EAAA/qC,GAEA,MADAA,GAAAs9B,EAAAM,QAAAoN,KAAAD,GAAA/qC,GACA7e,KAAA8kD,QAAA8E,EAAA/qC,IAaA0gC,EAAAz9C,UAAA4nD,QAAA,SAAAE,EAAA/qC,GAEA,MADAA,GAAAs9B,EAAAM,QAAAoN,KAAAD,GAAA/qC,GACA7e,KAAA+kD,SAAA6E,EAAA/qC,IAQA0gC,EAAAz9C,UAAAioD,iBAAA,SAAAH,GACA,MAAA5pD,MAAAwlD,mBAAAqE,KAAAD,KAMArK,EAAAz9C,UAAA6+C,iBAAA,WACA,MAAA,eAGAlhD,EAAAD,QAAA+/C,IpCsgWGyK,gBAAgB,GAAGC,eAAe,GAAGC,wBAAwB,KAAKC,IAAI,SAASzpD,EAAQjB,EAAOD,GqC5mWjG,QAAAggD,KACAA,EAAA1D,OAAAvzC,MAAAvI,KAAAqE,WALA,GAAA83C,GAAAz7C,EAAA,iBACA2+C,EAAA3+C,EAAA,gBACA4jD,EAAA5jD,EAAA,wBAMA8+C,GAAAmK,KAAA,4BACAxN,EAAA/iC,SAAAomC,EAAA8E,GACAjF,EAAA4B,SAAAzB,EAAAmK,KAAAnK,GAUAA,EAAA19C,UAAAogD,QAAA,SAAAlf,EAAAnkB,GACA,MAAA7e,MAAA6hD,SAAA7e,EAAAmZ,EAAAM,QAAAzZ,GAAAA,GAAAnkB,KAaA2gC,EAAA19C,UAAAsO,KAAA,SAAA4yB,EAAAnkB,GAEA,MADAA,GAAAs9B,EAAAM,QAAAzZ,GAAAA,GAAAnkB,GACA7e,KAAAwkD,MAAAxhB,EAAAnkB,IASA2gC,EAAA19C,UAAAgoD,OAAA,SAAA9mB,EAAAnkB,GAEA,MADAA,GAAAs9B,EAAAM,QAAAzZ,GAAAA,GAAAnkB,GACA7e,KAAA8kD,QAAA9hB,EAAAnkB,IASA2gC,EAAA19C,UAAA4nD,QAAA,SAAA1mB,EAAAnkB,GAEA,MADAA,GAAAs9B,EAAAM,QAAAzZ,GAAAA,GAAAnkB,GACA7e,KAAA+kD,SAAA/hB,EAAAnkB,IAQA2gC,EAAA19C,UAAAioD,iBAAA,SAAA/mB,GACA,MAAAhjC,MAAAwlD,mBAAAxiB,GAAAA,KAMAwc,EAAA19C,UAAA6+C,iBAAA,WACA,MAAA,aAGAlhD,EAAAD,QAAAggD,IrCmnWGwK,gBAAgB,GAAGC,eAAe,GAAGC,wBAAwB,KAAKE,IAAI,SAAS1pD,EAAQjB,EAAOD,GsC5rWjG,QAAAkgD,KACAA,EAAA5D,OAAAvzC,MAAAvI,KAAAqE,WALA,GAAA83C,GAAAz7C,EAAA,iBACA2+C,EAAA3+C,EAAA,gBACAuoD,EAAAvoD,EAAA,yBAMAg/C,GAAAiK,KAAA,+BACAxN,EAAA/iC,SAAAsmC,EAAAuJ,GACA5J,EAAA4B,SAAAvB,EAAAiK,KAAAjK,GAmBAA,EAAA59C,UAAA8F,OAAA,SAAAo7B,EAAAnkB,GACA,MAAA7e,MAAA6nD,QAAA7kB,EAAAnkB,IAQA6gC,EAAA59C,UAAAogD,QAAA,SAAAlf,GACA,MAAAhjC,MAAA6hD,SAAA7e,IAQA0c,EAAA59C,UAAAqiD,KAAA,SAAAnhB,GACA,MAAAhjC,MAAAilD,MAAAjiB,IASA0c,EAAA59C,UAAAuoD,MAAA,SAAArnB,EAAAomB,GACA,MAAAppD,MAAAkpD,OAAAlmB,EAAA,KAAAomB,IASA1J,EAAA59C,UAAAwoD,SAAA,SAAAtnB,EAAAxB,GACA,MAAAxhC,MAAAohD,qBAAAqD,MAAAC,QAAA,YAAA1hB,GAAAA,EAAAxB,QAAAA,MAOAke,EAAA59C,UAAAqvC,MAAA,WACA,MAAAnxC,MAAAspD,UAOA5J,EAAA59C,UAAAywC,KAAA,WACA,MAAAvyC,MAAAupD,SAOA7J,EAAA59C,UAAAyoD,MAAA,WACA,MAAAvqD,MAAAwpD,UAQA9J,EAAA59C,UAAA49C,UAAA,SAAA1c,GACA,MAAAhjC,MAAAypD,QAAAzmB,IAQA0c,EAAA59C,UAAA0oD,aAAA,SAAA9hD,GACA,MAAA1I,MAAAohD,qBAAAqD,MAAAC,QAAA,gBAAAh8C,MAAAA,MAQAg3C,EAAA59C,UAAA2oD,UAAA,SAAAC,GACA,MAAA1qD,MAAAohD,qBAAAqD,MAAAC,QAAA,YAAAgG,QAAAA,MAMAhL,EAAA59C,UAAA6+C,iBAAA,WACA,MAAA,aAGAlhD,EAAAD,QAAAkgD,ItCmsWGsK,gBAAgB,GAAGC,eAAe,GAAGU,yBAAyB,KAAKC,IAAI,SAASlqD,EAAQjB,EAAOD,GuCh0WlG,QAAAigD,KACAA,EAAA3D,OAAAvzC,MAAAvI,KAAAqE,WALA,GAAA83C,GAAAz7C,EAAA,iBACA2+C,EAAA3+C,EAAA,gBACAuoD,EAAAvoD,EAAA,yBAMA++C,GAAAkK,KAAA,yBACAxN,EAAA/iC,SAAAqmC,EAAAwJ,GACA5J,EAAA4B,SAAAxB,EAAAkK,KAAAlK,GA8BAA,EAAA39C,UAAA8F,OAAA,SAAAo7B,EAAAnkB,GACA,MAAA7e,MAAA6nD,QAAA7kB,EAAAnkB,IAWA4gC,EAAA39C,UAAAogD,QAAA,SAAAlf,EAAAnkB,GACA,MAAA7e,MAAA6hD,SAAA7e,EAAAnkB,IAOA4gC,EAAA39C,UAAAqiD,KAAA,WACA,MAAAnkD,MAAAilD,SAWAxF,EAAA39C,UAAAuoD,MAAA,SAAArnB,EAAAmmB,EAAAC,GACA,MAAAppD,MAAAkpD,OAAAlmB,EAAAmmB,EAAAC,IAQA3J,EAAA39C,UAAAqvC,MAAA,SAAA+T,GACA,MAAAllD,MAAAspD,OAAApE,IAOAzF,EAAA39C,UAAAywC,KAAA,WACA,MAAAvyC,MAAAupD,SAOA9J,EAAA39C,UAAAyoD,MAAA,WACA,MAAAvqD,MAAAwpD,UASA/J,EAAA39C,UAAA29C,UAAA,SAAAoL,EAAAhsC,GACA,MAAA7e,MAAAypD,QAAAoB,EAAAhsC,IAUA4gC,EAAA39C,UAAAgpD,OAAA,SAAAD,EAAAhsC,GACA,GAAA4lC,GAAAtI,EAAAM,QACAiI,QAAA,SACA1hB,GAAA6nB,GACAhsC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,KAUAhF,EAAA39C,UAAAipD,QAAA,SAAAF,EAAAhsC,GACA,GAAA4lC,GAAAtI,EAAAM,QACAiI,QAAA,UACA1hB,GAAA6nB,GACAhsC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,IACA5kC,KAAA,WACA7f,KAAAglD,iBAAA6F,IACA7qD,KAAA6kD,sBAEAx+C,KAAArG,QAaAy/C,EAAA39C,UAAAkpD,UAAA,SAAAH,EAAAhsC,GACA,GAAA4lC,GAAAtI,EAAAM,QACAiI,QAAA,YACA1hB,GAAA6nB,GACAhsC,EACA,OAAA7e,MAAAohD,qBAAAqD,KAAAA,KAMAhF,EAAA39C,UAAA6+C,iBAAA,WACA,MAAA,aAGAlhD,EAAAD,QAAAigD,IvCu0WGuK,gBAAgB,GAAGC,eAAe,GAAGU,yBAAyB,KAAKM,IAAI,SAASvqD,EAAQjB,EAAOD,GwCx+WlG,QAAAy8C,GAAAiP,GACAjP,EAAAH,OAAA/6C,KAAAf,MAEAA,KAAAmrD,WAAAD,EAEAlrD,KAAAmrD,YACAnrD,KAAAorD,QAAAprD,KAAAmrD,YAhBA,GAAAhqD,GAAAT,EAAA,YACA22C,EAAA32C,EAAA,aAAA82C,aACA7b,EAAAj7B,EAAA,mBACAy7C,EAAAz7C,EAAA,YAiBAy7C,GAAA/iC,SAAA6iC,EAAAtgB,GAQAsgB,EAAAn6C,UAAA85C,KAAA,SAAAN,EAAAtU,GACA,GAAAjnC,GAAAC,IACA,OAAA,IAAAmB,GAAA,SAAAgG,EAAAyH,GACA,GAAAs8C,GAAA,GAAA7T,GAAAiE,EAAAtU,GAAA,GACAkkB,GAAA1a,QAAA5hC,EACAs8C,EAAAG,QAAAz8C,EACAs8C,EAAAI,OAAA,WACAJ,EAAA1a,QAAA,KACA0a,EAAAG,QAAA,KACAtrD,EAAAqrD,QAAAF,GACA/jD,EAAApH,OASAk8C,EAAAn6C,UAAAspD,QAAA,SAAAF,GAEA,GADAlrD,KAAAmrD,WAAAD,EACA,mBAAAA,GAAAK,WACAvrD,KAAAwrD,2BAEA,CAAA,IAAAN,EAAA7tB,GAIA,KAAA,IAAAz8B,OAAA,mEAHAZ,MAAAyrD,wBAKAzrD,KAAAiY,KAAA,SAMAgkC,EAAAn6C,UAAA0pD,qBAAA,WACAxrD,KAAAmrD,WAAAO,UAAA,SAAAzjD,GACA,GAAA0jD,GAAA13C,KAAA6wB,MAAA78B,EAAAgvB,KACAj3B,MAAA4rD,UAAAD,IACAtlD,KAAArG,MAEAA,KAAAmrD,WAAA3a,QAAA,SAAA7gC,GACA3P,KAAAiY,KAAA,QAAAtI,IACAtJ,KAAArG,MAEAA,KAAAmrD,WAAAE,QAAA,WACArrD,KAAA6rD,UACAxlD,KAAArG,OAMAi8C,EAAAn6C,UAAA2pD,sBAAA;AACAzrD,KAAAmrD,WAAA9tB,GAAA,UAAA,SAAAp1B,GACA,GAAA0jD,GAAA13C,KAAA6wB,MAAA78B,EACAjI,MAAA4rD,UAAAD,IACAtlD,KAAArG,OAEAA,KAAAmrD,WAAA9tB,GAAA,QAAA,SAAA1tB,GACA3P,KAAAiY,KAAA,QAAAtI,IACAtJ,KAAArG,OAEAA,KAAAmrD,WAAA9tB,GAAA,QAAA,WACAr9B,KAAA6rD,UACAxlD,KAAArG,QAMAi8C,EAAAn6C,UAAAg7C,SAAA,WACA,MAAA98C,MAAAmrD,YAAAnrD,KAAAmrD,WAAAW,OAAA9rD,KAAAmrD,WAAAI,YAMAtP,EAAAn6C,UAAA07C,SAAA,WACA,OAAAx9C,KAAAmrD,YAAAnrD,KAAAmrD,WAAAY,SAAA/rD,KAAAmrD,WAAAI,YAAAvrD,KAAAmrD,WAAAa,UAAAhsD,KAAAmrD,WAAAI,YAMAtP,EAAAn6C,UAAAwwC,MAAA,WACA,MAAAtyC,MAAAw9C,WACAr8C,EAAAgG,UAEA,GAAAhG,GAAA,SAAAgG,GACAnH,KAAA6rD,SACA1kD,KACAd,KAAArG,QAGAi8C,EAAAn6C,UAAA+pD,OAAA,WACA7rD,KAAAw9C,aACAx9C,KAAAmrD,WAAAc,UACAjsD,KAAAmrD,WAAAc,YAEAjsD,KAAAmrD,WAAA7Y,SAGAtyC,KAAAiY,KAAA,UAOAgkC,EAAAn6C,UAAA4uC,KAAA,SAAAzoC,GACA,MAAAjI,MAAA88C,WACA98C,KAAAksD,MAAAjkD,GAEAjI,KAAAmrD,YAAAnrD,KAAAmrD,WAAAgB,aAAAnsD,KAAAmrD,WAAAI,WAIApqD,EAAAyN,OAAA,GAAAhO,OAAA,gDAHAZ,KAAAojB,OAAAnb,IAUAg0C,EAAAn6C,UAAA8pD,UAAA,SAAA3jD,GACA,IACAjI,KAAAiY,KAAA,UAAAhQ,GACA,MAAA0H,GACA3P,KAAAiY,KAAA,QAAAtI,KASAssC,EAAAn6C,UAAAshB,OAAA,SAAAnb,GACA,GAAAlI,GAAAC,IACA,OAAA,IAAAmB,GAAA,SAAAgG,GACApH,EAAAi9B,KAAA,OAAA,WACAj9B,EAAAmsD,MAAAjkD,GAAA4X,KAAA,WACA1Y,WAWA80C,EAAAn6C,UAAAoqD,MAAA,SAAAjkD,GACA,MAAA,IAAA9G,GAAA,SAAAgG,GACAnH,KAAAmrD,WAAAza,KAAAz8B,KAAAC,UAAAjM,IACAd,KACAd,KAAArG,QAGAP,EAAAD,QAAAy8C,IxCq/WGoC,kBAAkB,GAAGC,YAAY,GAAGh3C,SAAW,EAAE8kD,UAAY,UAAU,KAAK","file":"janus.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Janus = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (process,global){\n/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2015 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.4.7\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n    if (self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n}\n\nfunction Promise(executor) {\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    if (executor !== INTERNAL) {\n        check(this, executor);\n        this._resolveFromExecutor(executor);\n    }\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"expecting an object but got \" +\n                    \"A catch statement predicate \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.4.7\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n                toggleScheduled = true;\n                div2.classList.toggle(\"foo\");\n            };\n\n            return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":3}],2:[function(require,module,exports){\n/*!\r\n * EventEmitter2\r\n * https://github.com/hij1nx/EventEmitter2\r\n *\r\n * Copyright (c) 2013 hij1nx\r\n * Licensed under the MIT license.\r\n */\r\n;!function(undefined) {\r\n\r\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n  };\r\n  var defaultMaxListeners = 10;\r\n\r\n  function init() {\r\n    this._events = {};\r\n    if (this._conf) {\r\n      configure.call(this, this._conf);\r\n    }\r\n  }\r\n\r\n  function configure(conf) {\r\n    if (conf) {\r\n      this._conf = conf;\r\n\r\n      conf.delimiter && (this.delimiter = conf.delimiter);\r\n      this._events.maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\r\n      conf.wildcard && (this.wildcard = conf.wildcard);\r\n      conf.newListener && (this.newListener = conf.newListener);\r\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\r\n\r\n      if (this.wildcard) {\r\n        this.listenerTree = {};\r\n      }\r\n    } else {\r\n      this._events.maxListeners = defaultMaxListeners;\r\n    }\r\n  }\r\n\r\n  function logPossibleMemoryLeak(count, eventName) {\r\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\r\n        'leak detected. %d listeners added. ' +\r\n        'Use emitter.setMaxListeners() to increase limit.';\r\n\r\n    if(this.verboseMemoryLeak){\r\n      errorMsg += ' Event name: %s.';\r\n      console.error(errorMsg, count, eventName);\r\n    } else {\r\n      console.error(errorMsg, count);\r\n    }\r\n\r\n    if (console.trace){\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  function EventEmitter(conf) {\r\n    this._events = {};\r\n    this.newListener = false;\r\n    this.verboseMemoryLeak = false;\r\n    configure.call(this, conf);\r\n  }\r\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\r\n\r\n  //\r\n  // Attention, function return type now is array, always !\r\n  // It has zero elements if no any matches found and one or more\r\n  // elements (leafs) if there are matches\r\n  //\r\n  function searchListenerTree(handlers, type, tree, i) {\r\n    if (!tree) {\r\n      return [];\r\n    }\r\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\r\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\r\n    if (i === typeLength && tree._listeners) {\r\n      //\r\n      // If at the end of the event(s) list and the tree has listeners\r\n      // invoke those listeners.\r\n      //\r\n      if (typeof tree._listeners === 'function') {\r\n        handlers && handlers.push(tree._listeners);\r\n        return [tree];\r\n      } else {\r\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\r\n          handlers && handlers.push(tree._listeners[leaf]);\r\n        }\r\n        return [tree];\r\n      }\r\n    }\r\n\r\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\r\n      //\r\n      // If the event emitted is '*' at this part\r\n      // or there is a concrete match at this patch\r\n      //\r\n      if (currentType === '*') {\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\r\n          }\r\n        }\r\n        return listeners;\r\n      } else if(currentType === '**') {\r\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\r\n        if(endReached && tree._listeners) {\r\n          // The next element has a _listeners, add it to the handlers.\r\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\r\n        }\r\n\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            if(branch === '*' || branch === '**') {\r\n              if(tree[branch]._listeners && !endReached) {\r\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\r\n              }\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            } else if(branch === nextType) {\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\r\n            } else {\r\n              // No match on this one, shift into the tree but not in the type array.\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            }\r\n          }\r\n        }\r\n        return listeners;\r\n      }\r\n\r\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\r\n    }\r\n\r\n    xTree = tree['*'];\r\n    if (xTree) {\r\n      //\r\n      // If the listener tree will allow any match for this part,\r\n      // then recursively explore all branches of the tree\r\n      //\r\n      searchListenerTree(handlers, type, xTree, i+1);\r\n    }\r\n\r\n    xxTree = tree['**'];\r\n    if(xxTree) {\r\n      if(i < typeLength) {\r\n        if(xxTree._listeners) {\r\n          // If we have a listener on a '**', it will catch all, so add its handler.\r\n          searchListenerTree(handlers, type, xxTree, typeLength);\r\n        }\r\n\r\n        // Build arrays of matching next branches and others.\r\n        for(branch in xxTree) {\r\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\r\n            if(branch === nextType) {\r\n              // We know the next element will match, so jump twice.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\r\n            } else if(branch === currentType) {\r\n              // Current node matches, move into the tree.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\r\n            } else {\r\n              isolatedBranch = {};\r\n              isolatedBranch[branch] = xxTree[branch];\r\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\r\n            }\r\n          }\r\n        }\r\n      } else if(xxTree._listeners) {\r\n        // We have reached the end and still on a '**'\r\n        searchListenerTree(handlers, type, xxTree, typeLength);\r\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\r\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\r\n      }\r\n    }\r\n\r\n    return listeners;\r\n  }\r\n\r\n  function growListenerTree(type, listener) {\r\n\r\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n\r\n    //\r\n    // Looks for two consecutive '**', if so, don't add the event at all.\r\n    //\r\n    for(var i = 0, len = type.length; i+1 < len; i++) {\r\n      if(type[i] === '**' && type[i+1] === '**') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var tree = this.listenerTree;\r\n    var name = type.shift();\r\n\r\n    while (name !== undefined) {\r\n\r\n      if (!tree[name]) {\r\n        tree[name] = {};\r\n      }\r\n\r\n      tree = tree[name];\r\n\r\n      if (type.length === 0) {\r\n\r\n        if (!tree._listeners) {\r\n          tree._listeners = listener;\r\n        }\r\n        else {\r\n          if (typeof tree._listeners === 'function') {\r\n            tree._listeners = [tree._listeners];\r\n          }\r\n\r\n          tree._listeners.push(listener);\r\n\r\n          if (\r\n            !tree._listeners.warned &&\r\n            this._events.maxListeners > 0 &&\r\n            tree._listeners.length > this._events.maxListeners\r\n          ) {\r\n            tree._listeners.warned = true;\r\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      name = type.shift();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // By default EventEmitters will print a warning if more than\r\n  // 10 listeners are added to it. This is a useful default which\r\n  // helps finding memory leaks.\r\n  //\r\n  // Obviously not all Emitters should be limited to 10. This function allows\r\n  // that to be increased. Set to zero for unlimited.\r\n\r\n  EventEmitter.prototype.delimiter = '.';\r\n\r\n  EventEmitter.prototype.setMaxListeners = function(n) {\r\n    if (n !== undefined) {\r\n      this._events || init.call(this);\r\n      this._events.maxListeners = n;\r\n      if (!this._conf) this._conf = {};\r\n      this._conf.maxListeners = n;\r\n    }\r\n  };\r\n\r\n  EventEmitter.prototype.event = '';\r\n\r\n  EventEmitter.prototype.once = function(event, fn) {\r\n    this.many(event, 1, fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.many = function(event, ttl, fn) {\r\n    var self = this;\r\n\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('many only accepts instances of Function');\r\n    }\r\n\r\n    function listener() {\r\n      if (--ttl === 0) {\r\n        self.off(event, listener);\r\n      }\r\n      fn.apply(this, arguments);\r\n    }\r\n\r\n    listener._origin = fn;\r\n\r\n    this.on(event, listener);\r\n\r\n    return self;\r\n  };\r\n\r\n  EventEmitter.prototype.emit = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n      if (!this._events.newListener) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all && this._all.length) {\r\n      handler = this._all.slice();\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 0; j < al; j++) args[j] = arguments[j];\r\n      }\r\n\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this, type);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, type, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, type, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n      if (typeof handler === 'function') {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler.call(this);\r\n          break;\r\n        case 2:\r\n          handler.call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler.call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          args = new Array(al - 1);\r\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n          handler.apply(this, args);\r\n        }\r\n        return true;\r\n      } else if (handler) {\r\n        // need to make copy of handlers because list can change in the middle\r\n        // of emit call\r\n        handler = handler.slice();\r\n      }\r\n    }\r\n\r\n    if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n      return true;\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return !!this._all;\r\n  };\r\n\r\n  EventEmitter.prototype.emitAsync = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n        if (!this._events.newListener) { return Promise.resolve([false]); }\r\n    }\r\n\r\n    var promises= [];\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all) {\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 1; j < al; j++) args[j] = arguments[j];\r\n      }\r\n      for (i = 0, l = this._all.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(this._all[i].call(this, type));\r\n          break;\r\n        case 2:\r\n          promises.push(this._all[i].call(this, type, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(this._all[i].apply(this, args));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n    }\r\n\r\n    if (typeof handler === 'function') {\r\n      this.event = type;\r\n      switch (al) {\r\n      case 1:\r\n        promises.push(handler.call(this));\r\n        break;\r\n      case 2:\r\n        promises.push(handler.call(this, arguments[1]));\r\n        break;\r\n      case 3:\r\n        promises.push(handler.call(this, arguments[1], arguments[2]));\r\n        break;\r\n      default:\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n        promises.push(handler.apply(this, args));\r\n      }\r\n    } else if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(handler[i].call(this));\r\n          break;\r\n        case 2:\r\n          promises.push(handler[i].call(this, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(handler[i].apply(this, args));\r\n        }\r\n      }\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\r\n      } else {\r\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  };\r\n\r\n  EventEmitter.prototype.on = function(type, listener) {\r\n    if (typeof type === 'function') {\r\n      this.onAny(type);\r\n      return this;\r\n    }\r\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('on only accepts instances of Function');\r\n    }\r\n    this._events || init.call(this);\r\n\r\n    // To avoid recursion in the case that type == \"newListeners\"! Before\r\n    // adding it to the listeners, first emit \"newListeners\".\r\n    this.emit('newListener', type, listener);\r\n\r\n    if (this.wildcard) {\r\n      growListenerTree.call(this, type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (!this._events[type]) {\r\n      // Optimize the case of one listener. Don't need the extra array object.\r\n      this._events[type] = listener;\r\n    }\r\n    else {\r\n      if (typeof this._events[type] === 'function') {\r\n        // Change to array.\r\n        this._events[type] = [this._events[type]];\r\n      }\r\n\r\n      // If we've already got an array, just append.\r\n      this._events[type].push(listener);\r\n\r\n      // Check for listener leak\r\n      if (\r\n        !this._events[type].warned &&\r\n        this._events.maxListeners > 0 &&\r\n        this._events[type].length > this._events.maxListeners\r\n      ) {\r\n        this._events[type].warned = true;\r\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.onAny = function(fn) {\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('onAny only accepts instances of Function');\r\n    }\r\n\r\n    if (!this._all) {\r\n      this._all = [];\r\n    }\r\n\r\n    // Add the function to the event listener collection.\r\n    this._all.push(fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  EventEmitter.prototype.off = function(type, listener) {\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('removeListener only takes instances of Function');\r\n    }\r\n\r\n    var handlers,leafs=[];\r\n\r\n    if(this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n    }\r\n    else {\r\n      // does not use listeners(), so no side effect of creating _events[type]\r\n      if (!this._events[type]) return this;\r\n      handlers = this._events[type];\r\n      leafs.push({_listeners:handlers});\r\n    }\r\n\r\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n      var leaf = leafs[iLeaf];\r\n      handlers = leaf._listeners;\r\n      if (isArray(handlers)) {\r\n\r\n        var position = -1;\r\n\r\n        for (var i = 0, length = handlers.length; i < length; i++) {\r\n          if (handlers[i] === listener ||\r\n            (handlers[i].listener && handlers[i].listener === listener) ||\r\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0) {\r\n          continue;\r\n        }\r\n\r\n        if(this.wildcard) {\r\n          leaf._listeners.splice(position, 1);\r\n        }\r\n        else {\r\n          this._events[type].splice(position, 1);\r\n        }\r\n\r\n        if (handlers.length === 0) {\r\n          if(this.wildcard) {\r\n            delete leaf._listeners;\r\n          }\r\n          else {\r\n            delete this._events[type];\r\n          }\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n\r\n        return this;\r\n      }\r\n      else if (handlers === listener ||\r\n        (handlers.listener && handlers.listener === listener) ||\r\n        (handlers._origin && handlers._origin === listener)) {\r\n        if(this.wildcard) {\r\n          delete leaf._listeners;\r\n        }\r\n        else {\r\n          delete this._events[type];\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n      }\r\n    }\r\n\r\n    function recursivelyGarbageCollect(root) {\r\n      if (root === undefined) {\r\n        return;\r\n      }\r\n      var keys = Object.keys(root);\r\n      for (var i in keys) {\r\n        var key = keys[i];\r\n        var obj = root[key];\r\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\r\n          continue;\r\n        if (Object.keys(obj).length > 0) {\r\n          recursivelyGarbageCollect(root[key]);\r\n        }\r\n        if (Object.keys(obj).length === 0) {\r\n          delete root[key];\r\n        }\r\n      }\r\n    }\r\n    recursivelyGarbageCollect(this.listenerTree);\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.offAny = function(fn) {\r\n    var i = 0, l = 0, fns;\r\n    if (fn && this._all && this._all.length > 0) {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++) {\r\n        if(fn === fns[i]) {\r\n          fns.splice(i, 1);\r\n          this.emit(\"removeListenerAny\", fn);\r\n          return this;\r\n        }\r\n      }\r\n    } else {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++)\r\n        this.emit(\"removeListenerAny\", fns[i]);\r\n      this._all = [];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\r\n\r\n  EventEmitter.prototype.removeAllListeners = function(type) {\r\n    if (arguments.length === 0) {\r\n      !this._events || init.call(this);\r\n      return this;\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n\r\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n        var leaf = leafs[iLeaf];\r\n        leaf._listeners = null;\r\n      }\r\n    }\r\n    else if (this._events) {\r\n      this._events[type] = null;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.listeners = function(type) {\r\n    if (this.wildcard) {\r\n      var handlers = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\r\n      return handlers;\r\n    }\r\n\r\n    this._events || init.call(this);\r\n\r\n    if (!this._events[type]) this._events[type] = [];\r\n    if (!isArray(this._events[type])) {\r\n      this._events[type] = [this._events[type]];\r\n    }\r\n    return this._events[type];\r\n  };\r\n\r\n  EventEmitter.prototype.listenerCount = function(type) {\r\n    return this.listeners(type).length;\r\n  };\r\n\r\n  EventEmitter.prototype.listenersAny = function() {\r\n\r\n    if(this._all) {\r\n      return this._all;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n     // AMD. Register as an anonymous module.\r\n    define(function() {\r\n      return EventEmitter;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    module.exports = EventEmitter;\r\n  }\r\n  else {\r\n    // Browser global.\r\n    window.EventEmitter2 = EventEmitter;\r\n  }\r\n}();\r\n\n},{}],3:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],4:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\n(function() {\n  // Utils.\n  var logging = require('./utils').log;\n  var browserDetails = require('./utils').browserDetails;\n  // Export to the adapter global object visible in the browser.\n  module.exports.browserDetails = browserDetails;\n  module.exports.extractVersion = require('./utils').extractVersion;\n  module.exports.disableLog = require('./utils').disableLog;\n\n  // Comment out the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  require('./utils').disableLog(true);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'opera': // fallthrough as it uses chrome shims\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection) {\n        logging('Chrome shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia();\n      chromeShim.shimSourceObject();\n      chromeShim.shimPeerConnection();\n      chromeShim.shimOnTrack();\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n        logging('Firefox shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia();\n      firefoxShim.shimSourceObject();\n      firefoxShim.shimPeerConnection();\n      firefoxShim.shimOnTrack();\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection) {\n        logging('MS edge shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = edgeShim;\n\n      edgeShim.shimPeerConnection();\n      break;\n    case 'safari':\n      if (!safariShim) {\n        logging('Safari shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = safariShim;\n\n      safariShim.shimGetUserMedia();\n      break;\n    default:\n      logging('Unsupported browser!');\n  }\n})();\n\n},{\"./chrome/chrome_shim\":5,\"./edge/edge_shim\":8,\"./firefox/firefox_shim\":9,\"./safari/safari_shim\":11,\"./utils\":12}],5:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\nvar chromeShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          var self = this;\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = {track: te.track};\n              event.streams = [e.stream];\n              self.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      // Translate iceTransportPolicy to iceTransports,\n      // see https://code.google.com/p/webrtc/issues/detail?id=4869\n      logging('PeerConnection');\n      if (pcConfig && pcConfig.iceTransportPolicy) {\n        pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n      }\n\n      var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints);\n      var origGetStats = pc.getStats.bind(pc);\n      pc.getStats = function(selector, successCallback, errorCallback) {\n        var self = this;\n        var args = arguments;\n\n        // If selector is a function then we are in the old style stats so just\n        // pass back the original getStats format to avoid breaking old users.\n        if (arguments.length > 0 && typeof selector === 'function') {\n          return origGetStats(selector, successCallback);\n        }\n\n        var fixChromeStats_ = function(response) {\n          var standardReport = {};\n          var reports = response.result();\n          reports.forEach(function(report) {\n            var standardStats = {\n              id: report.id,\n              timestamp: report.timestamp,\n              type: report.type\n            };\n            report.names().forEach(function(name) {\n              standardStats[name] = report.stat(name);\n            });\n            standardReport[standardStats.id] = standardStats;\n          });\n\n          return standardReport;\n        };\n\n        if (arguments.length >= 2) {\n          var successCallbackWrapper_ = function(response) {\n            args[1](fixChromeStats_(response));\n          };\n\n          return origGetStats.apply(this, [successCallbackWrapper_,\n              arguments[0]]);\n        }\n\n        // promise-support\n        return new Promise(function(resolve, reject) {\n          if (args.length === 1 && typeof selector === 'object') {\n            origGetStats.apply(self,\n                [function(response) {\n                  resolve.apply(null, [fixChromeStats_(response)]);\n                }, reject]);\n          } else {\n            origGetStats.apply(self, [resolve, reject]);\n          }\n        });\n      };\n\n      return pc;\n    };\n    window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n\n    // wrap static methods. Currently just generateCertificate.\n    if (webkitRTCPeerConnection.generateCertificate) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return webkitRTCPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    // add promise support\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = webkitRTCPeerConnection.prototype[method];\n      webkitRTCPeerConnection.prototype[method] = function() {\n        var self = this;\n        if (arguments.length < 1 || (arguments.length === 1 &&\n            typeof(arguments[0]) === 'object')) {\n          var opts = arguments.length === 1 ? arguments[0] : undefined;\n          return new Promise(function(resolve, reject) {\n            nativeMethod.apply(self, [resolve, reject, opts]);\n          });\n        }\n        return nativeMethod.apply(this, arguments);\n      };\n    });\n\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = webkitRTCPeerConnection.prototype[method];\n          webkitRTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            var self = this;\n            args[0] = new ((method === 'addIceCandidate')?\n                RTCIceCandidate : RTCSessionDescription)(args[0]);\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [args[0],\n                  function() {\n                    resolve();\n                    if (args.length >= 2) {\n                      args[1].apply(null, []);\n                    }\n                  },\n                  function(err) {\n                    reject(err);\n                    if (args.length >= 3) {\n                      args[2].apply(null, [err]);\n                    }\n                  }]\n                );\n            });\n          };\n        });\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    if (browserDetails.version >= 43) {\n      element.srcObject = stream;\n    } else if (typeof element.src !== 'undefined') {\n      element.src = URL.createObjectURL(stream);\n    } else {\n      logging('Error attaching stream to element.');\n    }\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    if (browserDetails.version >= 43) {\n      to.srcObject = from.srcObject;\n    } else {\n      to.src = from.src;\n    }\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia'),\n  attachMediaStream: chromeShim.attachMediaStream,\n  reattachMediaStream: chromeShim.reattachMediaStream\n};\n\n},{\"../utils.js\":12,\"./getusermedia\":6}],6:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\n\n// Expose public methods.\nmodule.exports = function() {\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints.audio) {\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints.video) {\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return navigator.webkitGetUserMedia(constraints, onSuccess, onError);\n  };\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                      kind: kinds[device.kind],\n                      deviceId: device.id,\n                      groupId: ''};\n            }));\n          });\n        });\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (c) {\n        logging('spec:   ' + JSON.stringify(c)); // whitespace for alignment\n        c.audio = constraintsToChrome_(c.audio);\n        c.video = constraintsToChrome_(c.video);\n        logging('chrome: ' + JSON.stringify(c));\n      }\n      return origGetUserMedia(c);\n    }.bind(this);\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n},{\"../utils.js\":12}],7:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      default: // Unknown extensions are silently ignored.\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n       ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type + ' ' + fb.parameter +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var fpLine = lines.filter(function(line) {\n    return line.indexOf('a=fingerprint:') === 0;\n  })[0].substr(14);\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  var dtlsParameters = {\n    role: 'auto',\n    fingerprints: [{\n      algorithm: fpLine.split(' ')[0],\n      value: fpLine.split(' ')[1]\n    }]\n  };\n  return dtlsParameters;\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  // FIXME: add headerExtensions, fecMechanism and rtcp.\n  sdp += 'a=rtcp-mux\\r\\n';\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(5), 10);\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\nSDPUtils.writeSessionBoilerplate = function() {\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  // FIXME: for RTX there might be multiple SSRCs. Not implemented in Edge yet.\n  if (transceiver.rtpSender) {\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\n// Expose public methods.\nmodule.exports = SDPUtils;\n\n},{}],8:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('./edge_sdp');\nvar logging = require('../utils').log;\n\nvar edgeShim = {\n  shimPeerConnection: function() {\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n    }\n\n    window.RTCPeerConnection = function(config) {\n      var self = this;\n\n      var _eventTarget = document.createDocumentFragment();\n      ['addEventListener', 'removeEventListener', 'dispatchEvent']\n          .forEach(function(method) {\n            self[method] = _eventTarget[method].bind(_eventTarget);\n          });\n\n      this.onicecandidate = null;\n      this.onaddstream = null;\n      this.ontrack = null;\n      this.onremovestream = null;\n      this.onsignalingstatechange = null;\n      this.oniceconnectionstatechange = null;\n      this.onnegotiationneeded = null;\n      this.ondatachannel = null;\n\n      this.localStreams = [];\n      this.remoteStreams = [];\n      this.getLocalStreams = function() {\n        return self.localStreams;\n      };\n      this.getRemoteStreams = function() {\n        return self.remoteStreams;\n      };\n\n      this.localDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.remoteDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.signalingState = 'stable';\n      this.iceConnectionState = 'new';\n      this.iceGatheringState = 'new';\n\n      this.iceOptions = {\n        gatherPolicy: 'all',\n        iceServers: []\n      };\n      if (config && config.iceTransportPolicy) {\n        switch (config.iceTransportPolicy) {\n          case 'all':\n          case 'relay':\n            this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n            break;\n          case 'none':\n            // FIXME: remove once implementation and spec have added this.\n            throw new TypeError('iceTransportPolicy \"none\" not supported');\n          default:\n            // don't set iceTransportPolicy.\n            break;\n        }\n      }\n      if (config && config.iceServers) {\n        // Edge does not like\n        // 1) stun:\n        // 2) turn: that does not have all of turn:host:port?transport=udp\n        this.iceOptions.iceServers = config.iceServers.filter(function(server) {\n          if (server && server.urls) {\n            server.urls = server.urls.filter(function(url) {\n              return url.indexOf('turn:') === 0 &&\n                  url.indexOf('transport=udp') !== -1;\n            })[0];\n            return !!server.urls;\n          }\n          return false;\n        });\n      }\n\n      // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n      // everything that is needed to describe a SDP m-line.\n      this.transceivers = [];\n\n      // since the iceGatherer is currently created in createOffer but we\n      // must not emit candidates until after setLocalDescription we buffer\n      // them in this array.\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n      var self = this;\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      // FIXME: need to apply ice candidates in a way which is async but\n      // in-order\n      this._localIceCandidatesBuffer.forEach(function(event) {\n        var end = !event.candidate || Object.keys(event.candidate).length === 0;\n        if (end) {\n          for (var j = 1; j < sections.length; j++) {\n            if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n              sections[j] += 'a=end-of-candidates\\r\\n';\n            }\n          }\n        } else if (event.candidate.candidate.indexOf('typ endOfCandidates')\n            === -1) {\n          sections[event.candidate.sdpMLineIndex + 1] +=\n              'a=' + event.candidate.candidate + '\\r\\n';\n        }\n        self.localDescription.sdp = sections.join('');\n        self.dispatchEvent(event);\n        if (self.onicecandidate !== null) {\n          self.onicecandidate(event);\n        }\n        if (!event.candidate && self.iceGatheringState !== 'complete') {\n          var complete = self.transceivers.every(function(transceiver) {\n            return transceiver.iceGatherer &&\n                transceiver.iceGatherer.state === 'completed';\n          });\n          if (complete) {\n            self.iceGatheringState = 'complete';\n          }\n        }\n      });\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      this.localStreams.push(stream.clone());\n      this._maybeFireNegotiationNeeded();\n    };\n\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var idx = this.localStreams.indexOf(stream);\n      if (idx > -1) {\n        this.localStreams.splice(idx, 1);\n        this._maybeFireNegotiationNeeded();\n      }\n    };\n\n    // Determines the intersection of local and remote capabilities.\n    window.RTCPeerConnection.prototype._getCommonCapabilities =\n        function(localCapabilities, remoteCapabilities) {\n          var commonCapabilities = {\n            codecs: [],\n            headerExtensions: [],\n            fecMechanisms: []\n          };\n          localCapabilities.codecs.forEach(function(lCodec) {\n            for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n              var rCodec = remoteCapabilities.codecs[i];\n              if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                  lCodec.clockRate === rCodec.clockRate &&\n                  lCodec.numChannels === rCodec.numChannels) {\n                // push rCodec so we reply with offerer payload type\n                commonCapabilities.codecs.push(rCodec);\n\n                // FIXME: also need to determine intersection between\n                // .rtcpFeedback and .parameters\n                break;\n              }\n            }\n          });\n\n          localCapabilities.headerExtensions\n              .forEach(function(lHeaderExtension) {\n                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                     i++) {\n                  var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                  if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                    commonCapabilities.headerExtensions.push(rHeaderExtension);\n                    break;\n                  }\n                }\n              });\n\n          // FIXME: fecMechanisms\n          return commonCapabilities;\n        };\n\n    // Create ICE gatherer, ICE transport and DTLS transport.\n    window.RTCPeerConnection.prototype._createIceAndDtlsTransports =\n        function(mid, sdpMLineIndex) {\n          var self = this;\n          var iceGatherer = new RTCIceGatherer(self.iceOptions);\n          var iceTransport = new RTCIceTransport(iceGatherer);\n          iceGatherer.onlocalcandidate = function(evt) {\n            var event = new Event('icecandidate');\n            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n            var cand = evt.candidate;\n            var end = !cand || Object.keys(cand).length === 0;\n            // Edge emits an empty object for RTCIceCandidateComplete\n            if (end) {\n              // polyfill since RTCIceGatherer.state is not implemented in\n              // Edge 10547 yet.\n              if (iceGatherer.state === undefined) {\n                iceGatherer.state = 'completed';\n              }\n\n              // Emit a candidate with type endOfCandidates to make the samples\n              // work. Edge requires addIceCandidate with this empty candidate\n              // to start checking. The real solution is to signal\n              // end-of-candidates to the other side when getting the null\n              // candidate but some apps (like the samples) don't do that.\n              event.candidate.candidate =\n                  'candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates';\n            } else {\n              // RTCIceCandidate doesn't have a component, needs to be added\n              cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n              event.candidate.candidate = SDPUtils.writeCandidate(cand);\n            }\n\n            var complete = self.transceivers.every(function(transceiver) {\n              return transceiver.iceGatherer &&\n                  transceiver.iceGatherer.state === 'completed';\n            });\n\n            // Emit candidate if localDescription is set.\n            // Also emits null candidate when all gatherers are complete.\n            switch (self.iceGatheringState) {\n              case 'new':\n                self._localIceCandidatesBuffer.push(event);\n                if (end && complete) {\n                  self._localIceCandidatesBuffer.push(\n                      new Event('icecandidate'));\n                }\n                break;\n              case 'gathering':\n                self._emitBufferedCandidates();\n                self.dispatchEvent(event);\n                if (self.onicecandidate !== null) {\n                  self.onicecandidate(event);\n                }\n                if (complete) {\n                  self.dispatchEvent(new Event('icecandidate'));\n                  if (self.onicecandidate !== null) {\n                    self.onicecandidate(new Event('icecandidate'));\n                  }\n                  self.iceGatheringState = 'complete';\n                }\n                break;\n              case 'complete':\n                // should not happen... currently!\n                break;\n              default: // no-op.\n                break;\n            }\n          };\n          iceTransport.onicestatechange = function() {\n            self._updateConnectionState();\n          };\n\n          var dtlsTransport = new RTCDtlsTransport(iceTransport);\n          dtlsTransport.ondtlsstatechange = function() {\n            self._updateConnectionState();\n          };\n          dtlsTransport.onerror = function() {\n            // onerror does not set state to failed by itself.\n            dtlsTransport.state = 'failed';\n            self._updateConnectionState();\n          };\n\n          return {\n            iceGatherer: iceGatherer,\n            iceTransport: iceTransport,\n            dtlsTransport: dtlsTransport\n          };\n        };\n\n    // Start the RTP Sender and Receiver for a transceiver.\n    window.RTCPeerConnection.prototype._transceive = function(transceiver,\n        send, recv) {\n      var params = this._getCommonCapabilities(transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n      if (send && transceiver.rtpSender) {\n        params.encodings = transceiver.sendEncodingParameters;\n        params.rtcp = {\n          cname: SDPUtils.localCName\n        };\n        if (transceiver.recvEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpSender.send(params);\n      }\n      if (recv && transceiver.rtpReceiver) {\n        params.encodings = transceiver.recvEncodingParameters;\n        params.rtcp = {\n          cname: transceiver.cname\n        };\n        if (transceiver.sendEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpReceiver.receive(params);\n      }\n    };\n\n    window.RTCPeerConnection.prototype.setLocalDescription =\n        function(description) {\n          var self = this;\n          var sections;\n          var sessionpart;\n          if (description.type === 'offer') {\n            // FIXME: What was the purpose of this empty if statement?\n            // if (!this._pendingOffer) {\n            // } else {\n            if (this._pendingOffer) {\n              // VERY limited support for SDP munging. Limited to:\n              // * changing the order of codecs\n              sections = SDPUtils.splitSections(description.sdp);\n              sessionpart = sections.shift();\n              sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var caps = SDPUtils.parseRtpParameters(mediaSection);\n                self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n              });\n              this.transceivers = this._pendingOffer;\n              delete this._pendingOffer;\n            }\n          } else if (description.type === 'answer') {\n            sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n            sessionpart = sections.shift();\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n              var transceiver = self.transceivers[sdpMLineIndex];\n              var iceGatherer = transceiver.iceGatherer;\n              var iceTransport = transceiver.iceTransport;\n              var dtlsTransport = transceiver.dtlsTransport;\n              var localCapabilities = transceiver.localCapabilities;\n              var remoteCapabilities = transceiver.remoteCapabilities;\n              var rejected = mediaSection.split('\\n', 1)[0]\n                  .split(' ', 2)[1] === '0';\n\n              if (!rejected) {\n                var remoteIceParameters = SDPUtils.getIceParameters(\n                    mediaSection, sessionpart);\n                iceTransport.start(iceGatherer, remoteIceParameters,\n                    'controlled');\n\n                var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                    mediaSection, sessionpart);\n                dtlsTransport.start(remoteDtlsParameters);\n\n                // Calculate intersection of capabilities.\n                var params = self._getCommonCapabilities(localCapabilities,\n                    remoteCapabilities);\n\n                // Start the RTCRtpSender. The RTCRtpReceiver for this\n                // transceiver has already been started in setRemoteDescription.\n                self._transceive(transceiver,\n                    params.codecs.length > 0,\n                    false);\n              }\n            });\n          }\n\n          this.localDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-local-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n\n          // If a success callback was provided, emit ICE candidates after it\n          // has been executed. Otherwise, emit callback after the Promise is\n          // resolved.\n          var hasCallback = arguments.length > 1 &&\n            typeof arguments[1] === 'function';\n          if (hasCallback) {\n            var cb = arguments[1];\n            window.setTimeout(function() {\n              cb();\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              self._emitBufferedCandidates();\n            }, 0);\n          }\n          var p = Promise.resolve();\n          p.then(function() {\n            if (!hasCallback) {\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              // Usually candidates will be emitted earlier.\n              window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n            }\n          });\n          return p;\n        };\n\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n        function(description) {\n          var self = this;\n          var stream = new MediaStream();\n          var receiverList = [];\n          var sections = SDPUtils.splitSections(description.sdp);\n          var sessionpart = sections.shift();\n          sections.forEach(function(mediaSection, sdpMLineIndex) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].substr(2).split(' ');\n            var kind = mline[0];\n            var rejected = mline[1] === '0';\n            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\n            var transceiver;\n            var iceGatherer;\n            var iceTransport;\n            var dtlsTransport;\n            var rtpSender;\n            var rtpReceiver;\n            var sendEncodingParameters;\n            var recvEncodingParameters;\n            var localCapabilities;\n\n            var track;\n            // FIXME: ensure the mediaSection has rtcp-mux set.\n            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n            var remoteIceParameters;\n            var remoteDtlsParameters;\n            if (!rejected) {\n              remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                  sessionpart);\n              remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                  sessionpart);\n            }\n            recvEncodingParameters =\n                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:');\n            if (mid.length) {\n              mid = mid[0].substr(6);\n            } else {\n              mid = SDPUtils.generateIdentifier();\n            }\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                  return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                  return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n              cname = remoteSsrc.value;\n            }\n\n            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                'a=end-of-candidates').length > 0;\n            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                .map(function(cand) {\n                  return SDPUtils.parseCandidate(cand);\n                })\n                .filter(function(cand) {\n                  return cand.component === '1';\n                });\n            if (description.type === 'offer' && !rejected) {\n              var transports = self._createIceAndDtlsTransports(mid,\n                  sdpMLineIndex);\n              if (isComplete) {\n                transports.iceTransport.setRemoteCandidates(cands);\n              }\n\n              localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n              sendEncodingParameters = [{\n                ssrc: (2 * sdpMLineIndex + 2) * 1001\n              }];\n\n              rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n\n              track = rtpReceiver.track;\n              receiverList.push([track, rtpReceiver]);\n              // FIXME: not correct when there are multiple streams but that is\n              // not currently supported in this shim.\n              stream.addTrack(track);\n\n              // FIXME: look at direction.\n              if (self.localStreams.length > 0 &&\n                  self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n                // FIXME: actually more complicated, needs to match types etc\n                var localtrack = self.localStreams[0]\n                    .getTracks()[sdpMLineIndex];\n                rtpSender = new RTCRtpSender(localtrack,\n                    transports.dtlsTransport);\n              }\n\n              self.transceivers[sdpMLineIndex] = {\n                iceGatherer: transports.iceGatherer,\n                iceTransport: transports.iceTransport,\n                dtlsTransport: transports.dtlsTransport,\n                localCapabilities: localCapabilities,\n                remoteCapabilities: remoteCapabilities,\n                rtpSender: rtpSender,\n                rtpReceiver: rtpReceiver,\n                kind: kind,\n                mid: mid,\n                cname: cname,\n                sendEncodingParameters: sendEncodingParameters,\n                recvEncodingParameters: recvEncodingParameters\n              };\n              // Start the RTCRtpReceiver now. The RTPSender is started in\n              // setLocalDescription.\n              self._transceive(self.transceivers[sdpMLineIndex],\n                  false,\n                  direction === 'sendrecv' || direction === 'sendonly');\n            } else if (description.type === 'answer' && !rejected) {\n              transceiver = self.transceivers[sdpMLineIndex];\n              iceGatherer = transceiver.iceGatherer;\n              iceTransport = transceiver.iceTransport;\n              dtlsTransport = transceiver.dtlsTransport;\n              rtpSender = transceiver.rtpSender;\n              rtpReceiver = transceiver.rtpReceiver;\n              sendEncodingParameters = transceiver.sendEncodingParameters;\n              localCapabilities = transceiver.localCapabilities;\n\n              self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                  recvEncodingParameters;\n              self.transceivers[sdpMLineIndex].remoteCapabilities =\n                  remoteCapabilities;\n              self.transceivers[sdpMLineIndex].cname = cname;\n\n              if (isComplete) {\n                iceTransport.setRemoteCandidates(cands);\n              }\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  'controlling');\n              dtlsTransport.start(remoteDtlsParameters);\n\n              self._transceive(transceiver,\n                  direction === 'sendrecv' || direction === 'recvonly',\n                  direction === 'sendrecv' || direction === 'sendonly');\n\n              if (rtpReceiver &&\n                  (direction === 'sendrecv' || direction === 'sendonly')) {\n                track = rtpReceiver.track;\n                receiverList.push([track, rtpReceiver]);\n                stream.addTrack(track);\n              } else {\n                // FIXME: actually the receiver should be created later.\n                delete transceiver.rtpReceiver;\n              }\n            }\n          });\n\n          this.remoteDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-remote-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n          if (stream.getTracks().length) {\n            self.remoteStreams.push(stream);\n            window.setTimeout(function() {\n              var event = new Event('addstream');\n              event.stream = stream;\n              self.dispatchEvent(event);\n              if (self.onaddstream !== null) {\n                window.setTimeout(function() {\n                  self.onaddstream(event);\n                }, 0);\n              }\n\n              receiverList.forEach(function(item) {\n                var track = item[0];\n                var receiver = item[1];\n                var trackEvent = new Event('track');\n                trackEvent.track = track;\n                trackEvent.receiver = receiver;\n                trackEvent.streams = [stream];\n                self.dispatchEvent(event);\n                if (self.ontrack !== null) {\n                  window.setTimeout(function() {\n                    self.ontrack(trackEvent);\n                  }, 0);\n                }\n              });\n            }, 0);\n          }\n          if (arguments.length > 1 && typeof arguments[1] === 'function') {\n            window.setTimeout(arguments[1], 0);\n          }\n          return Promise.resolve();\n        };\n\n    window.RTCPeerConnection.prototype.close = function() {\n      this.transceivers.forEach(function(transceiver) {\n        /* not yet\n        if (transceiver.iceGatherer) {\n          transceiver.iceGatherer.close();\n        }\n        */\n        if (transceiver.iceTransport) {\n          transceiver.iceTransport.stop();\n        }\n        if (transceiver.dtlsTransport) {\n          transceiver.dtlsTransport.stop();\n        }\n        if (transceiver.rtpSender) {\n          transceiver.rtpSender.stop();\n        }\n        if (transceiver.rtpReceiver) {\n          transceiver.rtpReceiver.stop();\n        }\n      });\n      // FIXME: clean up tracks, local streams, remote streams, etc\n      this._updateSignalingState('closed');\n    };\n\n    // Update the signaling state.\n    window.RTCPeerConnection.prototype._updateSignalingState =\n        function(newState) {\n          this.signalingState = newState;\n          var event = new Event('signalingstatechange');\n          this.dispatchEvent(event);\n          if (this.onsignalingstatechange !== null) {\n            this.onsignalingstatechange(event);\n          }\n        };\n\n    // Determine whether to fire the negotiationneeded event.\n    window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded =\n        function() {\n          // Fire away (for now).\n          var event = new Event('negotiationneeded');\n          this.dispatchEvent(event);\n          if (this.onnegotiationneeded !== null) {\n            this.onnegotiationneeded(event);\n          }\n        };\n\n    // Update the connection state.\n    window.RTCPeerConnection.prototype._updateConnectionState = function() {\n      var self = this;\n      var newState;\n      var states = {\n        'new': 0,\n        closed: 0,\n        connecting: 0,\n        checking: 0,\n        connected: 0,\n        completed: 0,\n        failed: 0\n      };\n      this.transceivers.forEach(function(transceiver) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      });\n      // ICETransport.completed and connected are the same for this purpose.\n      states.connected += states.completed;\n\n      newState = 'new';\n      if (states.failed > 0) {\n        newState = 'failed';\n      } else if (states.connecting > 0 || states.checking > 0) {\n        newState = 'connecting';\n      } else if (states.disconnected > 0) {\n        newState = 'disconnected';\n      } else if (states.new > 0) {\n        newState = 'new';\n      } else if (states.connected > 0 || states.completed > 0) {\n        newState = 'connected';\n      }\n\n      if (newState !== self.iceConnectionState) {\n        self.iceConnectionState = newState;\n        var event = new Event('iceconnectionstatechange');\n        this.dispatchEvent(event);\n        if (this.oniceconnectionstatechange !== null) {\n          this.oniceconnectionstatechange(event);\n        }\n      }\n    };\n\n    window.RTCPeerConnection.prototype.createOffer = function() {\n      var self = this;\n      if (this._pendingOffer) {\n        throw new Error('createOffer called while there is a pending offer.');\n      }\n      var offerOptions;\n      if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n        offerOptions = arguments[0];\n      } else if (arguments.length === 3) {\n        offerOptions = arguments[2];\n      }\n\n      var tracks = [];\n      var numAudioTracks = 0;\n      var numVideoTracks = 0;\n      // Default to sendrecv.\n      if (this.localStreams.length) {\n        numAudioTracks = this.localStreams[0].getAudioTracks().length;\n        numVideoTracks = this.localStreams[0].getVideoTracks().length;\n      }\n      // Determine number of audio and video tracks we need to send/recv.\n      if (offerOptions) {\n        // Reject Chrome legacy constraints.\n        if (offerOptions.mandatory || offerOptions.optional) {\n          throw new TypeError(\n              'Legacy mandatory/optional constraints not supported.');\n        }\n        if (offerOptions.offerToReceiveAudio !== undefined) {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n        if (offerOptions.offerToReceiveVideo !== undefined) {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n      if (this.localStreams.length) {\n        // Push local streams.\n        this.localStreams[0].getTracks().forEach(function(track) {\n          tracks.push({\n            kind: track.kind,\n            track: track,\n            wantReceive: track.kind === 'audio' ?\n                numAudioTracks > 0 : numVideoTracks > 0\n          });\n          if (track.kind === 'audio') {\n            numAudioTracks--;\n          } else if (track.kind === 'video') {\n            numVideoTracks--;\n          }\n        });\n      }\n      // Create M-lines for recvonly streams.\n      while (numAudioTracks > 0 || numVideoTracks > 0) {\n        if (numAudioTracks > 0) {\n          tracks.push({\n            kind: 'audio',\n            wantReceive: true\n          });\n          numAudioTracks--;\n        }\n        if (numVideoTracks > 0) {\n          tracks.push({\n            kind: 'video',\n            wantReceive: true\n          });\n          numVideoTracks--;\n        }\n      }\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      var transceivers = [];\n      tracks.forEach(function(mline, sdpMLineIndex) {\n        // For each track, create an ice gatherer, ice transport,\n        // dtls transport, potentially rtpsender and rtpreceiver.\n        var track = mline.track;\n        var kind = mline.kind;\n        var mid = SDPUtils.generateIdentifier();\n\n        var transports = self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n        var localCapabilities = RTCRtpSender.getCapabilities(kind);\n        var rtpSender;\n        var rtpReceiver;\n\n        // generate an ssrc now, to be used later in rtpSender.send\n        var sendEncodingParameters = [{\n          ssrc: (2 * sdpMLineIndex + 1) * 1001\n        }];\n        if (track) {\n          rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n        }\n\n        if (mline.wantReceive) {\n          rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n        }\n\n        transceivers[sdpMLineIndex] = {\n          iceGatherer: transports.iceGatherer,\n          iceTransport: transports.iceTransport,\n          dtlsTransport: transports.dtlsTransport,\n          localCapabilities: localCapabilities,\n          remoteCapabilities: null,\n          rtpSender: rtpSender,\n          rtpReceiver: rtpReceiver,\n          kind: kind,\n          mid: mid,\n          sendEncodingParameters: sendEncodingParameters,\n          recvEncodingParameters: null\n        };\n        var transceiver = transceivers[sdpMLineIndex];\n        sdp += SDPUtils.writeMediaSection(transceiver,\n            transceiver.localCapabilities, 'offer', self.localStreams[0]);\n      });\n\n      this._pendingOffer = transceivers;\n      var desc = new RTCSessionDescription({\n        type: 'offer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.createAnswer = function() {\n      var self = this;\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      this.transceivers.forEach(function(transceiver) {\n        // Calculate intersection of capabilities.\n        var commonCapabilities = self._getCommonCapabilities(\n            transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n\n        sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n            'answer', self.localStreams[0]);\n      });\n\n      var desc = new RTCSessionDescription({\n        type: 'answer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n      var mLineIndex = candidate.sdpMLineIndex;\n      if (candidate.sdpMid) {\n        for (var i = 0; i < this.transceivers.length; i++) {\n          if (this.transceivers[i].mid === candidate.sdpMid) {\n            mLineIndex = i;\n            break;\n          }\n        }\n      }\n      var transceiver = this.transceivers[mLineIndex];\n      if (transceiver) {\n        var cand = Object.keys(candidate.candidate).length > 0 ?\n            SDPUtils.parseCandidate(candidate.candidate) : {};\n        // Ignore Chrome's invalid candidates since Edge does not like them.\n        if (cand.protocol === 'tcp' && cand.port === 0) {\n          return;\n        }\n        // Ignore RTCP candidates, we assume RTCP-MUX.\n        if (cand.component !== '1') {\n          return;\n        }\n        // A dirty hack to make samples work.\n        if (cand.type === 'endOfCandidates') {\n          cand = {};\n        }\n        transceiver.iceTransport.addRemoteCandidate(cand);\n\n        // update the remoteDescription.\n        var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n        sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n            : 'a=end-of-candidates') + '\\r\\n';\n        this.remoteDescription.sdp = sections.join('');\n      }\n      if (arguments.length > 1 && typeof arguments[1] === 'function') {\n        window.setTimeout(arguments[1], 0);\n      }\n      return Promise.resolve();\n    };\n\n    window.RTCPeerConnection.prototype.getStats = function() {\n      var promises = [];\n      this.transceivers.forEach(function(transceiver) {\n        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n            'dtlsTransport'].forEach(function(method) {\n              if (transceiver[method]) {\n                promises.push(transceiver[method].getStats());\n              }\n            });\n      });\n      var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n          arguments[1];\n      return new Promise(function(resolve) {\n        var results = {};\n        Promise.all(promises).then(function(res) {\n          res.forEach(function(result) {\n            Object.keys(result).forEach(function(id) {\n              results[id] = result[id];\n            });\n          });\n          if (cb) {\n            window.setTimeout(cb, 0, results);\n          }\n          resolve(results);\n        });\n      });\n    };\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    element.srcObject = stream;\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    to.srcObject = from.srcObject;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimPeerConnection: edgeShim.shimPeerConnection,\n  attachMediaStream: edgeShim.attachMediaStream,\n  reattachMediaStream: edgeShim.reattachMediaStream\n};\n\n},{\"../utils\":12,\"./edge_sdp\":7}],9:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\nvar firefoxShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = mozRTCSessionDescription;\n      window.RTCIceCandidate = mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate')?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n  },\n\n  shimGetUserMedia: function() {\n    // getUserMedia constraints shim.\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n      var constraintsToFF37_ = function(c) {\n        if (typeof c !== 'object' || c.require) {\n          return c;\n        }\n        var require = [];\n        Object.keys(c).forEach(function(key) {\n          if (key === 'require' || key === 'advanced' ||\n              key === 'mediaSource') {\n            return;\n          }\n          var r = c[key] = (typeof c[key] === 'object') ?\n              c[key] : {ideal: c[key]};\n          if (r.min !== undefined ||\n              r.max !== undefined || r.exact !== undefined) {\n            require.push(key);\n          }\n          if (r.exact !== undefined) {\n            if (typeof r.exact === 'number') {\n              r. min = r.max = r.exact;\n            } else {\n              c[key] = r.exact;\n            }\n            delete r.exact;\n          }\n          if (r.ideal !== undefined) {\n            c.advanced = c.advanced || [];\n            var oc = {};\n            if (typeof r.ideal === 'number') {\n              oc[key] = {min: r.ideal, max: r.ideal};\n            } else {\n              oc[key] = r.ideal;\n            }\n            c.advanced.push(oc);\n            delete r.ideal;\n            if (!Object.keys(r).length) {\n              delete c[key];\n            }\n          }\n        });\n        if (require.length) {\n          c.require = require;\n        }\n        return c;\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (browserDetails.version < 38) {\n        logging('spec: ' + JSON.stringify(constraints));\n        if (constraints.audio) {\n          constraints.audio = constraintsToFF37_(constraints.audio);\n        }\n        if (constraints.video) {\n          constraints.video = constraintsToFF37_(constraints.video);\n        }\n        logging('ff37: ' + JSON.stringify(constraints));\n      }\n      return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n    };\n\n    navigator.getUserMedia = getUserMedia_;\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n      return new Promise(function(resolve, reject) {\n        navigator.getUserMedia(constraints, resolve, reject);\n      });\n    };\n\n    // Shim for mediaDevices on older versions.\n    if (!navigator.mediaDevices) {\n      navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n        addEventListener: function() { },\n        removeEventListener: function() { }\n      };\n    }\n    navigator.mediaDevices.enumerateDevices =\n        navigator.mediaDevices.enumerateDevices || function() {\n          return new Promise(function(resolve) {\n            var infos = [\n              {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n              {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n            ];\n            resolve(infos);\n          });\n        };\n\n    if (browserDetails.version < 41) {\n      // Work around http://bugzil.la/1169665\n      var orgEnumerateDevices =\n          navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n      navigator.mediaDevices.enumerateDevices = function() {\n        return orgEnumerateDevices().then(undefined, function(e) {\n          if (e.name === 'NotFoundError') {\n            return [];\n          }\n          throw e;\n        });\n      };\n    }\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    element.srcObject = stream;\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    to.srcObject = from.srcObject;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia'),\n  attachMediaStream: firefoxShim.attachMediaStream,\n  reattachMediaStream: firefoxShim.reattachMediaStream\n};\n\n},{\"../utils\":12,\"./getusermedia\":10}],10:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n};\n\n},{\"../utils\":12}],11:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n  // shimOnTrack: function() { },\n\n  // TODO: DrAlex\n  // attachMediaStream: function(element, stream) { },\n  // reattachMediaStream: function(to, from) { },\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimGetUserMedia: function() {\n    navigator.getUserMedia = navigator.webkitGetUserMedia;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimGetUserMedia: safariShim.shimGetUserMedia\n  // TODO\n  // shimOnTrack: safariShim.shimOnTrack,\n  // shimPeerConnection: safariShim.shimPeerConnection,\n  // attachMediaStream: safariShim.attachMediaStream,\n  // reattachMediaStream: safariShim.reattachMediaStream\n};\n\n},{}],12:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = false;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser, version and minVersion\n   *     properties.\n   */\n  detectBrowser: function() {\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n    result.minVersion = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/([0-9]+)\\./, 1);\n      result.minVersion = 31;\n\n    // all webkit-based browsers\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/([0-9]+)\\./, 2);\n        result.minVersion = 38;\n\n      // Safari or unknown webkit-based\n      // for the time being Safari has support for MediaStreams but not webRTC\n      } else {\n        // Safari UA substrings of interest for reference:\n        // - webkit version:           AppleWebKit/602.1.25 (also used in Op,Cr)\n        // - safari UI version:        Version/9.0.3 (unique to Safari)\n        // - safari UI webkit version: Safari/601.4.4 (also used in Op,Cr)\n        //\n        // if the webkit version and safari UI webkit versions are equals,\n        // ... this is a stable version.\n        //\n        // only the internal webkit version is important today to know if\n        // media streams are supported\n        //\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/([0-9]+)\\./, 1);\n          result.minVersion = 602;\n\n        // unknown webkit-based browser\n        } else {\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n\n    // Edge.\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n      result.minVersion = 10547;\n\n    // Default fallthrough: not supported.\n    } else {\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    // Warn if version is less than minVersion.\n    if (result.version < result.minVersion) {\n      utils.log('Browser: ' + result.browser + ' Version: ' + result.version +\n          ' < minimum supported version: ' + result.minVersion +\n          '\\n some things might not work!');\n    }\n\n    return result;\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  disableLog: utils.disableLog,\n  browserDetails: utils.detectBrowser(),\n  extractVersion: utils.extractVersion\n};\n\n},{}],13:[function(require,module,exports){\n// created by @HenrikJoreteg\nvar prefix;\nvar version;\n\nif (window.mozRTCPeerConnection || navigator.mozGetUserMedia) {\n    prefix = 'moz';\n    version = parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1], 10);\n} else if (window.webkitRTCPeerConnection || navigator.webkitGetUserMedia) {\n    prefix = 'webkit';\n    version = navigator.userAgent.match(/Chrom(e|ium)/) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n}\n\nvar PC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\nvar IceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate;\nvar SessionDescription = window.mozRTCSessionDescription || window.RTCSessionDescription;\nvar MediaStream = window.webkitMediaStream || window.MediaStream;\nvar screenSharing = window.location.protocol === 'https:' &&\n    ((prefix === 'webkit' && version >= 26) ||\n     (prefix === 'moz' && version >= 33))\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar videoEl = document.createElement('video');\nvar supportVp8 = videoEl && videoEl.canPlayType && videoEl.canPlayType('video/webm; codecs=\"vp8\", vorbis') === \"probably\";\nvar getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia;\n\n// export support flags and constructors.prototype && PC\nmodule.exports = {\n    prefix: prefix,\n    browserVersion: version,\n    support: !!PC && !!getUserMedia,\n    // new support style\n    supportRTCPeerConnection: !!PC,\n    supportVp8: supportVp8,\n    supportGetUserMedia: !!getUserMedia,\n    supportDataChannel: !!(PC && PC.prototype && PC.prototype.createDataChannel),\n    supportWebAudio: !!(AudioContext && AudioContext.prototype.createMediaStreamSource),\n    supportMediaStream: !!(MediaStream && MediaStream.prototype.removeTrack),\n    supportScreenSharing: !!screenSharing,\n    // constructors\n    AudioContext: AudioContext,\n    PeerConnection: PC,\n    SessionDescription: SessionDescription,\n    IceCandidate: IceCandidate,\n    MediaStream: MediaStream,\n    getUserMedia: getUserMedia\n};\n\n},{}],14:[function(require,module,exports){\nvar _global = (function() { return this; })();\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\n\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n\n},{\"./version\":15}],15:[function(require,module,exports){\nmodule.exports = require('../package.json').version;\n\n},{\"../package.json\":16}],16:[function(require,module,exports){\nmodule.exports={\n  \"_args\": [\n    [\n      {\n        \"raw\": \"websocket@^1.0.22\",\n        \"scope\": null,\n        \"escapedName\": \"websocket\",\n        \"name\": \"websocket\",\n        \"rawSpec\": \"^1.0.22\",\n        \"spec\": \">=1.0.22 <2.0.0\",\n        \"type\": \"range\"\n      },\n      \"/home/ivey/coding/rPi-web-client/node_modules/janus-gateway-js\"\n    ]\n  ],\n  \"_from\": \"websocket@>=1.0.22 <2.0.0\",\n  \"_id\": \"websocket@1.0.24\",\n  \"_inCache\": true,\n  \"_location\": \"/websocket\",\n  \"_nodeVersion\": \"7.3.0\",\n  \"_npmOperationalInternal\": {\n    \"host\": \"packages-12-west.internal.npmjs.com\",\n    \"tmp\": \"tmp/websocket-1.0.24.tgz_1482977757939_0.1858439394272864\"\n  },\n  \"_npmUser\": {\n    \"name\": \"theturtle32\",\n    \"email\": \"brian@worlize.com\"\n  },\n  \"_npmVersion\": \"3.10.10\",\n  \"_phantomChildren\": {},\n  \"_requested\": {\n    \"raw\": \"websocket@^1.0.22\",\n    \"scope\": null,\n    \"escapedName\": \"websocket\",\n    \"name\": \"websocket\",\n    \"rawSpec\": \"^1.0.22\",\n    \"spec\": \">=1.0.22 <2.0.0\",\n    \"type\": \"range\"\n  },\n  \"_requiredBy\": [\n    \"/\"\n  ],\n  \"_resolved\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz\",\n  \"_shasum\": \"74903e75f2545b6b2e1de1425bc1c905917a1890\",\n  \"_shrinkwrap\": null,\n  \"_spec\": \"websocket@^1.0.22\",\n  \"_where\": \"/home/ivey/coding/rPi-web-client/node_modules/janus-gateway-js\",\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"contributors\": [\n    {\n      \"name\": \"Iaki Baz Castillo\",\n      \"email\": \"ibc@aliax.net\",\n      \"url\": \"http://dev.sipdoc.net\"\n    }\n  ],\n  \"dependencies\": {\n    \"debug\": \"^2.2.0\",\n    \"nan\": \"^2.3.3\",\n    \"typedarray-to-buffer\": \"^3.1.2\",\n    \"yaeti\": \"^0.0.6\"\n  },\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"devDependencies\": {\n    \"buffer-equal\": \"^1.0.0\",\n    \"faucet\": \"^0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^2.0.4\",\n    \"jshint\": \"^2.0.0\",\n    \"jshint-stylish\": \"^2.2.1\",\n    \"tape\": \"^4.0.1\"\n  },\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"dist\": {\n    \"shasum\": \"74903e75f2545b6b2e1de1425bc1c905917a1890\",\n    \"tarball\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz\"\n  },\n  \"engines\": {\n    \"node\": \">=0.8.0\"\n  },\n  \"gitHead\": \"0e15f9445953927c39ce84a232cb7dd6e3adf12e\",\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"license\": \"Apache-2.0\",\n  \"main\": \"index\",\n  \"maintainers\": [\n    {\n      \"name\": \"theturtle32\",\n      \"email\": \"brian@worlize.com\"\n    }\n  ],\n  \"name\": \"websocket\",\n  \"optionalDependencies\": {},\n  \"readme\": \"ERROR: No README data found!\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"scripts\": {\n    \"gulp\": \"gulp\",\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\"\n  },\n  \"version\": \"1.0.24\"\n}\n\n},{}],17:[function(require,module,exports){\nvar Connection = require('./connection');\n\n/**\n * @param {string} address. {@link Connection.address}\n * @param {Object} [options]. {@link Connection.options}\n * @constructor\n */\nfunction Client(address, options) {\n  this._address = address;\n  this._options = options || {};\n}\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {Connection} connection - when it is opened\n */\nClient.prototype.createConnection = function(id) {\n  var connection = Connection.create(id, this._address, this._options);\n  return connection.open();\n};\n\nmodule.exports = Client;\n\n},{\"./connection\":18}],18:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar JanusError = require('./error');\nvar Transaction = require('./transaction');\nvar WebsocketConnection = require('./websocket-connection');\nvar Session = require('./session');\nvar JanusMessage = require('./janus-message');\n\n/**\n * @param {string} id\n * @param {string} address\n * @param {Object} [options]\n * @param {string} [options.token]\n * @param {string} [options.apisecret]\n * @param {boolean|number} [options.keepalive]\n * @param {Object} [options.pc] RTCPeerConnection constructor options\n * @param {Object} [options.pc.config]\n * @param {Object} [options.pc.constraints]\n *\n * Important! Please listen to `error` events on a newly created instance in Node environment. For more details please look https://nodejs.org/api/events.html#events_error_events.\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Connection(id, address, options) {\n  Connection.super_.call(this);\n\n  /** @type {string} */\n  this._id = id;\n\n  /** @type {string} */\n  this._address = address;\n\n  /** @type {Object} */\n  this._options = options || {};\n\n  /** @type {Object} */\n  this._sessions = {};\n\n  /** @type {WebsocketConnection} */\n  this._websocketConnection = new WebsocketConnection();\n  this._installWebsocketListeners();\n}\n\nHelpers.inherits(Connection, EventEmitter);\nHelpers.extend(Connection.prototype, TTransactionGateway);\n\n/**\n * @see {@link Connection}\n * @returns {Connection}\n */\nConnection.create = function(id, address, options) {\n  return new Connection(id, address, options);\n};\n\n/**\n * @protected\n */\nConnection.prototype._installWebsocketListeners = function() {\n  this._websocketConnection.on('open', this.emit.bind(this, 'open'));\n  this._websocketConnection.on('error', this.emit.bind(this, 'error'));\n  this._websocketConnection.on('close', this.emit.bind(this, 'close'));\n  this._websocketConnection.on('message', function(message) {\n    this.processIncomeMessage(new JanusMessage(message));\n  }.bind(this));\n};\n\n/**\n * @returns {string}\n */\nConnection.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @returns {string}\n */\nConnection.prototype.getAddress = function() {\n  return this._address;\n};\n\n/**\n * @returns {Object}\n */\nConnection.prototype.getOptions = function() {\n  return this._options;\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Connection} connection - when it is opened\n */\nConnection.prototype.open = function() {\n  return this._websocketConnection.open(this._address, 'janus-protocol').return(this);\n};\n\n/**\n * @returns {Promise}\n */\nConnection.prototype.close = function() {\n  if (this._websocketConnection.isOpened()) {\n    var self = this;\n    return Promise.map(this.getSessionList(), function(session) {\n      return session.cleanup();\n    }).then(function() {\n      return self._websocketConnection.close();\n    }).then(function() {\n      self.emit('close');\n    });\n  }\n  return Promise.resolve();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Session} session\n */\nConnection.prototype.createSession = function() {\n  return this.sendSync({janus: 'create'});\n};\n\n/**\n * @param {string} sessionId\n * @returns {boolean}\n */\nConnection.prototype.hasSession = function(sessionId) {\n  return !!this.getSession(sessionId);\n};\n\n/**\n * @param {string} sessionId\n * @returns {Session}\n */\nConnection.prototype.getSession = function(sessionId) {\n  return this._sessions[sessionId];\n};\n\n/**\n * @returns {Session[]}\n */\nConnection.prototype.getSessionList = function() {\n  return Object.keys(this._sessions).map(function(id) {\n    return this._sessions[id];\n  }.bind(this));\n};\n\n/**\n * @returns {boolean}\n */\nConnection.prototype.isClosed = function() {\n  return this._websocketConnection.isClosed();\n};\n\n/**\n * @param {Session} session\n */\nConnection.prototype.addSession = function(session) {\n  this._sessions[session.getId()] = session;\n  session.once('destroy', function() {\n    this.removeSession(session.getId());\n  }.bind(this));\n};\n\n/**\n * @param {string} sessionId\n */\nConnection.prototype.removeSession = function(sessionId) {\n  delete this._sessions[sessionId];\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nConnection.prototype.send = function(message) {\n  if (this._options['token']) {\n    message.token = this._options['token'];\n  }\n  if (this._options['apisecret']) {\n    message.apisecret = this._options['apisecret'];\n  }\n  if (!message['transaction']) {\n    message['transaction'] = Transaction.generateRandomId();\n  }\n  return this._websocketConnection.send(message);\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nConnection.prototype.processOutcomeMessage = function(message) {\n  if ('create' === message['janus']) {\n    return this._onCreate(message);\n  }\n  var sessionId = message['session_id'];\n  if (sessionId) {\n    if (this.hasSession(sessionId)) {\n      return this.getSession(sessionId).processOutcomeMessage(message);\n    } else {\n      return Promise.reject(new Error('Invalid session: [' + sessionId + ']'));\n    }\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n * @fulfilled {JanusMessage} incomeMessage\n */\nConnection.prototype.processIncomeMessage = function(incomeMessage) {\n  var sessionId = incomeMessage.get('session_id');\n  if (sessionId && this.hasSession(sessionId)) {\n    return this.getSession(sessionId).processIncomeMessage(incomeMessage);\n  }\n\n  var self = this;\n  return Promise\n    .try(function() {\n      if (sessionId && !self.hasSession(sessionId)) {\n        throw new Error('Invalid session: [' + sessionId + ']');\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    });\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nConnection.prototype._onCreate = function(outcomeMessage) {\n  this.addTransaction(new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n    if ('success' == incomeMessage.get('janus')) {\n      var sessionId = incomeMessage.get('data', 'id');\n      this.addSession(Session.create(this, sessionId));\n      return this.getSession(sessionId);\n    } else {\n      throw new JanusError(incomeMessage);\n    }\n  }.bind(this)));\n  return Promise.resolve(outcomeMessage);\n};\n\nConnection.prototype.toString = function() {\n  return 'JanusConnection' + JSON.stringify({id: this._id, address: this._address});\n};\n\nmodule.exports = Connection;\n\n},{\"./error\":19,\"./event-emitter\":20,\"./helpers\":21,\"./janus-message\":23,\"./session\":26,\"./traits/t-transaction-gateway\":28,\"./transaction\":29,\"./websocket-connection\":40,\"bluebird\":1}],19:[function(require,module,exports){\nvar Helpers = require('./helpers');\n\n/**\n * @param {JanusMessage} janusMessage\n * @constructor\n */\nfunction JanusError(janusMessage) {\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.janusMessage = janusMessage;\n  var janusError = janusMessage.getError();\n  this.message = janusError['reason'];\n  this.code = janusError['code'];\n}\n\nHelpers.inherits(JanusError, Error);\n\nmodule.exports = JanusError;\n\n},{\"./helpers\":21}],20:[function(require,module,exports){\nvar EventEmitter2 = require('eventemitter2');\nvar Helpers = require('./helpers');\n\nfunction EventEmitter() {\n  EventEmitter.super_.call(this, {\n    wildcard: true,\n    delimiter: ':',\n    newListener: false,\n    maxListeners: 20\n  });\n}\n\nHelpers.inherits(EventEmitter, EventEmitter2);\n\nmodule.exports = EventEmitter;\n\n\n},{\"./helpers\":21,\"eventemitter2\":2}],21:[function(require,module,exports){\nvar Helpers = {\n\n  /**\n   * @param {Object} destination\n   * @param {...Object|null} source\n   * @returns {Object}\n   */\n  extend: function(destination, source) {\n    if (source) {\n      var sources = Array.prototype.slice.call(arguments, 1) || [];\n\n      sources.forEach(function(source) {\n        Object.keys(source).forEach(function(key) {\n          destination[key] = source[key];\n        });\n      });\n    }\n\n    return destination;\n  },\n  /**\n   * @param {Function} ctor\n   * @param {Function} superCtor\n   */\n  inherits: function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  }\n};\n\nmodule.exports = Helpers;\n\n},{}],22:[function(require,module,exports){\nvar Client = require('./client');\nvar JanusError = require('./error');\nvar WebsocketConnection = require('./websocket-connection');\nvar Connection = require('./connection');\nvar Session = require('./session');\nvar Plugin = require('./plugin');\nvar MediaPlugin = require('./webrtc/media-plugin');\nvar AudiobridgePlugin = require('./webrtc/plugin/audiobridge-plugin');\nvar AudioroomPlugin = require('./webrtc/plugin/audioroom-plugin');\nvar StreamingPlugin = require('./webrtc/plugin/streaming-plugin');\nvar RtpbroadcastPlugin = require('./webrtc/plugin/rtpbroadcast-plugin');\n\nmodule.exports = {\n  Error: JanusError,\n  WebsocketConnection: WebsocketConnection,\n  Client: Client,\n  Connection: Connection,\n  Session: Session,\n  Plugin: Plugin,\n  MediaPlugin: MediaPlugin,\n  AudiobridgePlugin: AudiobridgePlugin,\n  AudioroomPlugin: AudioroomPlugin,\n  StreamingPlugin: StreamingPlugin,\n  RtpbroadcastPlugin: RtpbroadcastPlugin\n};\n\n},{\"./client\":17,\"./connection\":18,\"./error\":19,\"./plugin\":25,\"./session\":26,\"./webrtc/media-plugin\":34,\"./webrtc/plugin/audiobridge-plugin\":36,\"./webrtc/plugin/audioroom-plugin\":37,\"./webrtc/plugin/rtpbroadcast-plugin\":38,\"./webrtc/plugin/streaming-plugin\":39,\"./websocket-connection\":40}],23:[function(require,module,exports){\n/**\n * @param {Object} plainMessage\n * @constructor\n */\nfunction JanusMessage(plainMessage) {\n  this._plainMessage = plainMessage;\n}\n\n/**\n * @returns {Object}\n */\nJanusMessage.prototype.getPlainMessage = function() {\n  return this._plainMessage;\n};\n\n/**\n * @returns {Object}\n */\nJanusMessage.prototype.getError = function() {\n  return this.get('error');\n};\n\n/**\n * @param {...string} name\n * @returns {*}\n */\nJanusMessage.prototype.get = function(name) {\n  var names = Array.prototype.slice.call(arguments, 1);\n  var result = this._plainMessage[name];\n\n  for (var i = 0; i < names.length; i++) {\n    name = names[i];\n    if (result) {\n      result = result[name];\n    } else {\n      break;\n    }\n  }\n\n  return result || null;\n};\n\nmodule.exports = JanusMessage;\n\n},{}],24:[function(require,module,exports){\nvar Helpers = require('./helpers');\nvar JanusMessage = require('./janus-message');\n\n/**\n * @param {Object} plainMessage\n * @param {Plugin} plugin\n * @constructor\n * @extends JanusMessage\n */\nfunction JanusPluginMessage(plainMessage, plugin) {\n  JanusPluginMessage.super_.apply(this, arguments);\n  this._plugin = plugin;\n}\n\nHelpers.inherits(JanusPluginMessage, JanusMessage);\n\n/**\n * @param {...string} [name]\n * @returns {*}\n */\nJanusPluginMessage.prototype.getPluginData = function(name) {\n  var names = Array.prototype.slice.call(arguments);\n  names.unshift('plugindata', 'data');\n  return this.get.apply(this, names);\n};\n\n/**\n * @returns {Object}\n */\nJanusPluginMessage.prototype.getError = function() {\n  var error = this.getPluginData('error');\n  if (error) {\n    return {\n      reason: error,\n      code: this.getPluginData('error_code')\n    }\n  }\n  return JanusPluginMessage.super_.prototype.getError.call(this);\n};\n\n/**\n * @returns {string}\n */\nJanusPluginMessage.prototype.getResultText = function() {\n  return this.getPluginData(this._plugin.getResponseAlias());\n};\n\nmodule.exports = JanusPluginMessage;\n\n},{\"./helpers\":21,\"./janus-message\":23}],25:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar JanusError = require('./error');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar Transaction = require('./transaction');\nvar JanusPluginMessage = require('./janus-plugin-message');\n\n/**\n * @param {Session} session\n * @param {string} name\n * @param {string} id\n *\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Plugin(session, name, id) {\n  Plugin.super_.call(this);\n  this._session = session;\n  this._name = name;\n  this._id = id;\n\n  var plugin = this;\n  session.on('destroy', function() {\n    plugin._detach();\n  });\n}\n\nHelpers.inherits(Plugin, EventEmitter);\nHelpers.extend(Plugin.prototype, TTransactionGateway);\n\nPlugin._types = {};\n\n/**\n * @see {@link Plugin}\n * @returns {Plugin}\n */\nPlugin.create = function(session, name, id) {\n  var aClass = this._types[name];\n  if (aClass) {\n    return new aClass(session, name, id);\n  }\n  return new Plugin(session, name, id);\n};\n\n/**\n * @param {string} name\n * @param {function(new:Plugin)} aClass\n */\nPlugin.register = function(name, aClass) {\n  this._types[name] = aClass;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getName = function() {\n  return this._name;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getResponseAlias = function() {\n  throw new Error('Plugin.getResponseAlias must be implemented');\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nPlugin.prototype.send = function(message) {\n  message['handle_id'] = this._id;\n  return this._session.send(message);\n};\n\n/**\n * @returns {Promise}\n */\nPlugin.prototype.detach = function() {\n  if (this._session) {\n    return new Promise(function(resolve, reject) {\n      this.once('detach', resolve);\n      this.sendWithTransaction({janus: 'detach'}).catch(reject);\n    }.bind(this));\n  }\n  return Promise.resolve();\n};\n\n/**\n * @returns {Promise}\n */\nPlugin.prototype.cleanup = function() {\n  return this._detach();\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nPlugin.prototype.processOutcomeMessage = function(message) {\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n */\nPlugin.prototype.processIncomeMessage = function(incomeMessage) {\n  var self = this;\n  return Promise\n    .try(function() {\n      incomeMessage = new JanusPluginMessage(incomeMessage.getPlainMessage(), self);\n      if ('detached' === incomeMessage.get('janus')) {\n        return self._onDetached();\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    })\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nPlugin.prototype._onDetached = function() {\n  return this._detach();\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nPlugin.prototype._detach = function() {\n  if (this._session) {\n    this._session = null;\n    this.emit('detach');\n  }\n  return Promise.resolve();\n};\n\nPlugin.prototype.toString = function() {\n  return 'Plugin' + JSON.stringify({id: this._id, name: this._name});\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage}\n */\nPlugin.prototype.sendWithTransaction = function(options) {\n  var transactionId = Transaction.generateRandomId();\n  var transaction = new Transaction(transactionId, function(incomeMessage) {\n    var errorMessage = incomeMessage.getError();\n    if (!errorMessage) {\n      return Promise.resolve(incomeMessage);\n    }\n    var error = new JanusError(incomeMessage);\n    return Promise.reject(error);\n  });\n  var message = {\n    janus: 'message',\n    transaction: transactionId\n  };\n  Helpers.extend(message, options);\n\n  this.addTransaction(transaction);\n  return this.sendSync(message);\n};\n\nmodule.exports = Plugin;\n\n},{\"./error\":19,\"./event-emitter\":20,\"./helpers\":21,\"./janus-plugin-message\":24,\"./traits/t-transaction-gateway\":28,\"./transaction\":29,\"bluebird\":1}],26:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar JanusError = require('./error');\nvar Timer = require('./timer');\nvar Transaction = require('./transaction');\nvar Plugin = require('./plugin');\n\n/**\n * @param {Connection} connection\n * @param {string} id\n *\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Session(connection, id) {\n  Session.super_.call(this);\n  this._connection = connection;\n  this._id = id;\n  this._plugins = {};\n\n  if (this._connection.getOptions()['keepalive']) {\n    this._startKeepAlive();\n  }\n  var session = this;\n  connection.on('close', function() {\n    session._destroy();\n  });\n}\n\nHelpers.inherits(Session, EventEmitter);\nHelpers.extend(Session.prototype, TTransactionGateway);\n\n/**\n * @see {@link Session}\n * @returns {Session}\n */\nSession.create = function(connection, id) {\n  return new Session(connection, id);\n};\n\n/**\n * @returns {string}\n */\nSession.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nSession.prototype.send = function(message) {\n  if (!this._connection) {\n    return Promise.reject(new Error('Can not send message over destroyed ' + this));\n  }\n  //we always use own session's id in its messages\n  message['session_id'] = this._id;\n  if (this._keepAliveTimer) {\n    this._keepAliveTimer.reset();\n  }\n  return this._connection.send(message);\n};\n\n/**\n * @param {string} name\n * @returns {Promise}\n * @fulfilled {Plugin} plugin\n */\nSession.prototype.attachPlugin = function(name) {\n  return this.sendSync({janus: 'attach', plugin: name});\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Object} response\n */\nSession.prototype.destroy = function() {\n  return this.sendSync({janus: 'destroy'});\n};\n\n/**\n * @returns {Promise}\n */\nSession.prototype.cleanup = function() {\n  return this._destroy();\n};\n\n/**\n * @param {string} pluginId\n * @returns {boolean}\n */\nSession.prototype.hasPlugin = function(pluginId) {\n  return !!this.getPlugin(pluginId);\n};\n\n/**\n * @param {string} pluginId\n * @returns {Plugin}\n */\nSession.prototype.getPlugin = function(pluginId) {\n  return this._plugins[pluginId];\n};\n\n/**\n * @returns {Plugin[]}\n */\nSession.prototype.getPluginList = function() {\n  return Object.keys(this._plugins).map(function(id) {\n    return this._plugins[id];\n  }.bind(this));\n};\n\n/**\n * @param {Plugin} plugin\n */\nSession.prototype.addPlugin = function(plugin) {\n  this._plugins[plugin.getId()] = plugin;\n  plugin.once('detach', function() {\n    this.removePlugin(plugin.getId())\n  }.bind(this));\n};\n\n/**\n * @param {string} pluginId\n */\nSession.prototype.removePlugin = function(pluginId) {\n  delete this._plugins[pluginId];\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nSession.prototype.processOutcomeMessage = function(message) {\n  var janusMessage = message['janus'];\n  if ('attach' === janusMessage) {\n    return this._onAttach(message);\n  }\n  if ('destroy' === janusMessage) {\n    return this._onDestroy(message);\n  }\n  var pluginId = message['handle_id'];\n  if (pluginId) {\n    if (this.hasPlugin(pluginId)) {\n      return this.getPlugin(pluginId).processOutcomeMessage(message);\n    } else {\n      return Promise.reject(new Error('Invalid plugin [' + pluginId + ']'));\n    }\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n * @fulfilled {JanusMessage} incomeMessage\n */\nSession.prototype.processIncomeMessage = function(incomeMessage) {\n  var pluginId = incomeMessage.get('handle_id') || incomeMessage.get('sender');\n  if (pluginId && this.hasPlugin(pluginId)) {\n    return this.getPlugin(pluginId).processIncomeMessage(incomeMessage);\n  }\n\n  var self = this;\n  return Promise\n    .try(function() {\n      if (pluginId && !self.hasPlugin(pluginId)) {\n        throw new Error('Invalid plugin [' + pluginId + ']');\n      }\n      if ('timeout' === incomeMessage.get('janus')) {\n        return self._onTimeout(incomeMessage);\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    });\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nSession.prototype._onAttach = function(outcomeMessage) {\n  this.addTransaction(\n    new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n      if ('success' == incomeMessage.get('janus')) {\n        var pluginId = incomeMessage.get('data', 'id');\n        this.addPlugin(Plugin.create(this, outcomeMessage['plugin'], pluginId));\n        return this.getPlugin(pluginId);\n      } else {\n        throw new JanusError(incomeMessage);\n      }\n    }.bind(this))\n  );\n  return Promise.resolve(outcomeMessage);\n};\n\n/**\n * @param {Object} incomeMessage\n * @returns {Promise}\n * @fulfilled {Object} incomeMessage\n */\nSession.prototype._onTimeout = function(incomeMessage) {\n  return this._destroy().return(incomeMessage);\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nSession.prototype._onDestroy = function(outcomeMessage) {\n  this.addTransaction(\n    new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n      if ('success' == incomeMessage.get('janus')) {\n        return this._destroy().return(incomeMessage);\n      } else {\n        throw new JanusError(incomeMessage);\n      }\n    }.bind(this))\n  );\n  return Promise.resolve(outcomeMessage);\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nSession.prototype._destroy = function() {\n  if (!this._connection) {\n    return Promise.resolve();\n  }\n  this._stopKeepAlive();\n  return Promise.map(this.getPluginList(), function(plugin) {\n    return plugin.cleanup();\n  }).finally(function() {\n    this._plugins = {};\n    this._connection = null;\n    this.emit('destroy');\n  }.bind(this));\n};\n\n/**\n * @param {*} value\n * @returns {boolean}\n * @protected\n */\nSession.prototype._isNaturalNumber = function(value) {\n  if (isNaN(value)) {\n    return false;\n  }\n  var x = parseFloat(value);\n  return (x | 0) === x && x > 0;\n};\n\n/**\n * @protected\n */\nSession.prototype._startKeepAlive = function() {\n  var keepAlive = this._connection.getOptions()['keepalive'];\n  if (this._isNaturalNumber(keepAlive) && keepAlive < 59000) {\n    this._keepAlivePeriod = keepAlive;\n  } else {\n    this._keepAlivePeriod = 30000;\n  }\n  var session = this;\n  this._keepAliveTimer = new Timer(function() {\n    session.send({janus: 'keepalive'})\n      .catch(function(error) {\n        if (session._connection.isClosed()) {\n          session._stopKeepAlive();\n        }\n        throw error;\n      });\n  }, this._keepAlivePeriod);\n  this._keepAliveTimer.start();\n};\n\nSession.prototype._stopKeepAlive = function() {\n  if (this._keepAliveTimer) {\n    this._keepAliveTimer.stop();\n    this._keepAliveTimer = null;\n  }\n};\n\nSession.prototype.toString = function() {\n  return 'Session' + JSON.stringify({id: this._id});\n};\n\n\nmodule.exports = Session;\n\n},{\"./error\":19,\"./event-emitter\":20,\"./helpers\":21,\"./plugin\":25,\"./timer\":27,\"./traits/t-transaction-gateway\":28,\"./transaction\":29,\"bluebird\":1}],27:[function(require,module,exports){\n/**\n * @param {Function} callback\n * @param {number} ms\n * @constructor\n */\nfunction Timer(callback, ms) {\n  this._callback = callback;\n  this._ms = ms;\n  this._timeoutId = null;\n}\n\nTimer.prototype.start = function() {\n  this._timeoutId = setTimeout(this._callback, this._ms);\n};\n\nTimer.prototype.stop = function() {\n  if (this._timeoutId) {\n    clearTimeout(this._timeoutId);\n    this._timeoutId = null;\n  }\n};\n\nTimer.prototype.reset = function() {\n  this.stop();\n  this.start();\n};\n\nmodule.exports = Timer;\n\n},{}],28:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar JanusError = require('../error');\nvar Transaction = require('../transaction');\nvar Transactions = require('../transactions');\n\n/**\n * @class TTransactionGateway\n */\nvar TTransactionGateway = {\n  /**\n   * @returns {Transactions}\n   */\n  getTransactions: function() {\n    if (!this._transactions) {\n      this._transactions = new Transactions();\n    }\n    return this._transactions;\n  },\n\n  /**\n   * @param {Transaction} transaction\n   */\n  addTransaction: function(transaction) {\n    this.getTransactions().add(transaction);\n  },\n\n  /**\n   * @param {Object} message\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  sendSync: function(message) {\n    if (!message['transaction']) {\n      message['transaction'] = Transaction.generateRandomId();\n    }\n    var self = this;\n    return this.processOutcomeMessage(message)\n      .then(function(message) {\n        return self.send(message);\n      })\n      .then(function(result) {\n        var transaction = self.getTransactions().find(message['transaction']);\n        if (transaction) {\n          return transaction.promise;\n        }\n        return result;\n      });\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {boolean}\n   */\n  hasTransaction: function(incomeMessage) {\n    return this.getTransactions().has(incomeMessage.get('transaction'));\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  executeTransaction: function(incomeMessage) {\n    return this.getTransactions().execute(incomeMessage.get('transaction'), incomeMessage);\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  defaultProcessIncomeMessage: function(incomeMessage) {\n    var self = this;\n    if (self.hasTransaction(incomeMessage)) {\n      return self.executeTransaction(incomeMessage);\n    } else {\n      if (incomeMessage.getError()) {\n        return Promise.reject(new JanusError(incomeMessage));\n      }\n    }\n  }\n};\n\nmodule.exports = TTransactionGateway;\n\n},{\"../error\":19,\"../transaction\":29,\"../transactions\":30,\"bluebird\":1}],29:[function(require,module,exports){\nvar Promise = require('bluebird');\n\n/**\n * @callback Transaction~callback\n * @returns {Promise}\n * @fulfilled {*}\n */\n\n/**\n * @param {string} id\n * @param {Transaction~callback} callback\n * @param {number} [timeoutPeriod=30000] in milliseconds. Timeout until transaction is executed.\n * @constructor\n */\nfunction Transaction(id, callback, timeoutPeriod) {\n  this.id = id;\n  timeoutPeriod = timeoutPeriod || 30000;\n  var timeoutRejection;\n  var self = this;\n  this.promise = new Promise(function(resolve, reject) {\n    self._callback = function() {\n      clearTimeout(timeoutRejection);\n      var result;\n      try {\n        result = callback.apply(null, arguments);\n      } catch (error) {\n        result = Promise.reject(error);\n      }\n      if (!(result instanceof Promise)) {\n        result = Promise.resolve(result);\n      }\n      result.then(resolve, reject);\n    };\n\n    timeoutRejection = setTimeout(function() {\n      reject(new Error('Transaction timeout ' + self.id));\n    }, timeoutPeriod);\n  });\n  this._isExecuted = false;\n}\n\n/**\n * @param {...*}\n * @returns {Promise}\n * @fulfilled {*}\n */\nTransaction.prototype.execute = function() {\n  if (!this._isExecuted) {\n    this._isExecuted = true;\n    this._callback.apply(this, arguments);\n  }\n  return this.promise;\n};\n\n/**\n * @returns {string}\n */\nTransaction.generateRandomId = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\nmodule.exports = Transaction;\n\n},{\"bluebird\":1}],30:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar Transaction = require('./transaction');\n\n/**\n * @constructor\n */\nfunction Transactions() {\n  /** @type {Object} */\n  this.list = {};\n}\n\n/**\n * @param {Transaction} transaction\n */\nTransactions.prototype.add = function(transaction) {\n  if (this.has(transaction.id)) {\n    throw new Error('Transaction with id: `' + transaction.id + '` already exists');\n  }\n  if (!(transaction instanceof Transaction)) {\n    throw new Error('`transaction` must be an instance of Transaction');\n  }\n  this.list[transaction.id] = transaction;\n};\n\n/**\n * @param {string} id\n * @returns {boolean}\n */\nTransactions.prototype.has = function(id) {\n  return id && !!this._find(id);\n};\n\n/**\n * @param {string} id\n * @returns {Transaction|Null}\n */\nTransactions.prototype.find = function(id) {\n  return this._find(id) || null;\n};\n\n/**\n * @param {string} id\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {*}\n */\nTransactions.prototype.execute = function(id, message) {\n  var transaction = this.find(id);\n  if (!transaction) {\n    throw new Error('Transaction `' + id + '` not found');\n  }\n  if ('ack' !== message['janus']) {\n    this.remove(id);\n    return transaction.execute(message);\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {string} id\n */\nTransactions.prototype.remove = function(id) {\n  if (!this.has(id)) {\n    throw new Error('Transaction with id: `' + id + \"` doesn't exist\");\n  }\n  delete this.list[id];\n};\n\n/**\n * @param {string} id\n * @returns {Transaction}\n * @protected\n */\nTransactions.prototype._find = function(id) {\n  return this.list[id];\n};\n\nmodule.exports = Transactions;\n\n},{\"./transaction\":29,\"bluebird\":1}],31:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar Helpers = require('../helpers');\nvar JanusPluginMessage = require('../janus-plugin-message');\nvar MediaEntityPlugin = require('./media-entity-plugin');\n\nfunction MediaAudioPlugin() {\n  MediaAudioPlugin.super_.apply(this, arguments);\n}\n\nHelpers.inherits(MediaAudioPlugin, MediaEntityPlugin);\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._join = function(id, options) {\n  var body = Helpers.extend({request: 'join'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.leave = function() {\n  return this.sendWithTransaction({body: {request: 'leave'}})\n    .then(function(response) {\n      this.resetCurrentEntity();\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._change = function(id, options) {\n  var body = Helpers.extend({request: 'changeroom'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._connect = function(id, options) {\n  if (this.hasCurrentEntity(id)) {\n    return Promise.resolve(new JanusPluginMessage({}, this));\n  }\n  if (this.hasCurrentEntity()) {\n    return this._change(id, options);\n  }\n  return this._join(id, options);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.list = function() {\n  return this._list();\n};\n\n/**\n * @param {Object} [options]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.configure = function(options, jsep) {\n  var body = Helpers.extend({\n    request: 'configure'\n  }, options);\n  var message = {body: body};\n  if (jsep) {\n    message.jsep = jsep;\n  }\n  return this.sendWithTransaction(message);\n};\n\n/**\n * @param {MediaStream} stream\n * @param {RTCOfferOptions} [offerOptions]\n * @param {Object} [configureOptions]\n * @param {boolean} [configureOptions.muted]\n * @param {number} [configureOptions.quality]\n * @returns {Promise}\n * @fulfilled {@link sendSDP}\n */\nMediaAudioPlugin.prototype.offerStream = function(stream, offerOptions, configureOptions) {\n  var self = this;\n  return Promise\n    .try(function() {\n      self.createPeerConnection();\n      stream.getAudioTracks().forEach(function(track) {\n        self.addTrack(track, stream);\n      });\n    })\n    .then(function() {\n      return self.createOffer(offerOptions);\n    })\n    .then(function(jsep) {\n      return self.sendSDP(jsep, configureOptions);\n    });\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {Object} [configureOptions]\n * @param {boolean} [configureOptions.muted]\n * @param {number} [configureOptions.quality]\n * @returns {Promise}\n * @fulfilled {RTCSessionDescription}\n */\nMediaAudioPlugin.prototype.sendSDP = function(jsep, configureOptions) {\n  return this.configure(configureOptions, jsep)\n    .then(function(response) {\n      var jsep = response.get('jsep');\n      if (jsep) {\n        this.setRemoteSDP(jsep);\n        return jsep;\n      }\n      return Promise.reject(new Error('Failed sendSDP. No jsep in response.'));\n    }.bind(this));\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} list\n */\nMediaAudioPlugin.prototype._listParticipants = function(options) {\n  var body = Helpers.extend({request: 'listparticipants'}, options);\n  return this.sendWithTransaction({body: body});\n};\n\nmodule.exports = MediaAudioPlugin;\n\n},{\"../helpers\":21,\"../janus-plugin-message\":24,\"./media-entity-plugin\":33,\"bluebird\":1}],32:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar webrtc = require('webrtc-adapter');\n\nfunction MediaDevicesShim() {\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Parameters\n * @typedef {Object} MediaStreamConstraints\n */\n\n/**\n * @param {MediaStreamConstraints} constraints\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim.getUserMedia = function(constraints) {\n  if (constraints.video === 'screen') {\n    return this.getSharedScreen({audio: constraints.audio});\n  } else {\n    return Promise.resolve(navigator.mediaDevices.getUserMedia(constraints));\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim.getSharedScreen = function(constraints) {\n  if (window.location.protocol !== 'https:') {\n    return Promise.reject(new Error('Screen sharing only works on HTTPS, try the https:// version of this page'));\n  }\n\n  if ('chrome' == webrtc.browserDetails.browser) {\n    return this._getSharedScreenChrome(constraints);\n  } else if ('firefox' == webrtc.browserDetails.browser) {\n    return this._getSharedScreenFirefox(constraints);\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim._getSharedScreenChrome = function(constraints) {\n  var chromever = webrtc.browserDetails.version;\n  var maxver = 33;\n  if (window.navigator.userAgent.match('Linux')) {\n    maxver = 35;\n  }\t// \"known\" crash in chrome 34 and 35 on linux\n  if (chromever >= 26 && chromever <= maxver) {\n    // Chrome 26->33 requires some awkward chrome://flags manipulation\n    constraints = Helpers.extend({}, constraints, {\n      video: {\n        mandatory: {\n          googLeakyBucket: true,\n          maxWidth: window.screen.width,\n          maxHeight: window.screen.height,\n          maxFrameRate: 3,\n          chromeMediaSource: 'screen'\n        }\n      }\n    });\n    return window.getUserMedia(constraints);\n  } else {\n    // Chrome 34+ requires an extension\n    return new Promise(function(resolve, reject) {\n      var timeoutRejectId;\n      var messageListener = function(event) {\n        if (event.origin != window.location.origin) {\n          return;\n        }\n        if (event.data.type == 'janusGotScreen' && timeoutRejectId == event.data.id) {\n          window.clearTimeout(timeoutRejectId);\n          window.removeEventListener('message', messageListener);\n\n          if (event.data.sourceId === '') {\n            // user canceled\n            var error = new Error('NavigatorUserMediaError');\n            error.name = 'You cancelled the request for permission, giving up...';\n            reject(error);\n          } else {\n            constraints = Helpers.extend({}, constraints, {\n              video: {\n                mandatory: {\n                  chromeMediaSource: 'desktop',\n                  maxWidth: window.screen.width,\n                  maxHeight: window.screen.height,\n                  maxFrameRate: 3\n                },\n                optional: [\n                  {googLeakyBucket: true},\n                  {googTemporalLayeredScreencast: true}\n                ]\n              }\n            });\n            constraints.video.mandatory.chromeMediaSourceId = event.data.sourceId;\n            resolve(window.getUserMedia(constraints));\n          }\n        } else if (event.data.type == 'janusGetScreenPending') {\n          if (timeoutRejectId == event.data.id) {\n            window.clearTimeout(timeoutRejectId);\n          }\n        }\n      };\n\n      window.addEventListener('message', messageListener);\n      timeoutRejectId = setTimeout(\n        function() {\n          window.removeEventListener('message', messageListener);\n          var error = new Error('NavigatorUserMediaError');\n          error.name = 'The required Chrome extension is not installed: click <a href=\"#\">here</a> to install it. (NOTE: this will need you to refresh the page)';\n          reject(error);\n        }, 1000);\n      window.postMessage({type: 'janusGetScreen', id: timeoutRejectId}, '*');\n    });\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim._getSharedScreenFirefox = function(constraints) {\n  var ffver = webrtc.browserDetails.version;\n  if (ffver >= 33) {\n    constraints = Helpers.extend({}, constraints, {\n      video: {\n        mozMediaSource: 'window',\n        mediaSource: 'window'\n      }\n    });\n    return window.getUserMedia(constraints).then(function(stream) {\n      if (stream) {\n        // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810\n        var lastStreamTime = stream.currentTime;\n        var inderval = window.setInterval(function() {\n          if (stream.currentTime == lastStreamTime) {\n            window.clearInterval(inderval);\n            if (stream.onended) {\n              stream.onended();\n            }\n          }\n          lastStreamTime = stream.currentTime;\n        }, 500);\n      }\n      return stream;\n    });\n  } else {\n    var error = new Error('Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)');\n    return Promise.reject(error);\n  }\n};\n\nmodule.exports = MediaDevicesShim;\n\n},{\"bluebird\":1,\"webrtc-adapter\":4}],33:[function(require,module,exports){\nvar Helpers = require('../helpers');\nvar MediaPlugin = require('./media-plugin');\n\nfunction MediaEntityPlugin() {\n  MediaEntityPlugin.super_.apply(this, arguments);\n\n  this._currentEntityId = null;\n}\n\nHelpers.inherits(MediaEntityPlugin, MediaPlugin);\n\n/**\n * @param {string|number} [id]\n * @return {boolean}\n */\nMediaEntityPlugin.prototype.hasCurrentEntity = function(id) {\n  if (id) {\n    return id === this._currentEntityId;\n  }\n  return !!this._currentEntityId;\n};\n\n/**\n * @param {string|number} id\n */\nMediaEntityPlugin.prototype.setCurrentEntity = function(id) {\n  this._currentEntityId = id;\n};\n\nMediaEntityPlugin.prototype.resetCurrentEntity = function() {\n  this._currentEntityId = null;\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._create = function(options) {\n  var body = Helpers.extend({request: 'create'}, options);\n  return this.sendWithTransaction({body: body})\n    .catch(function(error) {\n      if (error.message.indexOf('already exists') > 0) {\n        return error.response;\n      } else {\n        throw error;\n      }\n    });\n};\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._destroy = function(id, options) {\n  var body = Helpers.extend({request: 'destroy'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      if (this.hasCurrentEntity(id)) {\n        this.resetCurrentEntity();\n      }\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._list = function(options) {\n  var body = Helpers.extend({request: 'list'}, options);\n  return this.sendWithTransaction({body: body});\n};\n\n/**\n * @inheritDoc\n */\nMediaEntityPlugin.prototype._onHangup = function(incomeMessage) {\n  this.resetCurrentEntity();\n  return MediaEntityPlugin.super_.prototype._onHangup.call(this, incomeMessage);\n};\n\nmodule.exports = MediaEntityPlugin;\n\n},{\"../helpers\":21,\"./media-plugin\":34}],34:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar webrtcsupport = require('webrtcsupport');\nvar Helpers = require('../helpers');\nvar Plugin = require('../plugin');\nvar MediaDevicesShim = require('./media-devices-shim');\n\n/**\n * @inheritDoc\n *\n * IMPORTANT! WebRTC stuff will not work in node environment.\n * @constructor\n * @extends Plugin\n */\nfunction MediaPlugin(session, name, id) {\n  MediaPlugin.super_.apply(this, arguments);\n\n  this._pcListeners = {};\n  this._pc = null;\n}\n\nHelpers.inherits(MediaPlugin, Plugin);\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/RTCPeerConnection#RTCConfiguration_dictionary\n * @typedef {Object} RTCConfiguration\n */\n\n/**\n * @param {RTCConfiguration} [options]\n * @returns {RTCPeerConnection}\n */\nMediaPlugin.prototype.createPeerConnection = function(options) {\n  options = Helpers.extend(options || {}, this._session._connection._options.pc);\n\n  var config = {\n    iceServers: [{url: 'stun:stun.l.google.com:19302'}]\n  };\n  var constraints = {\n    'optional': [{'DtlsSrtpKeyAgreement': true}]\n  };\n  if (options.config) {\n    Helpers.extend(config, options.config);\n  }\n  if (options.constraints) {\n    Helpers.extend(constraints, options.constraints);\n  }\n\n  this._pc = new webrtcsupport.PeerConnection(config, constraints);\n  this._addPcEventListeners();\n  return this._pc;\n};\n\n/**\n * @returns {RTCPeerConnection|null}\n */\nMediaPlugin.prototype.getPeerConnection = function() {\n  return this._pc;\n};\n\n/**\n * @returns {Promise}\n */\nMediaPlugin.prototype.hangup = function() {\n  return new Promise(function(resolve, reject) {\n    this.once('hangup', resolve);\n    this.sendWithTransaction({janus: 'hangup'}).catch(reject);\n  }.bind(this));\n};\n\n/**\n * @see https://www.w3.org/TR/mediacapture-streams/#mediastreamtrack\n * @typedef {Object} MediaStreamTrack\n */\n\n/**\n * @param {MediaStreamTrack} track\n * @param {...MediaStream} [stream]\n */\nMediaPlugin.prototype.addTrack = function(track, stream) {\n  if (!this._pc.addTrack) {\n    //TODO remove this part as soon as pc.addTrack is supported by chrome or webrtc/adapter#361 is implemented\n    if (!stream) {\n      throw new Error('MediaPlugin.addTrack. Missing stream argument when pc.addTrack is not supported');\n    }\n    this._pc.addStream(stream);\n    this.emit('pc:track:local', {streams: [stream]});\n  } else {\n    this._pc.addTrack.apply(this._pc, arguments);\n    this.emit('pc:track:local', {track: track, streams: Array.prototype.slice.call(arguments, 1)});\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaPlugin.prototype.getUserMedia = function(constraints) {\n  this.emit('consent-dialog:start');\n  var self = this;\n  var promise = MediaDevicesShim.getUserMedia(constraints);\n  return promise\n    .then(function(stream) {\n      self.emit('consent-dialog:stop', {stream: stream});\n      return stream;\n    })\n    .catch(function(error) {\n      self.emit('consent-dialog:stop', {error: error});\n      throw error;\n    })\n    .finally(function() {\n      if (promise.isCancelled()) {\n        self.emit('consent-dialog:stop');\n      }\n    });\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer#RTCOfferOptions_dictionary\n * @typedef {Object} RTCOfferOptions\n */\n\n/**\n * @param {RTCOfferOptions} [options]\n * @returns {Promise}\n * @fulfilled {@link _createSDP}\n */\nMediaPlugin.prototype.createOffer = function(options) {\n  return this._createSDP('createOffer', options);\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createAnswer#RTCAnswerOptions_dictionary\n * @typedef {Object} RTCAnswerOptions\n */\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {RTCAnswerOptions} [options]\n * @returns {Promise}\n * @fulfilled {@link _createSDP}\n */\nMediaPlugin.prototype.createAnswer = function(jsep, options) {\n  var self = this;\n  return Promise.try(function() {\n    return self.setRemoteSDP(jsep);\n  }).then(function() {\n    return self._createSDP('createAnswer', options);\n  });\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @returns {Promise}\n */\nMediaPlugin.prototype.setRemoteSDP = function(jsep) {\n  return this._pc.setRemoteDescription(new webrtcsupport.SessionDescription(jsep));\n};\n\n/**\n * @param {string} party\n * @param {RTCAnswerOptions|RTCOfferOptions} [options]\n * @returns {Promise}\n * @fulfilled {RTCSessionDescription} sdp\n */\nMediaPlugin.prototype._createSDP = function(party, options) {\n  if (!this._pc) {\n    throw new Error('Create PeerConnection before creating SDP for it');\n  }\n  if (['createOffer', 'createAnswer'].indexOf(party) < 0) {\n    throw new Error('Unknown party in _createSDP');\n  }\n\n  options = options || {};\n  var self = this;\n  return this._pc[party](options)\n    .then(function(description) {\n      return self._pc.setLocalDescription(description);\n    })\n    .then(function() {\n      return self._pc.localDescription;\n    });\n};\n\nMediaPlugin.prototype.processIncomeMessage = function(message) {\n  var self = this;\n  return Promise.try(function() {\n      return MediaPlugin.super_.prototype.processIncomeMessage.call(self, message);\n    })\n    .then(function(result) {\n      var janusType = message['janus'];\n      switch (janusType) {\n        case 'trickle':\n          self._onTrickle(message);\n          break;\n        case 'hangup':\n          self._onHangup(message);\n          break;\n      }\n      return result;\n    });\n};\n\n/**\n * @param {Object} incomeMessage\n */\nMediaPlugin.prototype._onTrickle = function(incomeMessage) {\n  var candidate = new webrtcsupport.IceCandidate(incomeMessage['candidate']);\n  this._pc.addIceCandidate(candidate).catch(function(error) {\n    this.emit('pc:error', error);\n  }.bind(this));\n};\n\n/**\n * @param {Object} incomeMessage\n */\nMediaPlugin.prototype._onHangup = function(incomeMessage) {\n  this.emit('hangup', incomeMessage);\n};\n\nMediaPlugin.prototype.closePeerConnection = function() {\n  if (this._pc) {\n    this._stopLocalMedia();\n    Object.keys(this._pcListeners)\n      .forEach(function(event) {\n        this._removePcEventListener(event);\n      }.bind(this));\n    this._pc.close();\n    this._pc = null;\n    this.emit('pc:close');\n  }\n};\n\nMediaPlugin.prototype._stopLocalMedia = function() {\n  var streams = this._pc.getLocalStreams();\n  streams.forEach(function(stream) {\n    if (stream.stop) {\n      stream.stop();\n    } else if (stream.getTracks) {\n      stream.getTracks().forEach(function(track) {\n        track.stop();\n      });\n    }\n  });\n};\n\nMediaPlugin.prototype._detach = function(message) {\n  this.closePeerConnection();\n  return MediaPlugin.super_.prototype._detach.apply(this, arguments);\n};\n\nMediaPlugin.prototype._addPcEventListeners = function() {\n  var self = this;\n\n  this._addPcEventListener('addstream', function(event) {\n    self.emit('pc:track:remote', {streams: [event.stream]});\n  });\n  this._addPcEventListener('track', function(event) {\n    self.emit('pc:track:remote', event);\n  });\n\n  this._addPcEventListener('icecandidate', function(event) {\n    if (event.candidate) {\n      self.send({janus: 'trickle', candidate: event.candidate});\n    } else {\n      self.send({janus: 'trickle', candidate: {completed: true}});\n      self._removePcEventListener('icecandidate');\n    }\n  });\n\n  this._addPcEventListener('signalingstatechange', function() {\n    if ('closed' == self._pc.signalingState) {\n      self.closePeerConnection();\n    }\n  });\n\n  this._addPcEventListener('iceconnectionstatechange', function() {\n    switch (self._pc.iceConnectionState) {\n      case 'closed':\n      case 'failed':\n        self.closePeerConnection();\n        break;\n    }\n  });\n};\n\nMediaPlugin.prototype._addPcEventListener = function(event, listener) {\n  this._pcListeners[event] = listener;\n  this._pc.addEventListener(event, listener);\n};\n\nMediaPlugin.prototype._removePcEventListener = function(event) {\n  this._pc.removeEventListener(event, this._pcListeners[event]);\n  delete this._pcListeners[event];\n};\n\nmodule.exports = MediaPlugin;\n\n},{\"../helpers\":21,\"../plugin\":25,\"./media-devices-shim\":32,\"bluebird\":1,\"webrtcsupport\":13}],35:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar Helpers = require('../helpers');\nvar JanusPluginMessage = require('../janus-plugin-message');\nvar MediaEntityPlugin = require('./media-entity-plugin');\n\nfunction MediaStreamPlugin() {\n  MediaStreamPlugin.super_.apply(this, arguments);\n}\n\nHelpers.inherits(MediaStreamPlugin, MediaEntityPlugin);\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._create = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return MediaStreamPlugin.super_.prototype._create.call(this, options);\n};\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._destroy = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return MediaStreamPlugin.super_.prototype._destroy.call(this, id, options);\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [watchOptions]\n * @param {Object} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._watch = function(id, watchOptions, answerOptions) {\n  var plugin = this;\n  var body = Helpers.extend({request: 'watch', id: id}, watchOptions);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      var jsep = response.get('jsep');\n      if (!jsep || 'offer' != jsep['type']) {\n        throw new Error('Expect offer response on watch request')\n      }\n      plugin.setCurrentEntity(id);\n      return plugin._offerAnswer(jsep, answerOptions).return(response);\n    });\n};\n\n/**\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._start = function(jsep) {\n  var message = {body: {request: 'start'}};\n  if (jsep) {\n    message.jsep = jsep;\n  }\n  return this.sendWithTransaction(message);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._stop = function() {\n  return this.sendWithTransaction({body: {request: 'stop'}})\n    .then(function(response) {\n      this.resetCurrentEntity();\n      return response;\n    }.bind(this));\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._pause = function() {\n  return this.sendWithTransaction({body: {request: 'pause'}});\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._switch = function(id, options) {\n  var body = Helpers.extend({\n    request: 'switch',\n    id: id\n  }, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [watchOptions]\n * @param {Object} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype.connect = function(id, watchOptions, answerOptions) {\n  if (this.hasCurrentEntity(id)) {\n    return Promise.resolve(new JanusPluginMessage({}, this));\n  }\n  if (this.hasCurrentEntity()) {\n    return this._switch(id, watchOptions);\n  }\n  return this._watch(id, watchOptions, answerOptions);\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {RTCAnswerOptions} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._offerAnswer = function(jsep, answerOptions) {\n  var self = this;\n  return Promise\n    .try(function() {\n      self.createPeerConnection();\n    })\n    .then(function() {\n      return self.createAnswer(jsep, answerOptions);\n    })\n    .then(function(jsep) {\n      return self.sendWithTransaction({janus: 'message', body: {request: 'start'}, jsep: jsep});\n    });\n};\n\nmodule.exports = MediaStreamPlugin;\n\n},{\"../helpers\":21,\"../janus-plugin-message\":24,\"./media-entity-plugin\":33,\"bluebird\":1}],36:[function(require,module,exports){\nvar Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaAudioPlugin = require('../media-audio-plugin');\n\nfunction AudiobridgePlugin() {\n  AudiobridgePlugin.super_.apply(this, arguments);\n}\n\nAudiobridgePlugin.NAME = 'janus.plugin.audiobridge';\nHelpers.inherits(AudiobridgePlugin, MediaAudioPlugin);\nPlugin.register(AudiobridgePlugin.NAME, AudiobridgePlugin);\n\n/**\n * @see https://janus.conf.meetecho.com/docs/janus__audiobridge_8c.html\n * @param {number} roomId\n * @param {Object} [options]\n * @param {boolean} [options.permanent]\n * @param {string} [options.description]\n * @param {string} [options.secret]\n * @param {string} [options.pin]\n * @param {boolean} [options.is_private]\n * @param {number} [options.sampling]\n * @param {boolean} [options.record]\n * @param {string} [options.record_file]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.create = function(roomId, options) {\n  return this._create(Helpers.extend({room: roomId}, options));\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.destroy = function(roomId, options) {\n  return this._destroy(roomId, Helpers.extend({room: roomId}, options));\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.pin]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.join = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._join(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.pin]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.change = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._change(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.connect = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._connect(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nAudiobridgePlugin.prototype.listParticipants = function(roomId) {\n  return this._listParticipants({room: roomId});\n};\n\n/**\n * @inheritDoc\n */\nAudiobridgePlugin.prototype.getResponseAlias = function() {\n  return 'audiobridge';\n};\n\nmodule.exports = AudiobridgePlugin;\n\n},{\"../../helpers\":21,\"../../plugin\":25,\"../media-audio-plugin\":31}],37:[function(require,module,exports){\nvar Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaAudioPlugin = require('../media-audio-plugin');\n\nfunction AudioroomPlugin() {\n  AudioroomPlugin.super_.apply(this, arguments);\n}\n\nAudioroomPlugin.NAME = 'janus.plugin.cm.audioroom';\nHelpers.inherits(AudioroomPlugin, MediaAudioPlugin);\nPlugin.register(AudioroomPlugin.NAME, AudioroomPlugin);\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.destroy = function(id, options) {\n  return this._destroy(id, Helpers.extend({id: id}, options));\n};\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {number} [options.userid]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.join = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._join(id, options);\n};\n\n/**\n * @param {string} id\n * @param {Object} [options] {@link join}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.change = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._change(id, options);\n};\n\n/**\n * @param {string} id\n * @param {Object} [options] {@link join}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.connect = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._connect(id, options);\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nAudioroomPlugin.prototype.listParticipants = function(id) {\n  return this._listParticipants({id: id});\n};\n\n/**\n * @inheritDoc\n */\nAudioroomPlugin.prototype.getResponseAlias = function() {\n  return 'audioroom';\n};\n\nmodule.exports = AudioroomPlugin;\n\n},{\"../../helpers\":21,\"../../plugin\":25,\"../media-audio-plugin\":31}],38:[function(require,module,exports){\nvar Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaStreamPlugin = require('../media-stream-plugin');\n\nfunction RtpbroadcastPlugin() {\n  RtpbroadcastPlugin.super_.apply(this, arguments);\n}\n\nRtpbroadcastPlugin.NAME = 'janus.plugin.cm.rtpbroadcast';\nHelpers.inherits(RtpbroadcastPlugin, MediaStreamPlugin);\nPlugin.register(RtpbroadcastPlugin.NAME, RtpbroadcastPlugin);\n\n\n/**\n * {@link https://github.com/cargomedia/janus-gateway-rtpbroadcast#create}\n * @typedef {Object} StreamParams\n */\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {string} [options.name]\n * @param {string} [options.description]\n * @param {boolean} [options.recorded]\n * @param {string} [options.whitelist]\n * @param {StreamParams} [options.streams]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.create = function(id, options) {\n  return this._create(id, options);\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.destroy = function(id) {\n  return this._destroy(id);\n};\n\n/**\n * @param {string} [id]\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nRtpbroadcastPlugin.prototype.list = function(id) {\n  return this._list(id);\n};\n\n/**\n * @param {string} id\n * @param {Object} [answerOptions] {@link createAnswer}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.watch = function(id, answerOptions) {\n  return this._watch(id, null, answerOptions);\n};\n\n/**\n * @param {string} id\n * @param {Array} streams\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.watchUDP = function(id, streams) {\n  return this.sendWithTransaction({body: {request: 'watch-udp', id: id, streams: streams}});\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.start = function() {\n  return this._start();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.stop = function() {\n  return this._stop();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.pause = function() {\n  return this._pause();\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.switch = function(id) {\n  return this._switch(id);\n};\n\n/**\n * @param {number} index\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.switchSource = function(index) {\n  return this.sendWithTransaction({body: {request: 'switch-source', index: index}});\n};\n\n/**\n * @param {boolean} enabled\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.superuser = function(enabled) {\n  return this.sendWithTransaction({body: {request: 'superuser', enabled: enabled}});\n};\n\n/**\n * @inheritDoc\n */\nRtpbroadcastPlugin.prototype.getResponseAlias = function() {\n  return 'streaming';\n};\n\nmodule.exports = RtpbroadcastPlugin;\n\n},{\"../../helpers\":21,\"../../plugin\":25,\"../media-stream-plugin\":35}],39:[function(require,module,exports){\nvar Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaStreamPlugin = require('../media-stream-plugin');\n\nfunction StreamingPlugin() {\n  StreamingPlugin.super_.apply(this, arguments);\n}\n\nStreamingPlugin.NAME = 'janus.plugin.streaming';\nHelpers.inherits(StreamingPlugin, MediaStreamPlugin);\nPlugin.register(StreamingPlugin.NAME, StreamingPlugin);\n\n/**\n * @see https://janus.conf.meetecho.com/docs/janus__streaming_8c.html\n * @param {number} id\n * @param {Object} [options]\n * @param {string} [options.type]\n * @param {string} [options.secret]\n * @param {string} [options.pin]\n * @param {boolean} [options.permanent]\n * @param {string} [options.description]\n * @param {boolean} [options.is_private]\n * @param {string} [options.filename]\n * @param {boolean} [options.audio]\n * @param {boolean} [options.video]\n * @param {number} [options.audioport]\n * @param {string} [options.audiomcast]\n * @param {number} [options.audiopt]\n * @param {string} [options.audiortpmap]\n * @param {string} [options.audiofmtp]\n * @param {number} [options.videoport]\n * @param {string} [options.videomcast]\n * @param {number} [options.videopt]\n * @param {string} [options.videortpmap]\n * @param {string} [options.videofmtp]\n * @param {boolean} [options.videobufferkf]\n * @param {string} [options.url]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.create = function(id, options) {\n  return this._create(id, options);\n};\n\n/**\n * @param {number} id\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.destroy = function(id, options) {\n  return this._destroy(id, options);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.list = function() {\n  return this._list();\n};\n\n/**\n * @param {number} id\n * @param {Object} [watchOptions]\n * @param {string} [watchOptions.pin]\n * @param {Object} [answerOptions] {@link createAnswer}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.watch = function(id, watchOptions, answerOptions) {\n  return this._watch(id, watchOptions, answerOptions);\n};\n\n/**\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.start = function(jsep) {\n  return this._start(jsep);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.stop = function() {\n  return this._stop();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.pause = function() {\n  return this._pause();\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options] {@link watch}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.switch = function(mountpointId, options) {\n  return this._switch(mountpointId, options);\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.enable = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'enable',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body})\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.disable = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'disable',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body})\n    .then(function() {\n      if (this.hasCurrentEntity(mountpointId)) {\n        this.resetCurrentEntity();\n      }\n    }.bind(this));\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {string} [options.action]\n * @param {string} [options.audio]\n * @param {string} [options.video]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.recording = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'recording',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body});\n};\n\n/**\n * @inheritDoc\n */\nStreamingPlugin.prototype.getResponseAlias = function() {\n  return 'streaming';\n};\n\nmodule.exports = StreamingPlugin;\n\n},{\"../../helpers\":21,\"../../plugin\":25,\"../media-stream-plugin\":35}],40:[function(require,module,exports){\nvar Promise = require('bluebird');\nvar WebSocket = require('websocket').w3cwebsocket;\nvar EventEmitter = require('./event-emitter');\nvar Helpers = require('./helpers');\n\n/**\n * @param {WebSocket} [webSocket]\n * @constructor\n * @extends EventEmitter\n */\nfunction WebsocketConnection(webSocket) {\n  WebsocketConnection.super_.call(this);\n  /** @type {WebSocket} */\n  this._webSocket = webSocket;\n\n  if (this._webSocket) {\n    this._onOpen(this._webSocket);\n  }\n}\n\nHelpers.inherits(WebsocketConnection, EventEmitter);\n\n/**\n * @param {string} address\n * @param {string} protocol\n * @returns {Promise}\n * @fulfilled {WebsocketConnection} websocketConnection - when it is opened\n */\nWebsocketConnection.prototype.open = function(address, protocol) {\n  var self = this;\n  return new Promise(function(resolve, reject) {\n    var webSocket = new WebSocket(address, protocol || '');\n    webSocket.onerror = reject;\n    webSocket.onclose = reject;\n    webSocket.onopen = function() {\n      webSocket.onerror = null;\n      webSocket.onclose = null;\n      self._onOpen(webSocket);\n      resolve(self);\n    };\n  });\n};\n\n/**\n * @param {Object|WebSocket} webSocket\n * @protected\n */\nWebsocketConnection.prototype._onOpen = function(webSocket) {\n  this._webSocket = webSocket;\n  if (typeof webSocket.readyState !== 'undefined') {\n    this._installW3cListeners();\n  }\n  else if (webSocket.on) {\n    this._installNodeListeners();\n  }\n  else {\n    throw new Error('Trying to instantiate WebsocketConnection with unknown Websocket');\n  }\n  this.emit('open');\n};\n\n/**\n * @protected\n */\nWebsocketConnection.prototype._installW3cListeners = function() {\n  this._webSocket.onmessage = function(message) {\n    var parsedMessage = JSON.parse(message.data);\n    this.onMessage(parsedMessage);\n  }.bind(this);\n\n  this._webSocket.onerror = function(error) {\n    this.emit('error', error);\n  }.bind(this);\n\n  this._webSocket.onclose = function() {\n    this._close();\n  }.bind(this);\n};\n\n/**\n * @protected\n */\nWebsocketConnection.prototype._installNodeListeners = function() {\n  this._webSocket.on('message', function(message) {\n    var parsedMessage = JSON.parse(message);\n    this.onMessage(parsedMessage);\n  }.bind(this));\n\n  this._webSocket.on('error', function(error) {\n    this.emit('error', error);\n  }.bind(this));\n\n  this._webSocket.on('close', function() {\n    this._close();\n  }.bind(this));\n};\n\n/**\n * @returns {boolean}\n */\nWebsocketConnection.prototype.isOpened = function() {\n  return this._webSocket && this._webSocket.OPEN === this._webSocket.readyState;\n};\n\n/**\n * @returns {boolean}\n */\nWebsocketConnection.prototype.isClosed = function() {\n  return !this._webSocket || this._webSocket.CLOSED === this._webSocket.readyState || this._webSocket.CLOSING === this._webSocket.readyState;\n};\n\n/**\n * @returns {Promise}\n */\nWebsocketConnection.prototype.close = function() {\n  if (this.isClosed()) {\n    return Promise.resolve();\n  }\n  return new Promise(function(resolve) {\n    this._close();\n    resolve();\n  }.bind(this));\n};\n\nWebsocketConnection.prototype._close = function() {\n  if (!this.isClosed()) {\n    if (this._webSocket.terminate) {\n      this._webSocket.terminate();\n    } else {\n      this._webSocket.close();\n    }\n  }\n  this.emit('close');\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nWebsocketConnection.prototype.send = function(message) {\n  if (this.isOpened()) {\n    return this._send(message);\n  }\n  else if (!this._webSocket || this._webSocket.CONNECTING === this._webSocket.readyState) {\n    return this._queue(message);\n  }\n  else {\n    return Promise.reject(new Error('Can not send message over closed connection'));\n  }\n};\n\n/**\n * @param {Object} message\n */\nWebsocketConnection.prototype.onMessage = function(message) {\n  try {\n    this.emit('message', message);\n  } catch (error) {\n    this.emit('error', error);\n  }\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @protected\n */\nWebsocketConnection.prototype._queue = function(message) {\n  var self = this;\n  return new Promise(function(resolve) {\n    self.once('open', function() {\n      self._send(message).then(function() {\n        resolve();\n      });\n    });\n  });\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @protected\n */\nWebsocketConnection.prototype._send = function(message) {\n  return new Promise(function(resolve) {\n    this._webSocket.send(JSON.stringify(message));\n    resolve();\n  }.bind(this));\n};\n\nmodule.exports = WebsocketConnection;\n\n},{\"./event-emitter\":20,\"./helpers\":21,\"bluebird\":1,\"websocket\":14}]},{},[22])(22)\n});\n\n","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2015 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.4.7\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n    if (self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n}\n\nfunction Promise(executor) {\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    if (executor !== INTERNAL) {\n        check(this, executor);\n        this._resolveFromExecutor(executor);\n    }\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"expecting an object but got \" +\n                    \"A catch statement predicate \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.4.7\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n                toggleScheduled = true;\n                div2.classList.toggle(\"foo\");\n            };\n\n            return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }","/*!\r\n * EventEmitter2\r\n * https://github.com/hij1nx/EventEmitter2\r\n *\r\n * Copyright (c) 2013 hij1nx\r\n * Licensed under the MIT license.\r\n */\r\n;!function(undefined) {\r\n\r\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n  };\r\n  var defaultMaxListeners = 10;\r\n\r\n  function init() {\r\n    this._events = {};\r\n    if (this._conf) {\r\n      configure.call(this, this._conf);\r\n    }\r\n  }\r\n\r\n  function configure(conf) {\r\n    if (conf) {\r\n      this._conf = conf;\r\n\r\n      conf.delimiter && (this.delimiter = conf.delimiter);\r\n      this._events.maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\r\n      conf.wildcard && (this.wildcard = conf.wildcard);\r\n      conf.newListener && (this.newListener = conf.newListener);\r\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\r\n\r\n      if (this.wildcard) {\r\n        this.listenerTree = {};\r\n      }\r\n    } else {\r\n      this._events.maxListeners = defaultMaxListeners;\r\n    }\r\n  }\r\n\r\n  function logPossibleMemoryLeak(count, eventName) {\r\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\r\n        'leak detected. %d listeners added. ' +\r\n        'Use emitter.setMaxListeners() to increase limit.';\r\n\r\n    if(this.verboseMemoryLeak){\r\n      errorMsg += ' Event name: %s.';\r\n      console.error(errorMsg, count, eventName);\r\n    } else {\r\n      console.error(errorMsg, count);\r\n    }\r\n\r\n    if (console.trace){\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  function EventEmitter(conf) {\r\n    this._events = {};\r\n    this.newListener = false;\r\n    this.verboseMemoryLeak = false;\r\n    configure.call(this, conf);\r\n  }\r\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\r\n\r\n  //\r\n  // Attention, function return type now is array, always !\r\n  // It has zero elements if no any matches found and one or more\r\n  // elements (leafs) if there are matches\r\n  //\r\n  function searchListenerTree(handlers, type, tree, i) {\r\n    if (!tree) {\r\n      return [];\r\n    }\r\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\r\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\r\n    if (i === typeLength && tree._listeners) {\r\n      //\r\n      // If at the end of the event(s) list and the tree has listeners\r\n      // invoke those listeners.\r\n      //\r\n      if (typeof tree._listeners === 'function') {\r\n        handlers && handlers.push(tree._listeners);\r\n        return [tree];\r\n      } else {\r\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\r\n          handlers && handlers.push(tree._listeners[leaf]);\r\n        }\r\n        return [tree];\r\n      }\r\n    }\r\n\r\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\r\n      //\r\n      // If the event emitted is '*' at this part\r\n      // or there is a concrete match at this patch\r\n      //\r\n      if (currentType === '*') {\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\r\n          }\r\n        }\r\n        return listeners;\r\n      } else if(currentType === '**') {\r\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\r\n        if(endReached && tree._listeners) {\r\n          // The next element has a _listeners, add it to the handlers.\r\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\r\n        }\r\n\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            if(branch === '*' || branch === '**') {\r\n              if(tree[branch]._listeners && !endReached) {\r\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\r\n              }\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            } else if(branch === nextType) {\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\r\n            } else {\r\n              // No match on this one, shift into the tree but not in the type array.\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            }\r\n          }\r\n        }\r\n        return listeners;\r\n      }\r\n\r\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\r\n    }\r\n\r\n    xTree = tree['*'];\r\n    if (xTree) {\r\n      //\r\n      // If the listener tree will allow any match for this part,\r\n      // then recursively explore all branches of the tree\r\n      //\r\n      searchListenerTree(handlers, type, xTree, i+1);\r\n    }\r\n\r\n    xxTree = tree['**'];\r\n    if(xxTree) {\r\n      if(i < typeLength) {\r\n        if(xxTree._listeners) {\r\n          // If we have a listener on a '**', it will catch all, so add its handler.\r\n          searchListenerTree(handlers, type, xxTree, typeLength);\r\n        }\r\n\r\n        // Build arrays of matching next branches and others.\r\n        for(branch in xxTree) {\r\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\r\n            if(branch === nextType) {\r\n              // We know the next element will match, so jump twice.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\r\n            } else if(branch === currentType) {\r\n              // Current node matches, move into the tree.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\r\n            } else {\r\n              isolatedBranch = {};\r\n              isolatedBranch[branch] = xxTree[branch];\r\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\r\n            }\r\n          }\r\n        }\r\n      } else if(xxTree._listeners) {\r\n        // We have reached the end and still on a '**'\r\n        searchListenerTree(handlers, type, xxTree, typeLength);\r\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\r\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\r\n      }\r\n    }\r\n\r\n    return listeners;\r\n  }\r\n\r\n  function growListenerTree(type, listener) {\r\n\r\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n\r\n    //\r\n    // Looks for two consecutive '**', if so, don't add the event at all.\r\n    //\r\n    for(var i = 0, len = type.length; i+1 < len; i++) {\r\n      if(type[i] === '**' && type[i+1] === '**') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var tree = this.listenerTree;\r\n    var name = type.shift();\r\n\r\n    while (name !== undefined) {\r\n\r\n      if (!tree[name]) {\r\n        tree[name] = {};\r\n      }\r\n\r\n      tree = tree[name];\r\n\r\n      if (type.length === 0) {\r\n\r\n        if (!tree._listeners) {\r\n          tree._listeners = listener;\r\n        }\r\n        else {\r\n          if (typeof tree._listeners === 'function') {\r\n            tree._listeners = [tree._listeners];\r\n          }\r\n\r\n          tree._listeners.push(listener);\r\n\r\n          if (\r\n            !tree._listeners.warned &&\r\n            this._events.maxListeners > 0 &&\r\n            tree._listeners.length > this._events.maxListeners\r\n          ) {\r\n            tree._listeners.warned = true;\r\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      name = type.shift();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // By default EventEmitters will print a warning if more than\r\n  // 10 listeners are added to it. This is a useful default which\r\n  // helps finding memory leaks.\r\n  //\r\n  // Obviously not all Emitters should be limited to 10. This function allows\r\n  // that to be increased. Set to zero for unlimited.\r\n\r\n  EventEmitter.prototype.delimiter = '.';\r\n\r\n  EventEmitter.prototype.setMaxListeners = function(n) {\r\n    if (n !== undefined) {\r\n      this._events || init.call(this);\r\n      this._events.maxListeners = n;\r\n      if (!this._conf) this._conf = {};\r\n      this._conf.maxListeners = n;\r\n    }\r\n  };\r\n\r\n  EventEmitter.prototype.event = '';\r\n\r\n  EventEmitter.prototype.once = function(event, fn) {\r\n    this.many(event, 1, fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.many = function(event, ttl, fn) {\r\n    var self = this;\r\n\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('many only accepts instances of Function');\r\n    }\r\n\r\n    function listener() {\r\n      if (--ttl === 0) {\r\n        self.off(event, listener);\r\n      }\r\n      fn.apply(this, arguments);\r\n    }\r\n\r\n    listener._origin = fn;\r\n\r\n    this.on(event, listener);\r\n\r\n    return self;\r\n  };\r\n\r\n  EventEmitter.prototype.emit = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n      if (!this._events.newListener) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all && this._all.length) {\r\n      handler = this._all.slice();\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 0; j < al; j++) args[j] = arguments[j];\r\n      }\r\n\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this, type);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, type, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, type, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n      if (typeof handler === 'function') {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler.call(this);\r\n          break;\r\n        case 2:\r\n          handler.call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler.call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          args = new Array(al - 1);\r\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n          handler.apply(this, args);\r\n        }\r\n        return true;\r\n      } else if (handler) {\r\n        // need to make copy of handlers because list can change in the middle\r\n        // of emit call\r\n        handler = handler.slice();\r\n      }\r\n    }\r\n\r\n    if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n      return true;\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return !!this._all;\r\n  };\r\n\r\n  EventEmitter.prototype.emitAsync = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n        if (!this._events.newListener) { return Promise.resolve([false]); }\r\n    }\r\n\r\n    var promises= [];\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all) {\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 1; j < al; j++) args[j] = arguments[j];\r\n      }\r\n      for (i = 0, l = this._all.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(this._all[i].call(this, type));\r\n          break;\r\n        case 2:\r\n          promises.push(this._all[i].call(this, type, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(this._all[i].apply(this, args));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n    }\r\n\r\n    if (typeof handler === 'function') {\r\n      this.event = type;\r\n      switch (al) {\r\n      case 1:\r\n        promises.push(handler.call(this));\r\n        break;\r\n      case 2:\r\n        promises.push(handler.call(this, arguments[1]));\r\n        break;\r\n      case 3:\r\n        promises.push(handler.call(this, arguments[1], arguments[2]));\r\n        break;\r\n      default:\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n        promises.push(handler.apply(this, args));\r\n      }\r\n    } else if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(handler[i].call(this));\r\n          break;\r\n        case 2:\r\n          promises.push(handler[i].call(this, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(handler[i].apply(this, args));\r\n        }\r\n      }\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\r\n      } else {\r\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  };\r\n\r\n  EventEmitter.prototype.on = function(type, listener) {\r\n    if (typeof type === 'function') {\r\n      this.onAny(type);\r\n      return this;\r\n    }\r\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('on only accepts instances of Function');\r\n    }\r\n    this._events || init.call(this);\r\n\r\n    // To avoid recursion in the case that type == \"newListeners\"! Before\r\n    // adding it to the listeners, first emit \"newListeners\".\r\n    this.emit('newListener', type, listener);\r\n\r\n    if (this.wildcard) {\r\n      growListenerTree.call(this, type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (!this._events[type]) {\r\n      // Optimize the case of one listener. Don't need the extra array object.\r\n      this._events[type] = listener;\r\n    }\r\n    else {\r\n      if (typeof this._events[type] === 'function') {\r\n        // Change to array.\r\n        this._events[type] = [this._events[type]];\r\n      }\r\n\r\n      // If we've already got an array, just append.\r\n      this._events[type].push(listener);\r\n\r\n      // Check for listener leak\r\n      if (\r\n        !this._events[type].warned &&\r\n        this._events.maxListeners > 0 &&\r\n        this._events[type].length > this._events.maxListeners\r\n      ) {\r\n        this._events[type].warned = true;\r\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.onAny = function(fn) {\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('onAny only accepts instances of Function');\r\n    }\r\n\r\n    if (!this._all) {\r\n      this._all = [];\r\n    }\r\n\r\n    // Add the function to the event listener collection.\r\n    this._all.push(fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  EventEmitter.prototype.off = function(type, listener) {\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('removeListener only takes instances of Function');\r\n    }\r\n\r\n    var handlers,leafs=[];\r\n\r\n    if(this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n    }\r\n    else {\r\n      // does not use listeners(), so no side effect of creating _events[type]\r\n      if (!this._events[type]) return this;\r\n      handlers = this._events[type];\r\n      leafs.push({_listeners:handlers});\r\n    }\r\n\r\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n      var leaf = leafs[iLeaf];\r\n      handlers = leaf._listeners;\r\n      if (isArray(handlers)) {\r\n\r\n        var position = -1;\r\n\r\n        for (var i = 0, length = handlers.length; i < length; i++) {\r\n          if (handlers[i] === listener ||\r\n            (handlers[i].listener && handlers[i].listener === listener) ||\r\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0) {\r\n          continue;\r\n        }\r\n\r\n        if(this.wildcard) {\r\n          leaf._listeners.splice(position, 1);\r\n        }\r\n        else {\r\n          this._events[type].splice(position, 1);\r\n        }\r\n\r\n        if (handlers.length === 0) {\r\n          if(this.wildcard) {\r\n            delete leaf._listeners;\r\n          }\r\n          else {\r\n            delete this._events[type];\r\n          }\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n\r\n        return this;\r\n      }\r\n      else if (handlers === listener ||\r\n        (handlers.listener && handlers.listener === listener) ||\r\n        (handlers._origin && handlers._origin === listener)) {\r\n        if(this.wildcard) {\r\n          delete leaf._listeners;\r\n        }\r\n        else {\r\n          delete this._events[type];\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n      }\r\n    }\r\n\r\n    function recursivelyGarbageCollect(root) {\r\n      if (root === undefined) {\r\n        return;\r\n      }\r\n      var keys = Object.keys(root);\r\n      for (var i in keys) {\r\n        var key = keys[i];\r\n        var obj = root[key];\r\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\r\n          continue;\r\n        if (Object.keys(obj).length > 0) {\r\n          recursivelyGarbageCollect(root[key]);\r\n        }\r\n        if (Object.keys(obj).length === 0) {\r\n          delete root[key];\r\n        }\r\n      }\r\n    }\r\n    recursivelyGarbageCollect(this.listenerTree);\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.offAny = function(fn) {\r\n    var i = 0, l = 0, fns;\r\n    if (fn && this._all && this._all.length > 0) {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++) {\r\n        if(fn === fns[i]) {\r\n          fns.splice(i, 1);\r\n          this.emit(\"removeListenerAny\", fn);\r\n          return this;\r\n        }\r\n      }\r\n    } else {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++)\r\n        this.emit(\"removeListenerAny\", fns[i]);\r\n      this._all = [];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\r\n\r\n  EventEmitter.prototype.removeAllListeners = function(type) {\r\n    if (arguments.length === 0) {\r\n      !this._events || init.call(this);\r\n      return this;\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n\r\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n        var leaf = leafs[iLeaf];\r\n        leaf._listeners = null;\r\n      }\r\n    }\r\n    else if (this._events) {\r\n      this._events[type] = null;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.listeners = function(type) {\r\n    if (this.wildcard) {\r\n      var handlers = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\r\n      return handlers;\r\n    }\r\n\r\n    this._events || init.call(this);\r\n\r\n    if (!this._events[type]) this._events[type] = [];\r\n    if (!isArray(this._events[type])) {\r\n      this._events[type] = [this._events[type]];\r\n    }\r\n    return this._events[type];\r\n  };\r\n\r\n  EventEmitter.prototype.listenerCount = function(type) {\r\n    return this.listeners(type).length;\r\n  };\r\n\r\n  EventEmitter.prototype.listenersAny = function() {\r\n\r\n    if(this._all) {\r\n      return this._all;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n     // AMD. Register as an anonymous module.\r\n    define(function() {\r\n      return EventEmitter;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    module.exports = EventEmitter;\r\n  }\r\n  else {\r\n    // Browser global.\r\n    window.EventEmitter2 = EventEmitter;\r\n  }\r\n}();\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\n(function() {\n  // Utils.\n  var logging = require('./utils').log;\n  var browserDetails = require('./utils').browserDetails;\n  // Export to the adapter global object visible in the browser.\n  module.exports.browserDetails = browserDetails;\n  module.exports.extractVersion = require('./utils').extractVersion;\n  module.exports.disableLog = require('./utils').disableLog;\n\n  // Comment out the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  require('./utils').disableLog(true);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'opera': // fallthrough as it uses chrome shims\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection) {\n        logging('Chrome shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia();\n      chromeShim.shimSourceObject();\n      chromeShim.shimPeerConnection();\n      chromeShim.shimOnTrack();\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n        logging('Firefox shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia();\n      firefoxShim.shimSourceObject();\n      firefoxShim.shimPeerConnection();\n      firefoxShim.shimOnTrack();\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection) {\n        logging('MS edge shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = edgeShim;\n\n      edgeShim.shimPeerConnection();\n      break;\n    case 'safari':\n      if (!safariShim) {\n        logging('Safari shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = safariShim;\n\n      safariShim.shimGetUserMedia();\n      break;\n    default:\n      logging('Unsupported browser!');\n  }\n})();\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\nvar chromeShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          var self = this;\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = {track: te.track};\n              event.streams = [e.stream];\n              self.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      // Translate iceTransportPolicy to iceTransports,\n      // see https://code.google.com/p/webrtc/issues/detail?id=4869\n      logging('PeerConnection');\n      if (pcConfig && pcConfig.iceTransportPolicy) {\n        pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n      }\n\n      var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints);\n      var origGetStats = pc.getStats.bind(pc);\n      pc.getStats = function(selector, successCallback, errorCallback) {\n        var self = this;\n        var args = arguments;\n\n        // If selector is a function then we are in the old style stats so just\n        // pass back the original getStats format to avoid breaking old users.\n        if (arguments.length > 0 && typeof selector === 'function') {\n          return origGetStats(selector, successCallback);\n        }\n\n        var fixChromeStats_ = function(response) {\n          var standardReport = {};\n          var reports = response.result();\n          reports.forEach(function(report) {\n            var standardStats = {\n              id: report.id,\n              timestamp: report.timestamp,\n              type: report.type\n            };\n            report.names().forEach(function(name) {\n              standardStats[name] = report.stat(name);\n            });\n            standardReport[standardStats.id] = standardStats;\n          });\n\n          return standardReport;\n        };\n\n        if (arguments.length >= 2) {\n          var successCallbackWrapper_ = function(response) {\n            args[1](fixChromeStats_(response));\n          };\n\n          return origGetStats.apply(this, [successCallbackWrapper_,\n              arguments[0]]);\n        }\n\n        // promise-support\n        return new Promise(function(resolve, reject) {\n          if (args.length === 1 && typeof selector === 'object') {\n            origGetStats.apply(self,\n                [function(response) {\n                  resolve.apply(null, [fixChromeStats_(response)]);\n                }, reject]);\n          } else {\n            origGetStats.apply(self, [resolve, reject]);\n          }\n        });\n      };\n\n      return pc;\n    };\n    window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n\n    // wrap static methods. Currently just generateCertificate.\n    if (webkitRTCPeerConnection.generateCertificate) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return webkitRTCPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    // add promise support\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = webkitRTCPeerConnection.prototype[method];\n      webkitRTCPeerConnection.prototype[method] = function() {\n        var self = this;\n        if (arguments.length < 1 || (arguments.length === 1 &&\n            typeof(arguments[0]) === 'object')) {\n          var opts = arguments.length === 1 ? arguments[0] : undefined;\n          return new Promise(function(resolve, reject) {\n            nativeMethod.apply(self, [resolve, reject, opts]);\n          });\n        }\n        return nativeMethod.apply(this, arguments);\n      };\n    });\n\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = webkitRTCPeerConnection.prototype[method];\n          webkitRTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            var self = this;\n            args[0] = new ((method === 'addIceCandidate')?\n                RTCIceCandidate : RTCSessionDescription)(args[0]);\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [args[0],\n                  function() {\n                    resolve();\n                    if (args.length >= 2) {\n                      args[1].apply(null, []);\n                    }\n                  },\n                  function(err) {\n                    reject(err);\n                    if (args.length >= 3) {\n                      args[2].apply(null, [err]);\n                    }\n                  }]\n                );\n            });\n          };\n        });\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    if (browserDetails.version >= 43) {\n      element.srcObject = stream;\n    } else if (typeof element.src !== 'undefined') {\n      element.src = URL.createObjectURL(stream);\n    } else {\n      logging('Error attaching stream to element.');\n    }\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    if (browserDetails.version >= 43) {\n      to.srcObject = from.srcObject;\n    } else {\n      to.src = from.src;\n    }\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia'),\n  attachMediaStream: chromeShim.attachMediaStream,\n  reattachMediaStream: chromeShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\n\n// Expose public methods.\nmodule.exports = function() {\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints.audio) {\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints.video) {\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return navigator.webkitGetUserMedia(constraints, onSuccess, onError);\n  };\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                      kind: kinds[device.kind],\n                      deviceId: device.id,\n                      groupId: ''};\n            }));\n          });\n        });\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (c) {\n        logging('spec:   ' + JSON.stringify(c)); // whitespace for alignment\n        c.audio = constraintsToChrome_(c.audio);\n        c.video = constraintsToChrome_(c.video);\n        logging('chrome: ' + JSON.stringify(c));\n      }\n      return origGetUserMedia(c);\n    }.bind(this);\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      default: // Unknown extensions are silently ignored.\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n       ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type + ' ' + fb.parameter +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var fpLine = lines.filter(function(line) {\n    return line.indexOf('a=fingerprint:') === 0;\n  })[0].substr(14);\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  var dtlsParameters = {\n    role: 'auto',\n    fingerprints: [{\n      algorithm: fpLine.split(' ')[0],\n      value: fpLine.split(' ')[1]\n    }]\n  };\n  return dtlsParameters;\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  // FIXME: add headerExtensions, fecMechanism and rtcp.\n  sdp += 'a=rtcp-mux\\r\\n';\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(5), 10);\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\nSDPUtils.writeSessionBoilerplate = function() {\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  // FIXME: for RTX there might be multiple SSRCs. Not implemented in Edge yet.\n  if (transceiver.rtpSender) {\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\n// Expose public methods.\nmodule.exports = SDPUtils;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('./edge_sdp');\nvar logging = require('../utils').log;\n\nvar edgeShim = {\n  shimPeerConnection: function() {\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n    }\n\n    window.RTCPeerConnection = function(config) {\n      var self = this;\n\n      var _eventTarget = document.createDocumentFragment();\n      ['addEventListener', 'removeEventListener', 'dispatchEvent']\n          .forEach(function(method) {\n            self[method] = _eventTarget[method].bind(_eventTarget);\n          });\n\n      this.onicecandidate = null;\n      this.onaddstream = null;\n      this.ontrack = null;\n      this.onremovestream = null;\n      this.onsignalingstatechange = null;\n      this.oniceconnectionstatechange = null;\n      this.onnegotiationneeded = null;\n      this.ondatachannel = null;\n\n      this.localStreams = [];\n      this.remoteStreams = [];\n      this.getLocalStreams = function() {\n        return self.localStreams;\n      };\n      this.getRemoteStreams = function() {\n        return self.remoteStreams;\n      };\n\n      this.localDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.remoteDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.signalingState = 'stable';\n      this.iceConnectionState = 'new';\n      this.iceGatheringState = 'new';\n\n      this.iceOptions = {\n        gatherPolicy: 'all',\n        iceServers: []\n      };\n      if (config && config.iceTransportPolicy) {\n        switch (config.iceTransportPolicy) {\n          case 'all':\n          case 'relay':\n            this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n            break;\n          case 'none':\n            // FIXME: remove once implementation and spec have added this.\n            throw new TypeError('iceTransportPolicy \"none\" not supported');\n          default:\n            // don't set iceTransportPolicy.\n            break;\n        }\n      }\n      if (config && config.iceServers) {\n        // Edge does not like\n        // 1) stun:\n        // 2) turn: that does not have all of turn:host:port?transport=udp\n        this.iceOptions.iceServers = config.iceServers.filter(function(server) {\n          if (server && server.urls) {\n            server.urls = server.urls.filter(function(url) {\n              return url.indexOf('turn:') === 0 &&\n                  url.indexOf('transport=udp') !== -1;\n            })[0];\n            return !!server.urls;\n          }\n          return false;\n        });\n      }\n\n      // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n      // everything that is needed to describe a SDP m-line.\n      this.transceivers = [];\n\n      // since the iceGatherer is currently created in createOffer but we\n      // must not emit candidates until after setLocalDescription we buffer\n      // them in this array.\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n      var self = this;\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      // FIXME: need to apply ice candidates in a way which is async but\n      // in-order\n      this._localIceCandidatesBuffer.forEach(function(event) {\n        var end = !event.candidate || Object.keys(event.candidate).length === 0;\n        if (end) {\n          for (var j = 1; j < sections.length; j++) {\n            if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n              sections[j] += 'a=end-of-candidates\\r\\n';\n            }\n          }\n        } else if (event.candidate.candidate.indexOf('typ endOfCandidates')\n            === -1) {\n          sections[event.candidate.sdpMLineIndex + 1] +=\n              'a=' + event.candidate.candidate + '\\r\\n';\n        }\n        self.localDescription.sdp = sections.join('');\n        self.dispatchEvent(event);\n        if (self.onicecandidate !== null) {\n          self.onicecandidate(event);\n        }\n        if (!event.candidate && self.iceGatheringState !== 'complete') {\n          var complete = self.transceivers.every(function(transceiver) {\n            return transceiver.iceGatherer &&\n                transceiver.iceGatherer.state === 'completed';\n          });\n          if (complete) {\n            self.iceGatheringState = 'complete';\n          }\n        }\n      });\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      this.localStreams.push(stream.clone());\n      this._maybeFireNegotiationNeeded();\n    };\n\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var idx = this.localStreams.indexOf(stream);\n      if (idx > -1) {\n        this.localStreams.splice(idx, 1);\n        this._maybeFireNegotiationNeeded();\n      }\n    };\n\n    // Determines the intersection of local and remote capabilities.\n    window.RTCPeerConnection.prototype._getCommonCapabilities =\n        function(localCapabilities, remoteCapabilities) {\n          var commonCapabilities = {\n            codecs: [],\n            headerExtensions: [],\n            fecMechanisms: []\n          };\n          localCapabilities.codecs.forEach(function(lCodec) {\n            for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n              var rCodec = remoteCapabilities.codecs[i];\n              if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                  lCodec.clockRate === rCodec.clockRate &&\n                  lCodec.numChannels === rCodec.numChannels) {\n                // push rCodec so we reply with offerer payload type\n                commonCapabilities.codecs.push(rCodec);\n\n                // FIXME: also need to determine intersection between\n                // .rtcpFeedback and .parameters\n                break;\n              }\n            }\n          });\n\n          localCapabilities.headerExtensions\n              .forEach(function(lHeaderExtension) {\n                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                     i++) {\n                  var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                  if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                    commonCapabilities.headerExtensions.push(rHeaderExtension);\n                    break;\n                  }\n                }\n              });\n\n          // FIXME: fecMechanisms\n          return commonCapabilities;\n        };\n\n    // Create ICE gatherer, ICE transport and DTLS transport.\n    window.RTCPeerConnection.prototype._createIceAndDtlsTransports =\n        function(mid, sdpMLineIndex) {\n          var self = this;\n          var iceGatherer = new RTCIceGatherer(self.iceOptions);\n          var iceTransport = new RTCIceTransport(iceGatherer);\n          iceGatherer.onlocalcandidate = function(evt) {\n            var event = new Event('icecandidate');\n            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n            var cand = evt.candidate;\n            var end = !cand || Object.keys(cand).length === 0;\n            // Edge emits an empty object for RTCIceCandidateComplete\n            if (end) {\n              // polyfill since RTCIceGatherer.state is not implemented in\n              // Edge 10547 yet.\n              if (iceGatherer.state === undefined) {\n                iceGatherer.state = 'completed';\n              }\n\n              // Emit a candidate with type endOfCandidates to make the samples\n              // work. Edge requires addIceCandidate with this empty candidate\n              // to start checking. The real solution is to signal\n              // end-of-candidates to the other side when getting the null\n              // candidate but some apps (like the samples) don't do that.\n              event.candidate.candidate =\n                  'candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates';\n            } else {\n              // RTCIceCandidate doesn't have a component, needs to be added\n              cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n              event.candidate.candidate = SDPUtils.writeCandidate(cand);\n            }\n\n            var complete = self.transceivers.every(function(transceiver) {\n              return transceiver.iceGatherer &&\n                  transceiver.iceGatherer.state === 'completed';\n            });\n\n            // Emit candidate if localDescription is set.\n            // Also emits null candidate when all gatherers are complete.\n            switch (self.iceGatheringState) {\n              case 'new':\n                self._localIceCandidatesBuffer.push(event);\n                if (end && complete) {\n                  self._localIceCandidatesBuffer.push(\n                      new Event('icecandidate'));\n                }\n                break;\n              case 'gathering':\n                self._emitBufferedCandidates();\n                self.dispatchEvent(event);\n                if (self.onicecandidate !== null) {\n                  self.onicecandidate(event);\n                }\n                if (complete) {\n                  self.dispatchEvent(new Event('icecandidate'));\n                  if (self.onicecandidate !== null) {\n                    self.onicecandidate(new Event('icecandidate'));\n                  }\n                  self.iceGatheringState = 'complete';\n                }\n                break;\n              case 'complete':\n                // should not happen... currently!\n                break;\n              default: // no-op.\n                break;\n            }\n          };\n          iceTransport.onicestatechange = function() {\n            self._updateConnectionState();\n          };\n\n          var dtlsTransport = new RTCDtlsTransport(iceTransport);\n          dtlsTransport.ondtlsstatechange = function() {\n            self._updateConnectionState();\n          };\n          dtlsTransport.onerror = function() {\n            // onerror does not set state to failed by itself.\n            dtlsTransport.state = 'failed';\n            self._updateConnectionState();\n          };\n\n          return {\n            iceGatherer: iceGatherer,\n            iceTransport: iceTransport,\n            dtlsTransport: dtlsTransport\n          };\n        };\n\n    // Start the RTP Sender and Receiver for a transceiver.\n    window.RTCPeerConnection.prototype._transceive = function(transceiver,\n        send, recv) {\n      var params = this._getCommonCapabilities(transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n      if (send && transceiver.rtpSender) {\n        params.encodings = transceiver.sendEncodingParameters;\n        params.rtcp = {\n          cname: SDPUtils.localCName\n        };\n        if (transceiver.recvEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpSender.send(params);\n      }\n      if (recv && transceiver.rtpReceiver) {\n        params.encodings = transceiver.recvEncodingParameters;\n        params.rtcp = {\n          cname: transceiver.cname\n        };\n        if (transceiver.sendEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpReceiver.receive(params);\n      }\n    };\n\n    window.RTCPeerConnection.prototype.setLocalDescription =\n        function(description) {\n          var self = this;\n          var sections;\n          var sessionpart;\n          if (description.type === 'offer') {\n            // FIXME: What was the purpose of this empty if statement?\n            // if (!this._pendingOffer) {\n            // } else {\n            if (this._pendingOffer) {\n              // VERY limited support for SDP munging. Limited to:\n              // * changing the order of codecs\n              sections = SDPUtils.splitSections(description.sdp);\n              sessionpart = sections.shift();\n              sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var caps = SDPUtils.parseRtpParameters(mediaSection);\n                self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n              });\n              this.transceivers = this._pendingOffer;\n              delete this._pendingOffer;\n            }\n          } else if (description.type === 'answer') {\n            sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n            sessionpart = sections.shift();\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n              var transceiver = self.transceivers[sdpMLineIndex];\n              var iceGatherer = transceiver.iceGatherer;\n              var iceTransport = transceiver.iceTransport;\n              var dtlsTransport = transceiver.dtlsTransport;\n              var localCapabilities = transceiver.localCapabilities;\n              var remoteCapabilities = transceiver.remoteCapabilities;\n              var rejected = mediaSection.split('\\n', 1)[0]\n                  .split(' ', 2)[1] === '0';\n\n              if (!rejected) {\n                var remoteIceParameters = SDPUtils.getIceParameters(\n                    mediaSection, sessionpart);\n                iceTransport.start(iceGatherer, remoteIceParameters,\n                    'controlled');\n\n                var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                    mediaSection, sessionpart);\n                dtlsTransport.start(remoteDtlsParameters);\n\n                // Calculate intersection of capabilities.\n                var params = self._getCommonCapabilities(localCapabilities,\n                    remoteCapabilities);\n\n                // Start the RTCRtpSender. The RTCRtpReceiver for this\n                // transceiver has already been started in setRemoteDescription.\n                self._transceive(transceiver,\n                    params.codecs.length > 0,\n                    false);\n              }\n            });\n          }\n\n          this.localDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-local-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n\n          // If a success callback was provided, emit ICE candidates after it\n          // has been executed. Otherwise, emit callback after the Promise is\n          // resolved.\n          var hasCallback = arguments.length > 1 &&\n            typeof arguments[1] === 'function';\n          if (hasCallback) {\n            var cb = arguments[1];\n            window.setTimeout(function() {\n              cb();\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              self._emitBufferedCandidates();\n            }, 0);\n          }\n          var p = Promise.resolve();\n          p.then(function() {\n            if (!hasCallback) {\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              // Usually candidates will be emitted earlier.\n              window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n            }\n          });\n          return p;\n        };\n\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n        function(description) {\n          var self = this;\n          var stream = new MediaStream();\n          var receiverList = [];\n          var sections = SDPUtils.splitSections(description.sdp);\n          var sessionpart = sections.shift();\n          sections.forEach(function(mediaSection, sdpMLineIndex) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].substr(2).split(' ');\n            var kind = mline[0];\n            var rejected = mline[1] === '0';\n            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\n            var transceiver;\n            var iceGatherer;\n            var iceTransport;\n            var dtlsTransport;\n            var rtpSender;\n            var rtpReceiver;\n            var sendEncodingParameters;\n            var recvEncodingParameters;\n            var localCapabilities;\n\n            var track;\n            // FIXME: ensure the mediaSection has rtcp-mux set.\n            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n            var remoteIceParameters;\n            var remoteDtlsParameters;\n            if (!rejected) {\n              remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                  sessionpart);\n              remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                  sessionpart);\n            }\n            recvEncodingParameters =\n                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:');\n            if (mid.length) {\n              mid = mid[0].substr(6);\n            } else {\n              mid = SDPUtils.generateIdentifier();\n            }\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                  return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                  return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n              cname = remoteSsrc.value;\n            }\n\n            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                'a=end-of-candidates').length > 0;\n            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                .map(function(cand) {\n                  return SDPUtils.parseCandidate(cand);\n                })\n                .filter(function(cand) {\n                  return cand.component === '1';\n                });\n            if (description.type === 'offer' && !rejected) {\n              var transports = self._createIceAndDtlsTransports(mid,\n                  sdpMLineIndex);\n              if (isComplete) {\n                transports.iceTransport.setRemoteCandidates(cands);\n              }\n\n              localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n              sendEncodingParameters = [{\n                ssrc: (2 * sdpMLineIndex + 2) * 1001\n              }];\n\n              rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n\n              track = rtpReceiver.track;\n              receiverList.push([track, rtpReceiver]);\n              // FIXME: not correct when there are multiple streams but that is\n              // not currently supported in this shim.\n              stream.addTrack(track);\n\n              // FIXME: look at direction.\n              if (self.localStreams.length > 0 &&\n                  self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n                // FIXME: actually more complicated, needs to match types etc\n                var localtrack = self.localStreams[0]\n                    .getTracks()[sdpMLineIndex];\n                rtpSender = new RTCRtpSender(localtrack,\n                    transports.dtlsTransport);\n              }\n\n              self.transceivers[sdpMLineIndex] = {\n                iceGatherer: transports.iceGatherer,\n                iceTransport: transports.iceTransport,\n                dtlsTransport: transports.dtlsTransport,\n                localCapabilities: localCapabilities,\n                remoteCapabilities: remoteCapabilities,\n                rtpSender: rtpSender,\n                rtpReceiver: rtpReceiver,\n                kind: kind,\n                mid: mid,\n                cname: cname,\n                sendEncodingParameters: sendEncodingParameters,\n                recvEncodingParameters: recvEncodingParameters\n              };\n              // Start the RTCRtpReceiver now. The RTPSender is started in\n              // setLocalDescription.\n              self._transceive(self.transceivers[sdpMLineIndex],\n                  false,\n                  direction === 'sendrecv' || direction === 'sendonly');\n            } else if (description.type === 'answer' && !rejected) {\n              transceiver = self.transceivers[sdpMLineIndex];\n              iceGatherer = transceiver.iceGatherer;\n              iceTransport = transceiver.iceTransport;\n              dtlsTransport = transceiver.dtlsTransport;\n              rtpSender = transceiver.rtpSender;\n              rtpReceiver = transceiver.rtpReceiver;\n              sendEncodingParameters = transceiver.sendEncodingParameters;\n              localCapabilities = transceiver.localCapabilities;\n\n              self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                  recvEncodingParameters;\n              self.transceivers[sdpMLineIndex].remoteCapabilities =\n                  remoteCapabilities;\n              self.transceivers[sdpMLineIndex].cname = cname;\n\n              if (isComplete) {\n                iceTransport.setRemoteCandidates(cands);\n              }\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  'controlling');\n              dtlsTransport.start(remoteDtlsParameters);\n\n              self._transceive(transceiver,\n                  direction === 'sendrecv' || direction === 'recvonly',\n                  direction === 'sendrecv' || direction === 'sendonly');\n\n              if (rtpReceiver &&\n                  (direction === 'sendrecv' || direction === 'sendonly')) {\n                track = rtpReceiver.track;\n                receiverList.push([track, rtpReceiver]);\n                stream.addTrack(track);\n              } else {\n                // FIXME: actually the receiver should be created later.\n                delete transceiver.rtpReceiver;\n              }\n            }\n          });\n\n          this.remoteDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-remote-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n          if (stream.getTracks().length) {\n            self.remoteStreams.push(stream);\n            window.setTimeout(function() {\n              var event = new Event('addstream');\n              event.stream = stream;\n              self.dispatchEvent(event);\n              if (self.onaddstream !== null) {\n                window.setTimeout(function() {\n                  self.onaddstream(event);\n                }, 0);\n              }\n\n              receiverList.forEach(function(item) {\n                var track = item[0];\n                var receiver = item[1];\n                var trackEvent = new Event('track');\n                trackEvent.track = track;\n                trackEvent.receiver = receiver;\n                trackEvent.streams = [stream];\n                self.dispatchEvent(event);\n                if (self.ontrack !== null) {\n                  window.setTimeout(function() {\n                    self.ontrack(trackEvent);\n                  }, 0);\n                }\n              });\n            }, 0);\n          }\n          if (arguments.length > 1 && typeof arguments[1] === 'function') {\n            window.setTimeout(arguments[1], 0);\n          }\n          return Promise.resolve();\n        };\n\n    window.RTCPeerConnection.prototype.close = function() {\n      this.transceivers.forEach(function(transceiver) {\n        /* not yet\n        if (transceiver.iceGatherer) {\n          transceiver.iceGatherer.close();\n        }\n        */\n        if (transceiver.iceTransport) {\n          transceiver.iceTransport.stop();\n        }\n        if (transceiver.dtlsTransport) {\n          transceiver.dtlsTransport.stop();\n        }\n        if (transceiver.rtpSender) {\n          transceiver.rtpSender.stop();\n        }\n        if (transceiver.rtpReceiver) {\n          transceiver.rtpReceiver.stop();\n        }\n      });\n      // FIXME: clean up tracks, local streams, remote streams, etc\n      this._updateSignalingState('closed');\n    };\n\n    // Update the signaling state.\n    window.RTCPeerConnection.prototype._updateSignalingState =\n        function(newState) {\n          this.signalingState = newState;\n          var event = new Event('signalingstatechange');\n          this.dispatchEvent(event);\n          if (this.onsignalingstatechange !== null) {\n            this.onsignalingstatechange(event);\n          }\n        };\n\n    // Determine whether to fire the negotiationneeded event.\n    window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded =\n        function() {\n          // Fire away (for now).\n          var event = new Event('negotiationneeded');\n          this.dispatchEvent(event);\n          if (this.onnegotiationneeded !== null) {\n            this.onnegotiationneeded(event);\n          }\n        };\n\n    // Update the connection state.\n    window.RTCPeerConnection.prototype._updateConnectionState = function() {\n      var self = this;\n      var newState;\n      var states = {\n        'new': 0,\n        closed: 0,\n        connecting: 0,\n        checking: 0,\n        connected: 0,\n        completed: 0,\n        failed: 0\n      };\n      this.transceivers.forEach(function(transceiver) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      });\n      // ICETransport.completed and connected are the same for this purpose.\n      states.connected += states.completed;\n\n      newState = 'new';\n      if (states.failed > 0) {\n        newState = 'failed';\n      } else if (states.connecting > 0 || states.checking > 0) {\n        newState = 'connecting';\n      } else if (states.disconnected > 0) {\n        newState = 'disconnected';\n      } else if (states.new > 0) {\n        newState = 'new';\n      } else if (states.connected > 0 || states.completed > 0) {\n        newState = 'connected';\n      }\n\n      if (newState !== self.iceConnectionState) {\n        self.iceConnectionState = newState;\n        var event = new Event('iceconnectionstatechange');\n        this.dispatchEvent(event);\n        if (this.oniceconnectionstatechange !== null) {\n          this.oniceconnectionstatechange(event);\n        }\n      }\n    };\n\n    window.RTCPeerConnection.prototype.createOffer = function() {\n      var self = this;\n      if (this._pendingOffer) {\n        throw new Error('createOffer called while there is a pending offer.');\n      }\n      var offerOptions;\n      if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n        offerOptions = arguments[0];\n      } else if (arguments.length === 3) {\n        offerOptions = arguments[2];\n      }\n\n      var tracks = [];\n      var numAudioTracks = 0;\n      var numVideoTracks = 0;\n      // Default to sendrecv.\n      if (this.localStreams.length) {\n        numAudioTracks = this.localStreams[0].getAudioTracks().length;\n        numVideoTracks = this.localStreams[0].getVideoTracks().length;\n      }\n      // Determine number of audio and video tracks we need to send/recv.\n      if (offerOptions) {\n        // Reject Chrome legacy constraints.\n        if (offerOptions.mandatory || offerOptions.optional) {\n          throw new TypeError(\n              'Legacy mandatory/optional constraints not supported.');\n        }\n        if (offerOptions.offerToReceiveAudio !== undefined) {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n        if (offerOptions.offerToReceiveVideo !== undefined) {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n      if (this.localStreams.length) {\n        // Push local streams.\n        this.localStreams[0].getTracks().forEach(function(track) {\n          tracks.push({\n            kind: track.kind,\n            track: track,\n            wantReceive: track.kind === 'audio' ?\n                numAudioTracks > 0 : numVideoTracks > 0\n          });\n          if (track.kind === 'audio') {\n            numAudioTracks--;\n          } else if (track.kind === 'video') {\n            numVideoTracks--;\n          }\n        });\n      }\n      // Create M-lines for recvonly streams.\n      while (numAudioTracks > 0 || numVideoTracks > 0) {\n        if (numAudioTracks > 0) {\n          tracks.push({\n            kind: 'audio',\n            wantReceive: true\n          });\n          numAudioTracks--;\n        }\n        if (numVideoTracks > 0) {\n          tracks.push({\n            kind: 'video',\n            wantReceive: true\n          });\n          numVideoTracks--;\n        }\n      }\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      var transceivers = [];\n      tracks.forEach(function(mline, sdpMLineIndex) {\n        // For each track, create an ice gatherer, ice transport,\n        // dtls transport, potentially rtpsender and rtpreceiver.\n        var track = mline.track;\n        var kind = mline.kind;\n        var mid = SDPUtils.generateIdentifier();\n\n        var transports = self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n        var localCapabilities = RTCRtpSender.getCapabilities(kind);\n        var rtpSender;\n        var rtpReceiver;\n\n        // generate an ssrc now, to be used later in rtpSender.send\n        var sendEncodingParameters = [{\n          ssrc: (2 * sdpMLineIndex + 1) * 1001\n        }];\n        if (track) {\n          rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n        }\n\n        if (mline.wantReceive) {\n          rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n        }\n\n        transceivers[sdpMLineIndex] = {\n          iceGatherer: transports.iceGatherer,\n          iceTransport: transports.iceTransport,\n          dtlsTransport: transports.dtlsTransport,\n          localCapabilities: localCapabilities,\n          remoteCapabilities: null,\n          rtpSender: rtpSender,\n          rtpReceiver: rtpReceiver,\n          kind: kind,\n          mid: mid,\n          sendEncodingParameters: sendEncodingParameters,\n          recvEncodingParameters: null\n        };\n        var transceiver = transceivers[sdpMLineIndex];\n        sdp += SDPUtils.writeMediaSection(transceiver,\n            transceiver.localCapabilities, 'offer', self.localStreams[0]);\n      });\n\n      this._pendingOffer = transceivers;\n      var desc = new RTCSessionDescription({\n        type: 'offer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.createAnswer = function() {\n      var self = this;\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      this.transceivers.forEach(function(transceiver) {\n        // Calculate intersection of capabilities.\n        var commonCapabilities = self._getCommonCapabilities(\n            transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n\n        sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n            'answer', self.localStreams[0]);\n      });\n\n      var desc = new RTCSessionDescription({\n        type: 'answer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n      var mLineIndex = candidate.sdpMLineIndex;\n      if (candidate.sdpMid) {\n        for (var i = 0; i < this.transceivers.length; i++) {\n          if (this.transceivers[i].mid === candidate.sdpMid) {\n            mLineIndex = i;\n            break;\n          }\n        }\n      }\n      var transceiver = this.transceivers[mLineIndex];\n      if (transceiver) {\n        var cand = Object.keys(candidate.candidate).length > 0 ?\n            SDPUtils.parseCandidate(candidate.candidate) : {};\n        // Ignore Chrome's invalid candidates since Edge does not like them.\n        if (cand.protocol === 'tcp' && cand.port === 0) {\n          return;\n        }\n        // Ignore RTCP candidates, we assume RTCP-MUX.\n        if (cand.component !== '1') {\n          return;\n        }\n        // A dirty hack to make samples work.\n        if (cand.type === 'endOfCandidates') {\n          cand = {};\n        }\n        transceiver.iceTransport.addRemoteCandidate(cand);\n\n        // update the remoteDescription.\n        var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n        sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n            : 'a=end-of-candidates') + '\\r\\n';\n        this.remoteDescription.sdp = sections.join('');\n      }\n      if (arguments.length > 1 && typeof arguments[1] === 'function') {\n        window.setTimeout(arguments[1], 0);\n      }\n      return Promise.resolve();\n    };\n\n    window.RTCPeerConnection.prototype.getStats = function() {\n      var promises = [];\n      this.transceivers.forEach(function(transceiver) {\n        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n            'dtlsTransport'].forEach(function(method) {\n              if (transceiver[method]) {\n                promises.push(transceiver[method].getStats());\n              }\n            });\n      });\n      var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n          arguments[1];\n      return new Promise(function(resolve) {\n        var results = {};\n        Promise.all(promises).then(function(res) {\n          res.forEach(function(result) {\n            Object.keys(result).forEach(function(id) {\n              results[id] = result[id];\n            });\n          });\n          if (cb) {\n            window.setTimeout(cb, 0, results);\n          }\n          resolve(results);\n        });\n      });\n    };\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    element.srcObject = stream;\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    to.srcObject = from.srcObject;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimPeerConnection: edgeShim.shimPeerConnection,\n  attachMediaStream: edgeShim.attachMediaStream,\n  reattachMediaStream: edgeShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\nvar firefoxShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = mozRTCSessionDescription;\n      window.RTCIceCandidate = mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate')?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n  },\n\n  shimGetUserMedia: function() {\n    // getUserMedia constraints shim.\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n      var constraintsToFF37_ = function(c) {\n        if (typeof c !== 'object' || c.require) {\n          return c;\n        }\n        var require = [];\n        Object.keys(c).forEach(function(key) {\n          if (key === 'require' || key === 'advanced' ||\n              key === 'mediaSource') {\n            return;\n          }\n          var r = c[key] = (typeof c[key] === 'object') ?\n              c[key] : {ideal: c[key]};\n          if (r.min !== undefined ||\n              r.max !== undefined || r.exact !== undefined) {\n            require.push(key);\n          }\n          if (r.exact !== undefined) {\n            if (typeof r.exact === 'number') {\n              r. min = r.max = r.exact;\n            } else {\n              c[key] = r.exact;\n            }\n            delete r.exact;\n          }\n          if (r.ideal !== undefined) {\n            c.advanced = c.advanced || [];\n            var oc = {};\n            if (typeof r.ideal === 'number') {\n              oc[key] = {min: r.ideal, max: r.ideal};\n            } else {\n              oc[key] = r.ideal;\n            }\n            c.advanced.push(oc);\n            delete r.ideal;\n            if (!Object.keys(r).length) {\n              delete c[key];\n            }\n          }\n        });\n        if (require.length) {\n          c.require = require;\n        }\n        return c;\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (browserDetails.version < 38) {\n        logging('spec: ' + JSON.stringify(constraints));\n        if (constraints.audio) {\n          constraints.audio = constraintsToFF37_(constraints.audio);\n        }\n        if (constraints.video) {\n          constraints.video = constraintsToFF37_(constraints.video);\n        }\n        logging('ff37: ' + JSON.stringify(constraints));\n      }\n      return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n    };\n\n    navigator.getUserMedia = getUserMedia_;\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n      return new Promise(function(resolve, reject) {\n        navigator.getUserMedia(constraints, resolve, reject);\n      });\n    };\n\n    // Shim for mediaDevices on older versions.\n    if (!navigator.mediaDevices) {\n      navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n        addEventListener: function() { },\n        removeEventListener: function() { }\n      };\n    }\n    navigator.mediaDevices.enumerateDevices =\n        navigator.mediaDevices.enumerateDevices || function() {\n          return new Promise(function(resolve) {\n            var infos = [\n              {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n              {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n            ];\n            resolve(infos);\n          });\n        };\n\n    if (browserDetails.version < 41) {\n      // Work around http://bugzil.la/1169665\n      var orgEnumerateDevices =\n          navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n      navigator.mediaDevices.enumerateDevices = function() {\n        return orgEnumerateDevices().then(undefined, function(e) {\n          if (e.name === 'NotFoundError') {\n            return [];\n          }\n          throw e;\n        });\n      };\n    }\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    element.srcObject = stream;\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    to.srcObject = from.srcObject;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia'),\n  attachMediaStream: firefoxShim.attachMediaStream,\n  reattachMediaStream: firefoxShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n  // shimOnTrack: function() { },\n\n  // TODO: DrAlex\n  // attachMediaStream: function(element, stream) { },\n  // reattachMediaStream: function(to, from) { },\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimGetUserMedia: function() {\n    navigator.getUserMedia = navigator.webkitGetUserMedia;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimGetUserMedia: safariShim.shimGetUserMedia\n  // TODO\n  // shimOnTrack: safariShim.shimOnTrack,\n  // shimPeerConnection: safariShim.shimPeerConnection,\n  // attachMediaStream: safariShim.attachMediaStream,\n  // reattachMediaStream: safariShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = false;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser, version and minVersion\n   *     properties.\n   */\n  detectBrowser: function() {\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n    result.minVersion = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/([0-9]+)\\./, 1);\n      result.minVersion = 31;\n\n    // all webkit-based browsers\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/([0-9]+)\\./, 2);\n        result.minVersion = 38;\n\n      // Safari or unknown webkit-based\n      // for the time being Safari has support for MediaStreams but not webRTC\n      } else {\n        // Safari UA substrings of interest for reference:\n        // - webkit version:           AppleWebKit/602.1.25 (also used in Op,Cr)\n        // - safari UI version:        Version/9.0.3 (unique to Safari)\n        // - safari UI webkit version: Safari/601.4.4 (also used in Op,Cr)\n        //\n        // if the webkit version and safari UI webkit versions are equals,\n        // ... this is a stable version.\n        //\n        // only the internal webkit version is important today to know if\n        // media streams are supported\n        //\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/([0-9]+)\\./, 1);\n          result.minVersion = 602;\n\n        // unknown webkit-based browser\n        } else {\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n\n    // Edge.\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n      result.minVersion = 10547;\n\n    // Default fallthrough: not supported.\n    } else {\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    // Warn if version is less than minVersion.\n    if (result.version < result.minVersion) {\n      utils.log('Browser: ' + result.browser + ' Version: ' + result.version +\n          ' < minimum supported version: ' + result.minVersion +\n          '\\n some things might not work!');\n    }\n\n    return result;\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  disableLog: utils.disableLog,\n  browserDetails: utils.detectBrowser(),\n  extractVersion: utils.extractVersion\n};\n","// created by @HenrikJoreteg\nvar prefix;\nvar version;\n\nif (window.mozRTCPeerConnection || navigator.mozGetUserMedia) {\n    prefix = 'moz';\n    version = parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1], 10);\n} else if (window.webkitRTCPeerConnection || navigator.webkitGetUserMedia) {\n    prefix = 'webkit';\n    version = navigator.userAgent.match(/Chrom(e|ium)/) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n}\n\nvar PC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\nvar IceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate;\nvar SessionDescription = window.mozRTCSessionDescription || window.RTCSessionDescription;\nvar MediaStream = window.webkitMediaStream || window.MediaStream;\nvar screenSharing = window.location.protocol === 'https:' &&\n    ((prefix === 'webkit' && version >= 26) ||\n     (prefix === 'moz' && version >= 33))\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar videoEl = document.createElement('video');\nvar supportVp8 = videoEl && videoEl.canPlayType && videoEl.canPlayType('video/webm; codecs=\"vp8\", vorbis') === \"probably\";\nvar getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia;\n\n// export support flags and constructors.prototype && PC\nmodule.exports = {\n    prefix: prefix,\n    browserVersion: version,\n    support: !!PC && !!getUserMedia,\n    // new support style\n    supportRTCPeerConnection: !!PC,\n    supportVp8: supportVp8,\n    supportGetUserMedia: !!getUserMedia,\n    supportDataChannel: !!(PC && PC.prototype && PC.prototype.createDataChannel),\n    supportWebAudio: !!(AudioContext && AudioContext.prototype.createMediaStreamSource),\n    supportMediaStream: !!(MediaStream && MediaStream.prototype.removeTrack),\n    supportScreenSharing: !!screenSharing,\n    // constructors\n    AudioContext: AudioContext,\n    PeerConnection: PC,\n    SessionDescription: SessionDescription,\n    IceCandidate: IceCandidate,\n    MediaStream: MediaStream,\n    getUserMedia: getUserMedia\n};\n","var _global = (function() { return this; })();\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\n\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","module.exports = require('../package.json').version;\n","module.exports={\n  \"_args\": [\n    [\n      {\n        \"raw\": \"websocket@^1.0.22\",\n        \"scope\": null,\n        \"escapedName\": \"websocket\",\n        \"name\": \"websocket\",\n        \"rawSpec\": \"^1.0.22\",\n        \"spec\": \">=1.0.22 <2.0.0\",\n        \"type\": \"range\"\n      },\n      \"/home/ivey/coding/rPi-web-client/node_modules/janus-gateway-js\"\n    ]\n  ],\n  \"_from\": \"websocket@>=1.0.22 <2.0.0\",\n  \"_id\": \"websocket@1.0.24\",\n  \"_inCache\": true,\n  \"_location\": \"/websocket\",\n  \"_nodeVersion\": \"7.3.0\",\n  \"_npmOperationalInternal\": {\n    \"host\": \"packages-12-west.internal.npmjs.com\",\n    \"tmp\": \"tmp/websocket-1.0.24.tgz_1482977757939_0.1858439394272864\"\n  },\n  \"_npmUser\": {\n    \"name\": \"theturtle32\",\n    \"email\": \"brian@worlize.com\"\n  },\n  \"_npmVersion\": \"3.10.10\",\n  \"_phantomChildren\": {},\n  \"_requested\": {\n    \"raw\": \"websocket@^1.0.22\",\n    \"scope\": null,\n    \"escapedName\": \"websocket\",\n    \"name\": \"websocket\",\n    \"rawSpec\": \"^1.0.22\",\n    \"spec\": \">=1.0.22 <2.0.0\",\n    \"type\": \"range\"\n  },\n  \"_requiredBy\": [\n    \"/\"\n  ],\n  \"_resolved\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz\",\n  \"_shasum\": \"74903e75f2545b6b2e1de1425bc1c905917a1890\",\n  \"_shrinkwrap\": null,\n  \"_spec\": \"websocket@^1.0.22\",\n  \"_where\": \"/home/ivey/coding/rPi-web-client/node_modules/janus-gateway-js\",\n  \"author\": {\n    \"name\": \"Brian McKelvey\",\n    \"email\": \"brian@worlize.com\",\n    \"url\": \"https://www.worlize.com/\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"bugs\": {\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node/issues\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"contributors\": [\n    {\n      \"name\": \"Iaki Baz Castillo\",\n      \"email\": \"ibc@aliax.net\",\n      \"url\": \"http://dev.sipdoc.net\"\n    }\n  ],\n  \"dependencies\": {\n    \"debug\": \"^2.2.0\",\n    \"nan\": \"^2.3.3\",\n    \"typedarray-to-buffer\": \"^3.1.2\",\n    \"yaeti\": \"^0.0.6\"\n  },\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"devDependencies\": {\n    \"buffer-equal\": \"^1.0.0\",\n    \"faucet\": \"^0.0.1\",\n    \"gulp\": \"git+https://github.com/gulpjs/gulp.git#4.0\",\n    \"gulp-jshint\": \"^2.0.4\",\n    \"jshint\": \"^2.0.0\",\n    \"jshint-stylish\": \"^2.2.1\",\n    \"tape\": \"^4.0.1\"\n  },\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"dist\": {\n    \"shasum\": \"74903e75f2545b6b2e1de1425bc1c905917a1890\",\n    \"tarball\": \"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz\"\n  },\n  \"engines\": {\n    \"node\": \">=0.8.0\"\n  },\n  \"gitHead\": \"0e15f9445953927c39ce84a232cb7dd6e3adf12e\",\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"license\": \"Apache-2.0\",\n  \"main\": \"index\",\n  \"maintainers\": [\n    {\n      \"name\": \"theturtle32\",\n      \"email\": \"brian@worlize.com\"\n    }\n  ],\n  \"name\": \"websocket\",\n  \"optionalDependencies\": {},\n  \"readme\": \"ERROR: No README data found!\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"scripts\": {\n    \"gulp\": \"gulp\",\n    \"install\": \"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\n    \"test\": \"faucet test/unit\"\n  },\n  \"version\": \"1.0.24\"\n}\n","var Connection = require('./connection');\n\n/**\n * @param {string} address. {@link Connection.address}\n * @param {Object} [options]. {@link Connection.options}\n * @constructor\n */\nfunction Client(address, options) {\n  this._address = address;\n  this._options = options || {};\n}\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {Connection} connection - when it is opened\n */\nClient.prototype.createConnection = function(id) {\n  var connection = Connection.create(id, this._address, this._options);\n  return connection.open();\n};\n\nmodule.exports = Client;\n","var Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar JanusError = require('./error');\nvar Transaction = require('./transaction');\nvar WebsocketConnection = require('./websocket-connection');\nvar Session = require('./session');\nvar JanusMessage = require('./janus-message');\n\n/**\n * @param {string} id\n * @param {string} address\n * @param {Object} [options]\n * @param {string} [options.token]\n * @param {string} [options.apisecret]\n * @param {boolean|number} [options.keepalive]\n * @param {Object} [options.pc] RTCPeerConnection constructor options\n * @param {Object} [options.pc.config]\n * @param {Object} [options.pc.constraints]\n *\n * Important! Please listen to `error` events on a newly created instance in Node environment. For more details please look https://nodejs.org/api/events.html#events_error_events.\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Connection(id, address, options) {\n  Connection.super_.call(this);\n\n  /** @type {string} */\n  this._id = id;\n\n  /** @type {string} */\n  this._address = address;\n\n  /** @type {Object} */\n  this._options = options || {};\n\n  /** @type {Object} */\n  this._sessions = {};\n\n  /** @type {WebsocketConnection} */\n  this._websocketConnection = new WebsocketConnection();\n  this._installWebsocketListeners();\n}\n\nHelpers.inherits(Connection, EventEmitter);\nHelpers.extend(Connection.prototype, TTransactionGateway);\n\n/**\n * @see {@link Connection}\n * @returns {Connection}\n */\nConnection.create = function(id, address, options) {\n  return new Connection(id, address, options);\n};\n\n/**\n * @protected\n */\nConnection.prototype._installWebsocketListeners = function() {\n  this._websocketConnection.on('open', this.emit.bind(this, 'open'));\n  this._websocketConnection.on('error', this.emit.bind(this, 'error'));\n  this._websocketConnection.on('close', this.emit.bind(this, 'close'));\n  this._websocketConnection.on('message', function(message) {\n    this.processIncomeMessage(new JanusMessage(message));\n  }.bind(this));\n};\n\n/**\n * @returns {string}\n */\nConnection.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @returns {string}\n */\nConnection.prototype.getAddress = function() {\n  return this._address;\n};\n\n/**\n * @returns {Object}\n */\nConnection.prototype.getOptions = function() {\n  return this._options;\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Connection} connection - when it is opened\n */\nConnection.prototype.open = function() {\n  return this._websocketConnection.open(this._address, 'janus-protocol').return(this);\n};\n\n/**\n * @returns {Promise}\n */\nConnection.prototype.close = function() {\n  if (this._websocketConnection.isOpened()) {\n    var self = this;\n    return Promise.map(this.getSessionList(), function(session) {\n      return session.cleanup();\n    }).then(function() {\n      return self._websocketConnection.close();\n    }).then(function() {\n      self.emit('close');\n    });\n  }\n  return Promise.resolve();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Session} session\n */\nConnection.prototype.createSession = function() {\n  return this.sendSync({janus: 'create'});\n};\n\n/**\n * @param {string} sessionId\n * @returns {boolean}\n */\nConnection.prototype.hasSession = function(sessionId) {\n  return !!this.getSession(sessionId);\n};\n\n/**\n * @param {string} sessionId\n * @returns {Session}\n */\nConnection.prototype.getSession = function(sessionId) {\n  return this._sessions[sessionId];\n};\n\n/**\n * @returns {Session[]}\n */\nConnection.prototype.getSessionList = function() {\n  return Object.keys(this._sessions).map(function(id) {\n    return this._sessions[id];\n  }.bind(this));\n};\n\n/**\n * @returns {boolean}\n */\nConnection.prototype.isClosed = function() {\n  return this._websocketConnection.isClosed();\n};\n\n/**\n * @param {Session} session\n */\nConnection.prototype.addSession = function(session) {\n  this._sessions[session.getId()] = session;\n  session.once('destroy', function() {\n    this.removeSession(session.getId());\n  }.bind(this));\n};\n\n/**\n * @param {string} sessionId\n */\nConnection.prototype.removeSession = function(sessionId) {\n  delete this._sessions[sessionId];\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nConnection.prototype.send = function(message) {\n  if (this._options['token']) {\n    message.token = this._options['token'];\n  }\n  if (this._options['apisecret']) {\n    message.apisecret = this._options['apisecret'];\n  }\n  if (!message['transaction']) {\n    message['transaction'] = Transaction.generateRandomId();\n  }\n  return this._websocketConnection.send(message);\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nConnection.prototype.processOutcomeMessage = function(message) {\n  if ('create' === message['janus']) {\n    return this._onCreate(message);\n  }\n  var sessionId = message['session_id'];\n  if (sessionId) {\n    if (this.hasSession(sessionId)) {\n      return this.getSession(sessionId).processOutcomeMessage(message);\n    } else {\n      return Promise.reject(new Error('Invalid session: [' + sessionId + ']'));\n    }\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n * @fulfilled {JanusMessage} incomeMessage\n */\nConnection.prototype.processIncomeMessage = function(incomeMessage) {\n  var sessionId = incomeMessage.get('session_id');\n  if (sessionId && this.hasSession(sessionId)) {\n    return this.getSession(sessionId).processIncomeMessage(incomeMessage);\n  }\n\n  var self = this;\n  return Promise\n    .try(function() {\n      if (sessionId && !self.hasSession(sessionId)) {\n        throw new Error('Invalid session: [' + sessionId + ']');\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    });\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nConnection.prototype._onCreate = function(outcomeMessage) {\n  this.addTransaction(new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n    if ('success' == incomeMessage.get('janus')) {\n      var sessionId = incomeMessage.get('data', 'id');\n      this.addSession(Session.create(this, sessionId));\n      return this.getSession(sessionId);\n    } else {\n      throw new JanusError(incomeMessage);\n    }\n  }.bind(this)));\n  return Promise.resolve(outcomeMessage);\n};\n\nConnection.prototype.toString = function() {\n  return 'JanusConnection' + JSON.stringify({id: this._id, address: this._address});\n};\n\nmodule.exports = Connection;\n","var Helpers = require('./helpers');\n\n/**\n * @param {JanusMessage} janusMessage\n * @constructor\n */\nfunction JanusError(janusMessage) {\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.janusMessage = janusMessage;\n  var janusError = janusMessage.getError();\n  this.message = janusError['reason'];\n  this.code = janusError['code'];\n}\n\nHelpers.inherits(JanusError, Error);\n\nmodule.exports = JanusError;\n","var EventEmitter2 = require('eventemitter2');\nvar Helpers = require('./helpers');\n\nfunction EventEmitter() {\n  EventEmitter.super_.call(this, {\n    wildcard: true,\n    delimiter: ':',\n    newListener: false,\n    maxListeners: 20\n  });\n}\n\nHelpers.inherits(EventEmitter, EventEmitter2);\n\nmodule.exports = EventEmitter;\n\n","var Helpers = {\n\n  /**\n   * @param {Object} destination\n   * @param {...Object|null} source\n   * @returns {Object}\n   */\n  extend: function(destination, source) {\n    if (source) {\n      var sources = Array.prototype.slice.call(arguments, 1) || [];\n\n      sources.forEach(function(source) {\n        Object.keys(source).forEach(function(key) {\n          destination[key] = source[key];\n        });\n      });\n    }\n\n    return destination;\n  },\n  /**\n   * @param {Function} ctor\n   * @param {Function} superCtor\n   */\n  inherits: function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  }\n};\n\nmodule.exports = Helpers;\n","var Client = require('./client');\nvar JanusError = require('./error');\nvar WebsocketConnection = require('./websocket-connection');\nvar Connection = require('./connection');\nvar Session = require('./session');\nvar Plugin = require('./plugin');\nvar MediaPlugin = require('./webrtc/media-plugin');\nvar AudiobridgePlugin = require('./webrtc/plugin/audiobridge-plugin');\nvar AudioroomPlugin = require('./webrtc/plugin/audioroom-plugin');\nvar StreamingPlugin = require('./webrtc/plugin/streaming-plugin');\nvar RtpbroadcastPlugin = require('./webrtc/plugin/rtpbroadcast-plugin');\n\nmodule.exports = {\n  Error: JanusError,\n  WebsocketConnection: WebsocketConnection,\n  Client: Client,\n  Connection: Connection,\n  Session: Session,\n  Plugin: Plugin,\n  MediaPlugin: MediaPlugin,\n  AudiobridgePlugin: AudiobridgePlugin,\n  AudioroomPlugin: AudioroomPlugin,\n  StreamingPlugin: StreamingPlugin,\n  RtpbroadcastPlugin: RtpbroadcastPlugin\n};\n","/**\n * @param {Object} plainMessage\n * @constructor\n */\nfunction JanusMessage(plainMessage) {\n  this._plainMessage = plainMessage;\n}\n\n/**\n * @returns {Object}\n */\nJanusMessage.prototype.getPlainMessage = function() {\n  return this._plainMessage;\n};\n\n/**\n * @returns {Object}\n */\nJanusMessage.prototype.getError = function() {\n  return this.get('error');\n};\n\n/**\n * @param {...string} name\n * @returns {*}\n */\nJanusMessage.prototype.get = function(name) {\n  var names = Array.prototype.slice.call(arguments, 1);\n  var result = this._plainMessage[name];\n\n  for (var i = 0; i < names.length; i++) {\n    name = names[i];\n    if (result) {\n      result = result[name];\n    } else {\n      break;\n    }\n  }\n\n  return result || null;\n};\n\nmodule.exports = JanusMessage;\n","var Helpers = require('./helpers');\nvar JanusMessage = require('./janus-message');\n\n/**\n * @param {Object} plainMessage\n * @param {Plugin} plugin\n * @constructor\n * @extends JanusMessage\n */\nfunction JanusPluginMessage(plainMessage, plugin) {\n  JanusPluginMessage.super_.apply(this, arguments);\n  this._plugin = plugin;\n}\n\nHelpers.inherits(JanusPluginMessage, JanusMessage);\n\n/**\n * @param {...string} [name]\n * @returns {*}\n */\nJanusPluginMessage.prototype.getPluginData = function(name) {\n  var names = Array.prototype.slice.call(arguments);\n  names.unshift('plugindata', 'data');\n  return this.get.apply(this, names);\n};\n\n/**\n * @returns {Object}\n */\nJanusPluginMessage.prototype.getError = function() {\n  var error = this.getPluginData('error');\n  if (error) {\n    return {\n      reason: error,\n      code: this.getPluginData('error_code')\n    }\n  }\n  return JanusPluginMessage.super_.prototype.getError.call(this);\n};\n\n/**\n * @returns {string}\n */\nJanusPluginMessage.prototype.getResultText = function() {\n  return this.getPluginData(this._plugin.getResponseAlias());\n};\n\nmodule.exports = JanusPluginMessage;\n","var Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar JanusError = require('./error');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar Transaction = require('./transaction');\nvar JanusPluginMessage = require('./janus-plugin-message');\n\n/**\n * @param {Session} session\n * @param {string} name\n * @param {string} id\n *\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Plugin(session, name, id) {\n  Plugin.super_.call(this);\n  this._session = session;\n  this._name = name;\n  this._id = id;\n\n  var plugin = this;\n  session.on('destroy', function() {\n    plugin._detach();\n  });\n}\n\nHelpers.inherits(Plugin, EventEmitter);\nHelpers.extend(Plugin.prototype, TTransactionGateway);\n\nPlugin._types = {};\n\n/**\n * @see {@link Plugin}\n * @returns {Plugin}\n */\nPlugin.create = function(session, name, id) {\n  var aClass = this._types[name];\n  if (aClass) {\n    return new aClass(session, name, id);\n  }\n  return new Plugin(session, name, id);\n};\n\n/**\n * @param {string} name\n * @param {function(new:Plugin)} aClass\n */\nPlugin.register = function(name, aClass) {\n  this._types[name] = aClass;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getName = function() {\n  return this._name;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getResponseAlias = function() {\n  throw new Error('Plugin.getResponseAlias must be implemented');\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nPlugin.prototype.send = function(message) {\n  message['handle_id'] = this._id;\n  return this._session.send(message);\n};\n\n/**\n * @returns {Promise}\n */\nPlugin.prototype.detach = function() {\n  if (this._session) {\n    return new Promise(function(resolve, reject) {\n      this.once('detach', resolve);\n      this.sendWithTransaction({janus: 'detach'}).catch(reject);\n    }.bind(this));\n  }\n  return Promise.resolve();\n};\n\n/**\n * @returns {Promise}\n */\nPlugin.prototype.cleanup = function() {\n  return this._detach();\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nPlugin.prototype.processOutcomeMessage = function(message) {\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n */\nPlugin.prototype.processIncomeMessage = function(incomeMessage) {\n  var self = this;\n  return Promise\n    .try(function() {\n      incomeMessage = new JanusPluginMessage(incomeMessage.getPlainMessage(), self);\n      if ('detached' === incomeMessage.get('janus')) {\n        return self._onDetached();\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    })\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nPlugin.prototype._onDetached = function() {\n  return this._detach();\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nPlugin.prototype._detach = function() {\n  if (this._session) {\n    this._session = null;\n    this.emit('detach');\n  }\n  return Promise.resolve();\n};\n\nPlugin.prototype.toString = function() {\n  return 'Plugin' + JSON.stringify({id: this._id, name: this._name});\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage}\n */\nPlugin.prototype.sendWithTransaction = function(options) {\n  var transactionId = Transaction.generateRandomId();\n  var transaction = new Transaction(transactionId, function(incomeMessage) {\n    var errorMessage = incomeMessage.getError();\n    if (!errorMessage) {\n      return Promise.resolve(incomeMessage);\n    }\n    var error = new JanusError(incomeMessage);\n    return Promise.reject(error);\n  });\n  var message = {\n    janus: 'message',\n    transaction: transactionId\n  };\n  Helpers.extend(message, options);\n\n  this.addTransaction(transaction);\n  return this.sendSync(message);\n};\n\nmodule.exports = Plugin;\n","var Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar JanusError = require('./error');\nvar Timer = require('./timer');\nvar Transaction = require('./transaction');\nvar Plugin = require('./plugin');\n\n/**\n * @param {Connection} connection\n * @param {string} id\n *\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Session(connection, id) {\n  Session.super_.call(this);\n  this._connection = connection;\n  this._id = id;\n  this._plugins = {};\n\n  if (this._connection.getOptions()['keepalive']) {\n    this._startKeepAlive();\n  }\n  var session = this;\n  connection.on('close', function() {\n    session._destroy();\n  });\n}\n\nHelpers.inherits(Session, EventEmitter);\nHelpers.extend(Session.prototype, TTransactionGateway);\n\n/**\n * @see {@link Session}\n * @returns {Session}\n */\nSession.create = function(connection, id) {\n  return new Session(connection, id);\n};\n\n/**\n * @returns {string}\n */\nSession.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nSession.prototype.send = function(message) {\n  if (!this._connection) {\n    return Promise.reject(new Error('Can not send message over destroyed ' + this));\n  }\n  //we always use own session's id in its messages\n  message['session_id'] = this._id;\n  if (this._keepAliveTimer) {\n    this._keepAliveTimer.reset();\n  }\n  return this._connection.send(message);\n};\n\n/**\n * @param {string} name\n * @returns {Promise}\n * @fulfilled {Plugin} plugin\n */\nSession.prototype.attachPlugin = function(name) {\n  return this.sendSync({janus: 'attach', plugin: name});\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Object} response\n */\nSession.prototype.destroy = function() {\n  return this.sendSync({janus: 'destroy'});\n};\n\n/**\n * @returns {Promise}\n */\nSession.prototype.cleanup = function() {\n  return this._destroy();\n};\n\n/**\n * @param {string} pluginId\n * @returns {boolean}\n */\nSession.prototype.hasPlugin = function(pluginId) {\n  return !!this.getPlugin(pluginId);\n};\n\n/**\n * @param {string} pluginId\n * @returns {Plugin}\n */\nSession.prototype.getPlugin = function(pluginId) {\n  return this._plugins[pluginId];\n};\n\n/**\n * @returns {Plugin[]}\n */\nSession.prototype.getPluginList = function() {\n  return Object.keys(this._plugins).map(function(id) {\n    return this._plugins[id];\n  }.bind(this));\n};\n\n/**\n * @param {Plugin} plugin\n */\nSession.prototype.addPlugin = function(plugin) {\n  this._plugins[plugin.getId()] = plugin;\n  plugin.once('detach', function() {\n    this.removePlugin(plugin.getId())\n  }.bind(this));\n};\n\n/**\n * @param {string} pluginId\n */\nSession.prototype.removePlugin = function(pluginId) {\n  delete this._plugins[pluginId];\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nSession.prototype.processOutcomeMessage = function(message) {\n  var janusMessage = message['janus'];\n  if ('attach' === janusMessage) {\n    return this._onAttach(message);\n  }\n  if ('destroy' === janusMessage) {\n    return this._onDestroy(message);\n  }\n  var pluginId = message['handle_id'];\n  if (pluginId) {\n    if (this.hasPlugin(pluginId)) {\n      return this.getPlugin(pluginId).processOutcomeMessage(message);\n    } else {\n      return Promise.reject(new Error('Invalid plugin [' + pluginId + ']'));\n    }\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n * @fulfilled {JanusMessage} incomeMessage\n */\nSession.prototype.processIncomeMessage = function(incomeMessage) {\n  var pluginId = incomeMessage.get('handle_id') || incomeMessage.get('sender');\n  if (pluginId && this.hasPlugin(pluginId)) {\n    return this.getPlugin(pluginId).processIncomeMessage(incomeMessage);\n  }\n\n  var self = this;\n  return Promise\n    .try(function() {\n      if (pluginId && !self.hasPlugin(pluginId)) {\n        throw new Error('Invalid plugin [' + pluginId + ']');\n      }\n      if ('timeout' === incomeMessage.get('janus')) {\n        return self._onTimeout(incomeMessage);\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    });\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nSession.prototype._onAttach = function(outcomeMessage) {\n  this.addTransaction(\n    new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n      if ('success' == incomeMessage.get('janus')) {\n        var pluginId = incomeMessage.get('data', 'id');\n        this.addPlugin(Plugin.create(this, outcomeMessage['plugin'], pluginId));\n        return this.getPlugin(pluginId);\n      } else {\n        throw new JanusError(incomeMessage);\n      }\n    }.bind(this))\n  );\n  return Promise.resolve(outcomeMessage);\n};\n\n/**\n * @param {Object} incomeMessage\n * @returns {Promise}\n * @fulfilled {Object} incomeMessage\n */\nSession.prototype._onTimeout = function(incomeMessage) {\n  return this._destroy().return(incomeMessage);\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nSession.prototype._onDestroy = function(outcomeMessage) {\n  this.addTransaction(\n    new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n      if ('success' == incomeMessage.get('janus')) {\n        return this._destroy().return(incomeMessage);\n      } else {\n        throw new JanusError(incomeMessage);\n      }\n    }.bind(this))\n  );\n  return Promise.resolve(outcomeMessage);\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nSession.prototype._destroy = function() {\n  if (!this._connection) {\n    return Promise.resolve();\n  }\n  this._stopKeepAlive();\n  return Promise.map(this.getPluginList(), function(plugin) {\n    return plugin.cleanup();\n  }).finally(function() {\n    this._plugins = {};\n    this._connection = null;\n    this.emit('destroy');\n  }.bind(this));\n};\n\n/**\n * @param {*} value\n * @returns {boolean}\n * @protected\n */\nSession.prototype._isNaturalNumber = function(value) {\n  if (isNaN(value)) {\n    return false;\n  }\n  var x = parseFloat(value);\n  return (x | 0) === x && x > 0;\n};\n\n/**\n * @protected\n */\nSession.prototype._startKeepAlive = function() {\n  var keepAlive = this._connection.getOptions()['keepalive'];\n  if (this._isNaturalNumber(keepAlive) && keepAlive < 59000) {\n    this._keepAlivePeriod = keepAlive;\n  } else {\n    this._keepAlivePeriod = 30000;\n  }\n  var session = this;\n  this._keepAliveTimer = new Timer(function() {\n    session.send({janus: 'keepalive'})\n      .catch(function(error) {\n        if (session._connection.isClosed()) {\n          session._stopKeepAlive();\n        }\n        throw error;\n      });\n  }, this._keepAlivePeriod);\n  this._keepAliveTimer.start();\n};\n\nSession.prototype._stopKeepAlive = function() {\n  if (this._keepAliveTimer) {\n    this._keepAliveTimer.stop();\n    this._keepAliveTimer = null;\n  }\n};\n\nSession.prototype.toString = function() {\n  return 'Session' + JSON.stringify({id: this._id});\n};\n\n\nmodule.exports = Session;\n","/**\n * @param {Function} callback\n * @param {number} ms\n * @constructor\n */\nfunction Timer(callback, ms) {\n  this._callback = callback;\n  this._ms = ms;\n  this._timeoutId = null;\n}\n\nTimer.prototype.start = function() {\n  this._timeoutId = setTimeout(this._callback, this._ms);\n};\n\nTimer.prototype.stop = function() {\n  if (this._timeoutId) {\n    clearTimeout(this._timeoutId);\n    this._timeoutId = null;\n  }\n};\n\nTimer.prototype.reset = function() {\n  this.stop();\n  this.start();\n};\n\nmodule.exports = Timer;\n","var Promise = require('bluebird');\nvar JanusError = require('../error');\nvar Transaction = require('../transaction');\nvar Transactions = require('../transactions');\n\n/**\n * @class TTransactionGateway\n */\nvar TTransactionGateway = {\n  /**\n   * @returns {Transactions}\n   */\n  getTransactions: function() {\n    if (!this._transactions) {\n      this._transactions = new Transactions();\n    }\n    return this._transactions;\n  },\n\n  /**\n   * @param {Transaction} transaction\n   */\n  addTransaction: function(transaction) {\n    this.getTransactions().add(transaction);\n  },\n\n  /**\n   * @param {Object} message\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  sendSync: function(message) {\n    if (!message['transaction']) {\n      message['transaction'] = Transaction.generateRandomId();\n    }\n    var self = this;\n    return this.processOutcomeMessage(message)\n      .then(function(message) {\n        return self.send(message);\n      })\n      .then(function(result) {\n        var transaction = self.getTransactions().find(message['transaction']);\n        if (transaction) {\n          return transaction.promise;\n        }\n        return result;\n      });\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {boolean}\n   */\n  hasTransaction: function(incomeMessage) {\n    return this.getTransactions().has(incomeMessage.get('transaction'));\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  executeTransaction: function(incomeMessage) {\n    return this.getTransactions().execute(incomeMessage.get('transaction'), incomeMessage);\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  defaultProcessIncomeMessage: function(incomeMessage) {\n    var self = this;\n    if (self.hasTransaction(incomeMessage)) {\n      return self.executeTransaction(incomeMessage);\n    } else {\n      if (incomeMessage.getError()) {\n        return Promise.reject(new JanusError(incomeMessage));\n      }\n    }\n  }\n};\n\nmodule.exports = TTransactionGateway;\n","var Promise = require('bluebird');\n\n/**\n * @callback Transaction~callback\n * @returns {Promise}\n * @fulfilled {*}\n */\n\n/**\n * @param {string} id\n * @param {Transaction~callback} callback\n * @param {number} [timeoutPeriod=30000] in milliseconds. Timeout until transaction is executed.\n * @constructor\n */\nfunction Transaction(id, callback, timeoutPeriod) {\n  this.id = id;\n  timeoutPeriod = timeoutPeriod || 30000;\n  var timeoutRejection;\n  var self = this;\n  this.promise = new Promise(function(resolve, reject) {\n    self._callback = function() {\n      clearTimeout(timeoutRejection);\n      var result;\n      try {\n        result = callback.apply(null, arguments);\n      } catch (error) {\n        result = Promise.reject(error);\n      }\n      if (!(result instanceof Promise)) {\n        result = Promise.resolve(result);\n      }\n      result.then(resolve, reject);\n    };\n\n    timeoutRejection = setTimeout(function() {\n      reject(new Error('Transaction timeout ' + self.id));\n    }, timeoutPeriod);\n  });\n  this._isExecuted = false;\n}\n\n/**\n * @param {...*}\n * @returns {Promise}\n * @fulfilled {*}\n */\nTransaction.prototype.execute = function() {\n  if (!this._isExecuted) {\n    this._isExecuted = true;\n    this._callback.apply(this, arguments);\n  }\n  return this.promise;\n};\n\n/**\n * @returns {string}\n */\nTransaction.generateRandomId = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\nmodule.exports = Transaction;\n","var Promise = require('bluebird');\nvar Transaction = require('./transaction');\n\n/**\n * @constructor\n */\nfunction Transactions() {\n  /** @type {Object} */\n  this.list = {};\n}\n\n/**\n * @param {Transaction} transaction\n */\nTransactions.prototype.add = function(transaction) {\n  if (this.has(transaction.id)) {\n    throw new Error('Transaction with id: `' + transaction.id + '` already exists');\n  }\n  if (!(transaction instanceof Transaction)) {\n    throw new Error('`transaction` must be an instance of Transaction');\n  }\n  this.list[transaction.id] = transaction;\n};\n\n/**\n * @param {string} id\n * @returns {boolean}\n */\nTransactions.prototype.has = function(id) {\n  return id && !!this._find(id);\n};\n\n/**\n * @param {string} id\n * @returns {Transaction|Null}\n */\nTransactions.prototype.find = function(id) {\n  return this._find(id) || null;\n};\n\n/**\n * @param {string} id\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {*}\n */\nTransactions.prototype.execute = function(id, message) {\n  var transaction = this.find(id);\n  if (!transaction) {\n    throw new Error('Transaction `' + id + '` not found');\n  }\n  if ('ack' !== message['janus']) {\n    this.remove(id);\n    return transaction.execute(message);\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {string} id\n */\nTransactions.prototype.remove = function(id) {\n  if (!this.has(id)) {\n    throw new Error('Transaction with id: `' + id + \"` doesn't exist\");\n  }\n  delete this.list[id];\n};\n\n/**\n * @param {string} id\n * @returns {Transaction}\n * @protected\n */\nTransactions.prototype._find = function(id) {\n  return this.list[id];\n};\n\nmodule.exports = Transactions;\n","var Promise = require('bluebird');\nvar Helpers = require('../helpers');\nvar JanusPluginMessage = require('../janus-plugin-message');\nvar MediaEntityPlugin = require('./media-entity-plugin');\n\nfunction MediaAudioPlugin() {\n  MediaAudioPlugin.super_.apply(this, arguments);\n}\n\nHelpers.inherits(MediaAudioPlugin, MediaEntityPlugin);\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._join = function(id, options) {\n  var body = Helpers.extend({request: 'join'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.leave = function() {\n  return this.sendWithTransaction({body: {request: 'leave'}})\n    .then(function(response) {\n      this.resetCurrentEntity();\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._change = function(id, options) {\n  var body = Helpers.extend({request: 'changeroom'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._connect = function(id, options) {\n  if (this.hasCurrentEntity(id)) {\n    return Promise.resolve(new JanusPluginMessage({}, this));\n  }\n  if (this.hasCurrentEntity()) {\n    return this._change(id, options);\n  }\n  return this._join(id, options);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.list = function() {\n  return this._list();\n};\n\n/**\n * @param {Object} [options]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.configure = function(options, jsep) {\n  var body = Helpers.extend({\n    request: 'configure'\n  }, options);\n  var message = {body: body};\n  if (jsep) {\n    message.jsep = jsep;\n  }\n  return this.sendWithTransaction(message);\n};\n\n/**\n * @param {MediaStream} stream\n * @param {RTCOfferOptions} [offerOptions]\n * @param {Object} [configureOptions]\n * @param {boolean} [configureOptions.muted]\n * @param {number} [configureOptions.quality]\n * @returns {Promise}\n * @fulfilled {@link sendSDP}\n */\nMediaAudioPlugin.prototype.offerStream = function(stream, offerOptions, configureOptions) {\n  var self = this;\n  return Promise\n    .try(function() {\n      self.createPeerConnection();\n      stream.getAudioTracks().forEach(function(track) {\n        self.addTrack(track, stream);\n      });\n    })\n    .then(function() {\n      return self.createOffer(offerOptions);\n    })\n    .then(function(jsep) {\n      return self.sendSDP(jsep, configureOptions);\n    });\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {Object} [configureOptions]\n * @param {boolean} [configureOptions.muted]\n * @param {number} [configureOptions.quality]\n * @returns {Promise}\n * @fulfilled {RTCSessionDescription}\n */\nMediaAudioPlugin.prototype.sendSDP = function(jsep, configureOptions) {\n  return this.configure(configureOptions, jsep)\n    .then(function(response) {\n      var jsep = response.get('jsep');\n      if (jsep) {\n        this.setRemoteSDP(jsep);\n        return jsep;\n      }\n      return Promise.reject(new Error('Failed sendSDP. No jsep in response.'));\n    }.bind(this));\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} list\n */\nMediaAudioPlugin.prototype._listParticipants = function(options) {\n  var body = Helpers.extend({request: 'listparticipants'}, options);\n  return this.sendWithTransaction({body: body});\n};\n\nmodule.exports = MediaAudioPlugin;\n","var Promise = require('bluebird');\nvar webrtc = require('webrtc-adapter');\n\nfunction MediaDevicesShim() {\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Parameters\n * @typedef {Object} MediaStreamConstraints\n */\n\n/**\n * @param {MediaStreamConstraints} constraints\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim.getUserMedia = function(constraints) {\n  if (constraints.video === 'screen') {\n    return this.getSharedScreen({audio: constraints.audio});\n  } else {\n    return Promise.resolve(navigator.mediaDevices.getUserMedia(constraints));\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim.getSharedScreen = function(constraints) {\n  if (window.location.protocol !== 'https:') {\n    return Promise.reject(new Error('Screen sharing only works on HTTPS, try the https:// version of this page'));\n  }\n\n  if ('chrome' == webrtc.browserDetails.browser) {\n    return this._getSharedScreenChrome(constraints);\n  } else if ('firefox' == webrtc.browserDetails.browser) {\n    return this._getSharedScreenFirefox(constraints);\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim._getSharedScreenChrome = function(constraints) {\n  var chromever = webrtc.browserDetails.version;\n  var maxver = 33;\n  if (window.navigator.userAgent.match('Linux')) {\n    maxver = 35;\n  }\t// \"known\" crash in chrome 34 and 35 on linux\n  if (chromever >= 26 && chromever <= maxver) {\n    // Chrome 26->33 requires some awkward chrome://flags manipulation\n    constraints = Helpers.extend({}, constraints, {\n      video: {\n        mandatory: {\n          googLeakyBucket: true,\n          maxWidth: window.screen.width,\n          maxHeight: window.screen.height,\n          maxFrameRate: 3,\n          chromeMediaSource: 'screen'\n        }\n      }\n    });\n    return window.getUserMedia(constraints);\n  } else {\n    // Chrome 34+ requires an extension\n    return new Promise(function(resolve, reject) {\n      var timeoutRejectId;\n      var messageListener = function(event) {\n        if (event.origin != window.location.origin) {\n          return;\n        }\n        if (event.data.type == 'janusGotScreen' && timeoutRejectId == event.data.id) {\n          window.clearTimeout(timeoutRejectId);\n          window.removeEventListener('message', messageListener);\n\n          if (event.data.sourceId === '') {\n            // user canceled\n            var error = new Error('NavigatorUserMediaError');\n            error.name = 'You cancelled the request for permission, giving up...';\n            reject(error);\n          } else {\n            constraints = Helpers.extend({}, constraints, {\n              video: {\n                mandatory: {\n                  chromeMediaSource: 'desktop',\n                  maxWidth: window.screen.width,\n                  maxHeight: window.screen.height,\n                  maxFrameRate: 3\n                },\n                optional: [\n                  {googLeakyBucket: true},\n                  {googTemporalLayeredScreencast: true}\n                ]\n              }\n            });\n            constraints.video.mandatory.chromeMediaSourceId = event.data.sourceId;\n            resolve(window.getUserMedia(constraints));\n          }\n        } else if (event.data.type == 'janusGetScreenPending') {\n          if (timeoutRejectId == event.data.id) {\n            window.clearTimeout(timeoutRejectId);\n          }\n        }\n      };\n\n      window.addEventListener('message', messageListener);\n      timeoutRejectId = setTimeout(\n        function() {\n          window.removeEventListener('message', messageListener);\n          var error = new Error('NavigatorUserMediaError');\n          error.name = 'The required Chrome extension is not installed: click <a href=\"#\">here</a> to install it. (NOTE: this will need you to refresh the page)';\n          reject(error);\n        }, 1000);\n      window.postMessage({type: 'janusGetScreen', id: timeoutRejectId}, '*');\n    });\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim._getSharedScreenFirefox = function(constraints) {\n  var ffver = webrtc.browserDetails.version;\n  if (ffver >= 33) {\n    constraints = Helpers.extend({}, constraints, {\n      video: {\n        mozMediaSource: 'window',\n        mediaSource: 'window'\n      }\n    });\n    return window.getUserMedia(constraints).then(function(stream) {\n      if (stream) {\n        // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810\n        var lastStreamTime = stream.currentTime;\n        var inderval = window.setInterval(function() {\n          if (stream.currentTime == lastStreamTime) {\n            window.clearInterval(inderval);\n            if (stream.onended) {\n              stream.onended();\n            }\n          }\n          lastStreamTime = stream.currentTime;\n        }, 500);\n      }\n      return stream;\n    });\n  } else {\n    var error = new Error('Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)');\n    return Promise.reject(error);\n  }\n};\n\nmodule.exports = MediaDevicesShim;\n","var Helpers = require('../helpers');\nvar MediaPlugin = require('./media-plugin');\n\nfunction MediaEntityPlugin() {\n  MediaEntityPlugin.super_.apply(this, arguments);\n\n  this._currentEntityId = null;\n}\n\nHelpers.inherits(MediaEntityPlugin, MediaPlugin);\n\n/**\n * @param {string|number} [id]\n * @return {boolean}\n */\nMediaEntityPlugin.prototype.hasCurrentEntity = function(id) {\n  if (id) {\n    return id === this._currentEntityId;\n  }\n  return !!this._currentEntityId;\n};\n\n/**\n * @param {string|number} id\n */\nMediaEntityPlugin.prototype.setCurrentEntity = function(id) {\n  this._currentEntityId = id;\n};\n\nMediaEntityPlugin.prototype.resetCurrentEntity = function() {\n  this._currentEntityId = null;\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._create = function(options) {\n  var body = Helpers.extend({request: 'create'}, options);\n  return this.sendWithTransaction({body: body})\n    .catch(function(error) {\n      if (error.message.indexOf('already exists') > 0) {\n        return error.response;\n      } else {\n        throw error;\n      }\n    });\n};\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._destroy = function(id, options) {\n  var body = Helpers.extend({request: 'destroy'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      if (this.hasCurrentEntity(id)) {\n        this.resetCurrentEntity();\n      }\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._list = function(options) {\n  var body = Helpers.extend({request: 'list'}, options);\n  return this.sendWithTransaction({body: body});\n};\n\n/**\n * @inheritDoc\n */\nMediaEntityPlugin.prototype._onHangup = function(incomeMessage) {\n  this.resetCurrentEntity();\n  return MediaEntityPlugin.super_.prototype._onHangup.call(this, incomeMessage);\n};\n\nmodule.exports = MediaEntityPlugin;\n","var Promise = require('bluebird');\nvar webrtcsupport = require('webrtcsupport');\nvar Helpers = require('../helpers');\nvar Plugin = require('../plugin');\nvar MediaDevicesShim = require('./media-devices-shim');\n\n/**\n * @inheritDoc\n *\n * IMPORTANT! WebRTC stuff will not work in node environment.\n * @constructor\n * @extends Plugin\n */\nfunction MediaPlugin(session, name, id) {\n  MediaPlugin.super_.apply(this, arguments);\n\n  this._pcListeners = {};\n  this._pc = null;\n}\n\nHelpers.inherits(MediaPlugin, Plugin);\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/RTCPeerConnection#RTCConfiguration_dictionary\n * @typedef {Object} RTCConfiguration\n */\n\n/**\n * @param {RTCConfiguration} [options]\n * @returns {RTCPeerConnection}\n */\nMediaPlugin.prototype.createPeerConnection = function(options) {\n  options = Helpers.extend(options || {}, this._session._connection._options.pc);\n\n  var config = {\n    iceServers: [{url: 'stun:stun.l.google.com:19302'}]\n  };\n  var constraints = {\n    'optional': [{'DtlsSrtpKeyAgreement': true}]\n  };\n  if (options.config) {\n    Helpers.extend(config, options.config);\n  }\n  if (options.constraints) {\n    Helpers.extend(constraints, options.constraints);\n  }\n\n  this._pc = new webrtcsupport.PeerConnection(config, constraints);\n  this._addPcEventListeners();\n  return this._pc;\n};\n\n/**\n * @returns {RTCPeerConnection|null}\n */\nMediaPlugin.prototype.getPeerConnection = function() {\n  return this._pc;\n};\n\n/**\n * @returns {Promise}\n */\nMediaPlugin.prototype.hangup = function() {\n  return new Promise(function(resolve, reject) {\n    this.once('hangup', resolve);\n    this.sendWithTransaction({janus: 'hangup'}).catch(reject);\n  }.bind(this));\n};\n\n/**\n * @see https://www.w3.org/TR/mediacapture-streams/#mediastreamtrack\n * @typedef {Object} MediaStreamTrack\n */\n\n/**\n * @param {MediaStreamTrack} track\n * @param {...MediaStream} [stream]\n */\nMediaPlugin.prototype.addTrack = function(track, stream) {\n  if (!this._pc.addTrack) {\n    //TODO remove this part as soon as pc.addTrack is supported by chrome or webrtc/adapter#361 is implemented\n    if (!stream) {\n      throw new Error('MediaPlugin.addTrack. Missing stream argument when pc.addTrack is not supported');\n    }\n    this._pc.addStream(stream);\n    this.emit('pc:track:local', {streams: [stream]});\n  } else {\n    this._pc.addTrack.apply(this._pc, arguments);\n    this.emit('pc:track:local', {track: track, streams: Array.prototype.slice.call(arguments, 1)});\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaPlugin.prototype.getUserMedia = function(constraints) {\n  this.emit('consent-dialog:start');\n  var self = this;\n  var promise = MediaDevicesShim.getUserMedia(constraints);\n  return promise\n    .then(function(stream) {\n      self.emit('consent-dialog:stop', {stream: stream});\n      return stream;\n    })\n    .catch(function(error) {\n      self.emit('consent-dialog:stop', {error: error});\n      throw error;\n    })\n    .finally(function() {\n      if (promise.isCancelled()) {\n        self.emit('consent-dialog:stop');\n      }\n    });\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer#RTCOfferOptions_dictionary\n * @typedef {Object} RTCOfferOptions\n */\n\n/**\n * @param {RTCOfferOptions} [options]\n * @returns {Promise}\n * @fulfilled {@link _createSDP}\n */\nMediaPlugin.prototype.createOffer = function(options) {\n  return this._createSDP('createOffer', options);\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createAnswer#RTCAnswerOptions_dictionary\n * @typedef {Object} RTCAnswerOptions\n */\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {RTCAnswerOptions} [options]\n * @returns {Promise}\n * @fulfilled {@link _createSDP}\n */\nMediaPlugin.prototype.createAnswer = function(jsep, options) {\n  var self = this;\n  return Promise.try(function() {\n    return self.setRemoteSDP(jsep);\n  }).then(function() {\n    return self._createSDP('createAnswer', options);\n  });\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @returns {Promise}\n */\nMediaPlugin.prototype.setRemoteSDP = function(jsep) {\n  return this._pc.setRemoteDescription(new webrtcsupport.SessionDescription(jsep));\n};\n\n/**\n * @param {string} party\n * @param {RTCAnswerOptions|RTCOfferOptions} [options]\n * @returns {Promise}\n * @fulfilled {RTCSessionDescription} sdp\n */\nMediaPlugin.prototype._createSDP = function(party, options) {\n  if (!this._pc) {\n    throw new Error('Create PeerConnection before creating SDP for it');\n  }\n  if (['createOffer', 'createAnswer'].indexOf(party) < 0) {\n    throw new Error('Unknown party in _createSDP');\n  }\n\n  options = options || {};\n  var self = this;\n  return this._pc[party](options)\n    .then(function(description) {\n      return self._pc.setLocalDescription(description);\n    })\n    .then(function() {\n      return self._pc.localDescription;\n    });\n};\n\nMediaPlugin.prototype.processIncomeMessage = function(message) {\n  var self = this;\n  return Promise.try(function() {\n      return MediaPlugin.super_.prototype.processIncomeMessage.call(self, message);\n    })\n    .then(function(result) {\n      var janusType = message['janus'];\n      switch (janusType) {\n        case 'trickle':\n          self._onTrickle(message);\n          break;\n        case 'hangup':\n          self._onHangup(message);\n          break;\n      }\n      return result;\n    });\n};\n\n/**\n * @param {Object} incomeMessage\n */\nMediaPlugin.prototype._onTrickle = function(incomeMessage) {\n  var candidate = new webrtcsupport.IceCandidate(incomeMessage['candidate']);\n  this._pc.addIceCandidate(candidate).catch(function(error) {\n    this.emit('pc:error', error);\n  }.bind(this));\n};\n\n/**\n * @param {Object} incomeMessage\n */\nMediaPlugin.prototype._onHangup = function(incomeMessage) {\n  this.emit('hangup', incomeMessage);\n};\n\nMediaPlugin.prototype.closePeerConnection = function() {\n  if (this._pc) {\n    this._stopLocalMedia();\n    Object.keys(this._pcListeners)\n      .forEach(function(event) {\n        this._removePcEventListener(event);\n      }.bind(this));\n    this._pc.close();\n    this._pc = null;\n    this.emit('pc:close');\n  }\n};\n\nMediaPlugin.prototype._stopLocalMedia = function() {\n  var streams = this._pc.getLocalStreams();\n  streams.forEach(function(stream) {\n    if (stream.stop) {\n      stream.stop();\n    } else if (stream.getTracks) {\n      stream.getTracks().forEach(function(track) {\n        track.stop();\n      });\n    }\n  });\n};\n\nMediaPlugin.prototype._detach = function(message) {\n  this.closePeerConnection();\n  return MediaPlugin.super_.prototype._detach.apply(this, arguments);\n};\n\nMediaPlugin.prototype._addPcEventListeners = function() {\n  var self = this;\n\n  this._addPcEventListener('addstream', function(event) {\n    self.emit('pc:track:remote', {streams: [event.stream]});\n  });\n  this._addPcEventListener('track', function(event) {\n    self.emit('pc:track:remote', event);\n  });\n\n  this._addPcEventListener('icecandidate', function(event) {\n    if (event.candidate) {\n      self.send({janus: 'trickle', candidate: event.candidate});\n    } else {\n      self.send({janus: 'trickle', candidate: {completed: true}});\n      self._removePcEventListener('icecandidate');\n    }\n  });\n\n  this._addPcEventListener('signalingstatechange', function() {\n    if ('closed' == self._pc.signalingState) {\n      self.closePeerConnection();\n    }\n  });\n\n  this._addPcEventListener('iceconnectionstatechange', function() {\n    switch (self._pc.iceConnectionState) {\n      case 'closed':\n      case 'failed':\n        self.closePeerConnection();\n        break;\n    }\n  });\n};\n\nMediaPlugin.prototype._addPcEventListener = function(event, listener) {\n  this._pcListeners[event] = listener;\n  this._pc.addEventListener(event, listener);\n};\n\nMediaPlugin.prototype._removePcEventListener = function(event) {\n  this._pc.removeEventListener(event, this._pcListeners[event]);\n  delete this._pcListeners[event];\n};\n\nmodule.exports = MediaPlugin;\n","var Promise = require('bluebird');\nvar Helpers = require('../helpers');\nvar JanusPluginMessage = require('../janus-plugin-message');\nvar MediaEntityPlugin = require('./media-entity-plugin');\n\nfunction MediaStreamPlugin() {\n  MediaStreamPlugin.super_.apply(this, arguments);\n}\n\nHelpers.inherits(MediaStreamPlugin, MediaEntityPlugin);\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._create = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return MediaStreamPlugin.super_.prototype._create.call(this, options);\n};\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._destroy = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return MediaStreamPlugin.super_.prototype._destroy.call(this, id, options);\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [watchOptions]\n * @param {Object} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._watch = function(id, watchOptions, answerOptions) {\n  var plugin = this;\n  var body = Helpers.extend({request: 'watch', id: id}, watchOptions);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      var jsep = response.get('jsep');\n      if (!jsep || 'offer' != jsep['type']) {\n        throw new Error('Expect offer response on watch request')\n      }\n      plugin.setCurrentEntity(id);\n      return plugin._offerAnswer(jsep, answerOptions).return(response);\n    });\n};\n\n/**\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._start = function(jsep) {\n  var message = {body: {request: 'start'}};\n  if (jsep) {\n    message.jsep = jsep;\n  }\n  return this.sendWithTransaction(message);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._stop = function() {\n  return this.sendWithTransaction({body: {request: 'stop'}})\n    .then(function(response) {\n      this.resetCurrentEntity();\n      return response;\n    }.bind(this));\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._pause = function() {\n  return this.sendWithTransaction({body: {request: 'pause'}});\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._switch = function(id, options) {\n  var body = Helpers.extend({\n    request: 'switch',\n    id: id\n  }, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [watchOptions]\n * @param {Object} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype.connect = function(id, watchOptions, answerOptions) {\n  if (this.hasCurrentEntity(id)) {\n    return Promise.resolve(new JanusPluginMessage({}, this));\n  }\n  if (this.hasCurrentEntity()) {\n    return this._switch(id, watchOptions);\n  }\n  return this._watch(id, watchOptions, answerOptions);\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {RTCAnswerOptions} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._offerAnswer = function(jsep, answerOptions) {\n  var self = this;\n  return Promise\n    .try(function() {\n      self.createPeerConnection();\n    })\n    .then(function() {\n      return self.createAnswer(jsep, answerOptions);\n    })\n    .then(function(jsep) {\n      return self.sendWithTransaction({janus: 'message', body: {request: 'start'}, jsep: jsep});\n    });\n};\n\nmodule.exports = MediaStreamPlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaAudioPlugin = require('../media-audio-plugin');\n\nfunction AudiobridgePlugin() {\n  AudiobridgePlugin.super_.apply(this, arguments);\n}\n\nAudiobridgePlugin.NAME = 'janus.plugin.audiobridge';\nHelpers.inherits(AudiobridgePlugin, MediaAudioPlugin);\nPlugin.register(AudiobridgePlugin.NAME, AudiobridgePlugin);\n\n/**\n * @see https://janus.conf.meetecho.com/docs/janus__audiobridge_8c.html\n * @param {number} roomId\n * @param {Object} [options]\n * @param {boolean} [options.permanent]\n * @param {string} [options.description]\n * @param {string} [options.secret]\n * @param {string} [options.pin]\n * @param {boolean} [options.is_private]\n * @param {number} [options.sampling]\n * @param {boolean} [options.record]\n * @param {string} [options.record_file]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.create = function(roomId, options) {\n  return this._create(Helpers.extend({room: roomId}, options));\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.destroy = function(roomId, options) {\n  return this._destroy(roomId, Helpers.extend({room: roomId}, options));\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.pin]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.join = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._join(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.pin]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.change = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._change(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.connect = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._connect(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nAudiobridgePlugin.prototype.listParticipants = function(roomId) {\n  return this._listParticipants({room: roomId});\n};\n\n/**\n * @inheritDoc\n */\nAudiobridgePlugin.prototype.getResponseAlias = function() {\n  return 'audiobridge';\n};\n\nmodule.exports = AudiobridgePlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaAudioPlugin = require('../media-audio-plugin');\n\nfunction AudioroomPlugin() {\n  AudioroomPlugin.super_.apply(this, arguments);\n}\n\nAudioroomPlugin.NAME = 'janus.plugin.cm.audioroom';\nHelpers.inherits(AudioroomPlugin, MediaAudioPlugin);\nPlugin.register(AudioroomPlugin.NAME, AudioroomPlugin);\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.destroy = function(id, options) {\n  return this._destroy(id, Helpers.extend({id: id}, options));\n};\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {number} [options.userid]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.join = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._join(id, options);\n};\n\n/**\n * @param {string} id\n * @param {Object} [options] {@link join}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.change = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._change(id, options);\n};\n\n/**\n * @param {string} id\n * @param {Object} [options] {@link join}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.connect = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._connect(id, options);\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nAudioroomPlugin.prototype.listParticipants = function(id) {\n  return this._listParticipants({id: id});\n};\n\n/**\n * @inheritDoc\n */\nAudioroomPlugin.prototype.getResponseAlias = function() {\n  return 'audioroom';\n};\n\nmodule.exports = AudioroomPlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaStreamPlugin = require('../media-stream-plugin');\n\nfunction RtpbroadcastPlugin() {\n  RtpbroadcastPlugin.super_.apply(this, arguments);\n}\n\nRtpbroadcastPlugin.NAME = 'janus.plugin.cm.rtpbroadcast';\nHelpers.inherits(RtpbroadcastPlugin, MediaStreamPlugin);\nPlugin.register(RtpbroadcastPlugin.NAME, RtpbroadcastPlugin);\n\n\n/**\n * {@link https://github.com/cargomedia/janus-gateway-rtpbroadcast#create}\n * @typedef {Object} StreamParams\n */\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {string} [options.name]\n * @param {string} [options.description]\n * @param {boolean} [options.recorded]\n * @param {string} [options.whitelist]\n * @param {StreamParams} [options.streams]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.create = function(id, options) {\n  return this._create(id, options);\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.destroy = function(id) {\n  return this._destroy(id);\n};\n\n/**\n * @param {string} [id]\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nRtpbroadcastPlugin.prototype.list = function(id) {\n  return this._list(id);\n};\n\n/**\n * @param {string} id\n * @param {Object} [answerOptions] {@link createAnswer}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.watch = function(id, answerOptions) {\n  return this._watch(id, null, answerOptions);\n};\n\n/**\n * @param {string} id\n * @param {Array} streams\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.watchUDP = function(id, streams) {\n  return this.sendWithTransaction({body: {request: 'watch-udp', id: id, streams: streams}});\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.start = function() {\n  return this._start();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.stop = function() {\n  return this._stop();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.pause = function() {\n  return this._pause();\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.switch = function(id) {\n  return this._switch(id);\n};\n\n/**\n * @param {number} index\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.switchSource = function(index) {\n  return this.sendWithTransaction({body: {request: 'switch-source', index: index}});\n};\n\n/**\n * @param {boolean} enabled\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.superuser = function(enabled) {\n  return this.sendWithTransaction({body: {request: 'superuser', enabled: enabled}});\n};\n\n/**\n * @inheritDoc\n */\nRtpbroadcastPlugin.prototype.getResponseAlias = function() {\n  return 'streaming';\n};\n\nmodule.exports = RtpbroadcastPlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaStreamPlugin = require('../media-stream-plugin');\n\nfunction StreamingPlugin() {\n  StreamingPlugin.super_.apply(this, arguments);\n}\n\nStreamingPlugin.NAME = 'janus.plugin.streaming';\nHelpers.inherits(StreamingPlugin, MediaStreamPlugin);\nPlugin.register(StreamingPlugin.NAME, StreamingPlugin);\n\n/**\n * @see https://janus.conf.meetecho.com/docs/janus__streaming_8c.html\n * @param {number} id\n * @param {Object} [options]\n * @param {string} [options.type]\n * @param {string} [options.secret]\n * @param {string} [options.pin]\n * @param {boolean} [options.permanent]\n * @param {string} [options.description]\n * @param {boolean} [options.is_private]\n * @param {string} [options.filename]\n * @param {boolean} [options.audio]\n * @param {boolean} [options.video]\n * @param {number} [options.audioport]\n * @param {string} [options.audiomcast]\n * @param {number} [options.audiopt]\n * @param {string} [options.audiortpmap]\n * @param {string} [options.audiofmtp]\n * @param {number} [options.videoport]\n * @param {string} [options.videomcast]\n * @param {number} [options.videopt]\n * @param {string} [options.videortpmap]\n * @param {string} [options.videofmtp]\n * @param {boolean} [options.videobufferkf]\n * @param {string} [options.url]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.create = function(id, options) {\n  return this._create(id, options);\n};\n\n/**\n * @param {number} id\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.destroy = function(id, options) {\n  return this._destroy(id, options);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.list = function() {\n  return this._list();\n};\n\n/**\n * @param {number} id\n * @param {Object} [watchOptions]\n * @param {string} [watchOptions.pin]\n * @param {Object} [answerOptions] {@link createAnswer}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.watch = function(id, watchOptions, answerOptions) {\n  return this._watch(id, watchOptions, answerOptions);\n};\n\n/**\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.start = function(jsep) {\n  return this._start(jsep);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.stop = function() {\n  return this._stop();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.pause = function() {\n  return this._pause();\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options] {@link watch}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.switch = function(mountpointId, options) {\n  return this._switch(mountpointId, options);\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.enable = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'enable',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body})\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.disable = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'disable',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body})\n    .then(function() {\n      if (this.hasCurrentEntity(mountpointId)) {\n        this.resetCurrentEntity();\n      }\n    }.bind(this));\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {string} [options.action]\n * @param {string} [options.audio]\n * @param {string} [options.video]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.recording = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'recording',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body});\n};\n\n/**\n * @inheritDoc\n */\nStreamingPlugin.prototype.getResponseAlias = function() {\n  return 'streaming';\n};\n\nmodule.exports = StreamingPlugin;\n","var Promise = require('bluebird');\nvar WebSocket = require('websocket').w3cwebsocket;\nvar EventEmitter = require('./event-emitter');\nvar Helpers = require('./helpers');\n\n/**\n * @param {WebSocket} [webSocket]\n * @constructor\n * @extends EventEmitter\n */\nfunction WebsocketConnection(webSocket) {\n  WebsocketConnection.super_.call(this);\n  /** @type {WebSocket} */\n  this._webSocket = webSocket;\n\n  if (this._webSocket) {\n    this._onOpen(this._webSocket);\n  }\n}\n\nHelpers.inherits(WebsocketConnection, EventEmitter);\n\n/**\n * @param {string} address\n * @param {string} protocol\n * @returns {Promise}\n * @fulfilled {WebsocketConnection} websocketConnection - when it is opened\n */\nWebsocketConnection.prototype.open = function(address, protocol) {\n  var self = this;\n  return new Promise(function(resolve, reject) {\n    var webSocket = new WebSocket(address, protocol || '');\n    webSocket.onerror = reject;\n    webSocket.onclose = reject;\n    webSocket.onopen = function() {\n      webSocket.onerror = null;\n      webSocket.onclose = null;\n      self._onOpen(webSocket);\n      resolve(self);\n    };\n  });\n};\n\n/**\n * @param {Object|WebSocket} webSocket\n * @protected\n */\nWebsocketConnection.prototype._onOpen = function(webSocket) {\n  this._webSocket = webSocket;\n  if (typeof webSocket.readyState !== 'undefined') {\n    this._installW3cListeners();\n  }\n  else if (webSocket.on) {\n    this._installNodeListeners();\n  }\n  else {\n    throw new Error('Trying to instantiate WebsocketConnection with unknown Websocket');\n  }\n  this.emit('open');\n};\n\n/**\n * @protected\n */\nWebsocketConnection.prototype._installW3cListeners = function() {\n  this._webSocket.onmessage = function(message) {\n    var parsedMessage = JSON.parse(message.data);\n    this.onMessage(parsedMessage);\n  }.bind(this);\n\n  this._webSocket.onerror = function(error) {\n    this.emit('error', error);\n  }.bind(this);\n\n  this._webSocket.onclose = function() {\n    this._close();\n  }.bind(this);\n};\n\n/**\n * @protected\n */\nWebsocketConnection.prototype._installNodeListeners = function() {\n  this._webSocket.on('message', function(message) {\n    var parsedMessage = JSON.parse(message);\n    this.onMessage(parsedMessage);\n  }.bind(this));\n\n  this._webSocket.on('error', function(error) {\n    this.emit('error', error);\n  }.bind(this));\n\n  this._webSocket.on('close', function() {\n    this._close();\n  }.bind(this));\n};\n\n/**\n * @returns {boolean}\n */\nWebsocketConnection.prototype.isOpened = function() {\n  return this._webSocket && this._webSocket.OPEN === this._webSocket.readyState;\n};\n\n/**\n * @returns {boolean}\n */\nWebsocketConnection.prototype.isClosed = function() {\n  return !this._webSocket || this._webSocket.CLOSED === this._webSocket.readyState || this._webSocket.CLOSING === this._webSocket.readyState;\n};\n\n/**\n * @returns {Promise}\n */\nWebsocketConnection.prototype.close = function() {\n  if (this.isClosed()) {\n    return Promise.resolve();\n  }\n  return new Promise(function(resolve) {\n    this._close();\n    resolve();\n  }.bind(this));\n};\n\nWebsocketConnection.prototype._close = function() {\n  if (!this.isClosed()) {\n    if (this._webSocket.terminate) {\n      this._webSocket.terminate();\n    } else {\n      this._webSocket.close();\n    }\n  }\n  this.emit('close');\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nWebsocketConnection.prototype.send = function(message) {\n  if (this.isOpened()) {\n    return this._send(message);\n  }\n  else if (!this._webSocket || this._webSocket.CONNECTING === this._webSocket.readyState) {\n    return this._queue(message);\n  }\n  else {\n    return Promise.reject(new Error('Can not send message over closed connection'));\n  }\n};\n\n/**\n * @param {Object} message\n */\nWebsocketConnection.prototype.onMessage = function(message) {\n  try {\n    this.emit('message', message);\n  } catch (error) {\n    this.emit('error', error);\n  }\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @protected\n */\nWebsocketConnection.prototype._queue = function(message) {\n  var self = this;\n  return new Promise(function(resolve) {\n    self.once('open', function() {\n      self._send(message).then(function() {\n        resolve();\n      });\n    });\n  });\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @protected\n */\nWebsocketConnection.prototype._send = function(message) {\n  return new Promise(function(resolve) {\n    this._webSocket.send(JSON.stringify(message));\n    resolve();\n  }.bind(this));\n};\n\nmodule.exports = WebsocketConnection;\n"]}